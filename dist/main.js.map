{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/konva/lib/index.js","webpack:///./node_modules/konva/lib/Factory.js","webpack:///./node_modules/konva/lib/Global.js","webpack:///./node_modules/konva/lib/Validators.js","webpack:///./node_modules/konva/lib/Util.js","webpack:///./node_modules/konva/lib/Node.js","webpack:///./node_modules/konva/lib/Shape.js","webpack:///./node_modules/paper/dist/paper-full.js","webpack:///./node_modules/konva/lib/Canvas.js","webpack:///./node_modules/konva/lib/Container.js","webpack:///./node_modules/konva/lib/DragAndDrop.js","webpack:///./node_modules/konva/lib/Group.js","webpack:///./node_modules/konva/lib/Animation.js","webpack:///./node_modules/konva/lib/Context.js","webpack:///./node_modules/konva/lib/PointerEvents.js","webpack:///./node_modules/konva/lib/Layer.js","webpack:///./node_modules/konva/lib/shapes/Line.js","webpack:///./node_modules/konva/lib/shapes/Path.js","webpack:///./node_modules/konva/lib/shapes/Rect.js","webpack:///./node_modules/konva/lib/shapes/Text.js","webpack:///./node_modules/konva/lib/_FullInternals.js","webpack:///./node_modules/konva/lib/_CoreInternals.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/konva/lib/Stage.js","webpack:///./node_modules/konva/lib/FastLayer.js","webpack:///./node_modules/konva/lib/Tween.js","webpack:///./node_modules/konva/lib/shapes/Arc.js","webpack:///./node_modules/konva/lib/shapes/Arrow.js","webpack:///./node_modules/konva/lib/shapes/Circle.js","webpack:///./node_modules/konva/lib/shapes/Ellipse.js","webpack:///./node_modules/konva/lib/shapes/Image.js","webpack:///./node_modules/konva/lib/shapes/Label.js","webpack:///./node_modules/konva/lib/shapes/RegularPolygon.js","webpack:///./node_modules/konva/lib/shapes/Ring.js","webpack:///./node_modules/konva/lib/shapes/Sprite.js","webpack:///./node_modules/konva/lib/shapes/Star.js","webpack:///./node_modules/konva/lib/shapes/TextPath.js","webpack:///./node_modules/konva/lib/shapes/Transformer.js","webpack:///./node_modules/konva/lib/shapes/Wedge.js","webpack:///./node_modules/konva/lib/filters/Blur.js","webpack:///./node_modules/konva/lib/filters/Brighten.js","webpack:///./node_modules/konva/lib/filters/Contrast.js","webpack:///./node_modules/konva/lib/filters/Emboss.js","webpack:///./node_modules/konva/lib/filters/Enhance.js","webpack:///./node_modules/konva/lib/filters/Grayscale.js","webpack:///./node_modules/konva/lib/filters/HSL.js","webpack:///./node_modules/konva/lib/filters/HSV.js","webpack:///./node_modules/konva/lib/filters/Invert.js","webpack:///./node_modules/konva/lib/filters/Kaleidoscope.js","webpack:///./node_modules/konva/lib/filters/Mask.js","webpack:///./node_modules/konva/lib/filters/Noise.js","webpack:///./node_modules/konva/lib/filters/Pixelate.js","webpack:///./node_modules/konva/lib/filters/Posterize.js","webpack:///./node_modules/konva/lib/filters/RGB.js","webpack:///./node_modules/konva/lib/filters/RGBA.js","webpack:///./node_modules/konva/lib/filters/Sepia.js","webpack:///./node_modules/konva/lib/filters/Solarize.js","webpack:///./node_modules/konva/lib/filters/Threshold.js","webpack:///./node_modules/acorn/dist/acorn.mjs","webpack:///./src/scripts/sidebar/sidebar.js","webpack:///./src/scripts/util/constants.js","webpack:///./src/scripts/util/sidebar_data.js","webpack:///./src/scripts/canvas/canvas.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Konva","_injectGlobal","Util_1","Validators_1","Factory","addGetterSetter","constructor","attr","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","method","Util","_capitalize","val","this","attrs","undefined","overWriteSetter","_setAttr","addComponentsGetterSetter","components","component","len","length","capitalize","setter","ret","getAttr","basicValidator","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","arguments","addDeprecatedGetterSetter","error","message","backCompat","methods","each","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","apply","afterSetFilter","_filterUpToDate","PI_OVER_180","Math","PI","_detectIE","ua","msie","indexOf","parseInt","substring","rv","edge","_parseUA","userAgent","toLowerCase","match","exec","mobile","ieMobile","browser","version","isIE","glob","global","window","WorkerGlobalScope","self","_global","isBrowser","toString","isUnminified","test","param","dblClickWindow","getAngle","angle","angleDeg","enableTrace","_pointerEventsEnabled","hitOnDragEnabled","captureTouchEventsEnabled","listenClickTap","inDblClickWindow","pixelRatio","dragDistance","showWarnings","dragButtons","isDragging","isDragReady","node","UA","navigator","document","_NODES_REGISTRY","_registerNode","NodeClass","getClassName","Global_1","_formatValue","_isString","_isBoolean","RGBComponent","round","alphaComponent","getNumberValidator","_isNumber","warn","getNumberOrArrayOfNumbersValidator","noOfElements","isNumber","isValidArray","_isArray","getNumberOrAutoValidator","getStringValidator","getStringOrGradientValidator","isString","isGradient","getFunctionValidator","_isFunction","getNumberArrayValidator","forEach","item","getBooleanValidator","isObject","Collection","toCollection","arr","collection","push","_mapMethod","methodName","args","slice","mapMethods","prot","func","toArray","Transform","dirty","reset","copy","copyInto","tr","point","x","y","translate","scale","sx","sy","rotate","rad","cos","sin","m11","m12","m21","m22","getTranslation","skew","multiply","matrix","dx","dy","invert","m0","m1","m2","m3","m4","m5","getMatrix","setAbsolutePosition","yt","xt","decompose","a","b","delta","result","rotation","scaleX","scaleY","skewX","skewY","sqrt","acos","_getRotation","PI_OVER_DEG180","DEG180_OVER_PI","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","_isElement","obj","nodeType","_isPlainObject","isNaN","isFinite","isValidSelector","selector","firstChar","toUpperCase","_sign","number","requestAnimFrame","callback","requestAnimationFrame","queue","cb","createCanvasElement","canvas","createElement","style","e","createImageElement","_isInDocument","el","parentNode","_simplifyArray","retArr","util","_urlToImage","url","imageObj","Image","onload","src","_rgbToHex","g","_hexToRgb","hex","replace","bigint","getRandomColor","randColor","random","getRGB","color","rgb","substr","colorToRGBA","str","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","parts","split","map","Number","_a","hsl","h","t2","t3","t1","haveIntersection","r1","r2","width","height","cloneObject","retObj","cloneArray","_degToRad","deg","_radToDeg","radians","charAt","throw","Error","console","extend","child","parent","Ctor","oldProto","__super__","super","_getControlPoints","x0","y0","x1","y1","x2","y2","d01","pow","d12","fa","fb","_expandPoints","tension","cp","allPoints","_inRange","left","right","_getProjectionToSegment","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","_prepareArrayForTween","startArray","endArray","start","end","temp","newStart","pr","_prepareToStringify","desc","visitedByCircularReferenceRemoval","getOwnPropertyDescriptor","configurable","_assign","target","source","_getFirstPointerId","evt","touches","changedTouches","identifier","Factory_1","Canvas_1","DragAndDrop_1","ids","names","_removeId","id","_addName","_removeName","_id","nodes","splice","TRANSFORM_CHANGE_STR","join","emptyChildren","idCounter","Node","config","eventListeners","index","_allEventListeners","_cache","Map","_attachedDepsListeners","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","children","_dragEventId","_shouldFireChangeEvents","setAttrs","hasChildren","getChildren","_clearCache","delete","clear","_getCache","privateGetter","cache","set","_calculate","deps","_this","depsString","dep","on","_getCanvasCache","_clearSelfAndDescendantCache","forceEvent","fire","isCached","clearCache","conf","rect","getClientRect","skipTransform","relativeTo","getParent","ceil","offset","drawBorder","cachedSceneCanvas","SceneCanvas","cachedFilterCanvas","cachedHitCanvas","HitCanvas","sceneContext","getContext","hitContext","isCache","imageSmoothingEnabled","_context","save","drawScene","drawHit","restore","beginPath","closePath","setAttr","stroke","scene","filter","hit","has","_transformedRect","top","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","min","max","_drawCachedSceneCanvas","context","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","cacheCanvas","_getCachedSceneCanvas","ratio","drawImage","_canvas","_drawCachedHitCanvas","hitCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","setSize","getWidth","getHeight","getImageData","putImageData","evtStr","handler","_delegate","baseEvent","events","off","_off","dispatchEvent","type","addEventListener","removeEventListener","event","stopNode","targets","findAncestors","currentTarget","remove","stopDrag","DD","_dragElements","_remove","_clearCaches","_setChildrenIndices","destroy","subname","getAncestors","ancestors","getAttrs","_batchTransformChanges","isListening","_isListening","listening","isVisible","_isVisible","visible","shouldDrawHit","layer","getLayer","layerUnderDrag","elem","dragStatus","dragSkip","show","hide","getZIndex","getAbsoluteZIndex","depth","getDepth","that","addChildren","concat","getStage","setPosition","pos","getPosition","getAbsolutePosition","haveCachedParent","absoluteMatrix","absoluteTransform","origTrans","_clearTransform","it","_getAbsoluteTransform","_setTransform","offsetX","offsetY","move","change","changeX","changeY","_eachAncestorReverse","family","unshift","theta","moveToTop","moveUp","moveDown","moveToBottom","setZIndex","zIndex","getAbsoluteOpacity","_getAbsoluteOpacity","absOpacity","opacity","moveTo","newContainer","add","toObject","defaultValue","className","toJSON","JSON","stringify","includeSelf","res","_isMatch","ancestor","isAncestorOf","findAncestor","sel","selectorArr","hasName","_getStage","eventType","bubble","_fireAndBubble","_fire","at","transformsEnabled","getTransform","getAbsoluteScale","getAbsoluteRotation","_getTransform","_b","clone","allListeners","listener","_toKonvaCanvas","box","stage","toCanvas","toDataURL","mimeType","quality","toImage","img","size","getSize","getType","getDragDistance","evtName","evtListeners","newVal","setId","oldId","_addId","setName","oldNames","newNames","addName","oldName","newName","fullName","removeName","skipFire","_setComponentAttr","compareShape","stopBubble","cancelBubble","_getProtoListeners","listeners","getPrototypeOf","newEvents","oldEvents","topListeners","selfListeners","draw","_createDragElement","pointerId","ap","_getPointerById","_changedPointerPositions","startPointerPos","startDrag","bubbleEvent","_setDragPosition","newNodePos","dbf","dragBoundFunc","bounded","batchDraw","_endDragBefore","_endDragAfter","setDraggable","draggable","_dragChange","_listenDrag","_dragCleanup","hasDraggingChild","dragElement","isReady","data","container","parse","_createNode","no","Class","_attrsAffectingSize","rotateDeg","setRotationDeg","getRotationDeg","extendStatics","__extends","setPrototypeOf","__proto__","Array","__","dummyContext","Node_1","PointerEvents","getDummyContext","shapes","Shape","_super","colorKey","getCanvas","getSceneFunc","sceneFunc","getHitFunc","hitFunc","hasShadow","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","_getFillPattern","__getFillPattern","fillPatternImage","pattern","createPattern","fillPatternRepeat","setTransform","fillPatternScaleX","fillPatternScaleY","f","_getLinearGradient","__getLinearGradient","colorStops","fillLinearGradientColorStops","ctx","fillLinearGradientStartPoint","fillLinearGradientEndPoint","grd","createLinearGradient","addColorStop","_getRadialGradient","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","createRadialGradient","fillRadialGradientStartRadius","fillRadialGradientEndRadius","getShadowRGBA","_getShadowRGBA","rgba","hasFill","fillEnabled","fill","hasStroke","strokeEnabled","strokeWidth","strokeLinearGradientColorStops","hasHitStroke","hitStrokeWidth","intersects","bufferHitCanvas","_useBufferCanvas","forceFill","perfectDrawEnabled","isTransparent","strokeForShadow","shadowForStrokeEnabled","setStrokeHitEnabled","getStrokeHitEnabled","getSelfRect","_centroid","fillRect","skipStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","skipShadow","preWidth","abs","preHeight","blurRadius","roundingOffset","can","bufferCanvas","bufferContext","drawFunc","caching","skipBuffer","cachingSelf","transform","_applyLineJoin","_applyShadow","log","drawHitFromCache","alphaThreshold","hitImageData","hitData","rgbColorKey","hitWidth","hitHeight","hasPointerCapture","setPointerCapture","releaseCapture","_fillFunc","_strokeFunc","_fillFuncHit","_strokeFuncHit","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","Base","hidden","array","describe","define","iter","forIn","assign","dst","inject","dest","beans","preserve","beansNames","field","bean","isFunc","prev","base","isPlainObject","writable","part","statics","ctor","proto","initialize","pick","list","begin","_class","_name","Formatter","instance","importJSON","json","exportJSON","options","serialize","props","exclude","_prioritize","equals","obj1","obj2","isArray","keys","read","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","getSource","__unfiltered","readSupported","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","ref","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","useTarget","Item","Layer","insert","items","itemsLength","startLength","append","_index","removed","camelize","chr","hyphenate","Emitter","types","_eventTypes","handlers","_callbacks","install","uninstall","once","emit","setTarget","stop","responds","attach","detach","_installEvents","_events","PaperScope","paper","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","CanvasProvider","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","os","platform","v1","v2","chrome","v","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","PaperScript","View","updateFocus","scope","setup","element","Project","createCanvas","activate","handleAttribute","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pair","val1","val2","separator","rectangle","Numerical","abscissas","weights","log2","LOG2E","clamp","getDiscriminant","D","E","ad","bd","cd","q","getNormalizationFactor","norm","EPSILON","MACHINE_EPSILON","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","KAPPA","isZero","isMachineZero","integrate","w","A","B","sum","Ax","findRoot","df","fx","nx","solveQuadratic","roots","Infinity","Q","R","count","boundless","minB","maxB","solveCubic","b1","c2","qd","evaluate","tmp","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","getLength","setLength","_angle","getAngleInRadians","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","dot","atan2","getQuadrant","getDirectedAngle","cross","getDistance","squared","normalize","current","center","subtract","_transformPoint","divide","modulo","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isInQuadrant","point1","point2","op","LinkedPoint","owner","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","setWidth","setHeight","arg2","arg3","from","to","frm","next","rt","getPoint","_dontLink","setPoint","_fw","_fh","_sx","_sy","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","epsilon","intersect","unite","include","expand","xFirst","LinkedRectangle","internal","Matrix","ok","_c","_d","_tx","_ty","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","shear","toRadians","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","degrees","asin","translation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","u1","u2","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","_selectionItems","_selectionCount","_updateVersion","flags","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","getCurrentStyle","setCurrentStyle","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","getItems","class","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","insertLayer","_setProject","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","viewMatrix","matrices","updateMatrix","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","blendMode","locked","guide","clipMask","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","position","_getPositionFromBounds","getPivot","setPivot","getStrokeBounds","getHandleBounds","handle","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","_decompose","decomposed","setRotation","setScaling","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","setParent","addChild","setChildren","removeChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","getResolution","topLeft","getTopLeft","floor","bottomRight","getBottomRight","raster","Raster","setCanvas","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","checkPoint","checkPosition","checkCenter","checkBounds","_hitTestSelf","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","_getOrder","getList","list1","list2","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","getShadowColor","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","pop","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","getSelectedColor","half","arc","deltas","lineTo","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","radius","_type","_size","_radius","setType","setRadius","getShape","setShape","getRadius","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","getElementById","naturalHeight","setImage","setSource","_loaded","_image","_setImage","copyCanvas","_crossOrigin","getElement","getLoaded","getPpi","getImage","Event","setTimeout","DomEvent","load","complete","naturalWidth","_change","setContext","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","channels","total","alpha","Color","getPixel","setPixel","_convert","_alpha","createImageData","setImageData","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","values","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","k","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","getNearestTime","minDist","minT","refine","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","loc","getOffset","getParameterOf","getNearestLocation","getNearestPoint","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","d3","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMin","tMax","uMin","uMax","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a3","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolve","resolveCrossings","reorient","createResult","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","paL","paR","pathWindingL","pathWindingR","onAnyPath","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","colorCtx","hsb","gradient","componentParsers","namedColors","fromCSS","string","trim","isHSL","unit","turn","grad","hsbIndices","converters","achromatic","t3s","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","toCSS","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","targetTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","timer","nativeRequest","requested","callbacks","handleCallbacks","functions","setInterval","getCanvasSize","setAttribute","_viewEvents","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","charLookup","keyMap","charMap","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","String","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","Tool","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","state","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","then","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","parsed","calculateBinary","Http","xhr","XMLHttpRequest","open","async","overrideMimeType","status","responseText","onerror","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","attributes","namespace","setAttributeNS","tag","createElementNS","getAttributeNS","SvgStyles","true","false","attribute","toSVG","fromSVG","exportFilter","coordinates","exportGroup","childNode","exportSVG","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultX","defaultY","convertValue","importGroup","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","text","switch","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","mod","acorn","input","inputLen","sourceFile","inpt","initTokenState","program","lastStart","lastEnd","tokPos","lastEndLoc","line_loc_t","inFunction","strict","labels","readToken","startNode","tokType","_eof","stmt","parseStatement","isUseStrict","setStrict","finishNode","parseTopLevel","defaultOptions","ecmaVersion","strictSemicolons","allowTrailingCommas","forbidReserved","allowReturnOutsideFunction","onComment","ranges","directSourceFile","opt","tokStart","tokEnd","tokStartLoc","tokEndLoc","tokVal","tokRegexpAllowed","tokCurLine","tokLineStart","getLineInfo","cur","lineBreak","lastIndex","column","raise","err","SyntaxError","raisedAt","tokenize","getToken","forceRegexp","startLoc","endLoc","jumpTo","reAllowed","skipSpace","empty","_num","_regexp","_string","_break","keyword","_case","beforeExpr","_catch","_continue","_debugger","_do","isLoop","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_while","_with","_new","_null","atomValue","_true","_false","binop","keywordTypes","_bracketL","_bracketR","_braceL","_braceR","_parenL","_parenR","_comma","_semi","_colon","_dot","_question","_slash","_eq","isAssign","_incDec","postfix","isUpdate","_prefix","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseXOR","_bitwiseAND","_equality","_relational","_bitShift","_plusMin","_multiplyModulo","kw","tokTypes","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","question","slash","eq","eof","num","regexp","makePredicate","words","cats","compareTo","cat","Function","containsEsc","isReservedWord3","isReservedWord5","isStrictReservedWord","isStrictBadIdWord","isKeyword","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","isIdentifierStart","isIdentifierChar","finishToken","skipBlockComment","skipLineComment","ch","charCodeAt","getTokenFromCode","readNumber","readToken_dot","readInt","readHexNumber","quote","octal","readHexChar","readString","readRegexp","finishOp","readToken_slash","readToken_pipe_amp","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","readWord","tok","escaped","inClass","mods","readWord1","radix","startsWithDot","isFloat","word","esc","escStr","strct","lastIndexOf","node_t","node_loc_t","range","startNodeFrom","expression","eat","canInsertSemicolon","semicolon","unexpected","expect","checkLVal","expr","loopLabel","kind","switchLabel","starttype","isBreak","label","parseIdent","lab","parseParenExpression","parseFor","init","parseVar","declarations","parseForIn","parseExpression","parseFunction","consequent","alternate","argument","discriminant","cases","sawDefault","isCase","block","parseBlock","clause","guard","guardedHandlers","finalizer","maybeName","allowStrict","oldStrict","noIn","decl","noComma","parseMaybeAssign","expressions","parseExprOp","minPrec","prec","parseMaybeUnary","exprNode","parseExprOps","parseMaybeConditional","parseSubscripts","parseExprAtom","noCalls","computed","callee","parseExprList","raw","tokStartLoc1","tokStart1","elements","sawGetSet","parsePropertyName","isGetSet","conflict","parseObj","parseNew","isStatement","params","oldInFunc","oldLabels","close","allowTrailingComma","allowEmpty","elts","liberal","binaryOperators","unaryOperators","__self","__$__","$__","compile","insertions","insertion","getCode","replaceCode","handleOverloading","between","getBetween","parentType","exp","sourceMaps","paperFeatures","offsetCode","lineBreaks","getElementsByTagName","innerHTML","mappings","encodeVLQ","safari","file","sourceRoot","sources","sourcesContent","operatorOverloading","moduleExports","walkAST","declaration","specifiers","dec","specifier","handleExports","preserveParens","sourceType","btoa","unescape","encodeURIComponent","toolHandlers","compiled","expose","script","head","createTextNode","__paperscript__","onResize","setOnResize","setOnFrame","loadScript","canvasId","baseURI","loadAll","readyState","calculateUnary","PlacedSymbol","Context_1","Canvas","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","margin","border","background","setPixelRatio","previousRatio","SceneContext","HitContext","Container","filterFunc","destroyChildren","_i","_validateAdd","find","_generalFind","findOne","_descendants","fn","getAllIntersections","_drawChildren","drawMethod","clipWidth","clipHeight","clipFunc","hasClip","selfCache","clipX","clipY","hasComposition","selfRect","hasVisible","justDragged","_drag","nodesToFireEvents","setPointersPositions","drawNode","Container_1","performance","Animation","layers","animIdCounter","frame","timeDiff","lastTime","frameRate","setLayers","lays","isRunning","animations","_addAnimation","_removeAnimation","_updateFrameObject","anim","_handleAnimation","_runFrames","layersLen","layerHash","_animationLoop","Anim","animRunning","CONTEXT_METHODS","Context","traceArr","_enableTrace","fillShape","_fill","strokeShape","_stroke","fillStrokeShape","fillAfterStrokeEnabled","getTrace","relaxed","clearTrace","_trace","_applyLineCap","getLineCap","a5","a6","a7","a8","isPointInPath","strokeRect","getLineDash","origSetter","origMethod","getGlobalCompositeOperation","_fillColor","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternRotation","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","getFillPatternScaleX","getFillPatternScaleY","_fillLinearGradient","_fillRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","getStrokeLinearGradientColorStops","dash","strokeScaleEnabled","getStrokeScaleEnabled","dashEnabled","getShadowForStrokeEnabled","Captures","SUPPORT_POINTER_EVENTS","createEvent","PointerEvent","getCapturedShape","Shape_1","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","_waitingForDraw","_checkVisibility","_setSmoothEnabled","createPNGStream","getHitCanvas","spiralSearchDistance","continueSearch","intersectionOffset","_getIntersection","antialiased","clearBeforeDraw","enableHitGraph","hitGraphEnabled","disableHitGraph","setHitGraphEnabled","getHitGraphEnabled","toggleHitCanvas","__spreadArrays","il","jl","_sceneFunc","tp","bezier","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","dataArray","pathLength","parsePathData","ca","dTheta","psi","fs","getPointOnEllipticalArc","getPointOnCubicBezier","getPointAtLength","ii","getPointOnLine","getPointOnQuadraticBezier","getLineLength","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","cpx","cpy","re","jlen","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","idx","convertEndpointToCenterParameterization","calcLength","psiDeg","xp","yp","lambda","cxp","cyp","vMag","vRatio","vAngle","Rect","cornerRadius","topRight","bottomLeft","Global_2","stringToArray","ATTR_CHANGE_LIST","attrChangeListLen","Text","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","textArr","textArrLen","lineHeightPx","lineHeight","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lastLine","li","letter","_partialText","measureSize","_hitFunc","setText","textWidth","getTextHeight","textHeight","metrics","fontStyle","fontVariant","hasSpace","hasQuotes","_addTextLine","_getTextWidth","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","substrWidth","wrapIndex","nextChar","trimRight","trimLeft","_CoreInternals_1","Arc_1","Arrow_1","Circle_1","Ellipse_1","Image_1","Label_1","Line_1","Path_1","Rect_1","RegularPolygon_1","Ring_1","Sprite_1","Star_1","Text_1","TextPath_1","Transformer_1","Wedge_1","Blur_1","Brighten_1","Contrast_1","Emboss_1","Enhance_1","Grayscale_1","HSL_1","HSV_1","Invert_1","Kaleidoscope_1","Mask_1","Noise_1","Pixelate_1","Posterize_1","RGB_1","RGBA_1","Sepia_1","Solarize_1","Threshold_1","Arrow","Label","Tag","Ring","Sprite","TextPath","Transformer","Wedge","Filters","Blur","Brighten","Contrast","Emboss","Enhance","Grayscale","HSL","HSV","Invert","Kaleidoscope","Mask","Noise","Pixelate","Posterize","RGB","RGBA","Sepia","Solarize","Threshold","Stage_1","Layer_1","FastLayer_1","Group_1","Animation_1","Tween_1","Stage","stages","FastLayer","Easings","EVENTS","eventsLength","addEvent","eventName","checkNoClip","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","setContainer","getElementsByClassName","parentElement","getPointerPosition","getPointersPositions","layerCanvas","_mouseenter","_mouseover","_mouseout","targetShape","eventsEnabled","pointerPos","_mousemove","_touchmove","_mousedown","_touchstart","clickStartShape","_mouseup","_touchend","clickEndShape","fireDblClick","clearTimeout","dblTimeout","_contextmenu","triggeredOnShape","tapStartShape","processedShapesIds","tapEndShape","tapTriggered","dblTapTriggered","_wheel","_pointerdown","_pointermove","_pointerup","_pointercancel","_lostpointercapture","contentPosition","_getContentPosition","touch","_setPointerPosition","blacklist","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","finish","_pos","prevPos","_finish","setTime","getTimer","onEnterFrame","seek","nodeId","Linear","_tweenFunc","_addListeners","tweens","_addAttr","onReset","tweenId","trueEnd","trueStart","endRGBA","startRGBA","onPlay","onReverse","onPause","thisId","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","outerRadius","innerRadius","PI2","fromTension","pointerLength","pointerWidth","pointerAtBeginning","isDashEnabled","lineRect","radiusX","radiusY","cropWidth","cropHeight","cropX","cropY","fromURL","_sync","getText","getTag","pointerDirection","pointerHeight","direction","_getPoints","PIx2","_updated","frameIndex","clearInterval","interval","_setInterval","animation","ix4","frameOffsets","ix2","_updateIndex","setIndex","numPoints","partialText","dummyCanvas","kerningFunc","textBaseline","glyphInfo","_getTextSize","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","lettersInOffset","kern","midpoint","transposeX","transposeY","__assign","ANGLES","TOUCH_DEVICE","ANCHORS_NAMES","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","_transforming","_createElements","_handleMouseMove","_handleMouseUp","getNode","attachTo","setNode","setNodes","_nodes","additionalEvents","onChange","_resetTransformCache","_proxyDrag","lastPos","otherNode","otherAbs","getNodes","getActiveAnchor","_movingAnchorName","_getNodeRect","__getNodeRect","__getNodeShape","rot","ignoreStroke","absScale","absPos","totalPoints","_createBack","_createAnchor","_handleMouseDown","cursor","anchorName","getCursor","_cursorChange","back","rotateEnabled","rotateAnchorOffset","shouldOverdrawWholeArea","hypotenuse","_anchorDragOffset","newHypotenuse","anchorNode","pp","oldAbs","newAbs","keepProportion","keepRatio","shiftKey","centeredScaling","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","_fitNodesInto","newRotation","tol","rotationSnapTolerance","snaps","newRotationRad","snapped","absDiff","getSnap","rotationSnaps","_removeEvents","newAttrs","oldAttrs","boundBoxFunc","oldTr","newTr","parentTransform","localTransform","newLocalTransform","forceUpdate","_batchChangeChild","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","borderEnabled","borderStroke","borderStrokeWidth","borderDash","isTransforming","stopTransform","lineEnabled","rotateHandlerOffset","enabledHandlers","getAngleDeg","setAngleDeg","BlurStack","mul_table","shg_table","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","rbs","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","brightness","adjust","contrast","nPixels","strength","embossStrength","greyLevel","embossWhiteLevel","embossDirection","blend","embossBlend","dirY","dirX","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","tempCanvas","scratchData","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","xStart","xEnd","xDelta","phaseShift","polarRotation","FromPolar","pixelAt","idata","rgbDistance","mask","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","side","halfSide","maskResult","so","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","noise","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","levels","level","reservedWords","3","5","6","strictBind","ecma5AndLessKeywords","keywords","keywordRelationalOperator","nonASCIIidentifierChars","astralIdentifierStartCodes","astralIdentifierCodes","isInAstralSet","astral","TokenType","startsExpr","updateContext","keywords$1","arrow","template","invalidTemplate","backQuote","dollarBraceL","incDec","logicalOR","logicalAND","bitwiseOR","bitwiseXOR","bitwiseAND","equality","relational","bitShift","plusMin","star","starstar","_const","_extends","_export","_import","_instanceof","_typeof","_void","_delete","lineBreakG","isNewLine","ecma2019String","skipWhiteSpace","propName","wordsRegexp","Position","SourceLocation","onInsertedSemicolon","onTrailingComma","allowReserved","allowImportExportEverywhere","allowAwaitOutsideFunction","allowHashBang","onToken","tokens","token","comment","pushComment","functionFlags","generator","Parser","startPos","reserved","reservedStrict","reservedWordsStrict","reservedWordsStrictBind","lineStart","curLine","curPosition","lastTokEndLoc","lastTokStartLoc","lastTokStart","lastTokEnd","initialContext","exprAllowed","inModule","strictDirective","potentialArrowAt","yieldPos","awaitPos","awaitIdentPos","undefinedExports","scopeStack","enterScope","regexpState","prototypeAccessors","inGenerator","inAsync","allowSuper","allowDirectSuper","treatFunctionsAsVar","nextToken","currentVarScope","currentThisScope","treatFunctionsAsVarInScope","currentScope","inNonArrowFunction","plugins","cls","parseExpressionAt","tokenizer","defineProperties","literal","DestructuringErrors","shorthandAssign","trailingComma","parenthesizedAssign","parenthesizedBind","doubleProto","isContextual","eatContextual","expectContextual","insertSemicolon","afterTrailingComma","notNext","checkPatternErrors","refDestructuringErrors","raiseRecoverable","parens","checkExpressionErrors","andThrow","checkYieldAwaitInDefaultParams","isSimpleAssignTarget","pp$1","adaptDirectivePrologue","isLet","skip","nextCh","ident","isAsyncFunction","topLevel","parseBreakContinueStatement","parseDebuggerStatement","parseDoStatement","parseForStatement","parseFunctionStatement","parseClass","parseIfStatement","parseReturnStatement","parseSwitchStatement","parseThrowStatement","parseTryStatement","parseVarStatement","parseWhileStatement","parseWithStatement","parseEmptyStatement","parseExpressionStatement","parseImport","parseExport","parseLabeledStatement","awaitAt","init$1","await","toAssignable","isAsync","declarationPosition","FUNC_STATEMENT","FUNC_HANGING_STATEMENT","exitScope","parseBindingAtom","simple","i$1","label$1","statementStart","createNewLexicalScope","isForIn","isFor","parseVarId","statement","allowExpressionBody","initFunction","oldYieldPos","oldAwaitPos","oldAwaitIdentPos","parseFunctionParams","parseFunctionBody","parseBindingList","parseClassId","parseClassSuper","classBody","hadConstructor","parseClassElement","superClass","constructorAllowsSuper","this$1","tryContextual","noLineBreak","startNodeAt","static","isGenerator","allowsDirectSuper","parseClassMethod","parseMethod","parseExprSubscripts","checkExport","fNode","cNode","shouldParseExportStatement","checkVariableExport","parseExportSpecifiers","spec","checkUnreserved","local","checkLocalExport","checkPatternExport","pat","list$1","elt","decls","exported","parseImportSpecifiers","node$1","node$2","imported","statements","isDirectiveCandidate","directive","pp$2","isBinding","toAssignableList","exprList","parseSpread","parseRestBinding","rest","parseBindingListItem","parseMaybeDefault","bindingType","checkClashes","declareName","pp$3","checkPropClash","propHash","shorthand","afterLeftParse","parseYield","ownDestructuringErrors","oldParenAssign","oldTrailingComma","oldShorthandAssign","leftStartPos","leftStartLoc","logical","buildBinary","sawUnary","parseAwait","skipArrowSubscripts","maybeAsyncArrow","parseSubscript","parseArrowExpression","importArg","quasi","parseTemplate","isTagged","canBeArrow","parseLiteral","regex","parseParenAndDistinguishExpression","parseDynamicImport","spreadStart","innerStartPos","innerStartLoc","lastIsComma","parseParenItem","innerEndPos","innerEndLoc","parseParenArrowList","finishNodeAt","par","empty$1","parseTemplateElement","cooked","tail","curElt","quasis","isAsyncProp","isPattern","parseProperty","parsePropertyValue","paramCount","isArrowFunction","isMethod","isExpression","useStrict","checkParams","nonSimple","isSimpleParamList","allowDuplicates","nameHash","delegate","pp$4","pp$5","Scope","var","lexical","redeclared","scope$2","scope$3","SCOPE_TOP","pp$6","TokContext","isExpr","preserveSpace","override","types$1","b_stat","b_expr","b_tmpl","p_stat","p_expr","q_tmpl","tryReadTemplateToken","f_stat","f_expr","f_expr_gen","f_gen","pp$7","braceIsBlock","prevType","curContext","inGeneratorContext","statementParens","allowed","ecma9BinaryProperties","ecma10BinaryProperties","unicodeBinaryProperties","9","10","11","unicodeGeneralCategoryValues","ecma9ScriptValues","ecma10ScriptValues","unicodeScriptValues","buildUnicodeData","binary","nonBinary","General_Category","Script","Script_Extensions","gc","sc","pp$8","RegExpValidationState","validFlags","unicodeProperties","switchU","switchN","lastIntValue","lastStringValue","lastAssertionIsQuantifiable","numCapturingParens","maxBackReference","groupNames","backReferenceNames","codePointToString","isSyntaxCharacter","isControlLetter","isUnicodePropertyNameCharacter","isUnicodePropertyValueCharacter","isDecimalDigit","isHexDigit","hexToInt","isOctalDigit","unicode","nextIndex","lookahead","advance","validateRegExpFlags","validateRegExpPattern","regexp_pattern","regexp_disjunction","regexp_alternative","regexp_eatQuantifier","regexp_eatTerm","regexp_eatAssertion","regexp_eatAtom","regexp_eatExtendedAtom","lookbehind","noError","regexp_eatQuantifierPrefix","regexp_eatBracedQuantifier","regexp_eatDecimalDigits","regexp_eatPatternCharacters","regexp_eatReverseSolidusAtomEscape","regexp_eatCharacterClass","regexp_eatUncapturingGroup","regexp_eatCapturingGroup","regexp_eatAtomEscape","regexp_groupSpecifier","regexp_eatInvalidBracedQuantifier","regexp_eatExtendedPatternCharacter","regexp_eatSyntaxCharacter","regexp_eatGroupName","regexp_eatRegExpIdentifierName","regexp_eatRegExpIdentifierStart","regexp_eatRegExpIdentifierPart","regexp_eatRegExpUnicodeEscapeSequence","isRegExpIdentifierStart","isRegExpIdentifierPart","regexp_eatBackReference","regexp_eatCharacterClassEscape","regexp_eatCharacterEscape","regexp_eatKGroupName","regexp_eatDecimalEscape","regexp_eatControlEscape","regexp_eatCControlLetter","regexp_eatZero","regexp_eatHexEscapeSequence","regexp_eatLegacyOctalEscapeSequence","regexp_eatIdentityEscape","regexp_eatControlLetter","regexp_eatFixedHexDigits","lead","leadSurrogateEnd","trail","regexp_eatHexDigits","isCharacterClassEscape","regexp_eatUnicodePropertyValueExpression","regexp_eatUnicodePropertyName","regexp_eatUnicodePropertyValue","regexp_validateUnicodePropertyNameAndValue","regexp_eatLoneUnicodePropertyNameOrValue","nameOrValue","regexp_validateUnicodePropertyNameOrValue","regexp_classRanges","regexp_eatClassAtom","regexp_eatClassEscape","ch$1","regexp_eatClassControlLetter","regexp_eatOctalDigit","n1","n2","Token","pp$9","codePointToString$1","iterator","done","fullCharCodeAtPos","startSkip","next2","readToken_mult_modulo_exp","tokentype","readToken_caret","readRadixNumber","flagsStart","BigInt","str$1","val$1","readCodePoint","codePos","invalidStringToken","chunkStart","readEscapedChar","INVALID_TEMPLATE_ESCAPE_ERROR","inTemplateElement","readTmplToken","readInvalidTemplateToken","inTemplate","octalStr","escStart","tokContexts","Sidebar","categoryObj","sidebarElement","onShapeClickCallback","categoryTitle","categoryName","shapeClickListener","shapeName","categoryTitleElement","shapesUlElement","shapeLiElement","newContent","shapeImageElement","uri","SHAPES","QUEEN","TWIN","RUG","ROUNDRUG","DINING","OFFICE","SOFA","TVCABINENT","ARMCHAIR","UPHOLSTERED","ENDTABLE","ROUNDTABLE","LOVESEAT","COFFEETABLE","FIREPLACE","STAIRS","DOORLEFT","sidebarData","MyCanvas","canvasElement","defaultSize","currentActiveItem","canvasScaleValue","addTransformerFunction","addDeleteFunction","drawShapes","drawQueen","drawTwin","drawRug","drawRoundRug","drawDining","drawOffice","drawTVCabinent","drawArmChair","drawUpholstered","drawEndTable","drawRoundTable","drawLoveSeat","drawCoffeeTable","drawFirePlace","drawStairs","drawSofa","drawLeftDoor","addAnchor","addText","onToolDoubleClick","setMenuClickListener","downloadAsSVG","multiple","accept","onchange","URL","createObjectURL","files","activeLayer","fileName","downloadLinkElement","download","DOORRIGHT","drawRightDoor","queenImg","queenKonvaImg","tr1","currentShape","sofaImg","sofaKonvaImg","Img","KonvaImg","rugImg","rugKonvaImg","fireImg","fireKonvaImg","stairImg","stairKonvaImg","heightFeet","heightInches","widthFeet","widthInches","heightText","widthText","selectionRectangle","metaPressed","activeAnchor","anchorX","anchorY","main","myCanvas","modal","btn","startPlanningButton","onclick","print","feetHeight","inchesHeight","feetWidth","inchesWidth","closeTipsX","tipsContainer"],"mappings":"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K,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnwCC,EAAY,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,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,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,EAAE,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,KAAK,EAAE,IAAI,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,KAAK,GAAG,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,KAAK,IAAI,GAAG,GAAG,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,KAAK,MAAM,GAAG,KAAK,GAAG,IAAI,EAAE,KAAK,GAAG,KAAK,KAAK,KAGpuCC,EAAwB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,GAAG,IAAI,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n","var Konva = require('./_FullInternals').Konva;\n\nKonva._injectGlobal(Konva);\n\nexports['default'] = Konva;\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar GET = 'get',\n    SET = 'set';\nexports.Factory = {\n  addGetterSetter: function (constructor, attr, def, validator, after) {\n    exports.Factory.addGetter(constructor, attr, def);\n    exports.Factory.addSetter(constructor, attr, validator, after);\n    exports.Factory.addOverloadedGetterSetter(constructor, attr);\n  },\n  addGetter: function (constructor, attr, def) {\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = constructor.prototype[method] || function () {\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n  },\n  addSetter: function (constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    if (!constructor.prototype[method]) {\n      exports.Factory.overWriteSetter(constructor, attr, validator, after);\n    }\n  },\n  overWriteSetter: function (constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = function (val) {\n      if (validator && val !== undefined && val !== null) {\n        val = validator.call(this, val, attr);\n      }\n\n      this._setAttr(attr, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n  },\n  addComponentsGetterSetter: function (constructor, attr, components, validator, after) {\n    var len = components.length,\n        capitalize = Util_1.Util._capitalize,\n        getter = GET + capitalize(attr),\n        setter = SET + capitalize(attr),\n        n,\n        component;\n\n    constructor.prototype[getter] = function () {\n      var ret = {};\n\n      for (n = 0; n < len; n++) {\n        component = components[n];\n        ret[component] = this.getAttr(attr + capitalize(component));\n      }\n\n      return ret;\n    };\n\n    var basicValidator = Validators_1.getComponentValidator(components);\n\n    constructor.prototype[setter] = function (val) {\n      var oldVal = this.attrs[attr],\n          key;\n\n      if (validator) {\n        val = validator.call(this, val);\n      }\n\n      if (basicValidator) {\n        basicValidator.call(this, val, attr);\n      }\n\n      for (key in val) {\n        if (!val.hasOwnProperty(key)) {\n          continue;\n        }\n\n        this._setAttr(attr + capitalize(key), val[key]);\n      }\n\n      this._fireChangeEvent(attr, oldVal, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n\n    exports.Factory.addOverloadedGetterSetter(constructor, attr);\n  },\n  addOverloadedGetterSetter: function (constructor, attr) {\n    var capitalizedAttr = Util_1.Util._capitalize(attr),\n        setter = SET + capitalizedAttr,\n        getter = GET + capitalizedAttr;\n\n    constructor.prototype[attr] = function () {\n      if (arguments.length) {\n        this[setter](arguments[0]);\n        return this;\n      }\n\n      return this[getter]();\n    };\n  },\n  addDeprecatedGetterSetter: function (constructor, attr, def, validator) {\n    Util_1.Util.error('Adding deprecated ' + attr);\n\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    var message = attr + ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n\n    constructor.prototype[method] = function () {\n      Util_1.Util.error(message);\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n\n    exports.Factory.addSetter(constructor, attr, validator, function () {\n      Util_1.Util.error(message);\n    });\n    exports.Factory.addOverloadedGetterSetter(constructor, attr);\n  },\n  backCompat: function (constructor, methods) {\n    Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n      var method = constructor.prototype[newMethodName];\n\n      var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n\n      var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n\n      function deprecated() {\n        method.apply(this, arguments);\n        Util_1.Util.error('\"' + oldMethodName + '\" method is deprecated and will be removed soon. Use \"\"' + newMethodName + '\" instead.');\n      }\n\n      constructor.prototype[oldMethodName] = deprecated;\n      constructor.prototype[oldGetter] = deprecated;\n      constructor.prototype[oldSetter] = deprecated;\n    });\n  },\n  afterSetFilter: function () {\n    this._filterUpToDate = false;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PI_OVER_180 = Math.PI / 180;\n\nfunction detectBrowser() {\n  return typeof window !== 'undefined' && ({}.toString.call(window) === '[object Window]' || {}.toString.call(window) === '[object global]');\n}\n\nvar _detectIE = function (ua) {\n  var msie = ua.indexOf('msie ');\n\n  if (msie > 0) {\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n  }\n\n  var trident = ua.indexOf('trident/');\n\n  if (trident > 0) {\n    var rv = ua.indexOf('rv:');\n    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n  }\n\n  var edge = ua.indexOf('edge/');\n\n  if (edge > 0) {\n    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n  }\n\n  return false;\n};\n\nexports._parseUA = function (userAgent) {\n  var ua = userAgent.toLowerCase(),\n      match = /(chrome)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [],\n      mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),\n      ieMobile = !!userAgent.match(/IEMobile/i);\n  return {\n    browser: match[1] || '',\n    version: match[2] || '0',\n    isIE: _detectIE(ua),\n    mobile: mobile,\n    ieMobile: ieMobile\n  };\n};\n\nexports.glob = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof WorkerGlobalScope !== 'undefined' ? self : {};\nexports.Konva = {\n  _global: exports.glob,\n  version: '7.2.1',\n  isBrowser: detectBrowser(),\n  isUnminified: /param/.test(function (param) {}.toString()),\n  dblClickWindow: 400,\n  getAngle: function (angle) {\n    return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n  },\n  enableTrace: false,\n  _pointerEventsEnabled: false,\n  hitOnDragEnabled: false,\n  captureTouchEventsEnabled: false,\n  listenClickTap: false,\n  inDblClickWindow: false,\n  pixelRatio: undefined,\n  dragDistance: 3,\n  angleDeg: true,\n  showWarnings: true,\n  dragButtons: [0, 1],\n  isDragging: function () {\n    return exports.Konva['DD'].isDragging;\n  },\n  isDragReady: function () {\n    return !!exports.Konva['DD'].node;\n  },\n  UA: exports._parseUA(exports.glob.navigator && exports.glob.navigator.userAgent || ''),\n  document: exports.glob.document,\n  _injectGlobal: function (Konva) {\n    exports.glob.Konva = Konva;\n  },\n  _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\n\nexports._registerNode = function (NodeClass) {\n  exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n  exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nfunction _formatValue(val) {\n  if (Util_1.Util._isString(val)) {\n    return '\"' + val + '\"';\n  }\n\n  if (Object.prototype.toString.call(val) === '[object Number]') {\n    return val;\n  }\n\n  if (Util_1.Util._isBoolean(val)) {\n    return val;\n  }\n\n  return Object.prototype.toString.call(val);\n}\n\nfunction RGBComponent(val) {\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  }\n\n  return Math.round(val);\n}\n\nexports.RGBComponent = RGBComponent;\n\nfunction alphaComponent(val) {\n  if (val > 1) {\n    return 1;\n  } else if (val < 0.0001) {\n    return 0.0001;\n  }\n\n  return val;\n}\n\nexports.alphaComponent = alphaComponent;\n\nfunction getNumberValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isNumber(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberValidator = getNumberValidator;\n\nfunction getNumberOrArrayOfNumbersValidator(noOfElements) {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isNumber = Util_1.Util._isNumber(val);\n\n      var isValidArray = Util_1.Util._isArray(val) && val.length == noOfElements;\n\n      if (!isNumber && !isValidArray) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number or Array<number>(' + noOfElements + ')');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberOrArrayOfNumbersValidator = getNumberOrArrayOfNumbersValidator;\n\nfunction getNumberOrAutoValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isNumber = Util_1.Util._isNumber(val);\n\n      var isAuto = val === 'auto';\n\n      if (!(isNumber || isAuto)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number or \"auto\".');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\n\nfunction getStringValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isString(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a string.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getStringValidator = getStringValidator;\n\nfunction getStringOrGradientValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isString = Util_1.Util._isString(val);\n\n      var isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]';\n\n      if (!(isString || isGradient)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a string or a native gradient.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getStringOrGradientValidator = getStringOrGradientValidator;\n\nfunction getFunctionValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isFunction(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a function.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getFunctionValidator = getFunctionValidator;\n\nfunction getNumberArrayValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isArray(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a array of numbers.');\n      } else {\n        val.forEach(function (item) {\n          if (!Util_1.Util._isNumber(item)) {\n            Util_1.Util.warn('\"' + attr + '\" attribute has non numeric element ' + item + '. Make sure that all elements are numbers.');\n          }\n        });\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberArrayValidator = getNumberArrayValidator;\n\nfunction getBooleanValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isBool = val === true || val === false;\n\n      if (!isBool) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a boolean.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getBooleanValidator = getBooleanValidator;\n\nfunction getComponentValidator(components) {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util.isObject(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be an object with properties ' + components);\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getComponentValidator = getComponentValidator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Collection = function () {\n  function Collection() {}\n\n  Collection.toCollection = function (arr) {\n    var collection = new Collection(),\n        len = arr.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      collection.push(arr[n]);\n    }\n\n    return collection;\n  };\n\n  Collection._mapMethod = function (methodName) {\n    Collection.prototype[methodName] = function () {\n      var len = this.length,\n          i;\n      var args = [].slice.call(arguments);\n\n      for (i = 0; i < len; i++) {\n        this[i][methodName].apply(this[i], args);\n      }\n\n      return this;\n    };\n  };\n\n  Collection.mapMethods = function (constructor) {\n    var prot = constructor.prototype;\n\n    for (var methodName in prot) {\n      Collection._mapMethod(methodName);\n    }\n  };\n\n  return Collection;\n}();\n\nexports.Collection = Collection;\nCollection.prototype = [];\n\nCollection.prototype.each = function (func) {\n  for (var n = 0; n < this.length; n++) {\n    func(this[n], n);\n  }\n};\n\nCollection.prototype.toArray = function () {\n  var arr = [],\n      len = this.length,\n      n;\n\n  for (n = 0; n < len; n++) {\n    arr.push(this[n]);\n  }\n\n  return arr;\n};\n\nvar Transform = function () {\n  function Transform(m) {\n    if (m === void 0) {\n      m = [1, 0, 0, 1, 0, 0];\n    }\n\n    this.dirty = false;\n    this.m = m && m.slice() || [1, 0, 0, 1, 0, 0];\n  }\n\n  Transform.prototype.reset = function () {\n    this.m[0] = 1;\n    this.m[1] = 0;\n    this.m[2] = 0;\n    this.m[3] = 1;\n    this.m[4] = 0;\n    this.m[5] = 0;\n  };\n\n  Transform.prototype.copy = function () {\n    return new Transform(this.m);\n  };\n\n  Transform.prototype.copyInto = function (tr) {\n    tr.m[0] = this.m[0];\n    tr.m[1] = this.m[1];\n    tr.m[2] = this.m[2];\n    tr.m[3] = this.m[3];\n    tr.m[4] = this.m[4];\n    tr.m[5] = this.m[5];\n  };\n\n  Transform.prototype.point = function (point) {\n    var m = this.m;\n    return {\n      x: m[0] * point.x + m[2] * point.y + m[4],\n      y: m[1] * point.x + m[3] * point.y + m[5]\n    };\n  };\n\n  Transform.prototype.translate = function (x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n    return this;\n  };\n\n  Transform.prototype.scale = function (sx, sy) {\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n    return this;\n  };\n\n  Transform.prototype.rotate = function (rad) {\n    var c = Math.cos(rad);\n    var s = Math.sin(rad);\n    var m11 = this.m[0] * c + this.m[2] * s;\n    var m12 = this.m[1] * c + this.m[3] * s;\n    var m21 = this.m[0] * -s + this.m[2] * c;\n    var m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.getTranslation = function () {\n    return {\n      x: this.m[4],\n      y: this.m[5]\n    };\n  };\n\n  Transform.prototype.skew = function (sx, sy) {\n    var m11 = this.m[0] + this.m[2] * sy;\n    var m12 = this.m[1] + this.m[3] * sy;\n    var m21 = this.m[2] + this.m[0] * sx;\n    var m22 = this.m[3] + this.m[1] * sx;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.multiply = function (matrix) {\n    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n    var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n    var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n    return this;\n  };\n\n  Transform.prototype.invert = function () {\n    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    var m0 = this.m[3] * d;\n    var m1 = -this.m[1] * d;\n    var m2 = -this.m[2] * d;\n    var m3 = this.m[0] * d;\n    var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n    return this;\n  };\n\n  Transform.prototype.getMatrix = function () {\n    return this.m;\n  };\n\n  Transform.prototype.setAbsolutePosition = function (x, y) {\n    var m0 = this.m[0],\n        m1 = this.m[1],\n        m2 = this.m[2],\n        m3 = this.m[3],\n        m4 = this.m[4],\n        m5 = this.m[5],\n        yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2),\n        xt = (x - m4 - m2 * yt) / m0;\n    return this.translate(xt, yt);\n  };\n\n  Transform.prototype.decompose = function () {\n    var a = this.m[0];\n    var b = this.m[1];\n    var c = this.m[2];\n    var d = this.m[3];\n    var e = this.m[4];\n    var f = this.m[5];\n    var delta = a * d - b * c;\n    var result = {\n      x: e,\n      y: f,\n      rotation: 0,\n      scaleX: 0,\n      scaleY: 0,\n      skewX: 0,\n      skewY: 0\n    };\n\n    if (a != 0 || b != 0) {\n      var r = Math.sqrt(a * a + b * b);\n      result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n      result.scaleX = r;\n      result.scaleY = delta / r;\n      result.skewX = (a * c + b * d) / delta;\n      result.skewY = 0;\n    } else if (c != 0 || d != 0) {\n      var s = Math.sqrt(c * c + d * d);\n      result.rotation = Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n      result.scaleX = delta / s;\n      result.scaleY = s;\n      result.skewX = 0;\n      result.skewY = (a * c + b * d) / delta;\n    } else {}\n\n    result.rotation = exports.Util._getRotation(result.rotation);\n    return result;\n  };\n\n  return Transform;\n}();\n\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]',\n    OBJECT_NUMBER = '[object Number]',\n    OBJECT_STRING = '[object String]',\n    OBJECT_BOOLEAN = '[object Boolean]',\n    PI_OVER_DEG180 = Math.PI / 180,\n    DEG180_OVER_PI = 180 / Math.PI,\n    HASH = '#',\n    EMPTY_STRING = '',\n    ZERO = '0',\n    KONVA_WARNING = 'Konva warning: ',\n    KONVA_ERROR = 'Konva error: ',\n    RGB_PAREN = 'rgb(',\n    COLORS = {\n  aliceblue: [240, 248, 255],\n  antiquewhite: [250, 235, 215],\n  aqua: [0, 255, 255],\n  aquamarine: [127, 255, 212],\n  azure: [240, 255, 255],\n  beige: [245, 245, 220],\n  bisque: [255, 228, 196],\n  black: [0, 0, 0],\n  blanchedalmond: [255, 235, 205],\n  blue: [0, 0, 255],\n  blueviolet: [138, 43, 226],\n  brown: [165, 42, 42],\n  burlywood: [222, 184, 135],\n  cadetblue: [95, 158, 160],\n  chartreuse: [127, 255, 0],\n  chocolate: [210, 105, 30],\n  coral: [255, 127, 80],\n  cornflowerblue: [100, 149, 237],\n  cornsilk: [255, 248, 220],\n  crimson: [220, 20, 60],\n  cyan: [0, 255, 255],\n  darkblue: [0, 0, 139],\n  darkcyan: [0, 139, 139],\n  darkgoldenrod: [184, 132, 11],\n  darkgray: [169, 169, 169],\n  darkgreen: [0, 100, 0],\n  darkgrey: [169, 169, 169],\n  darkkhaki: [189, 183, 107],\n  darkmagenta: [139, 0, 139],\n  darkolivegreen: [85, 107, 47],\n  darkorange: [255, 140, 0],\n  darkorchid: [153, 50, 204],\n  darkred: [139, 0, 0],\n  darksalmon: [233, 150, 122],\n  darkseagreen: [143, 188, 143],\n  darkslateblue: [72, 61, 139],\n  darkslategray: [47, 79, 79],\n  darkslategrey: [47, 79, 79],\n  darkturquoise: [0, 206, 209],\n  darkviolet: [148, 0, 211],\n  deeppink: [255, 20, 147],\n  deepskyblue: [0, 191, 255],\n  dimgray: [105, 105, 105],\n  dimgrey: [105, 105, 105],\n  dodgerblue: [30, 144, 255],\n  firebrick: [178, 34, 34],\n  floralwhite: [255, 255, 240],\n  forestgreen: [34, 139, 34],\n  fuchsia: [255, 0, 255],\n  gainsboro: [220, 220, 220],\n  ghostwhite: [248, 248, 255],\n  gold: [255, 215, 0],\n  goldenrod: [218, 165, 32],\n  gray: [128, 128, 128],\n  green: [0, 128, 0],\n  greenyellow: [173, 255, 47],\n  grey: [128, 128, 128],\n  honeydew: [240, 255, 240],\n  hotpink: [255, 105, 180],\n  indianred: [205, 92, 92],\n  indigo: [75, 0, 130],\n  ivory: [255, 255, 240],\n  khaki: [240, 230, 140],\n  lavender: [230, 230, 250],\n  lavenderblush: [255, 240, 245],\n  lawngreen: [124, 252, 0],\n  lemonchiffon: [255, 250, 205],\n  lightblue: [173, 216, 230],\n  lightcoral: [240, 128, 128],\n  lightcyan: [224, 255, 255],\n  lightgoldenrodyellow: [250, 250, 210],\n  lightgray: [211, 211, 211],\n  lightgreen: [144, 238, 144],\n  lightgrey: [211, 211, 211],\n  lightpink: [255, 182, 193],\n  lightsalmon: [255, 160, 122],\n  lightseagreen: [32, 178, 170],\n  lightskyblue: [135, 206, 250],\n  lightslategray: [119, 136, 153],\n  lightslategrey: [119, 136, 153],\n  lightsteelblue: [176, 196, 222],\n  lightyellow: [255, 255, 224],\n  lime: [0, 255, 0],\n  limegreen: [50, 205, 50],\n  linen: [250, 240, 230],\n  magenta: [255, 0, 255],\n  maroon: [128, 0, 0],\n  mediumaquamarine: [102, 205, 170],\n  mediumblue: [0, 0, 205],\n  mediumorchid: [186, 85, 211],\n  mediumpurple: [147, 112, 219],\n  mediumseagreen: [60, 179, 113],\n  mediumslateblue: [123, 104, 238],\n  mediumspringgreen: [0, 250, 154],\n  mediumturquoise: [72, 209, 204],\n  mediumvioletred: [199, 21, 133],\n  midnightblue: [25, 25, 112],\n  mintcream: [245, 255, 250],\n  mistyrose: [255, 228, 225],\n  moccasin: [255, 228, 181],\n  navajowhite: [255, 222, 173],\n  navy: [0, 0, 128],\n  oldlace: [253, 245, 230],\n  olive: [128, 128, 0],\n  olivedrab: [107, 142, 35],\n  orange: [255, 165, 0],\n  orangered: [255, 69, 0],\n  orchid: [218, 112, 214],\n  palegoldenrod: [238, 232, 170],\n  palegreen: [152, 251, 152],\n  paleturquoise: [175, 238, 238],\n  palevioletred: [219, 112, 147],\n  papayawhip: [255, 239, 213],\n  peachpuff: [255, 218, 185],\n  peru: [205, 133, 63],\n  pink: [255, 192, 203],\n  plum: [221, 160, 203],\n  powderblue: [176, 224, 230],\n  purple: [128, 0, 128],\n  rebeccapurple: [102, 51, 153],\n  red: [255, 0, 0],\n  rosybrown: [188, 143, 143],\n  royalblue: [65, 105, 225],\n  saddlebrown: [139, 69, 19],\n  salmon: [250, 128, 114],\n  sandybrown: [244, 164, 96],\n  seagreen: [46, 139, 87],\n  seashell: [255, 245, 238],\n  sienna: [160, 82, 45],\n  silver: [192, 192, 192],\n  skyblue: [135, 206, 235],\n  slateblue: [106, 90, 205],\n  slategray: [119, 128, 144],\n  slategrey: [119, 128, 144],\n  snow: [255, 255, 250],\n  springgreen: [0, 255, 127],\n  steelblue: [70, 130, 180],\n  tan: [210, 180, 140],\n  teal: [0, 128, 128],\n  thistle: [216, 191, 216],\n  transparent: [255, 255, 255, 0],\n  tomato: [255, 99, 71],\n  turquoise: [64, 224, 208],\n  violet: [238, 130, 238],\n  wheat: [245, 222, 179],\n  white: [255, 255, 255],\n  whitesmoke: [245, 245, 245],\n  yellow: [255, 255, 0],\n  yellowgreen: [154, 205, 5]\n},\n    RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/,\n    animQueue = [];\nexports.Util = {\n  _isElement: function (obj) {\n    return !!(obj && obj.nodeType == 1);\n  },\n  _isFunction: function (obj) {\n    return !!(obj && obj.constructor && obj.call && obj.apply);\n  },\n  _isPlainObject: function (obj) {\n    return !!obj && obj.constructor === Object;\n  },\n  _isArray: function (obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n  },\n  _isNumber: function (obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_NUMBER && !isNaN(obj) && isFinite(obj);\n  },\n  _isString: function (obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_STRING;\n  },\n  _isBoolean: function (obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n  },\n  isObject: function (val) {\n    return val instanceof Object;\n  },\n  isValidSelector: function (selector) {\n    if (typeof selector !== 'string') {\n      return false;\n    }\n\n    var firstChar = selector[0];\n    return firstChar === '#' || firstChar === '.' || firstChar === firstChar.toUpperCase();\n  },\n  _sign: function (number) {\n    if (number === 0) {\n      return 0;\n    }\n\n    if (number > 0) {\n      return 1;\n    } else {\n      return -1;\n    }\n  },\n  requestAnimFrame: function (callback) {\n    animQueue.push(callback);\n\n    if (animQueue.length === 1) {\n      requestAnimationFrame(function () {\n        var queue = animQueue;\n        animQueue = [];\n        queue.forEach(function (cb) {\n          cb();\n        });\n      });\n    }\n  },\n  createCanvasElement: function () {\n    var canvas = document.createElement('canvas');\n\n    try {\n      canvas.style = canvas.style || {};\n    } catch (e) {}\n\n    return canvas;\n  },\n  createImageElement: function () {\n    return document.createElement('img');\n  },\n  _isInDocument: function (el) {\n    while (el = el.parentNode) {\n      if (el == document) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _simplifyArray: function (arr) {\n    var retArr = [],\n        len = arr.length,\n        util = exports.Util,\n        n,\n        val;\n\n    for (n = 0; n < len; n++) {\n      val = arr[n];\n\n      if (util._isNumber(val)) {\n        val = Math.round(val * 1000) / 1000;\n      } else if (!util._isString(val)) {\n        val = val.toString();\n      }\n\n      retArr.push(val);\n    }\n\n    return retArr;\n  },\n  _urlToImage: function (url, callback) {\n    var imageObj = new Global_1.glob.Image();\n\n    imageObj.onload = function () {\n      callback(imageObj);\n    };\n\n    imageObj.src = url;\n  },\n  _rgbToHex: function (r, g, b) {\n    return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n  },\n  _hexToRgb: function (hex) {\n    hex = hex.replace(HASH, EMPTY_STRING);\n    var bigint = parseInt(hex, 16);\n    return {\n      r: bigint >> 16 & 255,\n      g: bigint >> 8 & 255,\n      b: bigint & 255\n    };\n  },\n  getRandomColor: function () {\n    var randColor = (Math.random() * 0xffffff << 0).toString(16);\n\n    while (randColor.length < 6) {\n      randColor = ZERO + randColor;\n    }\n\n    return HASH + randColor;\n  },\n  get: function (val, def) {\n    if (val === undefined) {\n      return def;\n    } else {\n      return val;\n    }\n  },\n  getRGB: function (color) {\n    var rgb;\n\n    if (color in COLORS) {\n      rgb = COLORS[color];\n      return {\n        r: rgb[0],\n        g: rgb[1],\n        b: rgb[2]\n      };\n    } else if (color[0] === HASH) {\n      return this._hexToRgb(color.substring(1));\n    } else if (color.substr(0, 4) === RGB_PAREN) {\n      rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n      return {\n        r: parseInt(rgb[1], 10),\n        g: parseInt(rgb[2], 10),\n        b: parseInt(rgb[3], 10)\n      };\n    } else {\n      return {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n    }\n  },\n  colorToRGBA: function (str) {\n    str = str || 'black';\n    return exports.Util._namedColorToRBA(str) || exports.Util._hex3ColorToRGBA(str) || exports.Util._hex6ColorToRGBA(str) || exports.Util._rgbColorToRGBA(str) || exports.Util._rgbaColorToRGBA(str) || exports.Util._hslColorToRGBA(str);\n  },\n  _namedColorToRBA: function (str) {\n    var c = COLORS[str.toLowerCase()];\n\n    if (!c) {\n      return null;\n    }\n\n    return {\n      r: c[0],\n      g: c[1],\n      b: c[2],\n      a: 1\n    };\n  },\n  _rgbColorToRGBA: function (str) {\n    if (str.indexOf('rgb(') === 0) {\n      str = str.match(/rgb\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: 1\n      };\n    }\n  },\n  _rgbaColorToRGBA: function (str) {\n    if (str.indexOf('rgba(') === 0) {\n      str = str.match(/rgba\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: parts[3]\n      };\n    }\n  },\n  _hex6ColorToRGBA: function (str) {\n    if (str[0] === '#' && str.length === 7) {\n      return {\n        r: parseInt(str.slice(1, 3), 16),\n        g: parseInt(str.slice(3, 5), 16),\n        b: parseInt(str.slice(5, 7), 16),\n        a: 1\n      };\n    }\n  },\n  _hex3ColorToRGBA: function (str) {\n    if (str[0] === '#' && str.length === 4) {\n      return {\n        r: parseInt(str[1] + str[1], 16),\n        g: parseInt(str[2] + str[2], 16),\n        b: parseInt(str[3] + str[3], 16),\n        a: 1\n      };\n    }\n  },\n  _hslColorToRGBA: function (str) {\n    if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n      var _a = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str),\n          _ = _a[0],\n          hsl = _a.slice(1);\n\n      var h = Number(hsl[0]) / 360;\n      var s = Number(hsl[1]) / 100;\n      var l = Number(hsl[2]) / 100;\n      var t2 = void 0;\n      var t3 = void 0;\n      var val = void 0;\n\n      if (s === 0) {\n        val = l * 255;\n        return {\n          r: Math.round(val),\n          g: Math.round(val),\n          b: Math.round(val),\n          a: 1\n        };\n      }\n\n      if (l < 0.5) {\n        t2 = l * (1 + s);\n      } else {\n        t2 = l + s - l * s;\n      }\n\n      var t1 = 2 * l - t2;\n      var rgb = [0, 0, 0];\n\n      for (var i = 0; i < 3; i++) {\n        t3 = h + 1 / 3 * -(i - 1);\n\n        if (t3 < 0) {\n          t3++;\n        }\n\n        if (t3 > 1) {\n          t3--;\n        }\n\n        if (6 * t3 < 1) {\n          val = t1 + (t2 - t1) * 6 * t3;\n        } else if (2 * t3 < 1) {\n          val = t2;\n        } else if (3 * t3 < 2) {\n          val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n        } else {\n          val = t1;\n        }\n\n        rgb[i] = val * 255;\n      }\n\n      return {\n        r: Math.round(rgb[0]),\n        g: Math.round(rgb[1]),\n        b: Math.round(rgb[2]),\n        a: 1\n      };\n    }\n  },\n  haveIntersection: function (r1, r2) {\n    return !(r2.x > r1.x + r1.width || r2.x + r2.width < r1.x || r2.y > r1.y + r1.height || r2.y + r2.height < r1.y);\n  },\n  cloneObject: function (obj) {\n    var retObj = {};\n\n    for (var key in obj) {\n      if (this._isPlainObject(obj[key])) {\n        retObj[key] = this.cloneObject(obj[key]);\n      } else if (this._isArray(obj[key])) {\n        retObj[key] = this.cloneArray(obj[key]);\n      } else {\n        retObj[key] = obj[key];\n      }\n    }\n\n    return retObj;\n  },\n  cloneArray: function (arr) {\n    return arr.slice(0);\n  },\n  _degToRad: function (deg) {\n    return deg * PI_OVER_DEG180;\n  },\n  _radToDeg: function (rad) {\n    return rad * DEG180_OVER_PI;\n  },\n  _getRotation: function (radians) {\n    return Global_1.Konva.angleDeg ? exports.Util._radToDeg(radians) : radians;\n  },\n  _capitalize: function (str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n  throw: function (str) {\n    throw new Error(KONVA_ERROR + str);\n  },\n  error: function (str) {\n    console.error(KONVA_ERROR + str);\n  },\n  warn: function (str) {\n    if (!Global_1.Konva.showWarnings) {\n      return;\n    }\n\n    console.warn(KONVA_WARNING + str);\n  },\n  extend: function (child, parent) {\n    function Ctor() {\n      this.constructor = child;\n    }\n\n    Ctor.prototype = parent.prototype;\n    var oldProto = child.prototype;\n    child.prototype = new Ctor();\n\n    for (var key in oldProto) {\n      if (oldProto.hasOwnProperty(key)) {\n        child.prototype[key] = oldProto[key];\n      }\n    }\n\n    child.__super__ = parent.prototype;\n    child.super = parent;\n  },\n  _getControlPoints: function (x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)),\n        d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)),\n        fa = t * d01 / (d01 + d12),\n        fb = t * d12 / (d01 + d12),\n        p1x = x1 - fa * (x2 - x0),\n        p1y = y1 - fa * (y2 - y0),\n        p2x = x1 + fb * (x2 - x0),\n        p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n  },\n  _expandPoints: function (p, tension) {\n    var len = p.length,\n        allPoints = [],\n        n,\n        cp;\n\n    for (n = 2; n < len - 2; n += 2) {\n      cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n      allPoints.push(cp[0]);\n      allPoints.push(cp[1]);\n      allPoints.push(p[n]);\n      allPoints.push(p[n + 1]);\n      allPoints.push(cp[2]);\n      allPoints.push(cp[3]);\n    }\n\n    return allPoints;\n  },\n  each: function (obj, func) {\n    for (var key in obj) {\n      func(key, obj[key]);\n    }\n  },\n  _inRange: function (val, left, right) {\n    return left <= val && val < right;\n  },\n  _getProjectionToSegment: function (x1, y1, x2, y2, x3, y3) {\n    var x, y, dist;\n    var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n\n    if (pd2 == 0) {\n      x = x1;\n      y = y1;\n      dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n    } else {\n      var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n\n      if (u < 0) {\n        x = x1;\n        y = y1;\n        dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n      } else if (u > 1.0) {\n        x = x2;\n        y = y2;\n        dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n      } else {\n        x = x1 + u * (x2 - x1);\n        y = y1 + u * (y2 - y1);\n        dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n      }\n    }\n\n    return [x, y, dist];\n  },\n  _getProjectionToLine: function (pt, line, isClosed) {\n    var pc = exports.Util.cloneObject(pt);\n    var dist = Number.MAX_VALUE;\n    line.forEach(function (p1, i) {\n      if (!isClosed && i === line.length - 1) {\n        return;\n      }\n\n      var p2 = line[(i + 1) % line.length];\n\n      var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n\n      var px = proj[0],\n          py = proj[1],\n          pdist = proj[2];\n\n      if (pdist < dist) {\n        pc.x = px;\n        pc.y = py;\n        dist = pdist;\n      }\n    });\n    return pc;\n  },\n  _prepareArrayForTween: function (startArray, endArray, isClosed) {\n    var n,\n        start = [],\n        end = [];\n\n    if (startArray.length > endArray.length) {\n      var temp = endArray;\n      endArray = startArray;\n      startArray = temp;\n    }\n\n    for (n = 0; n < startArray.length; n += 2) {\n      start.push({\n        x: startArray[n],\n        y: startArray[n + 1]\n      });\n    }\n\n    for (n = 0; n < endArray.length; n += 2) {\n      end.push({\n        x: endArray[n],\n        y: endArray[n + 1]\n      });\n    }\n\n    var newStart = [];\n    end.forEach(function (point) {\n      var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n\n      newStart.push(pr.x);\n      newStart.push(pr.y);\n    });\n    return newStart;\n  },\n  _prepareToStringify: function (obj) {\n    var desc;\n    obj.visitedByCircularReferenceRemoval = true;\n\n    for (var key in obj) {\n      if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n        continue;\n      }\n\n      desc = Object.getOwnPropertyDescriptor(obj, key);\n\n      if (obj[key].visitedByCircularReferenceRemoval || exports.Util._isElement(obj[key])) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      } else if (exports.Util._prepareToStringify(obj[key]) === null) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      }\n    }\n\n    delete obj.visitedByCircularReferenceRemoval;\n    return obj;\n  },\n  _assign: function (target, source) {\n    for (var key in source) {\n      target[key] = source[key];\n    }\n\n    return target;\n  },\n  _getFirstPointerId: function (evt) {\n    if (!evt.touches) {\n      return 999;\n    } else {\n      return evt.changedTouches[0].identifier;\n    }\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Global_1 = require(\"./Global\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Validators_1 = require(\"./Validators\");\n\nexports.ids = {};\nexports.names = {};\n\nvar _addId = function (node, id) {\n  if (!id) {\n    return;\n  }\n\n  exports.ids[id] = node;\n};\n\nexports._removeId = function (id, node) {\n  if (!id) {\n    return;\n  }\n\n  if (exports.ids[id] !== node) {\n    return;\n  }\n\n  delete exports.ids[id];\n};\n\nexports._addName = function (node, name) {\n  if (name) {\n    if (!exports.names[name]) {\n      exports.names[name] = [];\n    }\n\n    exports.names[name].push(node);\n  }\n};\n\nexports._removeName = function (name, _id) {\n  if (!name) {\n    return;\n  }\n\n  var nodes = exports.names[name];\n\n  if (!nodes) {\n    return;\n  }\n\n  for (var n = 0; n < nodes.length; n++) {\n    var no = nodes[n];\n\n    if (no._id === _id) {\n      nodes.splice(n, 1);\n    }\n  }\n\n  if (nodes.length === 0) {\n    delete exports.names[name];\n  }\n};\n\nvar ABSOLUTE_OPACITY = 'absoluteOpacity',\n    ALL_LISTENERS = 'allEventListeners',\n    ABSOLUTE_TRANSFORM = 'absoluteTransform',\n    ABSOLUTE_SCALE = 'absoluteScale',\n    CANVAS = 'canvas',\n    CHANGE = 'Change',\n    CHILDREN = 'children',\n    KONVA = 'konva',\n    LISTENING = 'listening',\n    MOUSEENTER = 'mouseenter',\n    MOUSELEAVE = 'mouseleave',\n    NAME = 'name',\n    SET = 'set',\n    SHAPE = 'Shape',\n    SPACE = ' ',\n    STAGE = 'stage',\n    TRANSFORM = 'transform',\n    UPPER_STAGE = 'Stage',\n    VISIBLE = 'visible',\n    TRANSFORM_CHANGE_STR = ['xChange.konva', 'yChange.konva', 'scaleXChange.konva', 'scaleYChange.konva', 'skewXChange.konva', 'skewYChange.konva', 'rotationChange.konva', 'offsetXChange.konva', 'offsetYChange.konva', 'transformsEnabledChange.konva'].join(SPACE),\n    SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\n\nvar Node = function () {\n  function Node(config) {\n    this._id = idCounter++;\n    this.eventListeners = {};\n    this.attrs = {};\n    this.index = 0;\n    this._allEventListeners = null;\n    this.parent = null;\n    this._cache = new Map();\n    this._attachedDepsListeners = new Map();\n    this._lastPos = null;\n    this._batchingTransformChange = false;\n    this._needClearTransformCache = false;\n    this._filterUpToDate = false;\n    this._isUnderCache = false;\n    this.children = emptyChildren;\n    this._dragEventId = null;\n    this._shouldFireChangeEvents = false;\n    this.setAttrs(config);\n    this._shouldFireChangeEvents = true;\n  }\n\n  Node.prototype.hasChildren = function () {\n    return false;\n  };\n\n  Node.prototype.getChildren = function () {\n    return emptyChildren;\n  };\n\n  Node.prototype._clearCache = function (attr) {\n    if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) && this._cache.get(attr)) {\n      this._cache.get(attr).dirty = true;\n    } else if (attr) {\n      this._cache.delete(attr);\n    } else {\n      this._cache.clear();\n    }\n  };\n\n  Node.prototype._getCache = function (attr, privateGetter) {\n    var cache = this._cache.get(attr);\n\n    var isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n    var invalid = cache === undefined || isTransform && cache.dirty === true;\n\n    if (invalid) {\n      cache = privateGetter.call(this);\n\n      this._cache.set(attr, cache);\n    }\n\n    return cache;\n  };\n\n  Node.prototype._calculate = function (name, deps, getter) {\n    var _this = this;\n\n    if (!this._attachedDepsListeners.get(name)) {\n      var depsString = deps.map(function (dep) {\n        return dep + 'Change.konva';\n      }).join(SPACE);\n      this.on(depsString, function () {\n        _this._clearCache(name);\n      });\n\n      this._attachedDepsListeners.set(name, true);\n    }\n\n    return this._getCache(name, getter);\n  };\n\n  Node.prototype._getCanvasCache = function () {\n    return this._cache.get(CANVAS);\n  };\n\n  Node.prototype._clearSelfAndDescendantCache = function (attr, forceEvent) {\n    this._clearCache(attr);\n\n    if (forceEvent && attr === ABSOLUTE_TRANSFORM) {\n      this.fire('_clearTransformCache');\n    }\n\n    if (this.isCached()) {\n      return;\n    }\n\n    if (this.children) {\n      this.children.each(function (node) {\n        node._clearSelfAndDescendantCache(attr, true);\n      });\n    }\n  };\n\n  Node.prototype.clearCache = function () {\n    this._cache.delete(CANVAS);\n\n    this._clearSelfAndDescendantCache();\n\n    return this;\n  };\n\n  Node.prototype.cache = function (config) {\n    var conf = config || {};\n    var rect = {};\n\n    if (conf.x === undefined || conf.y === undefined || conf.width === undefined || conf.height === undefined) {\n      rect = this.getClientRect({\n        skipTransform: true,\n        relativeTo: this.getParent()\n      });\n    }\n\n    var width = Math.ceil(conf.width || rect.width),\n        height = Math.ceil(conf.height || rect.height),\n        pixelRatio = conf.pixelRatio,\n        x = conf.x === undefined ? rect.x : conf.x,\n        y = conf.y === undefined ? rect.y : conf.y,\n        offset = conf.offset || 0,\n        drawBorder = conf.drawBorder || false;\n\n    if (!width || !height) {\n      Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n      return;\n    }\n\n    width += offset * 2;\n    height += offset * 2;\n    x -= offset;\n    y -= offset;\n    var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: width,\n      height: height\n    }),\n        cachedFilterCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: 0,\n      height: 0\n    }),\n        cachedHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1,\n      width: width,\n      height: height\n    }),\n        sceneContext = cachedSceneCanvas.getContext(),\n        hitContext = cachedHitCanvas.getContext();\n    cachedHitCanvas.isCache = true;\n    cachedSceneCanvas.isCache = true;\n\n    this._cache.delete('canvas');\n\n    this._filterUpToDate = false;\n\n    if (conf.imageSmoothingEnabled === false) {\n      cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n      cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n    }\n\n    sceneContext.save();\n    hitContext.save();\n    sceneContext.translate(-x, -y);\n    hitContext.translate(-x, -y);\n    this._isUnderCache = true;\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n\n    this.drawScene(cachedSceneCanvas, this);\n    this.drawHit(cachedHitCanvas, this);\n    this._isUnderCache = false;\n    sceneContext.restore();\n    hitContext.restore();\n\n    if (drawBorder) {\n      sceneContext.save();\n      sceneContext.beginPath();\n      sceneContext.rect(0, 0, width, height);\n      sceneContext.closePath();\n      sceneContext.setAttr('strokeStyle', 'red');\n      sceneContext.setAttr('lineWidth', 5);\n      sceneContext.stroke();\n      sceneContext.restore();\n    }\n\n    this._cache.set(CANVAS, {\n      scene: cachedSceneCanvas,\n      filter: cachedFilterCanvas,\n      hit: cachedHitCanvas,\n      x: x,\n      y: y\n    });\n\n    return this;\n  };\n\n  Node.prototype.isCached = function () {\n    return this._cache.has('canvas');\n  };\n\n  Node.prototype.getClientRect = function (config) {\n    throw new Error('abstract \"getClientRect\" method call');\n  };\n\n  Node.prototype._transformedRect = function (rect, top) {\n    var points = [{\n      x: rect.x,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y + rect.height\n    }, {\n      x: rect.x,\n      y: rect.y + rect.height\n    }];\n    var minX, minY, maxX, maxY;\n    var trans = this.getAbsoluteTransform(top);\n    points.forEach(function (point) {\n      var transformed = trans.point(point);\n\n      if (minX === undefined) {\n        minX = maxX = transformed.x;\n        minY = maxY = transformed.y;\n      }\n\n      minX = Math.min(minX, transformed.x);\n      minY = Math.min(minY, transformed.y);\n      maxX = Math.max(maxX, transformed.x);\n      maxY = Math.max(maxY, transformed.y);\n    });\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  };\n\n  Node.prototype._drawCachedSceneCanvas = function (context) {\n    context.save();\n\n    context._applyOpacity(this);\n\n    context._applyGlobalCompositeOperation(this);\n\n    var canvasCache = this._getCanvasCache();\n\n    context.translate(canvasCache.x, canvasCache.y);\n\n    var cacheCanvas = this._getCachedSceneCanvas();\n\n    var ratio = cacheCanvas.pixelRatio;\n    context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n    context.restore();\n  };\n\n  Node.prototype._drawCachedHitCanvas = function (context) {\n    var canvasCache = this._getCanvasCache(),\n        hitCanvas = canvasCache.hit;\n\n    context.save();\n    context.translate(canvasCache.x, canvasCache.y);\n    context.drawImage(hitCanvas._canvas, 0, 0);\n    context.restore();\n  };\n\n  Node.prototype._getCachedSceneCanvas = function () {\n    var filters = this.filters(),\n        cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = cachedCanvas.scene,\n        filterCanvas = cachedCanvas.filter,\n        filterContext = filterCanvas.getContext(),\n        len,\n        imageData,\n        n,\n        filter;\n\n    if (filters) {\n      if (!this._filterUpToDate) {\n        var ratio = sceneCanvas.pixelRatio;\n        filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n\n        try {\n          len = filters.length;\n          filterContext.clear();\n          filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n          imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n\n          for (n = 0; n < len; n++) {\n            filter = filters[n];\n\n            if (typeof filter !== 'function') {\n              Util_1.Util.error('Filter should be type of function, but got ' + typeof filter + ' instead. Please check correct filters');\n              continue;\n            }\n\n            filter.call(this, imageData);\n            filterContext.putImageData(imageData, 0, 0);\n          }\n        } catch (e) {\n          Util_1.Util.error('Unable to apply filter. ' + e.message + ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n        }\n\n        this._filterUpToDate = true;\n      }\n\n      return filterCanvas;\n    }\n\n    return sceneCanvas;\n  };\n\n  Node.prototype.on = function (evtStr, handler) {\n    this._cache && this._cache.delete(ALL_LISTENERS);\n\n    if (arguments.length === 3) {\n      return this._delegate.apply(this, arguments);\n    }\n\n    var events = evtStr.split(SPACE),\n        len = events.length,\n        n,\n        event,\n        parts,\n        baseEvent,\n        name;\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1] || '';\n\n      if (!this.eventListeners[baseEvent]) {\n        this.eventListeners[baseEvent] = [];\n      }\n\n      this.eventListeners[baseEvent].push({\n        name: name,\n        handler: handler\n      });\n    }\n\n    return this;\n  };\n\n  Node.prototype.off = function (evtStr, callback) {\n    var events = (evtStr || '').split(SPACE),\n        len = events.length,\n        n,\n        t,\n        event,\n        parts,\n        baseEvent,\n        name;\n    this._cache && this._cache.delete(ALL_LISTENERS);\n\n    if (!evtStr) {\n      for (t in this.eventListeners) {\n        this._off(t);\n      }\n    }\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1];\n\n      if (baseEvent) {\n        if (this.eventListeners[baseEvent]) {\n          this._off(baseEvent, name, callback);\n        }\n      } else {\n        for (t in this.eventListeners) {\n          this._off(t, name, callback);\n        }\n      }\n    }\n\n    return this;\n  };\n\n  Node.prototype.dispatchEvent = function (evt) {\n    var e = {\n      target: this,\n      type: evt.type,\n      evt: evt\n    };\n    this.fire(evt.type, e);\n    return this;\n  };\n\n  Node.prototype.addEventListener = function (type, handler) {\n    this.on(type, function (evt) {\n      handler.call(this, evt.evt);\n    });\n    return this;\n  };\n\n  Node.prototype.removeEventListener = function (type) {\n    this.off(type);\n    return this;\n  };\n\n  Node.prototype._delegate = function (event, selector, handler) {\n    var stopNode = this;\n    this.on(event, function (evt) {\n      var targets = evt.target.findAncestors(selector, true, stopNode);\n\n      for (var i = 0; i < targets.length; i++) {\n        evt = Util_1.Util.cloneObject(evt);\n        evt.currentTarget = targets[i];\n        handler.call(targets[i], evt);\n      }\n    });\n  };\n\n  Node.prototype.remove = function () {\n    if (this.isDragging()) {\n      this.stopDrag();\n    }\n\n    DragAndDrop_1.DD._dragElements.delete(this._id);\n\n    this._remove();\n\n    return this;\n  };\n\n  Node.prototype._clearCaches = function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n\n    this._clearSelfAndDescendantCache(STAGE);\n\n    this._clearSelfAndDescendantCache(VISIBLE);\n\n    this._clearSelfAndDescendantCache(LISTENING);\n  };\n\n  Node.prototype._remove = function () {\n    this._clearCaches();\n\n    var parent = this.getParent();\n\n    if (parent && parent.children) {\n      parent.children.splice(this.index, 1);\n\n      parent._setChildrenIndices();\n\n      this.parent = null;\n    }\n  };\n\n  Node.prototype.destroy = function () {\n    exports._removeId(this.id(), this);\n\n    var names = (this.name() || '').split(/\\s/g);\n\n    for (var i = 0; i < names.length; i++) {\n      var subname = names[i];\n\n      exports._removeName(subname, this._id);\n    }\n\n    this.remove();\n    return this;\n  };\n\n  Node.prototype.getAttr = function (attr) {\n    var method = 'get' + Util_1.Util._capitalize(attr);\n\n    if (Util_1.Util._isFunction(this[method])) {\n      return this[method]();\n    }\n\n    return this.attrs[attr];\n  };\n\n  Node.prototype.getAncestors = function () {\n    var parent = this.getParent(),\n        ancestors = new Util_1.Collection();\n\n    while (parent) {\n      ancestors.push(parent);\n      parent = parent.getParent();\n    }\n\n    return ancestors;\n  };\n\n  Node.prototype.getAttrs = function () {\n    return this.attrs || {};\n  };\n\n  Node.prototype.setAttrs = function (config) {\n    var _this = this;\n\n    this._batchTransformChanges(function () {\n      var key, method;\n\n      if (!config) {\n        return _this;\n      }\n\n      for (key in config) {\n        if (key === CHILDREN) {\n          continue;\n        }\n\n        method = SET + Util_1.Util._capitalize(key);\n\n        if (Util_1.Util._isFunction(_this[method])) {\n          _this[method](config[key]);\n        } else {\n          _this._setAttr(key, config[key]);\n        }\n      }\n    });\n\n    return this;\n  };\n\n  Node.prototype.isListening = function () {\n    return this._getCache(LISTENING, this._isListening);\n  };\n\n  Node.prototype._isListening = function (relativeTo) {\n    var listening = this.listening();\n\n    if (!listening) {\n      return false;\n    }\n\n    var parent = this.getParent();\n\n    if (parent && parent !== relativeTo && this !== relativeTo) {\n      return parent._isListening(relativeTo);\n    } else {\n      return true;\n    }\n  };\n\n  Node.prototype.isVisible = function () {\n    return this._getCache(VISIBLE, this._isVisible);\n  };\n\n  Node.prototype._isVisible = function (relativeTo) {\n    var visible = this.visible();\n\n    if (!visible) {\n      return false;\n    }\n\n    var parent = this.getParent();\n\n    if (parent && parent !== relativeTo && this !== relativeTo) {\n      return parent._isVisible(relativeTo);\n    } else {\n      return true;\n    }\n  };\n\n  Node.prototype.shouldDrawHit = function (top) {\n    if (top) {\n      return this._isVisible(top) && this._isListening(top);\n    }\n\n    var layer = this.getLayer();\n    var layerUnderDrag = false;\n\n    DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n      if (elem.dragStatus !== 'dragging') {\n        return;\n      } else if (elem.node.nodeType === 'Stage') {\n        layerUnderDrag = true;\n      } else if (elem.node.getLayer() === layer) {\n        layerUnderDrag = true;\n      }\n    });\n\n    var dragSkip = !Global_1.Konva.hitOnDragEnabled && layerUnderDrag;\n    return this.isListening() && this.isVisible() && !dragSkip;\n  };\n\n  Node.prototype.show = function () {\n    this.visible(true);\n    return this;\n  };\n\n  Node.prototype.hide = function () {\n    this.visible(false);\n    return this;\n  };\n\n  Node.prototype.getZIndex = function () {\n    return this.index || 0;\n  };\n\n  Node.prototype.getAbsoluteZIndex = function () {\n    var depth = this.getDepth(),\n        that = this,\n        index = 0,\n        nodes,\n        len,\n        n,\n        child;\n\n    function addChildren(children) {\n      nodes = [];\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        child = children[n];\n        index++;\n\n        if (child.nodeType !== SHAPE) {\n          nodes = nodes.concat(child.getChildren().toArray());\n        }\n\n        if (child._id === that._id) {\n          n = len;\n        }\n      }\n\n      if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n        addChildren(nodes);\n      }\n    }\n\n    if (that.nodeType !== UPPER_STAGE) {\n      addChildren(that.getStage().getChildren());\n    }\n\n    return index;\n  };\n\n  Node.prototype.getDepth = function () {\n    var depth = 0,\n        parent = this.parent;\n\n    while (parent) {\n      depth++;\n      parent = parent.parent;\n    }\n\n    return depth;\n  };\n\n  Node.prototype._batchTransformChanges = function (func) {\n    this._batchingTransformChange = true;\n    func();\n    this._batchingTransformChange = false;\n\n    if (this._needClearTransformCache) {\n      this._clearCache(TRANSFORM);\n\n      this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM, true);\n    }\n\n    this._needClearTransformCache = false;\n  };\n\n  Node.prototype.setPosition = function (pos) {\n    var _this = this;\n\n    this._batchTransformChanges(function () {\n      _this.x(pos.x);\n\n      _this.y(pos.y);\n    });\n\n    return this;\n  };\n\n  Node.prototype.getPosition = function () {\n    return {\n      x: this.x(),\n      y: this.y()\n    };\n  };\n\n  Node.prototype.getAbsolutePosition = function (top) {\n    var haveCachedParent = false;\n    var parent = this.parent;\n\n    while (parent) {\n      if (parent.isCached()) {\n        haveCachedParent = true;\n        break;\n      }\n\n      parent = parent.parent;\n    }\n\n    if (haveCachedParent && !top) {\n      top = true;\n    }\n\n    var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(),\n        absoluteTransform = new Util_1.Transform(),\n        offset = this.offset();\n    absoluteTransform.m = absoluteMatrix.slice();\n    absoluteTransform.translate(offset.x, offset.y);\n    return absoluteTransform.getTranslation();\n  };\n\n  Node.prototype.setAbsolutePosition = function (pos) {\n    var origTrans = this._clearTransform();\n\n    this.attrs.x = origTrans.x;\n    this.attrs.y = origTrans.y;\n    delete origTrans.x;\n    delete origTrans.y;\n\n    this._clearCache(TRANSFORM);\n\n    var it = this._getAbsoluteTransform().copy();\n\n    it.invert();\n    it.translate(pos.x, pos.y);\n    pos = {\n      x: this.attrs.x + it.getTranslation().x,\n      y: this.attrs.y + it.getTranslation().y\n    };\n\n    this._setTransform(origTrans);\n\n    this.setPosition({\n      x: pos.x,\n      y: pos.y\n    });\n\n    this._clearCache(TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    return this;\n  };\n\n  Node.prototype._setTransform = function (trans) {\n    var key;\n\n    for (key in trans) {\n      this.attrs[key] = trans[key];\n    }\n  };\n\n  Node.prototype._clearTransform = function () {\n    var trans = {\n      x: this.x(),\n      y: this.y(),\n      rotation: this.rotation(),\n      scaleX: this.scaleX(),\n      scaleY: this.scaleY(),\n      offsetX: this.offsetX(),\n      offsetY: this.offsetY(),\n      skewX: this.skewX(),\n      skewY: this.skewY()\n    };\n    this.attrs.x = 0;\n    this.attrs.y = 0;\n    this.attrs.rotation = 0;\n    this.attrs.scaleX = 1;\n    this.attrs.scaleY = 1;\n    this.attrs.offsetX = 0;\n    this.attrs.offsetY = 0;\n    this.attrs.skewX = 0;\n    this.attrs.skewY = 0;\n    return trans;\n  };\n\n  Node.prototype.move = function (change) {\n    var changeX = change.x,\n        changeY = change.y,\n        x = this.x(),\n        y = this.y();\n\n    if (changeX !== undefined) {\n      x += changeX;\n    }\n\n    if (changeY !== undefined) {\n      y += changeY;\n    }\n\n    this.setPosition({\n      x: x,\n      y: y\n    });\n    return this;\n  };\n\n  Node.prototype._eachAncestorReverse = function (func, top) {\n    var family = [],\n        parent = this.getParent(),\n        len,\n        n;\n\n    if (top && top._id === this._id) {\n      return;\n    }\n\n    family.unshift(this);\n\n    while (parent && (!top || parent._id !== top._id)) {\n      family.unshift(parent);\n      parent = parent.parent;\n    }\n\n    len = family.length;\n\n    for (n = 0; n < len; n++) {\n      func(family[n]);\n    }\n  };\n\n  Node.prototype.rotate = function (theta) {\n    this.rotation(this.rotation() + theta);\n    return this;\n  };\n\n  Node.prototype.moveToTop = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.push(this);\n\n    this.parent._setChildrenIndices();\n\n    return true;\n  };\n\n  Node.prototype.moveUp = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n      return false;\n    }\n\n    var index = this.index,\n        len = this.parent.getChildren().length;\n\n    if (index < len - 1) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index + 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveDown = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index - 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveToBottom = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.unshift(this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.setZIndex = function (zIndex) {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n      return this;\n    }\n\n    if (zIndex < 0 || zIndex >= this.parent.children.length) {\n      Util_1.Util.warn('Unexpected value ' + zIndex + ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' + (this.parent.children.length - 1) + '.');\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.splice(zIndex, 0, this);\n\n    this.parent._setChildrenIndices();\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteOpacity = function () {\n    return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n  };\n\n  Node.prototype._getAbsoluteOpacity = function () {\n    var absOpacity = this.opacity();\n    var parent = this.getParent();\n\n    if (parent && !parent._isUnderCache) {\n      absOpacity *= parent.getAbsoluteOpacity();\n    }\n\n    return absOpacity;\n  };\n\n  Node.prototype.moveTo = function (newContainer) {\n    if (this.getParent() !== newContainer) {\n      this._remove();\n\n      newContainer.add(this);\n    }\n\n    return this;\n  };\n\n  Node.prototype.toObject = function () {\n    var obj = {},\n        attrs = this.getAttrs(),\n        key,\n        val,\n        getter,\n        defaultValue,\n        nonPlainObject;\n    obj.attrs = {};\n\n    for (key in attrs) {\n      val = attrs[key];\n      nonPlainObject = Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n\n      if (nonPlainObject) {\n        continue;\n      }\n\n      getter = typeof this[key] === 'function' && this[key];\n      delete attrs[key];\n      defaultValue = getter ? getter.call(this) : null;\n      attrs[key] = val;\n\n      if (defaultValue !== val) {\n        obj.attrs[key] = val;\n      }\n    }\n\n    obj.className = this.getClassName();\n    return Util_1.Util._prepareToStringify(obj);\n  };\n\n  Node.prototype.toJSON = function () {\n    return JSON.stringify(this.toObject());\n  };\n\n  Node.prototype.getParent = function () {\n    return this.parent;\n  };\n\n  Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n    var res = [];\n\n    if (includeSelf && this._isMatch(selector)) {\n      res.push(this);\n    }\n\n    var ancestor = this.parent;\n\n    while (ancestor) {\n      if (ancestor === stopNode) {\n        return res;\n      }\n\n      if (ancestor._isMatch(selector)) {\n        res.push(ancestor);\n      }\n\n      ancestor = ancestor.parent;\n    }\n\n    return res;\n  };\n\n  Node.prototype.isAncestorOf = function (node) {\n    return false;\n  };\n\n  Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n    return this.findAncestors(selector, includeSelf, stopNode)[0];\n  };\n\n  Node.prototype._isMatch = function (selector) {\n    if (!selector) {\n      return false;\n    }\n\n    if (typeof selector === 'function') {\n      return selector(this);\n    }\n\n    var selectorArr = selector.replace(/ /g, '').split(','),\n        len = selectorArr.length,\n        n,\n        sel;\n\n    for (n = 0; n < len; n++) {\n      sel = selectorArr[n];\n\n      if (!Util_1.Util.isValidSelector(sel)) {\n        Util_1.Util.warn('Selector \"' + sel + '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n        Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n        Util_1.Util.warn('Konva is awesome, right?');\n      }\n\n      if (sel.charAt(0) === '#') {\n        if (this.id() === sel.slice(1)) {\n          return true;\n        }\n      } else if (sel.charAt(0) === '.') {\n        if (this.hasName(sel.slice(1))) {\n          return true;\n        }\n      } else if (this.className === sel || this.nodeType === sel) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Node.prototype.getLayer = function () {\n    var parent = this.getParent();\n    return parent ? parent.getLayer() : null;\n  };\n\n  Node.prototype.getStage = function () {\n    return this._getCache(STAGE, this._getStage);\n  };\n\n  Node.prototype._getStage = function () {\n    var parent = this.getParent();\n\n    if (parent) {\n      return parent.getStage();\n    } else {\n      return undefined;\n    }\n  };\n\n  Node.prototype.fire = function (eventType, evt, bubble) {\n    if (evt === void 0) {\n      evt = {};\n    }\n\n    evt.target = evt.target || this;\n\n    if (bubble) {\n      this._fireAndBubble(eventType, evt);\n    } else {\n      this._fire(eventType, evt);\n    }\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteTransform = function (top) {\n    if (top) {\n      return this._getAbsoluteTransform(top);\n    } else {\n      return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n    }\n  };\n\n  Node.prototype._getAbsoluteTransform = function (top) {\n    var at;\n\n    if (top) {\n      at = new Util_1.Transform();\n\n      this._eachAncestorReverse(function (node) {\n        var transformsEnabled = node.transformsEnabled();\n\n        if (transformsEnabled === 'all') {\n          at.multiply(node.getTransform());\n        } else if (transformsEnabled === 'position') {\n          at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n        }\n      }, top);\n\n      return at;\n    } else {\n      at = this._cache.get(ABSOLUTE_TRANSFORM) || new Util_1.Transform();\n\n      if (this.parent) {\n        this.parent.getAbsoluteTransform().copyInto(at);\n      } else {\n        at.reset();\n      }\n\n      var transformsEnabled = this.transformsEnabled();\n\n      if (transformsEnabled === 'all') {\n        at.multiply(this.getTransform());\n      } else if (transformsEnabled === 'position') {\n        var x = this.attrs.x || 0;\n        var y = this.attrs.y || 0;\n        var offsetX = this.attrs.offsetX || 0;\n        var offsetY = this.attrs.offsetY || 0;\n        at.translate(x - offsetX, y - offsetY);\n      }\n\n      at.dirty = false;\n      return at;\n    }\n  };\n\n  Node.prototype.getAbsoluteScale = function (top) {\n    var parent = this;\n\n    while (parent) {\n      if (parent._isUnderCache) {\n        top = parent;\n      }\n\n      parent = parent.getParent();\n    }\n\n    var transform = this.getAbsoluteTransform(top);\n    var attrs = transform.decompose();\n    return {\n      x: attrs.scaleX,\n      y: attrs.scaleY\n    };\n  };\n\n  Node.prototype.getAbsoluteRotation = function () {\n    return this.getAbsoluteTransform().decompose().rotation;\n  };\n\n  Node.prototype.getTransform = function () {\n    return this._getCache(TRANSFORM, this._getTransform);\n  };\n\n  Node.prototype._getTransform = function () {\n    var _a, _b;\n\n    var m = this._cache.get(TRANSFORM) || new Util_1.Transform();\n    m.reset();\n    var x = this.x(),\n        y = this.y(),\n        rotation = Global_1.Konva.getAngle(this.rotation()),\n        scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1,\n        scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1,\n        skewX = this.attrs.skewX || 0,\n        skewY = this.attrs.skewY || 0,\n        offsetX = this.attrs.offsetX || 0,\n        offsetY = this.attrs.offsetY || 0;\n\n    if (x !== 0 || y !== 0) {\n      m.translate(x, y);\n    }\n\n    if (rotation !== 0) {\n      m.rotate(rotation);\n    }\n\n    if (skewX !== 0 || skewY !== 0) {\n      m.skew(skewX, skewY);\n    }\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      m.scale(scaleX, scaleY);\n    }\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      m.translate(-1 * offsetX, -1 * offsetY);\n    }\n\n    m.dirty = false;\n    return m;\n  };\n\n  Node.prototype.clone = function (obj) {\n    var attrs = Util_1.Util.cloneObject(this.attrs),\n        key,\n        allListeners,\n        len,\n        n,\n        listener;\n\n    for (key in obj) {\n      attrs[key] = obj[key];\n    }\n\n    var node = new this.constructor(attrs);\n\n    for (key in this.eventListeners) {\n      allListeners = this.eventListeners[key];\n      len = allListeners.length;\n\n      for (n = 0; n < len; n++) {\n        listener = allListeners[n];\n\n        if (listener.name.indexOf(KONVA) < 0) {\n          if (!node.eventListeners[key]) {\n            node.eventListeners[key] = [];\n          }\n\n          node.eventListeners[key].push(listener);\n        }\n      }\n    }\n\n    return node;\n  };\n\n  Node.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    var box = this.getClientRect();\n    var stage = this.getStage(),\n        x = config.x !== undefined ? config.x : box.x,\n        y = config.y !== undefined ? config.y : box.y,\n        pixelRatio = config.pixelRatio || 1,\n        canvas = new Canvas_1.SceneCanvas({\n      width: config.width || box.width || (stage ? stage.width() : 0),\n      height: config.height || box.height || (stage ? stage.height() : 0),\n      pixelRatio: pixelRatio\n    }),\n        context = canvas.getContext();\n    context.save();\n\n    if (x || y) {\n      context.translate(-1 * x, -1 * y);\n    }\n\n    this.drawScene(canvas);\n    context.restore();\n    return canvas;\n  };\n\n  Node.prototype.toCanvas = function (config) {\n    return this._toKonvaCanvas(config)._canvas;\n  };\n\n  Node.prototype.toDataURL = function (config) {\n    config = config || {};\n    var mimeType = config.mimeType || null,\n        quality = config.quality || null;\n\n    var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n\n    if (config.callback) {\n      config.callback(url);\n    }\n\n    return url;\n  };\n\n  Node.prototype.toImage = function (config) {\n    if (!config || !config.callback) {\n      throw 'callback required for toImage method config argument';\n    }\n\n    var callback = config.callback;\n    delete config.callback;\n\n    Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n      callback(img);\n    });\n  };\n\n  Node.prototype.setSize = function (size) {\n    this.width(size.width);\n    this.height(size.height);\n    return this;\n  };\n\n  Node.prototype.getSize = function () {\n    return {\n      width: this.width(),\n      height: this.height()\n    };\n  };\n\n  Node.prototype.getClassName = function () {\n    return this.className || this.nodeType;\n  };\n\n  Node.prototype.getType = function () {\n    return this.nodeType;\n  };\n\n  Node.prototype.getDragDistance = function () {\n    if (this.attrs.dragDistance !== undefined) {\n      return this.attrs.dragDistance;\n    } else if (this.parent) {\n      return this.parent.getDragDistance();\n    } else {\n      return Global_1.Konva.dragDistance;\n    }\n  };\n\n  Node.prototype._off = function (type, name, callback) {\n    var evtListeners = this.eventListeners[type],\n        i,\n        evtName,\n        handler;\n\n    for (i = 0; i < evtListeners.length; i++) {\n      evtName = evtListeners[i].name;\n      handler = evtListeners[i].handler;\n\n      if ((evtName !== 'konva' || name === 'konva') && (!name || evtName === name) && (!callback || callback === handler)) {\n        evtListeners.splice(i, 1);\n\n        if (evtListeners.length === 0) {\n          delete this.eventListeners[type];\n          break;\n        }\n\n        i--;\n      }\n    }\n  };\n\n  Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n    this._fire(attr + CHANGE, {\n      oldVal: oldVal,\n      newVal: newVal\n    });\n  };\n\n  Node.prototype.setId = function (id) {\n    var oldId = this.id();\n\n    exports._removeId(oldId, this);\n\n    _addId(this, id);\n\n    this._setAttr('id', id);\n\n    return this;\n  };\n\n  Node.prototype.setName = function (name) {\n    var oldNames = (this.name() || '').split(/\\s/g);\n    var newNames = (name || '').split(/\\s/g);\n    var subname, i;\n\n    for (i = 0; i < oldNames.length; i++) {\n      subname = oldNames[i];\n\n      if (newNames.indexOf(subname) === -1 && subname) {\n        exports._removeName(subname, this._id);\n      }\n    }\n\n    for (i = 0; i < newNames.length; i++) {\n      subname = newNames[i];\n\n      if (oldNames.indexOf(subname) === -1 && subname) {\n        exports._addName(this, subname);\n      }\n    }\n\n    this._setAttr(NAME, name);\n\n    return this;\n  };\n\n  Node.prototype.addName = function (name) {\n    if (!this.hasName(name)) {\n      var oldName = this.name();\n      var newName = oldName ? oldName + ' ' + name : name;\n      this.setName(newName);\n    }\n\n    return this;\n  };\n\n  Node.prototype.hasName = function (name) {\n    if (!name) {\n      return false;\n    }\n\n    var fullName = this.name();\n\n    if (!fullName) {\n      return false;\n    }\n\n    var names = (fullName || '').split(/\\s/g);\n    return names.indexOf(name) !== -1;\n  };\n\n  Node.prototype.removeName = function (name) {\n    var names = (this.name() || '').split(/\\s/g);\n    var index = names.indexOf(name);\n\n    if (index !== -1) {\n      names.splice(index, 1);\n      this.setName(names.join(' '));\n    }\n\n    return this;\n  };\n\n  Node.prototype.setAttr = function (attr, val) {\n    var func = this[SET + Util_1.Util._capitalize(attr)];\n\n    if (Util_1.Util._isFunction(func)) {\n      func.call(this, val);\n    } else {\n      this._setAttr(attr, val);\n    }\n\n    return this;\n  };\n\n  Node.prototype._setAttr = function (key, val, skipFire) {\n    if (skipFire === void 0) {\n      skipFire = false;\n    }\n\n    var oldVal = this.attrs[key];\n\n    if (oldVal === val && !Util_1.Util.isObject(val)) {\n      return;\n    }\n\n    if (val === undefined || val === null) {\n      delete this.attrs[key];\n    } else {\n      this.attrs[key] = val;\n    }\n\n    if (this._shouldFireChangeEvents) {\n      this._fireChangeEvent(key, oldVal, val);\n    }\n  };\n\n  Node.prototype._setComponentAttr = function (key, component, val) {\n    var oldVal;\n\n    if (val !== undefined) {\n      oldVal = this.attrs[key];\n\n      if (!oldVal) {\n        this.attrs[key] = this.getAttr(key);\n      }\n\n      this.attrs[key][component] = val;\n\n      this._fireChangeEvent(key, oldVal, val);\n    }\n  };\n\n  Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n    if (evt && this.nodeType === SHAPE) {\n      evt.target = this;\n    }\n\n    var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && (compareShape && (this === compareShape || this.isAncestorOf && this.isAncestorOf(compareShape)) || this.nodeType === 'Stage' && !compareShape);\n\n    if (!shouldStop) {\n      this._fire(eventType, evt);\n\n      var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && compareShape && compareShape.isAncestorOf && compareShape.isAncestorOf(this) && !compareShape.isAncestorOf(this.parent);\n\n      if ((evt && !evt.cancelBubble || !evt) && this.parent && this.parent.isListening() && !stopBubble) {\n        if (compareShape && compareShape.parent) {\n          this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n        } else {\n          this._fireAndBubble.call(this.parent, eventType, evt);\n        }\n      }\n    }\n  };\n\n  Node.prototype._getProtoListeners = function (eventType) {\n    var listeners = this._cache.get(ALL_LISTENERS);\n\n    if (!listeners) {\n      listeners = {};\n      var obj = Object.getPrototypeOf(this);\n\n      while (obj) {\n        if (!obj.eventListeners) {\n          obj = Object.getPrototypeOf(obj);\n          continue;\n        }\n\n        for (var event in obj.eventListeners) {\n          var newEvents = obj.eventListeners[event];\n          var oldEvents = listeners[event] || [];\n          listeners[event] = newEvents.concat(oldEvents);\n        }\n\n        obj = Object.getPrototypeOf(obj);\n      }\n\n      this._cache.set(ALL_LISTENERS, listeners);\n    }\n\n    return listeners[eventType];\n  };\n\n  Node.prototype._fire = function (eventType, evt) {\n    evt = evt || {};\n    evt.currentTarget = this;\n    evt.type = eventType;\n\n    var topListeners = this._getProtoListeners(eventType);\n\n    if (topListeners) {\n      for (var i = 0; i < topListeners.length; i++) {\n        topListeners[i].handler.call(this, evt);\n      }\n    }\n\n    var selfListeners = this.eventListeners[eventType];\n\n    if (selfListeners) {\n      for (var i = 0; i < selfListeners.length; i++) {\n        selfListeners[i].handler.call(this, evt);\n      }\n    }\n  };\n\n  Node.prototype.draw = function () {\n    this.drawScene();\n    this.drawHit();\n    return this;\n  };\n\n  Node.prototype._createDragElement = function (evt) {\n    var pointerId = evt ? evt.pointerId : undefined;\n    var stage = this.getStage();\n    var ap = this.getAbsolutePosition();\n    var pos = stage._getPointerById(pointerId) || stage._changedPointerPositions[0] || ap;\n\n    DragAndDrop_1.DD._dragElements.set(this._id, {\n      node: this,\n      startPointerPos: pos,\n      offset: {\n        x: pos.x - ap.x,\n        y: pos.y - ap.y\n      },\n      dragStatus: 'ready',\n      pointerId: pointerId\n    });\n  };\n\n  Node.prototype.startDrag = function (evt, bubbleEvent) {\n    if (bubbleEvent === void 0) {\n      bubbleEvent = true;\n    }\n\n    if (!DragAndDrop_1.DD._dragElements.has(this._id)) {\n      this._createDragElement(evt);\n    }\n\n    var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n\n    elem.dragStatus = 'dragging';\n    this.fire('dragstart', {\n      type: 'dragstart',\n      target: this,\n      evt: evt && evt.evt\n    }, bubbleEvent);\n  };\n\n  Node.prototype._setDragPosition = function (evt, elem) {\n    var pos = this.getStage()._getPointerById(elem.pointerId);\n\n    if (!pos) {\n      return;\n    }\n\n    var newNodePos = {\n      x: pos.x - elem.offset.x,\n      y: pos.y - elem.offset.y\n    };\n    var dbf = this.dragBoundFunc();\n\n    if (dbf !== undefined) {\n      var bounded = dbf.call(this, newNodePos, evt);\n\n      if (!bounded) {\n        Util_1.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n      } else {\n        newNodePos = bounded;\n      }\n    }\n\n    if (!this._lastPos || this._lastPos.x !== newNodePos.x || this._lastPos.y !== newNodePos.y) {\n      this.setAbsolutePosition(newNodePos);\n\n      if (this.getLayer()) {\n        this.getLayer().batchDraw();\n      } else if (this.getStage()) {\n        this.getStage().batchDraw();\n      }\n    }\n\n    this._lastPos = newNodePos;\n  };\n\n  Node.prototype.stopDrag = function (evt) {\n    var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n\n    if (elem) {\n      elem.dragStatus = 'stopped';\n    }\n\n    DragAndDrop_1.DD._endDragBefore(evt);\n\n    DragAndDrop_1.DD._endDragAfter(evt);\n  };\n\n  Node.prototype.setDraggable = function (draggable) {\n    this._setAttr('draggable', draggable);\n\n    this._dragChange();\n  };\n\n  Node.prototype.isDragging = function () {\n    var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n\n    return elem ? elem.dragStatus === 'dragging' : false;\n  };\n\n  Node.prototype._listenDrag = function () {\n    this._dragCleanup();\n\n    this.on('mousedown.konva touchstart.konva', function (evt) {\n      var _this = this;\n\n      var shouldCheckButton = evt.evt['button'] !== undefined;\n      var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n\n      if (!canDrag) {\n        return;\n      }\n\n      if (this.isDragging()) {\n        return;\n      }\n\n      var hasDraggingChild = false;\n\n      DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n        if (_this.isAncestorOf(elem.node)) {\n          hasDraggingChild = true;\n        }\n      });\n\n      if (!hasDraggingChild) {\n        this._createDragElement(evt);\n      }\n    });\n  };\n\n  Node.prototype._dragChange = function () {\n    if (this.attrs.draggable) {\n      this._listenDrag();\n    } else {\n      this._dragCleanup();\n\n      var stage = this.getStage();\n\n      if (!stage) {\n        return;\n      }\n\n      var dragElement = DragAndDrop_1.DD._dragElements.get(this._id);\n\n      var isDragging = dragElement && dragElement.dragStatus === 'dragging';\n      var isReady = dragElement && dragElement.dragStatus === 'ready';\n\n      if (isDragging) {\n        this.stopDrag();\n      } else if (isReady) {\n        DragAndDrop_1.DD._dragElements.delete(this._id);\n      }\n    }\n  };\n\n  Node.prototype._dragCleanup = function () {\n    this.off('mousedown.konva');\n    this.off('touchstart.konva');\n  };\n\n  Node.create = function (data, container) {\n    if (Util_1.Util._isString(data)) {\n      data = JSON.parse(data);\n    }\n\n    return this._createNode(data, container);\n  };\n\n  Node._createNode = function (obj, container) {\n    var className = Node.prototype.getClassName.call(obj),\n        children = obj.children,\n        no,\n        len,\n        n;\n\n    if (container) {\n      obj.attrs.container = container;\n    }\n\n    if (!Global_1._NODES_REGISTRY[className]) {\n      Util_1.Util.warn('Can not find a node with class name \"' + className + '\". Fallback to \"Shape\".');\n      className = 'Shape';\n    }\n\n    var Class = Global_1._NODES_REGISTRY[className];\n    no = new Class(obj.attrs);\n\n    if (children) {\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        no.add(Node._createNode(children[n]));\n      }\n    }\n\n    return no;\n  };\n\n  return Node;\n}();\n\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n  if (this._batchingTransformChange) {\n    this._needClearTransformCache = true;\n    return;\n  }\n\n  this._clearCache(TRANSFORM);\n\n  this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n  this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n  this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n  this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nvar addGetterSetter = Factory_1.Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\naddGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\naddGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\naddGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\naddGetterSetter(Node, 'listening', true, Validators_1.getBooleanValidator());\naddGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\naddGetterSetter(Node, 'filters', null, function (val) {\n  this._filterUpToDate = false;\n  return val;\n});\naddGetterSetter(Node, 'visible', true, Validators_1.getBooleanValidator());\naddGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n  rotateDeg: 'rotate',\n  setRotationDeg: 'setRotation',\n  getRotationDeg: 'getRotation'\n});\nUtil_1.Collection.mapMethods(Node);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Global_1 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n  return dummyContext;\n}\n\nexports.shapes = {};\n\nfunction _fillFunc(context) {\n  context.fill();\n}\n\nfunction _strokeFunc(context) {\n  context.stroke();\n}\n\nfunction _fillFuncHit(context) {\n  context.fill();\n}\n\nfunction _strokeFuncHit(context) {\n  context.stroke();\n}\n\nfunction _clearHasShadowCache() {\n  this._clearCache(HAS_SHADOW);\n}\n\nfunction _clearGetShadowRGBACache() {\n  this._clearCache(SHADOW_RGBA);\n}\n\nfunction _clearFillPatternCache() {\n  this._clearCache(patternImage);\n}\n\nfunction _clearLinearGradientCache() {\n  this._clearCache(linearGradient);\n}\n\nfunction _clearRadialGradientCache() {\n  this._clearCache(radialGradient);\n}\n\nvar Shape = function (_super) {\n  __extends(Shape, _super);\n\n  function Shape(config) {\n    var _this = _super.call(this, config) || this;\n\n    var key;\n\n    while (true) {\n      key = Util_1.Util.getRandomColor();\n\n      if (key && !(key in exports.shapes)) {\n        break;\n      }\n    }\n\n    _this.colorKey = key;\n    exports.shapes[key] = _this;\n    return _this;\n  }\n\n  Shape.prototype.getContext = function () {\n    return this.getLayer().getContext();\n  };\n\n  Shape.prototype.getCanvas = function () {\n    return this.getLayer().getCanvas();\n  };\n\n  Shape.prototype.getSceneFunc = function () {\n    return this.attrs.sceneFunc || this['_sceneFunc'];\n  };\n\n  Shape.prototype.getHitFunc = function () {\n    return this.attrs.hitFunc || this['_hitFunc'];\n  };\n\n  Shape.prototype.hasShadow = function () {\n    return this._getCache(HAS_SHADOW, this._hasShadow);\n  };\n\n  Shape.prototype._hasShadow = function () {\n    return this.shadowEnabled() && this.shadowOpacity() !== 0 && !!(this.shadowColor() || this.shadowBlur() || this.shadowOffsetX() || this.shadowOffsetY());\n  };\n\n  Shape.prototype._getFillPattern = function () {\n    return this._getCache(patternImage, this.__getFillPattern);\n  };\n\n  Shape.prototype.__getFillPattern = function () {\n    if (this.fillPatternImage()) {\n      var ctx = getDummyContext();\n      var pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n\n      if (pattern && pattern.setTransform) {\n        pattern.setTransform({\n          a: this.fillPatternScaleX(),\n          b: 0,\n          c: 0,\n          d: this.fillPatternScaleY(),\n          e: 0,\n          f: 0\n        });\n      }\n\n      return pattern;\n    }\n  };\n\n  Shape.prototype._getLinearGradient = function () {\n    return this._getCache(linearGradient, this.__getLinearGradient);\n  };\n\n  Shape.prototype.__getLinearGradient = function () {\n    var colorStops = this.fillLinearGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillLinearGradientStartPoint();\n      var end = this.fillLinearGradientEndPoint();\n      var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype._getRadialGradient = function () {\n    return this._getCache(radialGradient, this.__getRadialGradient);\n  };\n\n  Shape.prototype.__getRadialGradient = function () {\n    var colorStops = this.fillRadialGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillRadialGradientStartPoint();\n      var end = this.fillRadialGradientEndPoint();\n      var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype.getShadowRGBA = function () {\n    return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n  };\n\n  Shape.prototype._getShadowRGBA = function () {\n    if (this.hasShadow()) {\n      var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n      return 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + rgba.a * (this.shadowOpacity() || 1) + ')';\n    }\n  };\n\n  Shape.prototype.hasFill = function () {\n    var _this = this;\n\n    return this._calculate('hasFill', ['fillEnabled', 'fill', 'fillPatternImage', 'fillLinearGradientColorStops', 'fillRadialGradientColorStops'], function () {\n      return _this.fillEnabled() && !!(_this.fill() || _this.fillPatternImage() || _this.fillLinearGradientColorStops() || _this.fillRadialGradientColorStops());\n    });\n  };\n\n  Shape.prototype.hasStroke = function () {\n    var _this = this;\n\n    return this._calculate('hasStroke', ['strokeEnabled', 'strokeWidth', 'stroke', 'strokeLinearGradientColorStops'], function () {\n      return _this.strokeEnabled() && _this.strokeWidth() && !!(_this.stroke() || _this.strokeLinearGradientColorStops());\n    });\n  };\n\n  Shape.prototype.hasHitStroke = function () {\n    var width = this.hitStrokeWidth();\n\n    if (width === 'auto') {\n      return this.hasStroke();\n    }\n\n    return this.strokeEnabled() && !!width;\n  };\n\n  Shape.prototype.intersects = function (point) {\n    var stage = this.getStage(),\n        bufferHitCanvas = stage.bufferHitCanvas,\n        p;\n    bufferHitCanvas.getContext().clear();\n    this.drawHit(bufferHitCanvas);\n    p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n    return p[3] > 0;\n  };\n\n  Shape.prototype.destroy = function () {\n    Node_1.Node.prototype.destroy.call(this);\n    delete exports.shapes[this.colorKey];\n    delete this.colorKey;\n    return this;\n  };\n\n  Shape.prototype._useBufferCanvas = function (forceFill) {\n    var _a;\n\n    if (!this.getStage()) {\n      return false;\n    }\n\n    var perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n\n    if (!perfectDrawEnabled) {\n      return false;\n    }\n\n    var hasFill = forceFill || this.hasFill();\n    var hasStroke = this.hasStroke();\n    var isTransparent = this.getAbsoluteOpacity() !== 1;\n\n    if (hasFill && hasStroke && isTransparent) {\n      return true;\n    }\n\n    var hasShadow = this.hasShadow();\n    var strokeForShadow = this.shadowForStrokeEnabled();\n\n    if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Shape.prototype.setStrokeHitEnabled = function (val) {\n    Util_1.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n\n    if (val) {\n      this.hitStrokeWidth('auto');\n    } else {\n      this.hitStrokeWidth(0);\n    }\n  };\n\n  Shape.prototype.getStrokeHitEnabled = function () {\n    if (this.hitStrokeWidth() === 0) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  Shape.prototype.getSelfRect = function () {\n    var size = this.size();\n    return {\n      x: this._centroid ? -size.width / 2 : 0,\n      y: this._centroid ? -size.height / 2 : 0,\n      width: size.width,\n      height: size.height\n    };\n  };\n\n  Shape.prototype.getClientRect = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    var skipTransform = config.skipTransform;\n    var relativeTo = config.relativeTo;\n    var fillRect = this.getSelfRect();\n    var applyStroke = !config.skipStroke && this.hasStroke();\n    var strokeWidth = applyStroke && this.strokeWidth() || 0;\n    var fillAndStrokeWidth = fillRect.width + strokeWidth;\n    var fillAndStrokeHeight = fillRect.height + strokeWidth;\n    var applyShadow = !config.skipShadow && this.hasShadow();\n    var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n    var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n    var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n    var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n    var blurRadius = applyShadow && this.shadowBlur() || 0;\n    var width = preWidth + blurRadius * 2;\n    var height = preHeight + blurRadius * 2;\n    var roundingOffset = 0;\n\n    if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n      roundingOffset = 1;\n    }\n\n    var rect = {\n      width: width + roundingOffset,\n      height: height + roundingOffset,\n      x: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetX, 0) + fillRect.x,\n      y: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetY, 0) + fillRect.y\n    };\n\n    if (!skipTransform) {\n      return this._transformedRect(rect, relativeTo);\n    }\n\n    return rect;\n  };\n\n  Shape.prototype.drawScene = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer.getCanvas(),\n        context = canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        drawFunc = this.getSceneFunc(),\n        hasShadow = this.hasShadow(),\n        stage,\n        bufferCanvas,\n        bufferContext;\n\n    var caching = canvas.isCache;\n    var skipBuffer = canvas.isCache;\n    var cachingSelf = top === this;\n\n    if (!this.isVisible() && !caching) {\n      return this;\n    }\n\n    if (cachedCanvas) {\n      context.save();\n      var m = this.getAbsoluteTransform(top).getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n      this._drawCachedSceneCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    if (this._useBufferCanvas() && !skipBuffer) {\n      stage = this.getStage();\n      bufferCanvas = stage.bufferCanvas;\n      bufferContext = bufferCanvas.getContext();\n      bufferContext.clear();\n      bufferContext.save();\n\n      bufferContext._applyLineJoin(this);\n\n      var o = this.getAbsoluteTransform(top).getMatrix();\n      bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n      drawFunc.call(this, bufferContext, this);\n      bufferContext.restore();\n      var ratio = bufferCanvas.pixelRatio;\n\n      if (hasShadow) {\n        context._applyShadow(this);\n      }\n\n      context._applyOpacity(this);\n\n      context._applyGlobalCompositeOperation(this);\n\n      context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n    } else {\n      context._applyLineJoin(this);\n\n      if (!cachingSelf) {\n        var o = this.getAbsoluteTransform(top).getMatrix();\n        context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n\n        context._applyOpacity(this);\n\n        context._applyGlobalCompositeOperation(this);\n      }\n\n      if (hasShadow) {\n        context._applyShadow(this);\n      }\n\n      drawFunc.call(this, context, this);\n    }\n\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHit = function (can, top) {\n    if (!this.shouldDrawHit(top)) {\n      return this;\n    }\n\n    var layer = this.getLayer(),\n        canvas = can || layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        drawFunc = this.hitFunc() || this.sceneFunc(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (!this.colorKey) {\n      console.log(this);\n      Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n    }\n\n    if (cachedHitCanvas) {\n      context.save();\n      var m = this.getAbsoluteTransform(top).getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n      this._drawCachedHitCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    context._applyLineJoin(this);\n\n    var selfCache = this === top;\n\n    if (!selfCache) {\n      var o = this.getAbsoluteTransform(top).getMatrix();\n      context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n    }\n\n    drawFunc.call(this, context, this);\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n    if (alphaThreshold === void 0) {\n      alphaThreshold = 0;\n    }\n\n    var cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = this._getCachedSceneCanvas(),\n        hitCanvas = cachedCanvas.hit,\n        hitContext = hitCanvas.getContext(),\n        hitWidth = hitCanvas.getWidth(),\n        hitHeight = hitCanvas.getHeight(),\n        hitImageData,\n        hitData,\n        len,\n        rgbColorKey,\n        i,\n        alpha;\n\n    hitContext.clear();\n    hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n\n    try {\n      hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n      hitData = hitImageData.data;\n      len = hitData.length;\n      rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n\n      for (i = 0; i < len; i += 4) {\n        alpha = hitData[i + 3];\n\n        if (alpha > alphaThreshold) {\n          hitData[i] = rgbColorKey.r;\n          hitData[i + 1] = rgbColorKey.g;\n          hitData[i + 2] = rgbColorKey.b;\n          hitData[i + 3] = 255;\n        } else {\n          hitData[i + 3] = 0;\n        }\n      }\n\n      hitContext.putImageData(hitImageData, 0, 0);\n    } catch (e) {\n      Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n    }\n\n    return this;\n  };\n\n  Shape.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  return Shape;\n}(Node_1.Node);\n\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n\nGlobal_1._registerNode(Shape);\n\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringOrGradientValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringOrGradientValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n  dashArray: 'dash',\n  getDashArray: 'getDash',\n  setDashArray: 'getDash',\n  drawFunc: 'sceneFunc',\n  getDrawFunc: 'getSceneFunc',\n  setDrawFunc: 'setSceneFunc',\n  drawHitFunc: 'hitFunc',\n  getDrawHitFunc: 'getHitFunc',\n  setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);","/*!\n * Paper.js v0.12.11 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Fri Jun 19 19:14:33 2020 +0200\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n      document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n        array = [],\n        slice = array.slice,\n        create = Object.create,\n        describe = Object.getOwnPropertyDescriptor,\n        define = Object.defineProperty,\n        forEach = array.forEach || function (iter, bind) {\n      for (var i = 0, l = this.length; i < l; i++) {\n        iter.call(bind, this[i], i, this);\n      }\n    },\n        forIn = function (iter, bind) {\n      for (var i in this) {\n        if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n      }\n    },\n        set = Object.assign || function (dst) {\n      for (var i = 1, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n\n        for (var key in src) {\n          if (src.hasOwnProperty(key)) dst[key] = src[key];\n        }\n      }\n\n      return dst;\n    },\n        each = function (obj, iter, bind) {\n      if (obj) {\n        var desc = describe(obj, 'length');\n        (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n      }\n\n      return bind;\n    };\n\n    function inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n            res = val,\n            prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n            bean;\n\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n\n          define(dest, name, res);\n        }\n      }\n\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n\n        for (var name in beansNames) {\n          var part = beansNames[name],\n              set = dest['set' + part],\n              get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n\n      return dest;\n    }\n\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n\n      return this;\n    }\n\n    return inject(Base, {\n      inject: function (src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n              beans = src.beans,\n              preserve = src.preserve;\n          if (statics !== src) inject(this.prototype, src, src.enumerable, beans, preserve);\n          inject(this, statics, null, beans, preserve);\n        }\n\n        for (var i = 1, l = arguments.length; i < l; i++) this.inject(arguments[i]);\n\n        return this;\n      },\n      extend: function () {\n        var base = this,\n            ctor,\n            proto;\n\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n        inject(ctor, this);\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function () {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n\n          if (src) {\n            inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n\n        return this;\n      },\n      extend: function () {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function (iter, bind) {\n        return each(this, iter, bind);\n      },\n      clone: function () {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function (obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function (obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function (a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function (list, begin, end) {\n          return slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function () {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function () {\n      return this._class || '';\n    },\n    importJSON: function (json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function (options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function () {\n      return Base.serialize(this);\n    },\n    set: function (props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n            name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function (obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n                length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n      read: function (list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n\n        var proto = this.prototype,\n            readIndex = proto._readIndex,\n            begin = start || readIndex && list.__index || 0,\n            length = list.length,\n            obj = list[begin];\n        amount = amount || length - begin;\n\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n\n          obj.__read = undefined;\n        }\n\n        return obj;\n      },\n      peek: function (list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function (list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function (list, start, options, amount) {\n        var res = [],\n            entry,\n            begin = start || 0,\n            end = amount ? begin + amount : list.length;\n\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n\n        return res;\n      },\n      readNamed: function (list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n            hasValue = value !== undefined;\n\n        if (hasValue) {\n          var filtered = list.__filtered;\n\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n\n          filtered[name] = undefined;\n        }\n\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function (list, dest) {\n        var source = this.getSource(list),\n            that = this,\n            read = false;\n\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n\n              read = true;\n            }\n          });\n        }\n\n        return read;\n      },\n      getSource: function (list) {\n        var source = list.__source;\n\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n\n        return source;\n      },\n      getNamed: function (list, name) {\n        var source = this.getSource(list);\n\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function (list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function (dest, source, exclude, prioritize) {\n        var processed;\n\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n\n        if (prioritize) {\n          var keys = {};\n\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n\n          processed = keys;\n        }\n\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function (obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function (obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n            res;\n\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function (item, create) {\n              var id = '#' + item._id,\n                  ref = this.references[id];\n\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                    name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n\n              return ref;\n            }\n          };\n        }\n\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n\n          for (var i = 0, l = obj.length; i < l; i++) res[i] = Base.serialize(obj[i], options, compact, dictionary);\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function (json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n            isFirst = !_data,\n            hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n\n        if (Array.isArray(json)) {\n          var type = json[0],\n              isDictionary = type === 'dictionary';\n\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n\n          type = Base.exports[type];\n          res = [];\n\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n\n          if (type) {\n            var args = res;\n\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n\n          for (var key in json) res[key] = Base.deserialize(json[key], create, _data);\n        }\n\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function (obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function (json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n              obj = useTarget ? target : Base.create(ctor.prototype);\n\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n\n              if (useTarget) {\n                args = args.concat([{\n                  insert: true\n                }]);\n              }\n            }\n          }\n\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function (list, items) {\n        var itemsLength = items.length;\n\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n\n        return list;\n      },\n      splice: function (list, items, index, remove) {\n        var amount = items && items.length,\n            append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n\n        for (var i = 0; i < amount; i++) items[i]._index = index + i;\n\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n\n          for (var i = 0, l = removed.length; i < l; i++) removed[i]._index = undefined;\n\n          for (var i = index + amount, l = list.length; i < l; i++) list[i]._index = i;\n\n          return removed;\n        }\n      },\n      capitalize: function (str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function (str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function (str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n            entry = types && types[type],\n            handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n\n      return this;\n    },\n    off: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n\n      var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks && this._callbacks[type],\n          index;\n\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n\n      return this;\n    },\n    once: function (type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function (type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n          setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function (type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function (install) {\n      var types = this._eventTypes,\n          handlers = this._callbacks,\n          key = install ? 'install' : 'uninstall';\n\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n                func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n                name = isString ? entry : key,\n                part = Base.capitalize(name),\n                type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n\n            src['get' + part] = function () {\n              return this[name];\n            };\n\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n            os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n            platform = os === 'darwin' ? 'mac' : os,\n            agent = proto.agent = proto.browser = {\n          platform: platform\n        };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.11\",\n    getView: function () {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function () {\n      return this;\n    },\n    execute: function (code, options) {\n      var exports = paper.PaperScript.execute(code, this, options);\n      View.updateFocus();\n      return exports;\n    },\n    install: function (scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function () {\n            return that[key];\n          }\n        });\n      });\n\n      for (var key in this) if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n    },\n    setup: function (element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function (width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function () {\n      paper = this;\n    },\n    clear: function () {\n      var projects = this.projects,\n          tools = this.tools;\n\n      for (var i = projects.length - 1; i >= 0; i--) projects[i].remove();\n\n      for (var i = tools.length - 1; i >= 0; i--) tools[i].remove();\n    },\n    remove: function () {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function (id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function (activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function () {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function () {\n      return this._scope[this._reference] === this;\n    },\n    remove: function () {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function () {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function (items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(items1),\n          bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function (curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n            max = Math.max,\n            bounds = new Array(curves.length);\n\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n\n        return bounds;\n      }\n\n      var bounds1 = getBounds(curves1),\n          bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n            ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n            list = [];\n\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n\n        return list;\n      }\n\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function (boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n          allBounds = self ? boundsA : boundsA.concat(boundsB),\n          lengthA = boundsA.length,\n          lengthAll = allBounds.length;\n\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n            hi = indices.length;\n\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n\n        return lo - 1;\n      }\n\n      var pri0 = sweepVertical ? 1 : 0,\n          pri1 = pri0 + 2,\n          sec0 = sweepVertical ? 0 : 1,\n          sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n          allCollisions = new Array(lengthA);\n\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n            curBounds = allBounds[curIndex],\n            origIndex = self ? curIndex : curIndex - lengthA,\n            isCurrentA = curIndex < lengthA,\n            isCurrentB = self || !isCurrentA,\n            curCollisions = isCurrentA ? [] : null;\n\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n                curSec0 = curBounds[sec0];\n\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                  activeBounds = allBounds[activeIndex],\n                  isActiveA = activeIndex < lengthA,\n                  isActiveB = self || activeIndex >= lengthA;\n\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n\n          allCollisions[curIndex] = curCollisions;\n        }\n\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n              index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function (precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function (val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function (val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function (val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function (val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function (val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n\n    var abs = Math.abs,\n        sqrt = Math.sqrt,\n        pow = Math.pow,\n        log2 = Math.log2 || function (x) {\n      return Math.log(x) * Math.LOG2E;\n    },\n        EPSILON = 1e-12,\n        MACHINE_EPSILON = 1.12e-16;\n\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n            y = v - x,\n            hi = y + x,\n            lo = v - hi;\n        return [hi, lo];\n      }\n\n      var D = b * b - a * c,\n          E = b * b + a * c;\n\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n            bd = split(b),\n            cd = split(c),\n            p = b * b,\n            dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n            q = a * c,\n            dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n\n      return D;\n    }\n\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function (val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function (val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function (f, a, b, n) {\n        var x = abscissas[n - 2],\n            w = weights[n - 2],\n            A = (b - a) * 0.5,\n            B = A + a,\n            i = 0,\n            m = n + 1 >> 1,\n            sum = n & 1 ? w[i++] * f(B) : 0;\n\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n\n        return A * sum;\n      },\n      findRoot: function (f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n              dx = fx / df(x),\n              nx = x - dx;\n\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function (a, b, c, roots, min, max) {\n        var x1,\n            x2 = Infinity;\n\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n                R = b + (b < 0 ? -Q : Q);\n\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n\n        var count = 0,\n            boundless = min == null,\n            minB = min - EPSILON,\n            maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function (a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n            x,\n            b1,\n            c2,\n            qd,\n            q;\n\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n              r = pow(abs(t), 1 / 3),\n              s = t < 0 ? -1 : 1,\n              td = -qd / a,\n              rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n              x0 = x - s * rd;\n\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n            boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function (name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n\n        this._set(arg0, hasY ? arg1 : arg0);\n\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function (point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function () {\n      return new Point(this.x, this.y);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function (length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function () {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function (angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function () {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n            div = this.getLength() * point.getLength();\n\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function (angle) {\n      this._angle = angle;\n\n      if (!this.isZero()) {\n        var length = this.getLength();\n\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function () {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function () {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function () {\n      var args = arguments,\n          point = Point.read(args),\n          x = point.x - this.x,\n          y = point.y - this.y,\n          d = x * x + y * y,\n          squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function (length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n          scale = current !== 0 ? length / current : 0,\n          point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function (angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n          sin = Math.sin(angle),\n          cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function (matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function () {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this);\n    },\n    isClose: function () {\n      var args = arguments,\n          point = Point.read(args),\n          tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function () {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function () {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function () {\n      return isNaN(this.x) || isNaN(this.y);\n    },\n    isInQuadrant: function (q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function () {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function () {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function () {\n      var point = Point.read(arguments),\n          scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function () {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function () {\n        var args = arguments,\n            point1 = Point.read(args),\n            point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function () {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n\n      this._owner[this._setter](this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n\n      this._owner[this._setter](this);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n          reading = this.__read,\n          read = 0;\n\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n\n        this._set(arg0, hasHeight ? arg1 : arg0);\n\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n\n          read = 0;\n        }\n      }\n\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function (size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function () {\n      return new Size(this.width, this.height);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function () {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function () {\n      return isNaN(this.width) || isNaN(this.height);\n    },\n    statics: {\n      min: function (size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function (size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function () {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function () {\n      return this._width;\n    },\n    setWidth: function (width) {\n      this._width = width;\n\n      this._owner[this._setter](this);\n    },\n    getHeight: function () {\n      return this._height;\n    },\n    setHeight: function (height) {\n      this._height = height;\n\n      this._owner[this._setter](this);\n    }\n  });\n  var Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n          type = typeof arg0,\n          read;\n\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n            next = Base.peek(args),\n            x = frm.x,\n            y = frm.y,\n            width,\n            height;\n\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n\n        this._set(x, y, width, height);\n\n        read = args.__index;\n      }\n\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function (rect) {\n      var rt = Base.isPlainValue(rect) ? Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function (_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function () {\n      var size = Size.read(arguments),\n          sx = this._sx,\n          sy = this._sy,\n          w = size.width,\n          h = size.height;\n\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function () {\n      return this.x;\n    },\n    setLeft: function (left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function () {\n      return this.y;\n    },\n    setTop: function (top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function () {\n      return this.x + this.width;\n    },\n    setRight: function (right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function () {\n      return this.y + this.height;\n    },\n    setBottom: function (bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function () {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function (x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n\n        this.width = (x - this.x) * 2;\n      }\n\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function () {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function (y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n\n        this.height = (y - this.y) * 2;\n      }\n\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function () {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function () {\n      return this.width * this.height;\n    },\n    isEmpty: function () {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function (arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function (point) {\n      var x = point.x,\n          y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function (rect) {\n      var x = rect.x,\n          y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function () {\n      var rect = Rectangle.read(arguments),\n          epsilon = Base.read(arguments) || 0;\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function () {\n      var rect = Rectangle.read(arguments),\n          x1 = Math.max(this.x, rect.x),\n          y1 = Math.max(this.y, rect.y),\n          x2 = Math.min(this.x + this.width, rect.x + rect.width),\n          y2 = Math.min(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function () {\n      var rect = Rectangle.read(arguments),\n          x1 = Math.min(this.x, rect.x),\n          y1 = Math.min(this.y, rect.y),\n          x2 = Math.max(this.x + this.width, rect.x + rect.width),\n          y2 = Math.max(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function () {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n          y1 = Math.min(this.y, point.y),\n          x2 = Math.max(this.x + this.width, point.x),\n          y2 = Math.max(this.y + this.height, point.y);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function () {\n      var amount = Size.read(arguments),\n          hor = amount.width,\n          ver = amount.height;\n      return new Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function (hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n        xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n        y = parts[xFirst ? 1 : 0],\n        getX = 'get' + x,\n        getY = 'get' + y,\n        setX = 'set' + x,\n        setY = 'set' + y,\n        get = 'get' + part,\n        set = 'set' + part;\n\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n  var LinkedRectangle = Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n          internal = '_' + key;\n\n      this['get' + part] = function () {\n        return this[internal];\n      };\n\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function () {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function (selected) {\n        var owner = this._owner;\n\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n          count = args.length,\n          ok = true;\n\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n\n      return this;\n    },\n    set: '#initialize',\n    _set: function (a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function () {\n      var owner = this._owner;\n\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function (mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function (_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function (recursively, _setApplyMatrix) {\n      var owner = this._owner;\n\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n\n      return false;\n    },\n    translate: function () {\n      var point = Point.read(arguments),\n          x = point.x,\n          y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n\n      this._changed();\n\n      return this;\n    },\n    scale: function () {\n      var args = arguments,\n          scale = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    rotate: function (angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n          x = center.x,\n          y = center.y,\n          cos = Math.cos(angle),\n          sin = Math.sin(angle),\n          tx = x - x * cos + y * sin,\n          ty = y - x * sin - y * cos,\n          a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n\n      this._changed();\n\n      return this;\n    },\n    shear: function () {\n      var args = arguments,\n          shear = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      if (center) this.translate(center);\n      var a = this._a,\n          b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n\n      this._changed();\n\n      return this;\n    },\n    skew: function () {\n      var args = arguments,\n          skew = Point.read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      }),\n          toRadians = Math.PI / 180,\n          shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    prepend: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n            b1 = this._b,\n            c1 = this._c,\n            d1 = this._d,\n            tx1 = this._tx,\n            ty1 = this._ty,\n            a2 = mx._a,\n            b2 = mx._c,\n            c2 = mx._b,\n            d2 = mx._d,\n            tx2 = mx._tx,\n            ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n\n      return this;\n    },\n    appended: function (mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function (mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function () {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n\n      return res;\n    },\n    inverted: function () {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function () {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function () {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function () {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function () {\n      return !this.isInvertible();\n    },\n    transform: function (src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function (point, dest, _dontNotify) {\n      var x = point.x,\n          y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function (src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n            y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n\n      return dst;\n    },\n    _transformCorners: function (rect) {\n      var x1 = rect.x,\n          y1 = rect.y,\n          x2 = x1 + rect.width,\n          y2 = y1 + rect.height,\n          coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function (bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n          min = coords.slice(0, 2),\n          max = min.slice();\n\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n            j = i & 1;\n\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n\n      if (!dest) dest = new Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function () {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function (point, dest, _dontNotify) {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          tx = this._tx,\n          ty = this._ty,\n          det = a * d - b * c,\n          res = null;\n\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n            y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n\n      return res;\n    },\n    decompose: function () {\n      var a = this._a,\n          b = this._b,\n          c = this._c,\n          d = this._d,\n          det = a * d - b * c,\n          sqrt = Math.sqrt,\n          atan2 = Math.atan2,\n          degrees = 180 / Math.PI,\n          rotate,\n          scale,\n          skew;\n\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function () {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function () {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function () {\n      return this.decompose().scaling;\n    },\n    getRotation: function () {\n      return this.decompose().rotation;\n    },\n    applyToContext: function (ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n        prop = '_' + key;\n\n    this['get' + part] = function () {\n      return this[prop];\n    };\n\n    this['set' + part] = function (value) {\n      this[prop] = value;\n\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function () {\n      return new Point(this._px, this._py);\n    },\n    getVector: function () {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function () {\n      return this.getVector().getLength();\n    },\n    intersect: function (line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function (point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function (point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function (point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function (line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function (line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function (p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n\n        var cross = v1x * v2y - v1y * v2x;\n\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n              dy = p1y - p2y,\n              u1 = (v2x * dy - v2y * dx) / cross,\n              u2 = (v1x * dy - v1y * dx) / cross,\n              epsilon = 1e-12,\n              uMin = -epsilon,\n              uMax = 1 + epsilon;\n\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function (px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        var v2x = x - px,\n            v2y = y - py,\n            ccw = v2x * vy - v2y * vx;\n\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function (px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function (px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function (flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n\n      var changes = this._changes;\n\n      if (changes && item) {\n        var changesById = this._changesById,\n            id = item._id,\n            entry = changesById[id];\n\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function () {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) children[i].remove();\n    },\n    isEmpty: function () {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function () {\n      return this._view;\n    },\n    getCurrentStyle: function () {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function (style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    getOptions: function () {\n      return this._scope.settings;\n    },\n    getLayers: function () {\n      return this._children;\n    },\n    getActiveLayer: function () {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function () {\n      var definitions = [],\n          ids = {};\n      this.getItems({\n        class: SymbolItem,\n        match: function (item) {\n          var definition = item._definition,\n              id = definition._id;\n\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function () {\n      var selectionItems = this._selectionItems,\n          items = [];\n\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n            selection = item._selection;\n\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n\n      return items;\n    },\n    _updateSelection: function (item) {\n      var id = item._id,\n          selectionItems = this._selectionItems;\n\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function () {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(true);\n    },\n    deselectAll: function () {\n      var selectionItems = this._selectionItems;\n\n      for (var i in selectionItems) selectionItems[i].setFullySelected(false);\n    },\n    addLayer: function (layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function (index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n\n        Base.splice(this._children, [layer], index, 0);\n\n        layer._setProject(this, true);\n\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n\n      return layer;\n    },\n    _insertItem: function (index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function (json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function (type) {\n      var sets = this._removeSets;\n\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n\n            item.remove();\n          }\n\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function (ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n          param = new Base({\n        offset: new Point(0, 0),\n        pixelRatio: pixelRatio,\n        viewMatrix: matrix.isIdentity() ? null : matrix,\n        matrices: [new Matrix()],\n        updateMatrix: true\n      });\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n\n      ctx.restore();\n\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n            size = this._scope.settings.handleSize,\n            version = this._updateVersion;\n\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function (type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function (type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function () {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function () {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function (props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n          internal = hasProps && props.internal === true,\n          matrix = this._matrix = new Matrix(),\n          project = hasProps && props.project || paper.project,\n          settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert === true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n\n      if (hasProps && props !== Item.NO_INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n\n      return hasProps;\n    },\n    _serialize: function (options, dictionary) {\n      var props = {},\n          that = this;\n\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function (flags) {\n      var symbol = this._symbol,\n          cacheParent = this._parent || symbol,\n          project = this._project;\n\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function () {\n      return this._id;\n    },\n    getName: function () {\n      return this._name;\n    },\n    setName: function (name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n\n      var owner = this._getOwner();\n\n      if (name && owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n\n      this._name = name || undefined;\n\n      this._changed(256);\n    },\n    getStyle: function () {\n      return this._style;\n    },\n    setStyle: function (style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n        key = '_' + name,\n        flags = {\n      locked: 256,\n      visible: 265\n    };\n\n    this['get' + part] = function () {\n      return this[key];\n    };\n\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n\n        if (project) {\n          project._updateSelection(this);\n\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) if (children[i].isSelected()) return true;\n      }\n\n      return !!(this._selection & 1);\n    },\n    setSelected: function (selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) children[i].setSelected(selected);\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function () {\n      var children = this._children,\n          selected = !!(this._selection & 1);\n\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) if (!children[i].isFullySelected()) return false;\n\n        return true;\n      }\n\n      return selected;\n    },\n    setFullySelected: function (selected) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(selected);\n      }\n\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function () {\n      return this._clipMask;\n    },\n    setClipMask: function (clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n\n        this._changed(257);\n\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function () {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function (data) {\n      this._data = data;\n    },\n    getPosition: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n\n      var position = this._position || (this._position = this._getPositionFromBounds());\n\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function () {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function (bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function () {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function () {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function (matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n          opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function () {\n      var rect = Rectangle.read(arguments),\n          bounds = this.getBounds(),\n          _matrix = this._matrix,\n          matrix = new Matrix(),\n          center = rect.getCenter();\n      matrix.translate(center);\n\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n\n          bounds = this.getBounds();\n        }\n\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function (matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new Rectangle();\n\n      Item._updateBoundsCache(this, options.cacheItem);\n\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function (options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function (matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n\n      var internal = options.internal && !noInternal,\n          cacheItem = options.cacheItem,\n          _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n          cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n          bounds = this._bounds;\n\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n\n      var res = this._getBounds(matrix || _matrix, options),\n          rect = res.rect || res,\n          style = this._style,\n          nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function (matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n          mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function (parent, item) {\n        if (parent && item) {\n          var id = item._id,\n              ref = parent._boundsCache = parent._boundsCache || {\n            ids: {},\n            list: []\n          };\n\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function (item) {\n        var cache = item._boundsCache;\n\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function (items, matrix, options) {\n        var x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2,\n            nonscaling = false;\n        options = options || {};\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n                rect = bounds.rect;\n\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n\n        return {\n          rect: isFinite(x1) ? new Rectangle(x1, y1, x2 - x1, y2 - y1) : new Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function () {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function () {\n      var decomposed = this._decompose();\n\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function () {\n      var decomposed = this._decompose(),\n          s = decomposed && decomposed.scaling;\n\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n            decomposed = this._decomposed,\n            matrix = new Matrix(),\n            isZero = Numerical.isZero;\n\n        if (isZero(current.x) || isZero(current.y)) {\n          matrix.translate(decomposed.translation);\n\n          if (rotation) {\n            matrix.rotate(rotation);\n          }\n\n          matrix.scale(scaling.x, scaling.y);\n\n          this._matrix.set(matrix);\n        } else {\n          var center = this.getPosition(true);\n          matrix.translate(center);\n          if (rotation) matrix.rotate(rotation);\n          matrix.scale(scaling.x / current.x, scaling.y / current.y);\n          if (rotation) matrix.rotate(-rotation);\n          matrix.translate(center.negate());\n          this.transform(matrix);\n        }\n\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function (_dontClone) {\n      var matrix = this._globalMatrix;\n\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n\n            break;\n          }\n\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function () {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function () {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function (apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function () {\n      return this._project;\n    },\n    _setProject: function (project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n\n        for (var i = 0, l = children && children.length; i < l; i++) children[i]._setProject(project);\n\n        installEvents = true;\n      }\n\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n\n      var children = this._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) children[i]._installEvents(install);\n    },\n    getLayer: function () {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n\n      return null;\n    },\n    getParent: function () {\n      return this._parent;\n    },\n    setParent: function (item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function () {\n      return this._children;\n    },\n    setChildren: function (items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function () {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function () {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function () {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function () {\n      var owner = this._getOwner();\n\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    equals: function (item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function (item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function (options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n          children = this._children,\n          insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n          deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n          parent = this._parent;\n\n      if (name && parent) {\n        var children = parent._children,\n            orig = name,\n            i = 1;\n\n        while (children[name]) name = orig + ' ' + i++;\n\n        if (name !== orig) copy.setName(name);\n      }\n\n      return copy;\n    },\n    copyContent: function (source) {\n      var children = source._children;\n\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function (source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n          name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function (resolution, insert) {\n      var bounds = this.getStrokeBounds(),\n          scale = (resolution || this.getView().getResolution()) / 72,\n          topLeft = bounds.getTopLeft().floor(),\n          bottomRight = bounds.getBottomRight().ceil(),\n          size = new Size(bottomRight.subtract(topLeft)),\n          raster = new Raster(Item.NO_INSERT);\n\n      if (!size.isZero()) {\n        var canvas = CanvasProvider.getCanvas(size.multiply(scale)),\n            ctx = canvas.getContext('2d'),\n            matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n        raster.setCanvas(canvas);\n      }\n\n      raster.transform(new Matrix().translate(topLeft.add(size.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) raster.insertAbove(this);\n      return raster;\n    },\n    contains: function () {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function (point) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n\n        return false;\n      }\n\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function () {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function (item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n\n    function hitTestAll() {\n      var args = arguments,\n          point = Point.read(args),\n          options = HitResult.getOptions(args),\n          all = [];\n\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n\n      return all;\n    }\n\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n\n          if (res && !options.all) return res;\n        }\n      }\n\n      return null;\n    }\n\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function (point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n\n      var matrix = this._matrix,\n          viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n          tolerance = Math.max(options.tolerance, 1e-12),\n          tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options.class && !(this instanceof options.class)),\n          match = options.match,\n          that = this,\n          bounds,\n          res;\n\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n\n      var checkPosition = options.position,\n          checkCenter = options.center,\n          checkBounds = options.bounds;\n\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n\n        res = filter(res);\n      }\n\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n\n      return res;\n    },\n    _hitTestSelf: function (point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function (name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n                val2 = obj2[i];\n\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      }\n\n      var type = typeof name;\n\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n              overlapping = obj && obj.overlapping,\n              inside = obj && obj.inside,\n              bounds = overlapping || inside,\n              rect = bounds && Rectangle.read([bounds]);\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n\n        var children = item._children,\n            items = param.items,\n            rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n              childMatrix = matrix && matrix.appended(child._matrix),\n              add = true;\n\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n\n          if (firstOnly && items.length > 0) break;\n        }\n\n        return items;\n      }\n    }\n  }, {\n    importJSON: function (json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function (item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function (index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function (items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function (index, items) {\n      var children = this._children;\n\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n              id = item && item._id;\n\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n\n            inserted[id] = true;\n          }\n        }\n\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n            notifySelf = project._changes;\n\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n              name = item._name;\n          item._parent = this;\n\n          item._setProject(project, true);\n\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n\n        this._changed(11);\n      } else {\n        items = null;\n      }\n\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function (item, offset) {\n      var owner = item && item._getOwner(),\n          res = item !== this && owner ? this : null;\n\n      if (res) {\n        res._remove(false, true);\n\n        owner._insertItem(item._index + offset, res);\n      }\n\n      return res;\n    },\n    insertAbove: function (item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function (item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function () {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function () {\n      var owner = this._getOwner();\n\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function (item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function (owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function (owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function (options) {\n      var children = this._children;\n\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n\n        return child;\n      }\n\n      return this;\n    },\n    _removeNamed: function () {\n      var owner = this._getOwner();\n\n      if (owner) {\n        var children = owner._children,\n            namedChildren = owner._namedChildren,\n            name = this._name,\n            namedArray = namedChildren[name],\n            index = namedArray ? namedArray.indexOf(this) : -1;\n\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function (notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n          project = this._project,\n          index = this._index;\n\n      if (this._style) this._style._dispose();\n\n      if (owner) {\n        if (this._name) this._removeNamed();\n\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n\n        this._installEvents(false);\n\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n\n      return false;\n    },\n    remove: function () {\n      return this._remove(true, true);\n    },\n    replaceWith: function (item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function (start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function () {\n      if (this._children) {\n        this._children.reverse();\n\n        for (var i = 0, l = this._children.length; i < l; i++) this._children[i]._index = i;\n\n        this._changed(11);\n      }\n    },\n    isEmpty: function (recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n      return !numChildren;\n    },\n    isEditable: function () {\n      var item = this;\n\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n\n      return true;\n    },\n    hasFill: function () {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function () {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function () {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function (item) {\n      function getList(item) {\n        var list = [];\n\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n\n        return list;\n      }\n\n      var list1 = getList(this),\n          list2 = getList(item);\n\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n\n      return 0;\n    },\n    hasChildren: function () {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function () {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function (item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function (item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function (item) {\n      return this._parent === item;\n    },\n    isChild: function (item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function (item) {\n      var parent = this;\n\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n\n      return false;\n    },\n    isAncestor: function (item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function (item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function (item) {\n      var parent = this._parent;\n\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function (matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n          transformMatrix = matrix && !matrix.isIdentity(),\n          applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n\n        _matrix.prepend(matrix, true);\n\n        var style = this._style,\n            fillColor = style.getFillColor(true),\n            strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n\n        _matrix.reset(true);\n\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n\n      var bounds = this._bounds,\n          position = this._position;\n\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n\n      var decomp = transformMatrix && bounds && matrix.decompose();\n\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n\n            matrix._transformBounds(rect, rect);\n          }\n        }\n\n        this._bounds = bounds;\n\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n\n      return this;\n    },\n    _transformContent: function (matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n\n        return true;\n      }\n    },\n    globalToLocal: function () {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function () {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function (rectangle, fill) {\n      rectangle = Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n          itemRatio = bounds.height / bounds.width,\n          rectRatio = rectangle.height / rectangle.width,\n          scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n          newBounds = new Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function (ctx, param, viewMatrix) {\n      var style = this._style,\n          matrix = this._matrix;\n\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n            strokeCap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n              dashOffset = style.getDashOffset();\n\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n            mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n            blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n            offset = mx.transform(this.getShadowOffset());\n\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function (ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n          viewMatrix = param.viewMatrix,\n          matrix = this._matrix,\n          globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n\n      var blendMode = this._blendMode,\n          opacity = Numerical.clamp(this._opacity, 0, 1),\n          normalBlend = blendMode === 'normal',\n          nativeBlend = BlendMode.nativeModes[blendMode],\n          direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n          pixelRatio = param.pixelRatio || 1,\n          mainCtx,\n          itemOffset,\n          prevOffset;\n\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n          clip = !direct && param.clipItem,\n          transform = !strokeMatrix || clip;\n\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n\n      ctx.restore();\n      matrices.pop();\n\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function (updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n\n      return updated;\n    },\n    _drawSelection: function (ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n          itemSelected = selection & 1,\n          boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n          positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n            color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n            mx = matrix.appended(this.getGlobalMatrix(true)),\n            half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n              parent = this._parent,\n              point = parent ? parent.localToGlobal(pos) : pos,\n              x = point.x,\n              y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n              start = half,\n              end = size + 1;\n\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n                dx = delta[0],\n                dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n\n          ctx.beginPath();\n\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n\n          ctx.closePath();\n          ctx.stroke();\n\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function () {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function (obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n              project = this._project,\n              sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n\n      return this;\n    }\n  }), {\n    tween: function (from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n\n      var easing = options && options.easing,\n          start = options && options.start,\n          duration = options != null && (typeof options === 'number' ? options : options.duration),\n          tween = new Tween(this, from, to, duration, easing, start);\n\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n\n      return tween;\n    },\n    tweenTo: function (to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function (from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function () {\n      var clipItem = this._clipItem;\n\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n\n        this._clipItem = clipItem;\n      }\n\n      return clipItem;\n    },\n    isClipped: function () {\n      return !!this._getClipItem();\n    },\n    setClipped: function (clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function (ctx, param) {\n      var clip = param.clip,\n          clipItem = !clip && this._getClipItem();\n\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function () {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function () {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function () {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function (item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function (source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function () {\n      return this._type;\n    },\n    setType: function (type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n            width = size.width,\n            height = size.height;\n\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n\n        this._size._set(width, height);\n\n        this._changed(9);\n      }\n    },\n    getRadius: function () {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function (radius) {\n      var type = this._type;\n\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n\n          this._radius.set(radius);\n\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n\n      this._changed(9);\n    },\n    isEmpty: function () {\n      return false;\n    },\n    toPath: function (insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function () {\n      return this.toPath(false);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dontPaint = param.dontFinish || param.clip,\n          untransformed = !strokeMatrix;\n\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n            radius = this._radius,\n            isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n              ry = isCircle ? radius : radius.height,\n              size = this._size,\n              width = size.width,\n              height = size.height;\n\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n                y = height / 2,\n                kappa = 1 - 0.5522847498307936,\n                cx = rx * kappa,\n                cy = ry * kappa,\n                c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n\n        ctx.closePath();\n      }\n\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0),\n          style = this._style,\n          strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n              corner = dir.multiply(halfSize),\n              center = corner.subtract(dir.multiply(radius)),\n              rect = new Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n            style = this._style,\n            hitStroke = options.stroke && style.hasStroke(),\n            hitFill = options.fill && style.hasFill();\n\n        if (hitStroke || hitFill) {\n          var type = this._type,\n              radius = this._radius,\n              strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n              strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n                center = getCornerCenter(this, point, padding);\n\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new Rectangle(this._size).setCenter(0, 0),\n                  outer = rect.expand(padding),\n                  inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n\n        item._initialize(Base.getNamed(args), point);\n\n        return item;\n      }\n\n      return {\n        Circle: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n              rect = Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function () {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args),\n              radius = ellipse.radius;\n\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function (args) {\n          var center, radius;\n\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = Rectangle.readNamed(args, 'rectangle');\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: true,\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n            type = typeof source,\n            object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContext || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function (item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function (source) {\n      var image = source._image,\n          canvas = source._canvas;\n\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n\n        this._setImage(copyCanvas);\n      }\n\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = this.getElement();\n\n          this._setImage(CanvasProvider.getCanvas(size));\n\n          if (element) this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      }\n    },\n    getWidth: function () {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function (width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function () {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function (height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function () {\n      return this._loaded;\n    },\n    isEmpty: function () {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function () {\n      var matrix = this._matrix,\n          orig = new Point(0, 0).transform(matrix),\n          u = new Point(1, 0).transform(matrix).subtract(orig),\n          v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function () {\n      return this._image;\n    },\n    setImage: function (image) {\n      var that = this;\n\n      function emit(event) {\n        var view = that.getView(),\n            type = event && event.type || 'load';\n\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n\n      this._setImage(image);\n\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function (event) {\n            that._setImage(image);\n\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function (image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n\n      this._changed(1033);\n    },\n    getCanvas: function () {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function (_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n\n      if (_change) {\n        this._image = null;\n\n        this._changed(1025);\n      }\n\n      return this._context;\n    },\n    setContext: function (context) {\n      this._context = context;\n    },\n    getSource: function () {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function (src) {\n      var image = new self.Image(),\n          crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function () {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function (crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function () {\n      return this._smoothing;\n    },\n    setSmoothing: function (smoothing) {\n      this._smoothing = smoothing;\n\n      this._changed(257);\n    },\n    getElement: function () {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function () {\n      var rect = Rectangle.read(arguments),\n          ctx = CanvasProvider.getContext(rect.getSize());\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function () {\n      var rect = Rectangle.read(arguments),\n          raster = new Raster(Item.NO_INSERT);\n\n      raster._setImage(this.getSubCanvas(rect));\n\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n\n      raster._matrix.prepend(this._matrix);\n\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function () {\n      var image = this._image,\n          src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function (image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function (object) {\n      var bounds, path;\n\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n\n      if (!bounds) return null;\n      var sampleSize = 32,\n          width = Math.min(bounds.width, sampleSize),\n          height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n\n      this._matrix.applyToContext(ctx);\n\n      var element = this.getElement(),\n          size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n          channels = [0, 0, 0],\n          total = 0;\n\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n\n      for (var i = 0; i < 3; i++) channels[i] /= total;\n\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function () {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function () {\n      var args = arguments,\n          point = Point.read(args),\n          color = Color.read(args),\n          components = color._convert('rgb'),\n          alpha = color._alpha,\n          ctx = this.getContext(true),\n          imageData = ctx.createImageData(1, 1),\n          data = imageData.data;\n\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function () {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function () {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function () {\n      var rect = Rectangle.read(arguments);\n      if (rect.isEmpty()) rect = new Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    setImageData: function (data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function (point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function () {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      var element = this.getElement();\n\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n\n        this._setStyles(ctx, param, viewMatrix);\n\n        DomElement.setPrefixed(ctx, 'imageSmoothingEnabled', this._smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function () {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function (item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function (source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function () {\n      return this._definition;\n    },\n    setDefinition: function (definition) {\n      this._definition = definition;\n\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function () {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function (matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function (point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function (ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function (flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function () {\n      return this._item;\n    },\n    setItem: function (item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function (position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function () {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function (symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function (args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n          point,\n          handleIn,\n          handleOut,\n          selection;\n\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function (options, dictionary) {\n      var point = this._point,\n          selection = this._selection,\n          obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function (point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n          index = this._index,\n          curve;\n\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n\n      path._changed(41);\n    },\n    getPoint: function () {\n      return this._point;\n    },\n    setPoint: function () {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function () {\n      return this._handleIn;\n    },\n    setHandleIn: function () {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function () {\n      return this._handleOut;\n    },\n    setHandleOut: function () {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function () {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function () {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function () {\n      this._handleIn._set(0, 0);\n\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      var oldSelection = this._selection,\n          path = this._path;\n      this._selection = selection = selection || 0;\n\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n\n        path._changed(257);\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      return !!(this._selection & 7);\n    },\n    setSelected: function (selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function () {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function () {\n      return this._path || null;\n    },\n    getCurve: function () {\n      var path = this._path,\n          index = this._index;\n\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n\n      return null;\n    },\n    getLocation: function () {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function (options, _first, _last) {\n      var opts = options || {},\n          type = opts.type,\n          factor = opts.factor,\n          prev = this.getPrevious(),\n          next = this.getNext(),\n          p0 = (prev || this)._point,\n          p1 = this._point,\n          p2 = (next || this)._point,\n          d1 = p0.getDistance(p1),\n          d2 = p1.getDistance(p2);\n\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n            d1_a = Math.pow(d1, a),\n            d1_2a = d1_a * d1_a,\n            d2_a = Math.pow(d2, a),\n            d2_2a = d2_a * d2_a;\n\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n              N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n              N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n              t = factor === undefined ? 0.4 : factor,\n              k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function () {\n      var handleIn = this._handleIn,\n          handleOut = this._handleOut,\n          tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function () {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function () {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function () {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function (segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function () {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function (matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n\n      this._changed();\n    },\n    interpolate: function (from, to, factor) {\n      var u = 1 - factor,\n          v = factor,\n          point1 = from._point,\n          point2 = to._point,\n          handleIn1 = from._handleIn,\n          handleIn2 = to._handleIn,\n          handleOut2 = to._handleOut,\n          handleOut1 = from._handleOut;\n\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n\n      this._changed();\n    },\n    _transformCoordinates: function (matrix, coords, change) {\n      var point = this._point,\n          handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n          handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n          x = point._x,\n          y = point._y,\n          i = 2;\n      coords[0] = x;\n      coords[1] = y;\n\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n\n        x = coords[0];\n        y = coords[1];\n\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n\n        y = pt.y;\n        selected = pt.selected;\n      }\n\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function (x, y) {\n      this._x = x;\n      this._y = y;\n\n      this._owner._changed(this);\n\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n\n      this._owner._changed(this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n\n      this._owner._changed(this);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n          seg1,\n          seg2,\n          point1,\n          point2,\n          handle1,\n          handle2;\n\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function () {\n      this._length = this._bounds = undefined;\n    },\n    clone: function () {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function () {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function () {\n      return Curve.classify(this.getValues());\n    },\n    remove: function () {\n      var removed = false;\n\n      if (this._path) {\n        var segment2 = this._segment2,\n            handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n\n      return removed;\n    },\n    getPoint1: function () {\n      return this._segment1._point;\n    },\n    setPoint1: function () {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function () {\n      return this._segment2._point;\n    },\n    setPoint2: function () {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function () {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function () {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function () {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function () {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function () {\n      return this._segment1;\n    },\n    getSegment2: function () {\n      return this._segment2;\n    },\n    getPath: function () {\n      return this._path;\n    },\n    getIndex: function () {\n      return this._segment1._index;\n    },\n    getNext: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._segment1._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function () {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function (selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function (matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function () {\n      var coords = this.getValues(),\n          points = [];\n\n      for (var i = 0; i < 8; i += 2) points.push(new Point(coords[i], coords[i + 1]));\n\n      return points;\n    }\n  }, {\n    getLength: function () {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function () {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function () {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function (from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function (from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function (location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function (time, _setHandles) {\n      var tMin = 1e-8,\n          tMax = 1 - tMin,\n          res = null;\n\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n            left = parts[0],\n            right = parts[1],\n            setHandles = _setHandles || this.hasHandles(),\n            seg1 = this._segment1,\n            seg2 = this._segment2,\n            path = this._path;\n\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n\n        var x = left[6],\n            y = left[7],\n            segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n\n          this._changed();\n\n          res = new Curve(segment, seg2);\n        }\n      }\n\n      return res;\n    },\n    splitAt: function (location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function (time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function (offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function (offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function () {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function () {\n      this._segment1._handleOut._set(0, 0);\n\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function (segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n            h1 = segment1._handleOut,\n            h2 = segment2._handleIn,\n            p2 = segment2._point,\n            x1 = p1.x,\n            y1 = p1.y,\n            x2 = p2.x,\n            y2 = p2.y,\n            values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function (v, t) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n            x4 = u * x0 + t * x1,\n            y4 = u * y0 + t * y1,\n            x5 = u * x1 + t * x2,\n            y5 = u * y1 + t * y2,\n            x6 = u * x2 + t * x3,\n            y6 = u * y2 + t * y3,\n            x7 = u * x4 + t * x5,\n            y7 = u * y4 + t * y5,\n            x8 = u * x5 + t * x6,\n            y8 = u * y5 + t * y6,\n            x9 = u * x7 + t * x8,\n            y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function (v, dir) {\n        var curves = [],\n            io = dir ? 0 : 1,\n            o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n              b = 2 * (o0 + o2) - 4 * o1,\n              c = o1 - o0,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [],\n              n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n                parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n\n            curves.push(parts[1]);\n          }\n        }\n\n        return curves;\n      },\n      solveCubic: function (v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n            v1 = v[coord + 2],\n            v2 = v[coord + 4],\n            v3 = v[coord + 6],\n            res = 0;\n\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n              b = 3 * (v2 - v1) - c,\n              a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n\n        return res;\n      },\n      getTimeOf: function (v, point) {\n        var p0 = new Point(v[0], v[1]),\n            p3 = new Point(v[6], v[7]),\n            epsilon = 1e-12,\n            geomEpsilon = 1e-7,\n            t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n\n        if (t === null) {\n          var coords = [point.x, point.y],\n              roots = [];\n\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function (v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n              y0 = v[1],\n              x3 = v[6],\n              y3 = v[7],\n              vx = x3 - x0,\n              vy = y3 - y0,\n              det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n\n        var count = 100,\n            minDist = Infinity,\n            minT = 0;\n\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n\n        for (var i = 0; i <= count; i++) refine(i / count);\n\n        var step = 1 / (count * 2);\n\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n\n        return minT;\n      },\n      getPart: function (v, from, to) {\n        var flip = from > to;\n\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function (v, flatness) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ux = 3 * x1 - 2 * x0 - x3,\n            uy = 3 * y1 - 2 * y0 - y3,\n            vx = 3 * x2 - 2 * x3 - x0,\n            vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function (v) {\n        var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function (v) {\n        var min = v.slice(0, 2),\n            max = min.slice(),\n            roots = [0, 0];\n\n        for (var i = 0; i < 2; i++) Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function (v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n              right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n\n        padding /= 2;\n        var minPad = min[coord] + padding,\n            maxPad = max[coord] - padding;\n\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, 0);\n            add(v3, 0);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n                b = 2 * (v0 + v2) - 4 * v1,\n                c = v1 - v0,\n                count = Numerical.solveQuadratic(a, b, c, roots),\n                tMin = 1e-8,\n                tMax = 1 - tMin;\n            add(v3, 0);\n\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                  u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function (p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n              epsilon = 1e-7;\n\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n                s1 = v.dot(h1) / div,\n                s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n\n      return false;\n    },\n    isLinear: function (p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n          seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n          y0 = v[1],\n          x3 = v[6],\n          y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function () {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function (epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function (curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function (offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function (t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function (offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function () {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function (t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function () {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function () {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n          values = this.getValues(),\n          t = Curve.getNearestTime(values, point),\n          pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n          bx = 6 * (x0 + x2) - 12 * x1,\n          cx = 3 * (x1 - x0),\n          ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n          by = 6 * (y0 + y2) - 12 * y1,\n          cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n            dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          isZero = Numerical.isZero;\n\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n\n      var cx = 3 * (x1 - x0),\n          bx = 3 * (x2 - x1) - cx,\n          ax = x3 - x0 - cx - bx,\n          cy = 3 * (y1 - y0),\n          by = 3 * (y2 - y1) - cy,\n          ay = y3 - y0 - cy - by,\n          x,\n          y;\n\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n            tMax = 1 - tMin;\n\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n\n          var len = Math.sqrt(x * x + y * y);\n\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n              y2 = 6 * ay * t + 2 * by,\n              d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n\n    return {\n      statics: {\n        classify: function (v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n              a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n              a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n              d3 = 3 * a3,\n              d2 = d3 - a2,\n              d1 = d2 - a2 + a1,\n              l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n              s = l !== 0 ? 1 / l : 0,\n              isZero = Numerical.isZero,\n              serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n                t1Ok = hasRoots && t1 > 0 && t1 < 1,\n                t2Ok = hasRoots && t2 > 0 && t2 < 1;\n\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n              f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function (v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n\n          if (Curve.isStraight(v)) {\n            var c = v;\n\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n\n            var dx = c[6] - c[0],\n                dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function (v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n              epsilon = 1e-12,\n              forward = offset > 0,\n              a = forward ? start : 0,\n              b = forward ? 1 : start,\n              ds = getLengthIntegrand(v),\n              rangeLength = Curve.getLength(v, a, b, ds),\n              diff = abs(offset) - rangeLength;\n\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n\n          var guess = offset / rangeLength,\n              length = 0;\n\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function (v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function (v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function (v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function (v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function (v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function (v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function (v) {\n          var x0 = v[0],\n              y0 = v[1],\n              x1 = v[2],\n              y1 = v[3],\n              x2 = v[4],\n              y2 = v[5],\n              x3 = v[6],\n              y3 = v[7],\n              ax = -x0 + 3 * x1 - 3 * x2 + x3,\n              bx = 3 * x0 - 6 * x1 + 3 * x2,\n              cx = -3 * x0 + 3 * x1,\n              ay = -y0 + 3 * y1 - 3 * y2 + y3,\n              by = 3 * y0 - 6 * y1 + 3 * y2,\n              cy = -3 * y0 + 3 * y1,\n              tMin = 1e-8,\n              tMax = 1 - tMin,\n              roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n          excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n              loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n          q0x = v2[0],\n          q0y = v2[1],\n          q3x = v2[6],\n          q3y = v2[7],\n          getSignedDistance = Line.getSignedDistance,\n          d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n          d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n          factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n          dMin = factor * Math.min(0, d1, d2),\n          dMax = factor * Math.max(0, d1, d2),\n          dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n          dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n          dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n          dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n          hull = getConvexHull(dp0, dp1, dp2, dp3),\n          top = hull[0],\n          bottom = hull[1],\n          tMinClip,\n          tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n          tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n            u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n                t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n                u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n\n      return calls;\n    }\n\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n          p1 = [1 / 3, dq1],\n          p2 = [2 / 3, dq2],\n          p3 = [1, dq3],\n          dist1 = dq1 - (2 * dq0 + dq3) / 3,\n          dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n          hull;\n\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n          py = part[0][1];\n\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n            qy = part[i][1];\n\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n\n        px = qx;\n        py = qy;\n      }\n\n      return null;\n    }\n\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n\n      var angle = Math.atan2(-vy, vx),\n          sin = Math.sin(angle),\n          cos = Math.cos(angle),\n          rv = [],\n          roots = [];\n\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n            y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n          y1 = v2[1],\n          x2 = v2[6],\n          y2 = v2[7],\n          roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n            p1 = Curve.getPoint(v1, t1),\n            t2 = Curve.getTimeOf(v2, p1);\n\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n          min = Math.min,\n          max = Math.max;\n\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n              straight2 = Curve.isStraight(v2),\n              straight = straight1 && straight2,\n              flip = straight1 && !straight2,\n              before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                  t2 = i & 1,\n                  i1 = t1 * 6,\n                  i2 = t2 * 6,\n                  p1 = new Point(v1[i1], v1[i1 + 1]),\n                  p2 = new Point(v2[i2], v2[i2 + 1]);\n\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n\n      return locations;\n    }\n\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n          self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n          length2 = curves2.length,\n          values1 = new Array(length1),\n          values2 = self ? values1 : new Array(length2),\n          locations = [];\n\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n            v1 = values1[index1];\n\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n\n        var collisions1 = boundsCollisions[index1];\n\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                  v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n\n      return locations;\n    }\n\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n            y = v[7] - v[1];\n        return x * x + y * y;\n      }\n\n      var abs = Math.abs,\n          getDistance = Line.getDistance,\n          timeEpsilon = 1e-8,\n          geomEpsilon = 1e-7,\n          straight1 = Curve.isStraight(v1),\n          straight2 = Curve.isStraight(v2),\n          straightBoth = straight1 && straight2,\n          flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n          l1 = flip ? v2 : v1,\n          l2 = flip ? v1 : v2,\n          px = l1[0],\n          py = l1[1],\n          vx = l1[6] - px,\n          vy = l1[7] - py;\n\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n\n      if (straight1 ^ straight2) {\n        return null;\n      }\n\n      var v = [v1, v2],\n          pairs = [];\n\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n            i2 = i1 ^ 1,\n            t1 = i >> 1,\n            t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n\n        if (i > 2 && !pairs.length) break;\n      }\n\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n            o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n\n      return pairs;\n    }\n\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          normalized = tangent.normalize(),\n          tx = normalized.x,\n          ty = normalized.y,\n          ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n          ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n          bx = 6 * x2 - 12 * x1 + 6 * x0,\n          by = 6 * y2 - 12 * y1 + 6 * y0,\n          cx = 3 * x1 - 3 * x0,\n          cy = 3 * y1 - 3 * y0,\n          den = 2 * ax * ty - 2 * ay * tx,\n          times = [];\n\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n            den = ax * by - ay * bx;\n\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n            k = bx * ty - by * tx;\n\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n              t0 = -(k + d) / den,\n              t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n\n      return times;\n    }\n\n    return {\n      getIntersections: function (curve) {\n        var v1 = this.getValues(),\n            v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n\n      this._setCurve(curve);\n\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setPath: function (path) {\n      this._path = path;\n      this._version = path ? path._version : 0;\n    },\n    _setCurve: function (curve) {\n      this._setPath(curve._path);\n\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function (segment) {\n      var curve = segment.getCurve();\n\n      if (curve) {\n        this._setCurve(curve);\n      } else {\n        this._setPath(segment._path);\n\n        this._segment1 = segment;\n        this._segment2 = null;\n      }\n\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function () {\n      var segment = this._segment;\n\n      if (!segment) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n\n        this._segment = segment;\n      }\n\n      return segment;\n    },\n    getCurve: function () {\n      var path = this._path,\n          that = this;\n\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n\n          return curve;\n        }\n      }\n\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function () {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function () {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function () {\n      var curve = this.getCurve(),\n          time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function () {\n      return this._point;\n    },\n    getOffset: function () {\n      var offset = this._offset;\n\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n            index = this.getIndex();\n\n        if (path && index != null) {\n          var curves = path.getCurves();\n\n          for (var i = 0; i < index; i++) offset += curves[i].getLength();\n        }\n\n        this._offset = offset += this.getCurveOffset();\n      }\n\n      return offset;\n    },\n    getCurveOffset: function () {\n      var offset = this._curveOffset;\n\n      if (offset == null) {\n        var curve = this.getCurve(),\n            time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n\n      return offset;\n    },\n    getIntersection: function () {\n      return this._intersection;\n    },\n    getDistance: function () {\n      return this._distance;\n    },\n    divide: function () {\n      var curve = this.getCurve(),\n          res = curve && curve.divideAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n\n      return res;\n    },\n    split: function () {\n      var curve = this.getCurve(),\n          path = curve._path,\n          res = curve && curve.splitAtTime(this.getTime());\n\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n\n      return res;\n    },\n    equals: function (loc, _ignoreOther) {\n      var res = this === loc;\n\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n            c2 = loc.getCurve(),\n            p1 = c1._path,\n            p2 = c2._path;\n\n        if (p1 === p2) {\n          var abs = Math.abs,\n              epsilon = 1e-7,\n              diff = abs(this.getOffset() - loc.getOffset()),\n              i1 = !_ignoreOther && this._intersection,\n              i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n\n      return res;\n    },\n    toString: function () {\n      var parts = [],\n          point = this.getPoint(),\n          f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function () {\n      var inter = this._intersection;\n\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n            curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n\n      return false;\n    },\n    isCrossing: function () {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n          t2 = inter.getTime(),\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          t1Inside = t1 >= tMin && t1 <= tMax,\n          t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n          c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n          c4 = inter.getCurve(),\n          c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n            roots = Curve.classify(v).roots || Curve.getPeaks(v),\n            count = roots.length,\n            offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 32);\n      }\n\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n\n      var pt = this.getPoint(),\n          offset = Math.min.apply(Math, offsets),\n          v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n          v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n          v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n          v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n          a1 = v1.getAngle(),\n          a2 = v2.getAngle(),\n          a3 = v3.getAngle(),\n          a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function () {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n\n    this[name] = function () {\n      var curve = this.getCurve(),\n          time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n          l = 0,\n          r = length - 1;\n\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n\n        return null;\n      }\n\n      while (l <= r) {\n        var m = l + r >>> 1,\n            loc2 = locations[m],\n            found;\n\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n\n          return found;\n        }\n\n        var path1 = loc.getPath(),\n            path2 = loc2.getPath(),\n            diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n\n    return {\n      statics: {\n        insert: insert,\n        expand: function (locations) {\n          var expanded = locations.slice();\n\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function (arg) {\n        var data, segments, compound;\n\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function () {\n      return this;\n    },\n    isClockwise: function () {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function (clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function (data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n          coords,\n          relative = false,\n          previous,\n          control,\n          current = new Point(),\n          start = new Point();\n\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n\n      this.clear();\n\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n            command = part[0],\n            lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n\n            control = current;\n            break;\n\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n\n            control = current;\n            break;\n\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n\n            break;\n\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n\n            break;\n\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n\n            break;\n\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n\n            break;\n\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n\n            break;\n\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n\n        previous = lower;\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function (point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function (path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n          matrix1 = this._matrix._orNullIfIdentity(),\n          matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function (path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n          curves = this.getCurves(),\n          minDist = Infinity,\n          minLoc = null;\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n\n      return minLoc;\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function (from, to, factor) {\n      var isPath = !this._children,\n          name = isPath ? '_segments' : '_children',\n          itemsFrom = from[name],\n          itemsTo = to[name],\n          items = this[name];\n\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n\n      var current = items.length,\n          length = itemsTo.length;\n\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n\n      if (isPath) {\n        this.setClosed(from._closed);\n\n        this._changed(9);\n      }\n    },\n    compare: function (path) {\n      var ok = false;\n\n      if (path) {\n        var paths1 = this._children || [this],\n            paths2 = path._children ? path._children.slice() : [path],\n            length1 = paths1.length,\n            length2 = paths2.length,\n            matched = [],\n            count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n\n                ok = true;\n              }\n            }\n          }\n        }\n\n        ok = ok && count === length2;\n      }\n\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n          segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n\n      this._initialize(!segments && arg);\n    },\n    _equals: function (item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function (source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n\n      if (flags & 8) {\n        this._length = this._area = undefined;\n\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) this._curves[i]._changed();\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function () {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function () {\n      return this._segments;\n    },\n    setSegments: function (segments) {\n      var fullySelected = this.isFullySelected(),\n          length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n\n      if (length) {\n        var last = segments[length - 1];\n\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function () {\n      return this._segments[0];\n    },\n    getLastSegment: function () {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function () {\n      var curves = this._curves,\n          segments = this._segments;\n\n      if (!curves) {\n        var length = this._countCurves();\n\n        curves = this._curves = new Array(length);\n\n        for (var i = 0; i < length; i++) curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n      }\n\n      return curves;\n    },\n    getFirstCurve: function () {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function () {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function () {\n      return this._closed;\n    },\n    setClosed: function (closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function (_matrix, _precision) {\n      var segments = this._segments,\n          length = segments.length,\n          f = new Formatter(_precision),\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY,\n          parts = [];\n\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n\n        curX = coords[0];\n        curY = coords[1];\n\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                  dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n\n      if (!length) return '';\n\n      for (var i = 0; i < length; i++) addSegment(segments[i]);\n\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n\n      return parts.join('');\n    },\n    isEmpty: function () {\n      return !this._segments.length;\n    },\n    _transformContent: function (matrix) {\n      var segments = this._segments,\n          coords = new Array(6);\n\n      for (var i = 0, l = segments.length; i < l; i++) segments[i]._transformCoordinates(matrix, coords, true);\n\n      return true;\n    },\n    _add: function (segs, index) {\n      var segments = this._segments,\n          curves = this._curves,\n          amount = segs.length,\n          append = index == null,\n          index = append ? segments.length : index;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n\n        for (var i = index + amount, l = segments.length; i < l; i++) segments[i]._index = i;\n      }\n\n      if (curves) {\n        var total = this._countCurves(),\n            start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n            insert = start,\n            end = Math.min(start + amount, total);\n\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n\n        for (var i = insert; i < end; i++) curves.splice(i, 0, new Curve(this, null, null));\n\n        this._adjustCurves(start, end);\n      }\n\n      this._changed(41);\n\n      return segs;\n    },\n    _adjustCurves: function (start, end) {\n      var segments = this._segments,\n          curves = this._curves,\n          curve;\n\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n\n        curve._changed();\n      }\n\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n\n        curve._changed();\n      }\n    },\n    _countCurves: function () {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function (segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function (index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function () {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function (index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function (segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function (index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function (index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function (start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n          curves = this._curves,\n          count = segments.length,\n          removed = segments.splice(start, end - start),\n          amount = removed.length;\n      if (!amount) return removed;\n\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n\n      for (var i = start, l = segments.length; i < l; i++) segments[i]._index = i;\n\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n            curves = curves.splice(index, amount);\n\n        for (var i = curves.length - 1; i >= 0; i--) curves[i]._path = null;\n\n        if (_includeCurves) removed._curves = curves.slice(1);\n\n        this._adjustCurves(index, index);\n      }\n\n      this._changed(41);\n\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function () {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n\n      return false;\n    },\n    clearHandles: function () {\n      var segments = this._segments;\n\n      for (var i = 0, l = segments.length; i < l; i++) segments[i].clearHandles();\n    },\n    getLength: function () {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) length += curves[i].getLength();\n\n        this._length = length;\n      }\n\n      return this._length;\n    },\n    getArea: function () {\n      var area = this._area;\n\n      if (area == null) {\n        var segments = this._segments,\n            closed = this._closed;\n        area = 0;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n\n        this._area = area;\n      }\n\n      return area;\n    },\n    isFullySelected: function () {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function (selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function (selected) {\n      var segments = this._segments,\n          length = segments.length,\n          selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n\n      for (var i = 0; i < length; i++) segments[i]._selection = selection;\n    },\n    _updateSelection: function (segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function (location) {\n      var loc = this.getLocationAt(location),\n          curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function (location) {\n      var loc = this.getLocationAt(location),\n          index = loc && loc.index,\n          time = loc && loc.time,\n          tMin = 1e-8,\n          tMax = 1 - tMin;\n\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n\n      var curves = this.getCurves();\n\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n\n        var segs = this.removeSegments(index, this._segments.length, true),\n            path;\n\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n\n        path._add(segs, 0);\n\n        this.addSegment(segs[0]);\n        return path;\n      }\n\n      return null;\n    },\n    split: function (index, time) {\n      var curve,\n          location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function (path, tolerance) {\n      var epsilon = tolerance || 0;\n\n      if (path && path !== this) {\n        var segments = path._segments,\n            last1 = this.getLastSegment(),\n            last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n\n      var first = this.getFirstSegment(),\n          last = this.getLastSegment();\n\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n\n      return this;\n    },\n    reduce: function (options) {\n      var curves = this.getCurves(),\n          simplify = options && options.simplify,\n          tolerance = simplify ? 1e-7 : 0;\n\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n\n      return this;\n    },\n    reverse: function () {\n      this._segments.reverse();\n\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n\n      this._curves = null;\n\n      this._changed(9);\n    },\n    flatten: function (flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n          parts = flattener.parts,\n          length = parts.length,\n          segments = [];\n\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n\n      this.setSegments(segments);\n    },\n    simplify: function (tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function (options) {\n      var that = this,\n          opts = options || {},\n          type = opts.type || 'asymmetric',\n          segments = this._segments,\n          length = segments.length,\n          closed = this._closed;\n\n      function getIndex(value, _default) {\n        var index = value && value.index;\n\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n          from = getIndex(opts.from, 0),\n          to = getIndex(opts.to, length - 1);\n\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n            min = Math.min,\n            amount = to - from + 1,\n            n = amount - 1,\n            padding = loop ? min(amount, 4) : 1,\n            paddingLeft = padding,\n            paddingRight = padding,\n            knots = [];\n\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n\n        var x = knots[0]._x + 2 * knots[1]._x,\n            y = knots[0]._y + 2 * knots[1]._y,\n            f = 2,\n            n_1 = n - 1,\n            rx = [x],\n            ry = [y],\n            rf = [f],\n            px = [],\n            py = [];\n\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n              a = internal ? 1 : asymmetric ? 1 : 2,\n              b = internal ? 4 : asymmetric ? 2 : 7,\n              u = internal ? 4 : asymmetric ? 3 : 8,\n              v = internal ? 2 : asymmetric ? 0 : 1,\n              m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n              pt = segment._point,\n              hx = px[i] - pt._x,\n              hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function (insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n          type,\n          size,\n          radius,\n          topCenter;\n\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            seg3 = segments[j],\n            seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n            seg1 = seg2.getPrevious(),\n            seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n\n      function isArc(i) {\n        var seg1 = segments[i],\n            seg2 = seg1.getNext(),\n            handle1 = seg1._handleOut,\n            handle2 = seg2._handleIn,\n            kappa = 0.5522847498307936;\n\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n              pt2 = seg2._point,\n              corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n\n        return false;\n      }\n\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n\n        topCenter = segments[1]._point;\n      }\n\n      if (type) {\n        var center = this.getPosition(true),\n            shape = new type({\n          center: center,\n          size: size,\n          radius: radius,\n          insert: false\n        });\n        shape.copyAttributes(this, true);\n\n        shape._matrix.prepend(this._matrix);\n\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n          curves2 = path.getCurves(),\n          length1 = curves1.length,\n          length2 = curves2.length;\n\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n\n      var v1 = curves1[0].getValues(),\n          values2 = [],\n          pos1 = 0,\n          pos2,\n          end1 = 0,\n          end2;\n\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n\n      var abs = Math.abs,\n          epsilon = 1e-8,\n          v2 = values2[pos2],\n          start2;\n\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n\n            var t2 = overlaps[0][1];\n\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n\n              continue;\n            }\n          }\n        }\n\n        break;\n      }\n\n      return false;\n    },\n    _hitTestSelf: function (point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n          style = this.getStyle(),\n          segments = this._segments,\n          numSegments = segments.length,\n          closed = this._closed,\n          tolerancePadding = options._tolerancePadding,\n          strokePadding = tolerancePadding,\n          join,\n          cap,\n          miterLimit,\n          area,\n          loc,\n          res,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill(),\n          hitCurves = options.curves,\n          strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n\n      function addToArea(point) {\n        area.add(point);\n      }\n\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) if (res = checkSegmentPoints(segments[i])) return res;\n      }\n\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n\n        if (loc) {\n          var time = loc.getTime();\n\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function () {\n      var point = Point.read(arguments),\n          curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n\n      return null;\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function (offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n            length = 0;\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n              curve = curves[i];\n          length += curve.getLength();\n\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n\n      return null;\n    },\n    getOffsetsWithTangent: function () {\n      var tangent = Point.read(arguments);\n\n      if (tangent.isZero()) {\n        return [];\n      }\n\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n\n        curveStart += curve.length;\n      }\n\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n          miniSize = size - 2,\n          miniHalf = half - 1,\n          coords = new Array(6),\n          pX,\n          pY;\n\n      function drawHandle(index) {\n        var hX = coords[index],\n            hY = coords[index + 1];\n\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n            selection = segment._selection;\n\n        segment._transformCoordinates(matrix, coords);\n\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n          length = segments.length,\n          coords = new Array(6),\n          first = true,\n          curX,\n          curY,\n          prevX,\n          prevY,\n          inX,\n          inY,\n          outX,\n          outY;\n\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n\n        prevX = curX;\n        prevY = curY;\n\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n\n      for (var i = 0; i < length; i++) drawSegment(segments[i]);\n\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n\n    return {\n      _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n            dontPaint = param.dontFinish || param.clip,\n            style = this.getStyle(),\n            hasFill = style.hasFill(),\n            hasStroke = style.hasStroke(),\n            dashArray = style.getDashArray(),\n            dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                  length = flattener.length,\n                  from = -style.getDashOffset(),\n                  to,\n                  i = 0;\n\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function (ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n\n    return {\n      moveTo: function () {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function () {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function () {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function () {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function () {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function () {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            t = Base.pick(Base.read(args), 0.5),\n            t1 = 1 - t,\n            current = getCurrentSegment(this)._point,\n            handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function () {\n        var args = arguments,\n            abs = Math.abs,\n            sqrt = Math.sqrt,\n            current = getCurrentSegment(this),\n            from = current._point,\n            to = Point.read(args),\n            through,\n            peek = Base.peek(args),\n            clockwise = Base.pick(peek, true),\n            center,\n            extent,\n            vector,\n            matrix;\n\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n              through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n              isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n              clockwise = !!Base.read(args),\n              large = !!Base.read(args),\n              middle = from.add(to).divide(2),\n              pt = from.subtract(middle).rotate(-rotation),\n              x = pt.x,\n              y = pt.y,\n              rx = abs(radius.width),\n              ry = abs(radius.height),\n              rxSq = rx * rx,\n              rySq = ry * ry,\n              xSq = x * x,\n              ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n              l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n              line = new Line(from, to),\n              throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n\n        if (extent) {\n          var epsilon = 1e-7,\n              ext = abs(extent),\n              count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n              inc = extent / count,\n              half = inc * Math.PI / 360,\n              z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n              segments = [];\n\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n                out = null;\n\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n\n              segments.push(new Segment(pt, _in, out));\n            }\n\n            vector = vector.rotate(inc);\n          }\n\n          this._add(segments);\n        }\n      },\n      lineBy: function () {\n        var to = Point.read(arguments),\n            current = getCurrentSegment(this)._point;\n\n        this.lineTo(current.add(to));\n      },\n      curveBy: function () {\n        var args = arguments,\n            through = Point.read(args),\n            to = Point.read(args),\n            parameter = Base.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function () {\n        var args = arguments,\n            handle1 = Point.read(args),\n            handle2 = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function () {\n        var args = arguments,\n            handle = Point.read(args),\n            to = Point.read(args),\n            current = getCurrentSegment(this)._point;\n\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function () {\n        var args = arguments,\n            current = getCurrentSegment(this)._point,\n            point = current.add(Point.read(args)),\n            clockwise = Base.pick(Base.peek(args), true);\n\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function (tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function (matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function (segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new Rectangle();\n\n        var coords = new Array(6),\n            prevCoords = first._transformCoordinates(matrix, new Array(6)),\n            min = prevCoords.slice(0, 2),\n            max = min.slice(),\n            roots = new Array(2);\n\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n\n        for (var i = 1, l = segments.length; i < l; i++) processSegment(segments[i]);\n\n        if (closed) processSegment(first);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = style.hasStroke(),\n            strokeWidth = style.getStrokeWidth(),\n            strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n            strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n            bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n            join = style.getStrokeJoin(),\n            cap = style.getStrokeCap(),\n            miterLimit = style.getMiterLimit(),\n            joinBounds = new Rectangle(new Size(strokePadding));\n\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n\n        var length = segments.length - (closed ? 0 : 1);\n\n        if (length > 0) {\n          for (var i = 1; i < length; i++) {\n            addJoin(segments[i], join);\n          }\n\n          if (closed) {\n            addJoin(segments[0], join);\n          } else {\n            addCap(segments[0], cap);\n            addCap(segments[segments.length - 1], cap);\n          }\n        }\n\n        return bounds;\n      },\n      _getStrokePadding: function (radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n            ver = new Point(0, radius).transform(matrix),\n            phi = hor.getAngleInRadians(),\n            a = hor.getLength(),\n            b = ver.getLength();\n        var sin = Math.sin(phi),\n            cos = Math.cos(phi),\n            tan = Math.tan(phi),\n            tx = Math.atan2(b * tan, a),\n            ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function (segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n            curve1 = curve2.getPrevious(),\n            point = curve2.getPoint1().transform(matrix),\n            normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n            normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n            angle = normal1.getDirectedAngle(normal2);\n\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function (segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n            loc = segment.getLocation(),\n            normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n\n          point = point.add(normal.rotate(-90));\n        }\n\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n            stroke = options.stroke && style.hasStroke(),\n            strokePadding,\n            joinPadding;\n\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n              strokeRadius = style.getStrokeWidth() / 2,\n              joinRadius = strokeRadius;\n\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n\n        var coords = new Array(6),\n            x1 = Infinity,\n            x2 = -x1,\n            y1 = x1,\n            y2 = x2;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n\n          segment._transformCoordinates(matrix, coords);\n\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n                paddingX = padding ? padding[0] : 0,\n                paddingY = padding ? padding[1] : 0,\n                x = coords[j],\n                y = coords[j + 1],\n                xn = x - paddingX,\n                xx = x + paddingX,\n                yn = y - paddingY,\n                yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n          ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n\n        path._add(segments);\n\n        path._closed = closed;\n        return path.set(props, {\n          insert: true\n        });\n      }\n\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n\n        return createPath(segments, true, args);\n      }\n\n      return {\n        Line: function () {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n              rect = Rectangle.readNamed(args, 'rectangle'),\n              radius = Size.readNamed(args, 'radius', 0, {\n            readNull: true\n          }),\n              bl = rect.getBottomLeft(true),\n              tl = rect.getTopLeft(true),\n              tr = rect.getTopRight(true),\n              br = rect.getBottomRight(true),\n              segments;\n\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n                ry = radius.height,\n                hx = rx * kappa,\n                hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function () {\n          var args = arguments,\n              ellipse = Shape._readEllipse(args);\n\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function () {\n          var args = arguments,\n              from = Point.readNamed(args, 'from'),\n              through = Point.readNamed(args, 'through'),\n              to = Point.readNamed(args, 'to'),\n              props = Base.getNamed(args),\n              path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              sides = Base.readNamed(args, 'sides'),\n              radius = Base.readNamed(args, 'radius'),\n              step = 360 / sides,\n              three = sides % 3 === 0,\n              vector = new Point(0, three ? -radius : radius),\n              offset = three ? -1 : 0.5,\n              segments = new Array(sides);\n\n          for (var i = 0; i < sides; i++) segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n\n          return createPath(segments, true, args);\n        },\n        Star: function () {\n          var args = arguments,\n              center = Point.readNamed(args, 'center'),\n              points = Base.readNamed(args, 'points') * 2,\n              radius1 = Base.readNamed(args, 'radius1'),\n              radius2 = Base.readNamed(args, 'radius2'),\n              step = 360 / points,\n              vector = new Point(0, -1),\n              segments = new Array(points);\n\n          for (var i = 0; i < points; i++) segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n          first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n\n      return reduce.base.call(this);\n    },\n    isClosed: function () {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n\n      return true;\n    },\n    setClosed: function (closed) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function () {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function () {\n      var children = this._children,\n          curves = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n\n      return curves;\n    },\n    getFirstCurve: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function () {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function () {\n      var children = this._children,\n          area = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) area += children[i].getArea();\n\n      return area;\n    },\n    getLength: function () {\n      var children = this._children,\n          length = 0;\n\n      for (var i = 0, l = children.length; i < l; i++) length += children[i].getLength();\n\n      return length;\n    },\n    getPathData: function (_matrix, _precision) {\n      var children = this._children,\n          paths = [];\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options.class === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n\n      for (var i = 0, l = children.length; i < l; i++) children[i].draw(ctx, param, strokeMatrix);\n\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n\n        var style = this._style;\n\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function (ctx, matrix, selectionItems) {\n      var children = this._children;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n            mx = child._matrix;\n\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function () {\n        var current = getCurrentPath(this),\n            path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function () {\n        var current = getCurrentPath(this, true),\n            last = current && current.getLastSegment(),\n            point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function (tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n          res;\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        operators = {\n      unite: {\n        '1': true,\n        '2': true\n      },\n      intersect: {\n        '2': true\n      },\n      subtract: {\n        '1': true\n      },\n      exclude: {\n        '1': true,\n        '-1': true\n      }\n    };\n\n    function getPaths(path) {\n      return path._children || [path];\n    }\n\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n\n      if (resolve) {\n        var paths = getPaths(res);\n\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n\n      return res;\n    }\n\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n\n      result.copyAttributes(path1, true);\n      return result;\n    }\n\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n\n      var _path1 = preparePath(path1, true),\n          _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n          operator = operators[operation];\n\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n          paths1 = getPaths(_path1),\n          paths2 = _path2 && getPaths(_path2),\n          segments = [],\n          curves = [],\n          paths;\n\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n\n      function getCurves(indices) {\n        var list = [];\n\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n\n        return list;\n      }\n\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n              id = curve._path._id,\n              map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n              inter = segment._intersection;\n\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n\n      return createResult(paths, true, path1, path2, options);\n    }\n\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n          _path2 = preparePath(path2),\n          crossings = _path1.getIntersections(_path2, filterIntersection),\n          subtract = operation === 'subtract',\n          divide = operation === 'divide',\n          added = {},\n          paths = [];\n\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n\n    function linkIntersections(from, to) {\n      var prev = from;\n\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n\n      while (from._next && from._next !== to) from = from._next;\n\n      if (!from._next) {\n        while (to._previous) to = to._previous;\n\n        from._next = to;\n        to._previous = from;\n      }\n    }\n\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) curves[i].clearHandles();\n    }\n\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n          this[path._id] = {\n            container: null,\n            winding: path.isClockwise() ? 1 : -1,\n            index: i\n          };\n        }, {}),\n            sorted = paths.slice().sort(function (a, b) {\n          return abs(b.getArea()) - abs(a.getArea());\n        }),\n            first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n              entry1 = lookup[path1._id],\n              containerWinding = 0,\n              indices = collisions[i];\n\n          if (indices) {\n            var point = null;\n\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n          tMin = 1e-8,\n          tMax = 1 - tMin,\n          clearHandles = false,\n          clearCurves = clearLater || [],\n          clearLookup = clearLater && {},\n          renormalizeLocs,\n          prevCurve,\n          prevTime;\n\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n            time = loc._time,\n            origTime = time,\n            exclude = include && !include(loc),\n            curve = loc._curve,\n            segment;\n\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n\n        prevTime = origTime;\n\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n\n        loc._setSegment(segment);\n\n        var inter = segment._intersection,\n            dest = loc._intersection;\n\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n          io = ia ^ 1,\n          pv = [point.x, point.y],\n          pa = pv[ia],\n          po = pv[io],\n          windingEpsilon = 1e-9,\n          qualityEpsilon = 1e-6,\n          paL = pa - windingEpsilon,\n          paR = pa + windingEpsilon,\n          windingL = 0,\n          windingR = 0,\n          pathWindingL = 0,\n          pathWindingR = 0,\n          onPath = false,\n          onAnyPath = false,\n          quality = 1,\n          roots = [],\n          vPrev,\n          vClose;\n\n      function addWinding(v) {\n        var o0 = v[io + 0],\n            o3 = v[io + 6];\n\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n\n        var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6];\n\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n\n          return;\n        }\n\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n            a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n            winding = o0 > o3 ? 1 : -1,\n            windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n            a3Prev = vPrev[ia + 6];\n\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n\n          quality /= 4;\n        }\n\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n            o1 = v[io + 2],\n            o2 = v[io + 4],\n            o3 = v[io + 6];\n\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n              a1 = v[ia + 2],\n              a2 = v[ia + 4],\n              a3 = v[ia + 6],\n              monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n              res;\n\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n            path = curve._path,\n            v = curve.getValues(),\n            res;\n\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n\n              prev = prev.getPrevious();\n            }\n          }\n        }\n\n        if (res = handleCurve(v)) return res;\n\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n\n          vClose = null;\n        }\n      }\n\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n          start = segment,\n          totalLength = 0,\n          winding;\n\n      do {\n        var curve = segment.getCurve();\n\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n\n      var offsets = [0.5, 0.25, 0.75],\n          winding = {\n        winding: 0,\n        quality: -1\n      },\n          tMin = 1e-3,\n          tMax = 1 - tMin;\n\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n              curveLength = entry.length;\n\n          if (length <= curveLength) {\n            var curve = entry.curve,\n                path = curve._path,\n                parent = path._parent,\n                operand = parent instanceof CompoundPath ? parent : path,\n                t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n                pt = curve.getPointAtTime(t),\n                dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                  pathWinding = otherPath._getWinding(pt, dir, true);\n\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n\n          length -= curveLength;\n        }\n      }\n\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n\n    function tracePaths(segments, operator) {\n      var paths = [],\n          starts;\n\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n\n        return false;\n      }\n\n      function visitPath(path) {\n        var segments = path._segments;\n\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n            start = inter,\n            crossings = [];\n        if (collectStarts) starts = [segment];\n\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n                path = other && other._path;\n\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                  nextInter = next._intersection;\n\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n\n              if (collectStarts) starts.push(other);\n            }\n\n            inter = inter._next;\n          }\n        }\n\n        if (inter) {\n          collect(inter);\n\n          while (inter && inter._previous) inter = inter._previous;\n\n          collect(inter, start);\n        }\n\n        return crossings;\n      }\n\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n            inter2 = seg2._intersection,\n            over1 = !!(inter1 && inter1._overlap),\n            over2 = !!(inter2 && inter2._overlap),\n            path1 = seg1._path,\n            path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n            valid = isValid(seg),\n            path = null,\n            finished = false,\n            closed = true,\n            branches = [],\n            branch,\n            visited,\n            handleIn;\n\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n              path2 = seg._intersection._segment._path;\n\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n\n        while (valid) {\n          var first = !path,\n              crossings = getCrossingSegments(seg, first),\n              other = crossings.shift(),\n              finished = !first && (isStart(seg) || isStart(other)),\n              cross = !finished && other;\n\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n\n          if (cross) seg = other;\n\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n\n            visited.length = 0;\n\n            do {\n              seg = branch && branch.crossings.shift();\n\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n\n            if (!seg) break;\n          }\n\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n\n      return paths;\n    }\n\n    return {\n      _getWinding: function (point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function (path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function (path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function (path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function (path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function (path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function () {\n        var children = this._children,\n            paths = children || [this];\n\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n\n        var hasOverlaps = false,\n            hasCrossings = false,\n            intersections = this.getIntersections(null, function (inter) {\n          return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n        }),\n            clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n                path = overlap._path,\n                seg = overlap._segment,\n                prev = seg.getPrevious(),\n                next = seg.getNext();\n\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n\n              prev._handleOut._set(0, 0);\n\n              next._handleIn._set(0, 0);\n\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n\n                prev.remove();\n              }\n            }\n          }\n        }\n\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n                seg1 = inter.getSegment(),\n                other = inter._intersection,\n                curve2 = other._curve,\n                seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n\n        var length = paths.length,\n            item;\n\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n\n        return item;\n      },\n      reorient: function (nonZero, clockwise) {\n        var children = this._children;\n\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n\n        return this;\n      },\n      getInteriorPoint: function () {\n        var bounds = this.getBounds(),\n            point = bounds.getCenter(true);\n\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n              y = point.y,\n              intercepts = [],\n              roots = [];\n\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n                o0 = v[1],\n                o1 = v[3],\n                o2 = v[5],\n                o3 = v[7];\n\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                    mo0 = mv[1],\n                    mo3 = mv[7];\n\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function (path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n          parts = [],\n          length = 0,\n          minSpan = 1 / (maxRecursion || 32),\n          segments = path._segments,\n          segment1 = segments[0],\n          segment2;\n\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n              tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n              dy = curve[7] - curve[1],\n              dist = Math.sqrt(dx * dx + dy * dy);\n\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function (offset) {\n      var parts = this.parts,\n          length = parts.length,\n          start,\n          i,\n          j = this.index;\n\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n\n      for (; i < length; i++) {\n        var part = parts[i];\n\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n              prevTime = prev && prev.index === part.index ? prev.time : 0,\n              prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function (ctx, from, to) {\n      var start = this._get(from),\n          end = this._get(to);\n\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function (path) {\n      var points = this.points = [],\n          segments = path._segments,\n          closed = path._closed;\n\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n\n      this.closed = closed;\n    },\n    fit: function (error) {\n      var points = this.points,\n          length = points.length,\n          segments = null;\n\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n\n      return segments;\n    },\n    fitCubic: function (segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n\n      if (last - first === 1) {\n        var pt1 = points[first],\n            pt2 = points[last],\n            dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n\n      var uPrime = this.chordLengthParameterize(first, last),\n          maxError = Math.max(error, error * error),\n          split,\n          parametersInOrder = true;\n\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function (segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function (first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n          abs = Math.abs,\n          points = this.points,\n          pt1 = points[first],\n          pt2 = points[last],\n          C = [[0, 0], [0, 0]],\n          X = [0, 0];\n\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n            t = 1 - u,\n            b = 3 * u * t,\n            b0 = t * t * t,\n            b1 = b * t,\n            b2 = b * u,\n            b3 = u * u * u,\n            a1 = tan1.normalize(b1),\n            a2 = tan2.normalize(b2),\n            tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n          alpha1,\n          alpha2;\n\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n            detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n            c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n\n      var segLength = pt2.getDistance(pt1),\n          eps = epsilon * segLength,\n          handle1,\n          handle2;\n\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function (first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n\n      return true;\n    },\n    findRoot: function (curve, point, u) {\n      var curve1 = [],\n          curve2 = [];\n\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n\n      var pt = this.evaluate(3, curve, u),\n          pt1 = this.evaluate(2, curve1, u),\n          pt2 = this.evaluate(1, curve2, u),\n          diff = pt.subtract(point),\n          df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function (degree, curve, t) {\n      var tmp = curve.slice();\n\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n\n      return tmp[0];\n    },\n    chordLengthParameterize: function (first, last) {\n      var u = [0];\n\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n\n      return u;\n    },\n    findMaxError: function (first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n          maxDist = 0;\n\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function (item) {\n      return this._content === item._content;\n    },\n    copyContent: function (source) {\n      this.setContent(source._content);\n    },\n    getContent: function () {\n      return this._content;\n    },\n    setContent: function (content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n\n      this._changed(521);\n    },\n    isEmpty: function () {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function () {\n      var point = this._matrix.getTranslation();\n\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      if (!this._content) return;\n\n      this._setStyles(ctx, param, viewMatrix);\n\n      var lines = this._lines,\n          style = this._style,\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          leading = style.getLeading(),\n          shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function (matrix, options) {\n      var style = this._style,\n          lines = this._lines,\n          numLines = lines.length,\n          justification = style.getJustification(),\n          leading = style.getLeading(),\n          width = this.getView().getTextWidth(style.getFontStyle(), lines),\n          x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n        namedColors = {\n      transparent: [0, 0, 0, 0]\n    },\n        colorCtx;\n\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n          type = 'rgb',\n          components;\n\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1);\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n\n        components = color.slice();\n      }\n\n      return [type, components];\n    }\n\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function (r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function (h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n            f = h - i,\n            i = hsbIndices[i],\n            v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function (r, g, b) {\n        var max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            delta = max - min,\n            achromatic = delta === 0,\n            h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n            l = (max + min) / 2,\n            s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function (h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n            t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n            t1 = 2 * l - t2,\n            c = [];\n\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n\n        return c;\n      },\n      'rgb-gray': function (r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function (g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function (g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function (g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function () {\n        return [];\n      },\n      'rgb-gradient': function () {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n            hasOverlap = /^(hue|saturation)$/.test(name),\n            parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n          var current = this._components[0];\n          value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n            readNull: true\n          });\n\n          if (current !== value) {\n            if (current) current._removeOwner(this);\n            if (value) value._addOwner(this);\n          }\n\n          return value;\n        } : function () {\n          return Point.read(arguments, 0, {\n            readNull: name === 'highlight',\n            clone: true\n          });\n        } : function (value) {\n          return value == null || isNaN(value) ? 0 : +value;\n        };\n\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n\n          this._components[index] = parser.call(this, value);\n\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n            reading = this.__read,\n            read = 0,\n            type,\n            components,\n            alpha,\n            values;\n\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n\n        var argType = arg != null && typeof arg;\n\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                  parsers = componentParsers[type];\n              this._components = components = [];\n\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n\n              alpha = arg.alpha;\n            }\n          }\n\n          if (reading && type) read = 1;\n        }\n\n        this._type = type || 'rgb';\n\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function (options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function () {\n        this._canvasStyle = null;\n\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function (type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function (type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function () {\n        return this._type;\n      },\n      setType: function (type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function () {\n        var components = this._components.slice();\n\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function () {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function (alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n\n        this._changed();\n      },\n      hasAlpha: function () {\n        return this._alpha != null;\n      },\n      equals: function (color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function () {\n        var properties = this._properties,\n            parts = [],\n            isGradient = this._type === 'gradient',\n            f = Formatter.instance;\n\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function (hex) {\n        var components = this._convert('rgb'),\n            alpha = hex || this._alpha == null ? 1 : this._alpha;\n\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function (ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n            gradient = components[0],\n            stops = gradient._stops,\n            origin = components[1],\n            destination = components[2],\n            highlight = components[3],\n            inverse = matrix && matrix.inverted(),\n            canvasGradient;\n\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function (matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n\n            matrix._transformPoint(point, point, true);\n          }\n\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function () {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function (color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function (a, b) {\n        return a + b;\n      },\n      subtract: function (a, b) {\n        return a - b;\n      },\n      multiply: function (a, b) {\n        return a * b;\n      },\n      divide: function (a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n\n        var type = this._type,\n            components1 = this._components,\n            components2 = color._convert(type);\n\n        for (var i = 0, l = components1.length; i < l; i++) components2[i] = operator(components1[i], components2[i]);\n\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function () {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function (color) {\n      if (!this._owners) this._owners = [];\n\n      this._owners.push(color);\n    },\n    _removeOwner: function (color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n\n      if (index != -1) {\n        this._owners.splice(index, 1);\n\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function () {\n      var stops = [];\n\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function () {\n      return this._stops;\n    },\n    setStops: function (stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n\n      var _stops = this._stops;\n\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = undefined;\n      }\n\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n\n      for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = this;\n\n      this._changed();\n    },\n    getRadial: function () {\n      return this._radial;\n    },\n    setRadial: function (radial) {\n      this._radial = radial;\n\n      this._changed();\n    },\n    equals: function (gradient) {\n      if (gradient === this) return true;\n\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n            stops2 = gradient._stops,\n            length = stops1.length;\n\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n          offset = arg1;\n\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function () {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function (options, dictionary) {\n      var color = this._color,\n          offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function () {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function () {\n      return this._offset;\n    },\n    setOffset: function (offset) {\n      this._offset = offset;\n\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function () {\n      return this._color;\n    },\n    setColor: function () {\n      Color._setOwner(this._color, null);\n\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n\n      this._changed();\n    },\n    equals: function (stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n      fillColor: null,\n      fillRule: 'nonzero',\n      strokeColor: null,\n      strokeWidth: 1,\n      strokeCap: 'butt',\n      strokeJoin: 'miter',\n      strokeScaling: true,\n      miterLimit: 10,\n      dashOffset: 0,\n      dashArray: [],\n      shadowColor: null,\n      shadowBlur: 0,\n      shadowOffset: new Point(),\n      selectedColor: null\n    },\n        groupDefaults = Base.set({}, itemDefaults, {\n      fontFamily: 'sans-serif',\n      fontWeight: 'normal',\n      fontSize: 12,\n      leading: null,\n      justification: 'left'\n    }),\n        textDefaults = Base.set({}, groupDefaults, {\n      fillColor: new Color()\n    }),\n        flags = {\n      strokeWidth: 193,\n      strokeCap: 193,\n      strokeJoin: 193,\n      strokeScaling: 201,\n      miterLimit: 193,\n      fontFamily: 9,\n      fontWeight: 9,\n      fontSize: 9,\n      font: 9,\n      leading: 9,\n      justification: 9\n    },\n        item = {\n      beans: true\n    },\n        fields = {\n      _class: 'Style',\n      beans: true,\n      initialize: function Style(style, _owner, _project) {\n        this._values = {};\n        this._owner = _owner;\n        this._project = _owner && _owner._project || _project || paper.project;\n        this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n        if (style) this.set(style);\n      }\n    };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n          isPoint = key === 'shadowOffset',\n          part = Base.capitalize(key),\n          flag = flags[key],\n          set = 'set' + part,\n          get = 'get' + part;\n\n      fields[set] = function (value) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) children[i]._style[set](value);\n        }\n\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n\n                old._canvasStyle = null;\n              }\n\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n            children = owner && owner._children,\n            applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n            value;\n\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n\n          if (value === undefined) {\n            value = this._defaults[key];\n\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n\n        return value;\n      };\n\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n          set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function (style) {\n      var isStyle = style instanceof Style,\n          values = isStyle ? style._values : style;\n\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function (style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n            values2 = style2._values,\n            defaults2 = style2._defaults;\n\n        for (var key in values1) {\n          var value1 = values1[key],\n              value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n\n        return true;\n      }\n\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function () {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function () {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function () {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function () {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    getFontStyle: function () {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n          fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n          suffix = name[0].toUpperCase() + name.substring(1);\n\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n            key = prefix ? prefix + suffix : name;\n\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n\n          break;\n        }\n      }\n    }\n\n    return {\n      getStyles: function (el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n            view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function (el, viewport) {\n        var doc = el.ownerDocument,\n            body = doc.body,\n            html = doc.documentElement,\n            rect;\n\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n            y = rect.top - (html.clientTop || body.clientTop || 0);\n\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n\n        return new Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function (el) {\n        var doc = el.ownerDocument,\n            view = doc.defaultView,\n            html = doc.documentElement;\n        return new Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function (el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function (el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function (el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function (el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function (el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function (el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function (el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) handlePrefix(el, key, true, name[key]);\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n              parts = type.split(/[\\s,]+/g);\n\n          for (var i = 0, l = parts.length; i < l; i++) el.removeEventListener(parts[i], func, false);\n        }\n      }\n    },\n    getPoint: function (event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function (event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function (event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function (event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n        requested = false,\n        callbacks = [],\n        timer;\n\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n\n      for (var i = 0, l = functions.length; i < l; i++) functions[i]();\n\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n\n    return function (callback) {\n      callbacks.push(callback);\n\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n\n      var size;\n\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'paper-view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function () {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n\n        size = getCanvasSize();\n\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n              style = stats.style,\n              offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize = size;\n\n      View._views.push(this);\n\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        native: {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function () {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n\n      View._views.splice(View._views.indexOf(this), 1);\n\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function () {\n          this.play();\n        },\n        uninstall: function () {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function () {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function (autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function () {},\n    draw: function () {\n      this.update();\n    },\n    requestUpdate: function () {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function () {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function () {\n      this._animate = false;\n    },\n    _handleFrame: function () {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n          delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function (item, animate) {\n      var items = this._frameItems;\n\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function (event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function () {\n      this._project._changed(4097);\n\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function () {\n      return this._element;\n    },\n    getPixelRatio: function () {\n      return this._pixelRatio;\n    },\n    getResolution: function () {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function () {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function () {\n      var size = Size.read(arguments),\n          delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n\n      this._setElementSize(size.width, size.height);\n\n      this._viewSize.set(size);\n\n      this._changed();\n\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function (width, height) {\n      var element = this._element;\n\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function () {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function () {\n      return this.getBounds().getSize();\n    },\n    isVisible: function () {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function () {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function (size) {\n      var element = this._element,\n          pixels;\n\n      if (element) {\n        var parent = element.parentNode,\n            temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n\n    this[key] = function () {\n      var args = arguments,\n          value = (rotate ? Base : Point).read(args),\n          center = Point.read(args, 0, {\n        readNull: true\n      });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function () {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function () {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function () {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function () {\n      var scaling = this._decompose().scaling;\n\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function (zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function () {\n      return this._decompose().rotation;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function () {\n      var scaling = this._decompose().scaling;\n\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n          scaling = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    transform: function (matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function () {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function (event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function (project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n        tempFocus,\n        dragging = false,\n        mouseDown = false;\n\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n\n    function updateFocus() {\n      var view = View._focused;\n\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n\n    var navigator = window.navigator,\n        mousedown,\n        mousemove,\n        mouseup;\n\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n\n    var viewEvents = {},\n        docEvents = {\n      mouseout: function (event) {\n        var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n\n        if (view && (!target || target.nodeName === 'HTML')) {\n          var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n          offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n          handleMouseMove(view, event, view.viewToProject(offset));\n        }\n      },\n      scroll: updateFocus\n    };\n\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n\n      if (!dragging) {\n        dragging = true;\n\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n\n      if (!mouseDown) {\n        var target = getView(event);\n\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n\n      if (view) handleMouseMove(view, event);\n    };\n\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n        prevented = false,\n        fallbacks = {\n      doubleclick: 'click',\n      mousedrag: 'mousemove'\n    },\n        wasInView = false,\n        overView,\n        downPoint,\n        lastPoint,\n        downItem,\n        overItem,\n        dragItem,\n        clickItem,\n        clickTime,\n        dblClick;\n\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n          mouseEvent;\n\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n\n      return stopped;\n    }\n\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function (type, event, point) {\n        var itemEvents = this._itemEvents,\n            hitItems = itemEvents.native[type],\n            nativeMove = type === 'mousemove',\n            tool = this._scope.tool,\n            view = this;\n\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n\n        var inView = this.getBounds().contains(point),\n            hit = hitItems && inView && view._project.hitTest(point, {\n          tolerance: 0,\n          fill: true,\n          stroke: true\n        }),\n            hitItem = hit && hit.item || null,\n            handle = false,\n            mouse = {};\n\n        mouse[type.substr(5)] = true;\n\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n\n          overItem = hitItem;\n        }\n\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n\n        wasInView = inView;\n\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n\n            if (!prevented && hitItem) {\n              var item = hitItem;\n\n              while (item && !item.responds('mousedrag')) item = item._parent;\n\n              if (item) dragItem = hitItem;\n            }\n\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n\n            downItem = dragItem = null;\n          }\n\n          wasInView = false;\n          handle = true;\n        }\n\n        lastPoint = point;\n\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function (type, event, key, character) {\n        var scope = this._scope,\n            tool = scope.tool,\n            keyEvent;\n\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function (type, sign) {\n        var itemEvents = this._itemEvents,\n            native = itemEvents.native,\n            virtual = itemEvents.virtual;\n\n        for (var key in itemEventsMap) {\n          native[key] = (native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function () {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n            backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n\n      if (pixelRatio !== 1) {\n        var element = this._element,\n            ctx = this._context;\n\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function () {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n          pixels;\n\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n            prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      var ctx = this._context,\n          prevFont = ctx.font,\n          width = 0;\n      ctx.font = font;\n\n      for (var i = 0, l = lines.length; i < l; i++) width = Math.max(width, ctx.measureText(lines[i]).width);\n\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function () {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n          ctx = this._context,\n          size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function () {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function () {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function () {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function () {\n      return this.event.timeStamp;\n    },\n    getModifiers: function () {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n      '\\t': 'tab',\n      ' ': 'space',\n      '\\b': 'backspace',\n      '\\x7f': 'delete',\n      'Spacebar': 'space',\n      'Del': 'delete',\n      'Win': 'meta',\n      'Esc': 'escape'\n    },\n        charLookup = {\n      'tab': '\\t',\n      'space': ' ',\n      'enter': '\\r'\n    },\n        keyMap = {},\n        charMap = {},\n        metaFixMap,\n        downKey,\n        modifiers = new Base({\n      shift: false,\n      control: false,\n      alt: false,\n      meta: false,\n      capsLock: false,\n      space: false\n    }).inject({\n      option: {\n        get: function () {\n          return this.alt;\n        }\n      },\n      command: {\n        get: function () {\n          var agent = paper && paper.agent;\n          return agent && agent.mac ? this.meta : this.control;\n        }\n      }\n    });\n\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n          view = View._focused,\n          name;\n      keyMap[key] = down;\n\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n\n    DomEvent.add(document, {\n      keydown: function (event) {\n        var key = getKey(event),\n            agent = paper && paper.agent;\n\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function (event) {\n        if (downKey) {\n          var key = getKey(event),\n              code = event.charCode,\n              character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function (event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function (event) {\n        for (var key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function (key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function (point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function () {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function (point) {\n      this._point = point;\n    },\n    getLastPoint: function () {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function (lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function () {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function (downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function () {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n\n      return this._middlePoint;\n    },\n    setMiddlePoint: function (middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function () {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function (delta) {\n      this._delta = delta;\n    },\n    getCount: function () {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function (count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function () {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n\n        if (result) {\n          var item = result.item,\n              parent = item._parent;\n\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n\n          this._item = item;\n        }\n      }\n\n      return this._item;\n    },\n    setItem: function (item) {\n      this._item = item;\n    },\n    toString: function () {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function () {\n      return this._minDistance;\n    },\n    setMinDistance: function (minDistance) {\n      this._minDistance = minDistance;\n\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function () {\n      return this._maxDistance;\n    },\n    setMaxDistance: function (maxDistance) {\n      this._maxDistance = maxDistance;\n\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function () {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function (distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function (type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n          responds = this.responds(type),\n          minDistance = this.minDistance,\n          maxDistance = this.maxDistance,\n          called = false,\n          tool = this;\n\n      function update(minDistance, maxDistance) {\n        var pt = point,\n            toolPoint = move ? tool._point : tool._downPoint || pt;\n\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n                distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n\n          tool._moveCount++;\n        }\n\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n\n        return true;\n      }\n\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) emit();\n      }\n\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: {\n        linear: function (t) {\n          return t;\n        },\n        easeInQuad: function (t) {\n          return t * t;\n        },\n        easeOutQuad: function (t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function (t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function (t) {\n          return t * t * t;\n        },\n        easeOutCubic: function (t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function (t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function (t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function (t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function (t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function (t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function (t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function (t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      }\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function (then) {\n      this._then = then;\n      return this;\n    },\n    start: function () {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function () {\n      this.running = false;\n      return this;\n    },\n    update: function (progress) {\n      if (this.running) {\n        if (progress >= 1) {\n          progress = 1;\n          this.running = false;\n        }\n\n        var factor = this.easing(progress),\n            keys = this._keys,\n            getValue = function (value) {\n          return typeof value === 'function' ? value(factor, progress) : value;\n        };\n\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n              from = getValue(this._from[key]),\n              to = getValue(this._to[key]),\n              value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n\n          this._setProperty(this._parsedKeys[key], value);\n        }\n\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n      }\n\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function (time) {\n      var startTime = this._startTime,\n          progress = startTime ? (time - startTime) / this.duration : 0;\n\n      if (!startTime) {\n        this._startTime = time;\n      }\n\n      this.update(progress);\n    },\n    _getState: function (state) {\n      var keys = this._keys,\n          result = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = this._parsedKeys[key],\n            current = this._getProperty(path),\n            value;\n\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n\n          this._setProperty(path, resolved);\n\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n\n        result[key] = value;\n      }\n\n      return result;\n    },\n    _resolveValue: function (current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n\n      return value;\n    },\n    _calculate: function (left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function (keys) {\n      var parsed = {};\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n            path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n\n      return parsed;\n    },\n    _getProperty: function (path, offset) {\n      var obj = this.object;\n\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n\n      return obj;\n    },\n    _setProperty: function (path, value) {\n      var dest = this._getProperty(path, 1);\n\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function (options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n\n      xhr.onload = function () {\n        var status = xhr.status;\n\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = Base.exports.CanvasProvider = {\n    canvases: [],\n    getCanvas: function (width, height) {\n      if (!window) return null;\n      var canvas,\n          clear = true;\n\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n\n      var ctx = canvas.getContext('2d');\n\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n\n      ctx.save();\n      return canvas;\n    },\n    getContext: function (width, height) {\n      var canvas = this.getCanvas(width, height);\n      return canvas ? canvas.getContext('2d') : null;\n    },\n    release: function (obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n        max = Math.max,\n        abs = Math.abs,\n        sr,\n        sg,\n        sb,\n        sa,\n        br,\n        bg,\n        bb,\n        ba,\n        dr,\n        dg,\n        db;\n\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n          mn = min(dr, dg, db),\n          mx = max(dr, dg, db);\n\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n\n      if (mx > 255) {\n        var ln = 255 - l,\n            mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n          mx = max(r, g, b),\n          mn = min(r, g, b),\n          md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n\n    var modes = {\n      multiply: function () {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function () {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function () {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function () {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function () {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function () {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function () {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function () {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function () {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function () {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function () {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function () {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function () {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function () {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function () {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function () {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function () {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function () {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function () {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1);\n\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n            ok = false;\n        ctx.save();\n\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n          normal = mode === 'normal';\n\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n            dst = dstData.data,\n            src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n              a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n        xmlns = 'http://www.w3.org/2000/xmlns',\n        xlink = 'http://www.w3.org/1999/xlink',\n        attributeNamespace = {\n      href: xlink,\n      xlink: xmlns,\n      xmlns: xmlns + '/',\n      'xmlns:xlink': xmlns + '/'\n    };\n\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n          value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n            namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n\n      return node;\n    }\n\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      true: 'none',\n      false: 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n        lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n          trans = matrix.getTranslation();\n\n      if (coordinates) {\n        var point;\n\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n\n        if (decomposed) {\n          var parts = [],\n              angle = decomposed.rotation,\n              scale = decomposed.scaling,\n              skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n\n      return attrs;\n    }\n\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n          children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var childNode = exportSVG(child, options);\n\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n\n      return node;\n    }\n\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          size = item.getSize(),\n          image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n\n      var segments = item._segments,\n          length = segments.length,\n          type,\n          attrs = getTransform(item._matrix);\n\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n              end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportShape(item) {\n      var type = item._type,\n          radius = item._radius,\n          attrs = getTransform(item._matrix, true, type !== 'rectangle');\n\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n            width = size.width,\n            height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n\n      return SvgElement.create(type, attrs, formatter);\n    }\n\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n          definition = item._definition,\n          node = getDefinition(definition, 'symbol'),\n          definitionItem = definition._item,\n          bounds = definitionItem.getStrokeBounds();\n\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n            radial = gradient._radial,\n            origin = color.getOrigin(),\n            destination = color.getDestination(),\n            attrs;\n\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n              stopColor = stop._color,\n              alpha = stopColor.getAlpha(),\n              offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n\n        setDefinition(color, gradientNode, 'color');\n      }\n\n      return 'url(#' + gradientNode.id + ')';\n    }\n\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n          parent = !isRoot && item.getParent(),\n          style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n            type = entry.type,\n            value = item[get]();\n\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n\n    var definitions;\n\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n\n    function exportDefinitions(node, options) {\n      var svg = node,\n          defs = null;\n\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n\n          defs.appendChild(definitions.svgs[i]);\n        }\n\n        definitions = null;\n      }\n\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n\n    function exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n          node = exporter && exporter(item, options);\n\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n\n      return node && applyStyle(item, node, isRoot);\n    }\n\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n\n    Item.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        return exportDefinitions(exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        var children = this._children,\n            view = this.getView(),\n            bounds = Base.pick(options.bounds, 'view'),\n            mx = options.matrix || bounds === 'view' && view._matrix,\n            matrix = mx && Matrix.read([mx]),\n            rect = bounds === 'view' ? new Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n          stroke: true\n        }).rect : Rectangle.read([bounds], 0, {\n          readNull: true\n        }),\n            attrs = {\n          version: '1.1',\n          xmlns: SvgElement.svg,\n          'xmlns:xlink': SvgElement.xlink\n        };\n\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n\n        var node = SvgElement.create('svg', attrs, formatter),\n            parent = node;\n\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(exportSVG(children[i], options, true));\n        }\n\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n        rootSize;\n\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n          res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n          isClip = type === 'clippath',\n          isDefs = type === 'defs',\n          item = new Group(),\n          project = item._project,\n          currentStyle = project._currentStyle,\n          children = [];\n\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n            child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n\n      return item;\n    }\n\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n          points = [];\n\n      for (var i = 0, l = coords.length; i < l; i += 2) points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n          radial = type === 'radialgradient',\n          gradient;\n\n      if (id) {\n        gradient = definitions[id].getGradient();\n\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n            stops = [];\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n\n        gradient = new Gradient(stops, radial);\n      }\n\n      var origin,\n          destination,\n          highlight,\n          scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n\n    var importers = {\n      '#document': function (node, type, options, isRoot) {\n        var nodes = node.childNodes;\n\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function (node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function (node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function (node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n            definition = definitions[id],\n            point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function (node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function (node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function (node) {\n        return new Shape.Rectangle(new Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function (node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function (node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      switch: importGroup\n    };\n\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n            matrix = new Matrix();\n\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n              command = parts[0],\n              v = parts[1].split(/[\\s,]+/g);\n\n          for (var j = 0, m = v.length; j < m; j++) v[j] = parseFloat(v[j]);\n\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n\n            case 'scale':\n              matrix.scale(v);\n              break;\n\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n\n        item.transform(matrix);\n      }\n    }\n\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n          color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function (item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function (item, value) {\n        var clip = getDefinition(value);\n\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function (item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function (item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function (item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function (item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function (item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function (item, value, name, node, styles) {\n        var rect = new Rectangle(convertValue(value, 'array')),\n            size = getSize(node, null, null, true),\n            group,\n            matrix;\n\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n              matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n          value = attr && attr.value;\n\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n          styles = {\n        node: DomElement.getStyles(node) || {},\n        parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n      };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n          name = match && match[1],\n          res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n\n      return res;\n    }\n\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n          isElement = type !== '#document',\n          body = document.body,\n          container,\n          parent,\n          next;\n\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n\n      var settings = paper.settings,\n          applyMatrix = settings.applyMatrix,\n          insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n          item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n            data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n\n        if (data) item._data = JSON.parse(data);\n      }\n\n      if (container) {\n        body.removeChild(container);\n\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n\n      return item;\n    }\n\n    function importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n          item = null;\n\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg.trim(), 'image/svg+xml');\n\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n\n          paper = scope;\n          item = importNode(node, options, true);\n\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n\n      function onError(message, status) {\n        var onError = options.onError;\n\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n\n      if (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n        var node = document.getElementById(source);\n\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n\n      return item;\n    }\n\n    Item.inject({\n      importSVG: function (node, options) {\n        return importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function (node, options) {\n        this.activate();\n        return importSVG(node, options, this);\n      }\n    });\n  }();\n\n  Base.exports.PaperScript = function () {\n    var global = this,\n        acorn = global.acorn;\n\n    if (!acorn && typeof require !== 'undefined') {\n      try {\n        acorn = require('acorn');\n      } catch (e) {}\n    }\n\n    if (!acorn) {\n      var exports, module;\n      acorn = exports = module = {};\n\n      (function (root, mod) {\n        if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n        if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n        mod(root.acorn || (root.acorn = {}));\n      })(this, function (exports) {\n        \"use strict\";\n\n        exports.version = \"0.5.0\";\n        var options, input, inputLen, sourceFile;\n\n        exports.parse = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          return parseTopLevel(options.program);\n        };\n\n        var defaultOptions = exports.defaultOptions = {\n          ecmaVersion: 5,\n          strictSemicolons: false,\n          allowTrailingCommas: true,\n          forbidReserved: false,\n          allowReturnOutsideFunction: false,\n          locations: false,\n          onComment: null,\n          ranges: false,\n          program: null,\n          sourceFile: null,\n          directSourceFile: null\n        };\n\n        function setOptions(opts) {\n          options = opts || {};\n\n          for (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt)) options[opt] = defaultOptions[opt];\n\n          sourceFile = options.sourceFile || null;\n        }\n\n        var getLineInfo = exports.getLineInfo = function (input, offset) {\n          for (var line = 1, cur = 0;;) {\n            lineBreak.lastIndex = cur;\n            var match = lineBreak.exec(input);\n\n            if (match && match.index < offset) {\n              ++line;\n              cur = match.index + match[0].length;\n            } else break;\n          }\n\n          return {\n            line: line,\n            column: offset - cur\n          };\n        };\n\n        exports.tokenize = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          var t = {};\n\n          function getToken(forceRegexp) {\n            lastEnd = tokEnd;\n            readToken(forceRegexp);\n            t.start = tokStart;\n            t.end = tokEnd;\n            t.startLoc = tokStartLoc;\n            t.endLoc = tokEndLoc;\n            t.type = tokType;\n            t.value = tokVal;\n            return t;\n          }\n\n          getToken.jumpTo = function (pos, reAllowed) {\n            tokPos = pos;\n\n            if (options.locations) {\n              tokCurLine = 1;\n              tokLineStart = lineBreak.lastIndex = 0;\n              var match;\n\n              while ((match = lineBreak.exec(input)) && match.index < pos) {\n                ++tokCurLine;\n                tokLineStart = match.index + match[0].length;\n              }\n            }\n\n            tokRegexpAllowed = reAllowed;\n            skipSpace();\n          };\n\n          return getToken;\n        };\n\n        var tokPos;\n        var tokStart, tokEnd;\n        var tokStartLoc, tokEndLoc;\n        var tokType, tokVal;\n        var tokRegexpAllowed;\n        var tokCurLine, tokLineStart;\n        var lastStart, lastEnd, lastEndLoc;\n        var inFunction, labels, strict;\n\n        function raise(pos, message) {\n          var loc = getLineInfo(input, pos);\n          message += \" (\" + loc.line + \":\" + loc.column + \")\";\n          var err = new SyntaxError(message);\n          err.pos = pos;\n          err.loc = loc;\n          err.raisedAt = tokPos;\n          throw err;\n        }\n\n        var empty = [];\n        var _num = {\n          type: \"num\"\n        },\n            _regexp = {\n          type: \"regexp\"\n        },\n            _string = {\n          type: \"string\"\n        };\n        var _name = {\n          type: \"name\"\n        },\n            _eof = {\n          type: \"eof\"\n        };\n        var _break = {\n          keyword: \"break\"\n        },\n            _case = {\n          keyword: \"case\",\n          beforeExpr: true\n        },\n            _catch = {\n          keyword: \"catch\"\n        };\n        var _continue = {\n          keyword: \"continue\"\n        },\n            _debugger = {\n          keyword: \"debugger\"\n        },\n            _default = {\n          keyword: \"default\"\n        };\n        var _do = {\n          keyword: \"do\",\n          isLoop: true\n        },\n            _else = {\n          keyword: \"else\",\n          beforeExpr: true\n        };\n        var _finally = {\n          keyword: \"finally\"\n        },\n            _for = {\n          keyword: \"for\",\n          isLoop: true\n        },\n            _function = {\n          keyword: \"function\"\n        };\n        var _if = {\n          keyword: \"if\"\n        },\n            _return = {\n          keyword: \"return\",\n          beforeExpr: true\n        },\n            _switch = {\n          keyword: \"switch\"\n        };\n        var _throw = {\n          keyword: \"throw\",\n          beforeExpr: true\n        },\n            _try = {\n          keyword: \"try\"\n        },\n            _var = {\n          keyword: \"var\"\n        };\n        var _while = {\n          keyword: \"while\",\n          isLoop: true\n        },\n            _with = {\n          keyword: \"with\"\n        },\n            _new = {\n          keyword: \"new\",\n          beforeExpr: true\n        };\n        var _this = {\n          keyword: \"this\"\n        };\n        var _null = {\n          keyword: \"null\",\n          atomValue: null\n        },\n            _true = {\n          keyword: \"true\",\n          atomValue: true\n        };\n        var _false = {\n          keyword: \"false\",\n          atomValue: false\n        };\n        var _in = {\n          keyword: \"in\",\n          binop: 7,\n          beforeExpr: true\n        };\n        var keywordTypes = {\n          \"break\": _break,\n          \"case\": _case,\n          \"catch\": _catch,\n          \"continue\": _continue,\n          \"debugger\": _debugger,\n          \"default\": _default,\n          \"do\": _do,\n          \"else\": _else,\n          \"finally\": _finally,\n          \"for\": _for,\n          \"function\": _function,\n          \"if\": _if,\n          \"return\": _return,\n          \"switch\": _switch,\n          \"throw\": _throw,\n          \"try\": _try,\n          \"var\": _var,\n          \"while\": _while,\n          \"with\": _with,\n          \"null\": _null,\n          \"true\": _true,\n          \"false\": _false,\n          \"new\": _new,\n          \"in\": _in,\n          \"instanceof\": {\n            keyword: \"instanceof\",\n            binop: 7,\n            beforeExpr: true\n          },\n          \"this\": _this,\n          \"typeof\": {\n            keyword: \"typeof\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"void\": {\n            keyword: \"void\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"delete\": {\n            keyword: \"delete\",\n            prefix: true,\n            beforeExpr: true\n          }\n        };\n        var _bracketL = {\n          type: \"[\",\n          beforeExpr: true\n        },\n            _bracketR = {\n          type: \"]\"\n        },\n            _braceL = {\n          type: \"{\",\n          beforeExpr: true\n        };\n        var _braceR = {\n          type: \"}\"\n        },\n            _parenL = {\n          type: \"(\",\n          beforeExpr: true\n        },\n            _parenR = {\n          type: \")\"\n        };\n        var _comma = {\n          type: \",\",\n          beforeExpr: true\n        },\n            _semi = {\n          type: \";\",\n          beforeExpr: true\n        };\n        var _colon = {\n          type: \":\",\n          beforeExpr: true\n        },\n            _dot = {\n          type: \".\"\n        },\n            _question = {\n          type: \"?\",\n          beforeExpr: true\n        };\n        var _slash = {\n          binop: 10,\n          beforeExpr: true\n        },\n            _eq = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _assign = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _incDec = {\n          postfix: true,\n          prefix: true,\n          isUpdate: true\n        },\n            _prefix = {\n          prefix: true,\n          beforeExpr: true\n        };\n        var _logicalOR = {\n          binop: 1,\n          beforeExpr: true\n        };\n        var _logicalAND = {\n          binop: 2,\n          beforeExpr: true\n        };\n        var _bitwiseOR = {\n          binop: 3,\n          beforeExpr: true\n        };\n        var _bitwiseXOR = {\n          binop: 4,\n          beforeExpr: true\n        };\n        var _bitwiseAND = {\n          binop: 5,\n          beforeExpr: true\n        };\n        var _equality = {\n          binop: 6,\n          beforeExpr: true\n        };\n        var _relational = {\n          binop: 7,\n          beforeExpr: true\n        };\n        var _bitShift = {\n          binop: 8,\n          beforeExpr: true\n        };\n        var _plusMin = {\n          binop: 9,\n          prefix: true,\n          beforeExpr: true\n        };\n        var _multiplyModulo = {\n          binop: 10,\n          beforeExpr: true\n        };\n        exports.tokTypes = {\n          bracketL: _bracketL,\n          bracketR: _bracketR,\n          braceL: _braceL,\n          braceR: _braceR,\n          parenL: _parenL,\n          parenR: _parenR,\n          comma: _comma,\n          semi: _semi,\n          colon: _colon,\n          dot: _dot,\n          question: _question,\n          slash: _slash,\n          eq: _eq,\n          name: _name,\n          eof: _eof,\n          num: _num,\n          regexp: _regexp,\n          string: _string\n        };\n\n        for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n        function makePredicate(words) {\n          words = words.split(\" \");\n          var f = \"\",\n              cats = [];\n\n          out: for (var i = 0; i < words.length; ++i) {\n            for (var j = 0; j < cats.length; ++j) if (cats[j][0].length == words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n            }\n\n            cats.push([words[i]]);\n          }\n\n          function compareTo(arr) {\n            if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n            f += \"switch(str){\";\n\n            for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n\n            f += \"return true}return false;\";\n          }\n\n          if (cats.length > 3) {\n            cats.sort(function (a, b) {\n              return b.length - a.length;\n            });\n            f += \"switch(str.length){\";\n\n            for (var i = 0; i < cats.length; ++i) {\n              var cat = cats[i];\n              f += \"case \" + cat[0].length + \":\";\n              compareTo(cat);\n            }\n\n            f += \"}\";\n          } else {\n            compareTo(words);\n          }\n\n          return new Function(\"str\", f);\n        }\n\n        var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n        var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n        var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n        var isStrictBadIdWord = makePredicate(\"eval arguments\");\n        var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n        var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n        var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n        var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n        var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n        var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n        var newline = /[\\n\\r\\u2028\\u2029]/;\n        var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n        var isIdentifierStart = exports.isIdentifierStart = function (code) {\n          if (code < 65) return code === 36;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n        };\n\n        var isIdentifierChar = exports.isIdentifierChar = function (code) {\n          if (code < 48) return code === 36;\n          if (code < 58) return true;\n          if (code < 65) return false;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n        };\n\n        function line_loc_t() {\n          this.line = tokCurLine;\n          this.column = tokPos - tokLineStart;\n        }\n\n        function initTokenState() {\n          tokCurLine = 1;\n          tokPos = tokLineStart = 0;\n          tokRegexpAllowed = true;\n          skipSpace();\n        }\n\n        function finishToken(type, val) {\n          tokEnd = tokPos;\n          if (options.locations) tokEndLoc = new line_loc_t();\n          tokType = type;\n          skipSpace();\n          tokVal = val;\n          tokRegexpAllowed = type.beforeExpr;\n        }\n\n        function skipBlockComment() {\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var start = tokPos,\n              end = input.indexOf(\"*/\", tokPos += 2);\n          if (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n          tokPos = end + 2;\n\n          if (options.locations) {\n            lineBreak.lastIndex = start;\n            var match;\n\n            while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n              ++tokCurLine;\n              tokLineStart = match.index + match[0].length;\n            }\n          }\n\n          if (options.onComment) options.onComment(true, input.slice(start + 2, end), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n\n        function skipLineComment() {\n          var start = tokPos;\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var ch = input.charCodeAt(tokPos += 2);\n\n          while (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n            ++tokPos;\n            ch = input.charCodeAt(tokPos);\n          }\n\n          if (options.onComment) options.onComment(false, input.slice(start + 2, tokPos), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n\n        function skipSpace() {\n          while (tokPos < inputLen) {\n            var ch = input.charCodeAt(tokPos);\n\n            if (ch === 32) {\n              ++tokPos;\n            } else if (ch === 13) {\n              ++tokPos;\n              var next = input.charCodeAt(tokPos);\n\n              if (next === 10) {\n                ++tokPos;\n              }\n\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch === 10 || ch === 8232 || ch === 8233) {\n              ++tokPos;\n\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch > 8 && ch < 14) {\n              ++tokPos;\n            } else if (ch === 47) {\n              var next = input.charCodeAt(tokPos + 1);\n\n              if (next === 42) {\n                skipBlockComment();\n              } else if (next === 47) {\n                skipLineComment();\n              } else break;\n            } else if (ch === 160) {\n              ++tokPos;\n            } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n              ++tokPos;\n            } else {\n              break;\n            }\n          }\n        }\n\n        function readToken_dot() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next >= 48 && next <= 57) return readNumber(true);\n          ++tokPos;\n          return finishToken(_dot);\n        }\n\n        function readToken_slash() {\n          var next = input.charCodeAt(tokPos + 1);\n\n          if (tokRegexpAllowed) {\n            ++tokPos;\n            return readRegexp();\n          }\n\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_slash, 1);\n        }\n\n        function readToken_mult_modulo() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_multiplyModulo, 1);\n        }\n\n        function readToken_pipe_amp(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n        }\n\n        function readToken_caret() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_bitwiseXOR, 1);\n        }\n\n        function readToken_plus_min(code) {\n          var next = input.charCodeAt(tokPos + 1);\n\n          if (next === code) {\n            if (next == 45 && input.charCodeAt(tokPos + 2) == 62 && newline.test(input.slice(lastEnd, tokPos))) {\n              tokPos += 3;\n              skipLineComment();\n              skipSpace();\n              return readToken();\n            }\n\n            return finishOp(_incDec, 2);\n          }\n\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_plusMin, 1);\n        }\n\n        function readToken_lt_gt(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          var size = 1;\n\n          if (next === code) {\n            size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n            if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n            return finishOp(_bitShift, size);\n          }\n\n          if (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 && input.charCodeAt(tokPos + 3) == 45) {\n            tokPos += 4;\n            skipLineComment();\n            skipSpace();\n            return readToken();\n          }\n\n          if (next === 61) size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n          return finishOp(_relational, size);\n        }\n\n        function readToken_eq_excl(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n          return finishOp(code === 61 ? _eq : _prefix, 1);\n        }\n\n        function getTokenFromCode(code) {\n          switch (code) {\n            case 46:\n              return readToken_dot();\n\n            case 40:\n              ++tokPos;\n              return finishToken(_parenL);\n\n            case 41:\n              ++tokPos;\n              return finishToken(_parenR);\n\n            case 59:\n              ++tokPos;\n              return finishToken(_semi);\n\n            case 44:\n              ++tokPos;\n              return finishToken(_comma);\n\n            case 91:\n              ++tokPos;\n              return finishToken(_bracketL);\n\n            case 93:\n              ++tokPos;\n              return finishToken(_bracketR);\n\n            case 123:\n              ++tokPos;\n              return finishToken(_braceL);\n\n            case 125:\n              ++tokPos;\n              return finishToken(_braceR);\n\n            case 58:\n              ++tokPos;\n              return finishToken(_colon);\n\n            case 63:\n              ++tokPos;\n              return finishToken(_question);\n\n            case 48:\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 120 || next === 88) return readHexNumber();\n\n            case 49:\n            case 50:\n            case 51:\n            case 52:\n            case 53:\n            case 54:\n            case 55:\n            case 56:\n            case 57:\n              return readNumber(false);\n\n            case 34:\n            case 39:\n              return readString(code);\n\n            case 47:\n              return readToken_slash(code);\n\n            case 37:\n            case 42:\n              return readToken_mult_modulo();\n\n            case 124:\n            case 38:\n              return readToken_pipe_amp(code);\n\n            case 94:\n              return readToken_caret();\n\n            case 43:\n            case 45:\n              return readToken_plus_min(code);\n\n            case 60:\n            case 62:\n              return readToken_lt_gt(code);\n\n            case 61:\n            case 33:\n              return readToken_eq_excl(code);\n\n            case 126:\n              return finishOp(_prefix, 1);\n          }\n\n          return false;\n        }\n\n        function readToken(forceRegexp) {\n          if (!forceRegexp) tokStart = tokPos;else tokPos = tokStart + 1;\n          if (options.locations) tokStartLoc = new line_loc_t();\n          if (forceRegexp) return readRegexp();\n          if (tokPos >= inputLen) return finishToken(_eof);\n          var code = input.charCodeAt(tokPos);\n          if (isIdentifierStart(code) || code === 92) return readWord();\n          var tok = getTokenFromCode(code);\n\n          if (tok === false) {\n            var ch = String.fromCharCode(code);\n            if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n            raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n          }\n\n          return tok;\n        }\n\n        function finishOp(type, size) {\n          var str = input.slice(tokPos, tokPos + size);\n          tokPos += size;\n          finishToken(type, str);\n        }\n\n        function readRegexp() {\n          var content = \"\",\n              escaped,\n              inClass,\n              start = tokPos;\n\n          for (;;) {\n            if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n            var ch = input.charAt(tokPos);\n            if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n\n            if (!escaped) {\n              if (ch === \"[\") inClass = true;else if (ch === \"]\" && inClass) inClass = false;else if (ch === \"/\" && !inClass) break;\n              escaped = ch === \"\\\\\";\n            } else escaped = false;\n\n            ++tokPos;\n          }\n\n          var content = input.slice(start, tokPos);\n          ++tokPos;\n          var mods = readWord1();\n          if (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n\n          try {\n            var value = new RegExp(content, mods);\n          } catch (e) {\n            if (e instanceof SyntaxError) raise(start, e.message);\n            raise(e);\n          }\n\n          return finishToken(_regexp, value);\n        }\n\n        function readInt(radix, len) {\n          var start = tokPos,\n              total = 0;\n\n          for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n            var code = input.charCodeAt(tokPos),\n                val;\n            if (code >= 97) val = code - 97 + 10;else if (code >= 65) val = code - 65 + 10;else if (code >= 48 && code <= 57) val = code - 48;else val = Infinity;\n            if (val >= radix) break;\n            ++tokPos;\n            total = total * radix + val;\n          }\n\n          if (tokPos === start || len != null && tokPos - start !== len) return null;\n          return total;\n        }\n\n        function readHexNumber() {\n          tokPos += 2;\n          var val = readInt(16);\n          if (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          return finishToken(_num, val);\n        }\n\n        function readNumber(startsWithDot) {\n          var start = tokPos,\n              isFloat = false,\n              octal = input.charCodeAt(tokPos) === 48;\n          if (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n\n          if (input.charCodeAt(tokPos) === 46) {\n            ++tokPos;\n            readInt(10);\n            isFloat = true;\n          }\n\n          var next = input.charCodeAt(tokPos);\n\n          if (next === 69 || next === 101) {\n            next = input.charCodeAt(++tokPos);\n            if (next === 43 || next === 45) ++tokPos;\n            if (readInt(10) === null) raise(start, \"Invalid number\");\n            isFloat = true;\n          }\n\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          var str = input.slice(start, tokPos),\n              val;\n          if (isFloat) val = parseFloat(str);else if (!octal || str.length === 1) val = parseInt(str, 10);else if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");else val = parseInt(str, 8);\n          return finishToken(_num, val);\n        }\n\n        function readString(quote) {\n          tokPos++;\n          var out = \"\";\n\n          for (;;) {\n            if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n            var ch = input.charCodeAt(tokPos);\n\n            if (ch === quote) {\n              ++tokPos;\n              return finishToken(_string, out);\n            }\n\n            if (ch === 92) {\n              ch = input.charCodeAt(++tokPos);\n              var octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n              if (octal) octal = octal[0];\n\n              while (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n\n              if (octal === \"0\") octal = null;\n              ++tokPos;\n\n              if (octal) {\n                if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n                out += String.fromCharCode(parseInt(octal, 8));\n                tokPos += octal.length - 1;\n              } else {\n                switch (ch) {\n                  case 110:\n                    out += \"\\n\";\n                    break;\n\n                  case 114:\n                    out += \"\\r\";\n                    break;\n\n                  case 120:\n                    out += String.fromCharCode(readHexChar(2));\n                    break;\n\n                  case 117:\n                    out += String.fromCharCode(readHexChar(4));\n                    break;\n\n                  case 85:\n                    out += String.fromCharCode(readHexChar(8));\n                    break;\n\n                  case 116:\n                    out += \"\\t\";\n                    break;\n\n                  case 98:\n                    out += \"\\b\";\n                    break;\n\n                  case 118:\n                    out += \"\\u000b\";\n                    break;\n\n                  case 102:\n                    out += \"\\f\";\n                    break;\n\n                  case 48:\n                    out += \"\\0\";\n                    break;\n\n                  case 13:\n                    if (input.charCodeAt(tokPos) === 10) ++tokPos;\n\n                  case 10:\n                    if (options.locations) {\n                      tokLineStart = tokPos;\n                      ++tokCurLine;\n                    }\n\n                    break;\n\n                  default:\n                    out += String.fromCharCode(ch);\n                    break;\n                }\n              }\n            } else {\n              if (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n              out += String.fromCharCode(ch);\n              ++tokPos;\n            }\n          }\n        }\n\n        function readHexChar(len) {\n          var n = readInt(16, len);\n          if (n === null) raise(tokStart, \"Bad character escape sequence\");\n          return n;\n        }\n\n        var containsEsc;\n\n        function readWord1() {\n          containsEsc = false;\n          var word,\n              first = true,\n              start = tokPos;\n\n          for (;;) {\n            var ch = input.charCodeAt(tokPos);\n\n            if (isIdentifierChar(ch)) {\n              if (containsEsc) word += input.charAt(tokPos);\n              ++tokPos;\n            } else if (ch === 92) {\n              if (!containsEsc) word = input.slice(start, tokPos);\n              containsEsc = true;\n              if (input.charCodeAt(++tokPos) != 117) raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n              ++tokPos;\n              var esc = readHexChar(4);\n              var escStr = String.fromCharCode(esc);\n              if (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n              if (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc))) raise(tokPos - 4, \"Invalid Unicode escape\");\n              word += escStr;\n            } else {\n              break;\n            }\n\n            first = false;\n          }\n\n          return containsEsc ? word : input.slice(start, tokPos);\n        }\n\n        function readWord() {\n          var word = readWord1();\n          var type = _name;\n          if (!containsEsc && isKeyword(word)) type = keywordTypes[word];\n          return finishToken(type, word);\n        }\n\n        function next() {\n          lastStart = tokStart;\n          lastEnd = tokEnd;\n          lastEndLoc = tokEndLoc;\n          readToken();\n        }\n\n        function setStrict(strct) {\n          strict = strct;\n          tokPos = tokStart;\n\n          if (options.locations) {\n            while (tokPos < tokLineStart) {\n              tokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n              --tokCurLine;\n            }\n          }\n\n          skipSpace();\n          readToken();\n        }\n\n        function node_t() {\n          this.type = null;\n          this.start = tokStart;\n          this.end = null;\n        }\n\n        function node_loc_t() {\n          this.start = tokStartLoc;\n          this.end = null;\n          if (sourceFile !== null) this.source = sourceFile;\n        }\n\n        function startNode() {\n          var node = new node_t();\n          if (options.locations) node.loc = new node_loc_t();\n          if (options.directSourceFile) node.sourceFile = options.directSourceFile;\n          if (options.ranges) node.range = [tokStart, 0];\n          return node;\n        }\n\n        function startNodeFrom(other) {\n          var node = new node_t();\n          node.start = other.start;\n\n          if (options.locations) {\n            node.loc = new node_loc_t();\n            node.loc.start = other.loc.start;\n          }\n\n          if (options.ranges) node.range = [other.range[0], 0];\n          return node;\n        }\n\n        function finishNode(node, type) {\n          node.type = type;\n          node.end = lastEnd;\n          if (options.locations) node.loc.end = lastEndLoc;\n          if (options.ranges) node.range[1] = lastEnd;\n          return node;\n        }\n\n        function isUseStrict(stmt) {\n          return options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" && stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n        }\n\n        function eat(type) {\n          if (tokType === type) {\n            next();\n            return true;\n          }\n        }\n\n        function canInsertSemicolon() {\n          return !options.strictSemicolons && (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n        }\n\n        function semicolon() {\n          if (!eat(_semi) && !canInsertSemicolon()) unexpected();\n        }\n\n        function expect(type) {\n          if (tokType === type) next();else unexpected();\n        }\n\n        function unexpected() {\n          raise(tokStart, \"Unexpected token\");\n        }\n\n        function checkLVal(expr) {\n          if (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\") raise(expr.start, \"Assigning to rvalue\");\n          if (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name)) raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n        }\n\n        function parseTopLevel(program) {\n          lastStart = lastEnd = tokPos;\n          if (options.locations) lastEndLoc = new line_loc_t();\n          inFunction = strict = null;\n          labels = [];\n          readToken();\n          var node = program || startNode(),\n              first = true;\n          if (!program) node.body = [];\n\n          while (tokType !== _eof) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && isUseStrict(stmt)) setStrict(true);\n            first = false;\n          }\n\n          return finishNode(node, \"Program\");\n        }\n\n        var loopLabel = {\n          kind: \"loop\"\n        },\n            switchLabel = {\n          kind: \"switch\"\n        };\n\n        function parseStatement() {\n          if (tokType === _slash || tokType === _assign && tokVal == \"/=\") readToken(true);\n          var starttype = tokType,\n              node = startNode();\n\n          switch (starttype) {\n            case _break:\n            case _continue:\n              next();\n              var isBreak = starttype === _break;\n              if (eat(_semi) || canInsertSemicolon()) node.label = null;else if (tokType !== _name) unexpected();else {\n                node.label = parseIdent();\n                semicolon();\n              }\n\n              for (var i = 0; i < labels.length; ++i) {\n                var lab = labels[i];\n\n                if (node.label == null || lab.name === node.label.name) {\n                  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n                  if (node.label && isBreak) break;\n                }\n              }\n\n              if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n              return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n\n            case _debugger:\n              next();\n              semicolon();\n              return finishNode(node, \"DebuggerStatement\");\n\n            case _do:\n              next();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              expect(_while);\n              node.test = parseParenExpression();\n              semicolon();\n              return finishNode(node, \"DoWhileStatement\");\n\n            case _for:\n              next();\n              labels.push(loopLabel);\n              expect(_parenL);\n              if (tokType === _semi) return parseFor(node, null);\n\n              if (tokType === _var) {\n                var init = startNode();\n                next();\n                parseVar(init, true);\n                finishNode(init, \"VariableDeclaration\");\n                if (init.declarations.length === 1 && eat(_in)) return parseForIn(node, init);\n                return parseFor(node, init);\n              }\n\n              var init = parseExpression(false, true);\n\n              if (eat(_in)) {\n                checkLVal(init);\n                return parseForIn(node, init);\n              }\n\n              return parseFor(node, init);\n\n            case _function:\n              next();\n              return parseFunction(node, true);\n\n            case _if:\n              next();\n              node.test = parseParenExpression();\n              node.consequent = parseStatement();\n              node.alternate = eat(_else) ? parseStatement() : null;\n              return finishNode(node, \"IfStatement\");\n\n            case _return:\n              if (!inFunction && !options.allowReturnOutsideFunction) raise(tokStart, \"'return' outside of function\");\n              next();\n              if (eat(_semi) || canInsertSemicolon()) node.argument = null;else {\n                node.argument = parseExpression();\n                semicolon();\n              }\n              return finishNode(node, \"ReturnStatement\");\n\n            case _switch:\n              next();\n              node.discriminant = parseParenExpression();\n              node.cases = [];\n              expect(_braceL);\n              labels.push(switchLabel);\n\n              for (var cur, sawDefault; tokType != _braceR;) {\n                if (tokType === _case || tokType === _default) {\n                  var isCase = tokType === _case;\n                  if (cur) finishNode(cur, \"SwitchCase\");\n                  node.cases.push(cur = startNode());\n                  cur.consequent = [];\n                  next();\n                  if (isCase) cur.test = parseExpression();else {\n                    if (sawDefault) raise(lastStart, \"Multiple default clauses\");\n                    sawDefault = true;\n                    cur.test = null;\n                  }\n                  expect(_colon);\n                } else {\n                  if (!cur) unexpected();\n                  cur.consequent.push(parseStatement());\n                }\n              }\n\n              if (cur) finishNode(cur, \"SwitchCase\");\n              next();\n              labels.pop();\n              return finishNode(node, \"SwitchStatement\");\n\n            case _throw:\n              next();\n              if (newline.test(input.slice(lastEnd, tokStart))) raise(lastEnd, \"Illegal newline after throw\");\n              node.argument = parseExpression();\n              semicolon();\n              return finishNode(node, \"ThrowStatement\");\n\n            case _try:\n              next();\n              node.block = parseBlock();\n              node.handler = null;\n\n              if (tokType === _catch) {\n                var clause = startNode();\n                next();\n                expect(_parenL);\n                clause.param = parseIdent();\n                if (strict && isStrictBadIdWord(clause.param.name)) raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n                expect(_parenR);\n                clause.guard = null;\n                clause.body = parseBlock();\n                node.handler = finishNode(clause, \"CatchClause\");\n              }\n\n              node.guardedHandlers = empty;\n              node.finalizer = eat(_finally) ? parseBlock() : null;\n              if (!node.handler && !node.finalizer) raise(node.start, \"Missing catch or finally clause\");\n              return finishNode(node, \"TryStatement\");\n\n            case _var:\n              next();\n              parseVar(node);\n              semicolon();\n              return finishNode(node, \"VariableDeclaration\");\n\n            case _while:\n              next();\n              node.test = parseParenExpression();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              return finishNode(node, \"WhileStatement\");\n\n            case _with:\n              if (strict) raise(tokStart, \"'with' in strict mode\");\n              next();\n              node.object = parseParenExpression();\n              node.body = parseStatement();\n              return finishNode(node, \"WithStatement\");\n\n            case _braceL:\n              return parseBlock();\n\n            case _semi:\n              next();\n              return finishNode(node, \"EmptyStatement\");\n\n            default:\n              var maybeName = tokVal,\n                  expr = parseExpression();\n\n              if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n                for (var i = 0; i < labels.length; ++i) if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n\n                var kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n                labels.push({\n                  name: maybeName,\n                  kind: kind\n                });\n                node.body = parseStatement();\n                labels.pop();\n                node.label = expr;\n                return finishNode(node, \"LabeledStatement\");\n              } else {\n                node.expression = expr;\n                semicolon();\n                return finishNode(node, \"ExpressionStatement\");\n              }\n\n          }\n        }\n\n        function parseParenExpression() {\n          expect(_parenL);\n          var val = parseExpression();\n          expect(_parenR);\n          return val;\n        }\n\n        function parseBlock(allowStrict) {\n          var node = startNode(),\n              first = true,\n              strict = false,\n              oldStrict;\n          node.body = [];\n          expect(_braceL);\n\n          while (!eat(_braceR)) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n\n            if (first && allowStrict && isUseStrict(stmt)) {\n              oldStrict = strict;\n              setStrict(strict = true);\n            }\n\n            first = false;\n          }\n\n          if (strict && !oldStrict) setStrict(false);\n          return finishNode(node, \"BlockStatement\");\n        }\n\n        function parseFor(node, init) {\n          node.init = init;\n          expect(_semi);\n          node.test = tokType === _semi ? null : parseExpression();\n          expect(_semi);\n          node.update = tokType === _parenR ? null : parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForStatement\");\n        }\n\n        function parseForIn(node, init) {\n          node.left = init;\n          node.right = parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForInStatement\");\n        }\n\n        function parseVar(node, noIn) {\n          node.declarations = [];\n          node.kind = \"var\";\n\n          for (;;) {\n            var decl = startNode();\n            decl.id = parseIdent();\n            if (strict && isStrictBadIdWord(decl.id.name)) raise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n            decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n            node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n            if (!eat(_comma)) break;\n          }\n\n          return node;\n        }\n\n        function parseExpression(noComma, noIn) {\n          var expr = parseMaybeAssign(noIn);\n\n          if (!noComma && tokType === _comma) {\n            var node = startNodeFrom(expr);\n            node.expressions = [expr];\n\n            while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n\n            return finishNode(node, \"SequenceExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseMaybeAssign(noIn) {\n          var left = parseMaybeConditional(noIn);\n\n          if (tokType.isAssign) {\n            var node = startNodeFrom(left);\n            node.operator = tokVal;\n            node.left = left;\n            next();\n            node.right = parseMaybeAssign(noIn);\n            checkLVal(left);\n            return finishNode(node, \"AssignmentExpression\");\n          }\n\n          return left;\n        }\n\n        function parseMaybeConditional(noIn) {\n          var expr = parseExprOps(noIn);\n\n          if (eat(_question)) {\n            var node = startNodeFrom(expr);\n            node.test = expr;\n            node.consequent = parseExpression(true);\n            expect(_colon);\n            node.alternate = parseExpression(true, noIn);\n            return finishNode(node, \"ConditionalExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseExprOps(noIn) {\n          return parseExprOp(parseMaybeUnary(), -1, noIn);\n        }\n\n        function parseExprOp(left, minPrec, noIn) {\n          var prec = tokType.binop;\n\n          if (prec != null && (!noIn || tokType !== _in)) {\n            if (prec > minPrec) {\n              var node = startNodeFrom(left);\n              node.left = left;\n              node.operator = tokVal;\n              var op = tokType;\n              next();\n              node.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n              var exprNode = finishNode(node, op === _logicalOR || op === _logicalAND ? \"LogicalExpression\" : \"BinaryExpression\");\n              return parseExprOp(exprNode, minPrec, noIn);\n            }\n          }\n\n          return left;\n        }\n\n        function parseMaybeUnary() {\n          if (tokType.prefix) {\n            var node = startNode(),\n                update = tokType.isUpdate;\n            node.operator = tokVal;\n            node.prefix = true;\n            tokRegexpAllowed = true;\n            next();\n            node.argument = parseMaybeUnary();\n            if (update) checkLVal(node.argument);else if (strict && node.operator === \"delete\" && node.argument.type === \"Identifier\") raise(node.start, \"Deleting local variable in strict mode\");\n            return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n          }\n\n          var expr = parseExprSubscripts();\n\n          while (tokType.postfix && !canInsertSemicolon()) {\n            var node = startNodeFrom(expr);\n            node.operator = tokVal;\n            node.prefix = false;\n            node.argument = expr;\n            checkLVal(expr);\n            next();\n            expr = finishNode(node, \"UpdateExpression\");\n          }\n\n          return expr;\n        }\n\n        function parseExprSubscripts() {\n          return parseSubscripts(parseExprAtom());\n        }\n\n        function parseSubscripts(base, noCalls) {\n          if (eat(_dot)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseIdent(true);\n            node.computed = false;\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (eat(_bracketL)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseExpression();\n            node.computed = true;\n            expect(_bracketR);\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (!noCalls && eat(_parenL)) {\n            var node = startNodeFrom(base);\n            node.callee = base;\n            node.arguments = parseExprList(_parenR, false);\n            return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n          } else return base;\n        }\n\n        function parseExprAtom() {\n          switch (tokType) {\n            case _this:\n              var node = startNode();\n              next();\n              return finishNode(node, \"ThisExpression\");\n\n            case _name:\n              return parseIdent();\n\n            case _num:\n            case _string:\n            case _regexp:\n              var node = startNode();\n              node.value = tokVal;\n              node.raw = input.slice(tokStart, tokEnd);\n              next();\n              return finishNode(node, \"Literal\");\n\n            case _null:\n            case _true:\n            case _false:\n              var node = startNode();\n              node.value = tokType.atomValue;\n              node.raw = tokType.keyword;\n              next();\n              return finishNode(node, \"Literal\");\n\n            case _parenL:\n              var tokStartLoc1 = tokStartLoc,\n                  tokStart1 = tokStart;\n              next();\n              var val = parseExpression();\n              val.start = tokStart1;\n              val.end = tokEnd;\n\n              if (options.locations) {\n                val.loc.start = tokStartLoc1;\n                val.loc.end = tokEndLoc;\n              }\n\n              if (options.ranges) val.range = [tokStart1, tokEnd];\n              expect(_parenR);\n              return val;\n\n            case _bracketL:\n              var node = startNode();\n              next();\n              node.elements = parseExprList(_bracketR, true, true);\n              return finishNode(node, \"ArrayExpression\");\n\n            case _braceL:\n              return parseObj();\n\n            case _function:\n              var node = startNode();\n              next();\n              return parseFunction(node, false);\n\n            case _new:\n              return parseNew();\n\n            default:\n              unexpected();\n          }\n        }\n\n        function parseNew() {\n          var node = startNode();\n          next();\n          node.callee = parseSubscripts(parseExprAtom(), true);\n          if (eat(_parenL)) node.arguments = parseExprList(_parenR, false);else node.arguments = empty;\n          return finishNode(node, \"NewExpression\");\n        }\n\n        function parseObj() {\n          var node = startNode(),\n              first = true,\n              sawGetSet = false;\n          node.properties = [];\n          next();\n\n          while (!eat(_braceR)) {\n            if (!first) {\n              expect(_comma);\n              if (options.allowTrailingCommas && eat(_braceR)) break;\n            } else first = false;\n\n            var prop = {\n              key: parsePropertyName()\n            },\n                isGetSet = false,\n                kind;\n\n            if (eat(_colon)) {\n              prop.value = parseExpression(true);\n              kind = prop.kind = \"init\";\n            } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" && (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n              isGetSet = sawGetSet = true;\n              kind = prop.kind = prop.key.name;\n              prop.key = parsePropertyName();\n              if (tokType !== _parenL) unexpected();\n              prop.value = parseFunction(startNode(), false);\n            } else unexpected();\n\n            if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n              for (var i = 0; i < node.properties.length; ++i) {\n                var other = node.properties[i];\n\n                if (other.key.name === prop.key.name) {\n                  var conflict = kind == other.kind || isGetSet && other.kind === \"init\" || kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n                  if (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n                  if (conflict) raise(prop.key.start, \"Redefinition of property\");\n                }\n              }\n            }\n\n            node.properties.push(prop);\n          }\n\n          return finishNode(node, \"ObjectExpression\");\n        }\n\n        function parsePropertyName() {\n          if (tokType === _num || tokType === _string) return parseExprAtom();\n          return parseIdent(true);\n        }\n\n        function parseFunction(node, isStatement) {\n          if (tokType === _name) node.id = parseIdent();else if (isStatement) unexpected();else node.id = null;\n          node.params = [];\n          var first = true;\n          expect(_parenL);\n\n          while (!eat(_parenR)) {\n            if (!first) expect(_comma);else first = false;\n            node.params.push(parseIdent());\n          }\n\n          var oldInFunc = inFunction,\n              oldLabels = labels;\n          inFunction = true;\n          labels = [];\n          node.body = parseBlock(true);\n          inFunction = oldInFunc;\n          labels = oldLabels;\n\n          if (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n            for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n              var id = i < 0 ? node.id : node.params[i];\n              if (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name)) raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n              if (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name) raise(id.start, \"Argument name clash in strict mode\");\n            }\n          }\n\n          return finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n        }\n\n        function parseExprList(close, allowTrailingComma, allowEmpty) {\n          var elts = [],\n              first = true;\n\n          while (!eat(close)) {\n            if (!first) {\n              expect(_comma);\n              if (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n            } else first = false;\n\n            if (allowEmpty && tokType === _comma) elts.push(null);else elts.push(parseExpression(true));\n          }\n\n          return elts;\n        }\n\n        function parseIdent(liberal) {\n          var node = startNode();\n          if (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n\n          if (tokType === _name) {\n            if (!liberal && (options.forbidReserved && (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) || strict && isStrictReservedWord(tokVal)) && input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1) raise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n            node.name = tokVal;\n          } else if (liberal && tokType.keyword) {\n            node.name = tokType.keyword;\n          } else {\n            unexpected();\n          }\n\n          tokRegexpAllowed = false;\n          next();\n          return finishNode(node, \"Identifier\");\n        }\n      });\n\n      if (!acorn.version) acorn = null;\n    }\n\n    function parse(code, options) {\n      return (global.acorn || acorn).parse(code, options);\n    }\n\n    var binaryOperators = {\n      '+': '__add',\n      '-': '__subtract',\n      '*': '__multiply',\n      '/': '__divide',\n      '%': '__modulo',\n      '==': '__equals',\n      '!=': '__equals'\n    };\n    var unaryOperators = {\n      '-': '__negate',\n      '+': '__self'\n    };\n    var fields = Base.each(['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'], function (name) {\n      this['__' + name] = '#' + name;\n    }, {\n      __self: function () {\n        return this;\n      }\n    });\n    Point.inject(fields);\n    Size.inject(fields);\n    Color.inject(fields);\n\n    function __$__(left, operator, right) {\n      var handler = binaryOperators[operator];\n\n      if (left && left[handler]) {\n        var res = left[handler](right);\n        return operator === '!=' ? !res : res;\n      }\n\n      switch (operator) {\n        case '+':\n          return left + right;\n\n        case '-':\n          return left - right;\n\n        case '*':\n          return left * right;\n\n        case '/':\n          return left / right;\n\n        case '%':\n          return left % right;\n\n        case '==':\n          return left == right;\n\n        case '!=':\n          return left != right;\n      }\n    }\n\n    function $__(operator, value) {\n      var handler = unaryOperators[operator];\n      if (value && value[handler]) return value[handler]();\n\n      switch (operator) {\n        case '+':\n          return +value;\n\n        case '-':\n          return -value;\n      }\n    }\n\n    function compile(code, options) {\n      if (!code) return '';\n      options = options || {};\n      var insertions = [];\n\n      function getOffset(offset) {\n        for (var i = 0, l = insertions.length; i < l; i++) {\n          var insertion = insertions[i];\n          if (insertion[0] >= offset) break;\n          offset += insertion[1];\n        }\n\n        return offset;\n      }\n\n      function getCode(node) {\n        return code.substring(getOffset(node.range[0]), getOffset(node.range[1]));\n      }\n\n      function getBetween(left, right) {\n        return code.substring(getOffset(left.range[1]), getOffset(right.range[0]));\n      }\n\n      function replaceCode(node, str) {\n        var start = getOffset(node.range[0]),\n            end = getOffset(node.range[1]),\n            insert = 0;\n\n        for (var i = insertions.length - 1; i >= 0; i--) {\n          if (start > insertions[i][0]) {\n            insert = i + 1;\n            break;\n          }\n        }\n\n        insertions.splice(insert, 0, [start, str.length - end + start]);\n        code = code.substring(0, start) + str + code.substring(end);\n      }\n\n      function handleOverloading(node, parent) {\n        switch (node.type) {\n          case 'UnaryExpression':\n            if (node.operator in unaryOperators && node.argument.type !== 'Literal') {\n              var arg = getCode(node.argument);\n              replaceCode(node, '$__(\"' + node.operator + '\", ' + arg + ')');\n            }\n\n            break;\n\n          case 'BinaryExpression':\n            if (node.operator in binaryOperators && node.left.type !== 'Literal') {\n              var left = getCode(node.left),\n                  right = getCode(node.right),\n                  between = getBetween(node.left, node.right),\n                  operator = node.operator;\n              replaceCode(node, '__$__(' + left + ',' + between.replace(new RegExp('\\\\' + operator), '\"' + operator + '\"') + ', ' + right + ')');\n            }\n\n            break;\n\n          case 'UpdateExpression':\n          case 'AssignmentExpression':\n            var parentType = parent && parent.type;\n\n            if (!(parentType === 'ForStatement' || parentType === 'BinaryExpression' && /^[=!<>]/.test(parent.operator) || parentType === 'MemberExpression' && parent.computed)) {\n              if (node.type === 'UpdateExpression') {\n                var arg = getCode(node.argument),\n                    exp = '__$__(' + arg + ', \"' + node.operator[0] + '\", 1)',\n                    str = arg + ' = ' + exp;\n\n                if (node.prefix) {\n                  str = '(' + str + ')';\n                } else if (parentType === 'AssignmentExpression' || parentType === 'VariableDeclarator' || parentType === 'BinaryExpression') {\n                  if (getCode(parent.left || parent.id) === arg) str = exp;\n                  str = arg + '; ' + str;\n                }\n\n                replaceCode(node, str);\n              } else {\n                if (/^.=$/.test(node.operator) && node.left.type !== 'Literal') {\n                  var left = getCode(node.left),\n                      right = getCode(node.right),\n                      exp = left + ' = __$__(' + left + ', \"' + node.operator[0] + '\", ' + right + ')';\n                  replaceCode(node, /^\\(.*\\)$/.test(getCode(node)) ? '(' + exp + ')' : exp);\n                }\n              }\n            }\n\n            break;\n        }\n      }\n\n      function handleExports(node) {\n        switch (node.type) {\n          case 'ExportDefaultDeclaration':\n            replaceCode({\n              range: [node.start, node.declaration.start]\n            }, 'module.exports = ');\n            break;\n\n          case 'ExportNamedDeclaration':\n            var declaration = node.declaration;\n            var specifiers = node.specifiers;\n\n            if (declaration) {\n              var declarations = declaration.declarations;\n\n              if (declarations) {\n                declarations.forEach(function (dec) {\n                  replaceCode(dec, 'module.exports.' + getCode(dec));\n                });\n                replaceCode({\n                  range: [node.start, declaration.start + declaration.kind.length]\n                }, '');\n              }\n            } else if (specifiers) {\n              var exports = specifiers.map(function (specifier) {\n                var name = getCode(specifier);\n                return 'module.exports.' + name + ' = ' + name + '; ';\n              }).join('');\n\n              if (exports) {\n                replaceCode(node, exports);\n              }\n            }\n\n            break;\n        }\n      }\n\n      function walkAST(node, parent, paperFeatures) {\n        if (node) {\n          for (var key in node) {\n            if (key !== 'range' && key !== 'loc') {\n              var value = node[key];\n\n              if (Array.isArray(value)) {\n                for (var i = 0, l = value.length; i < l; i++) {\n                  walkAST(value[i], node, paperFeatures);\n                }\n              } else if (value && typeof value === 'object') {\n                walkAST(value, node, paperFeatures);\n              }\n            }\n          }\n\n          if (paperFeatures.operatorOverloading !== false) {\n            handleOverloading(node, parent);\n          }\n\n          if (paperFeatures.moduleExports !== false) {\n            handleExports(node);\n          }\n        }\n      }\n\n      function encodeVLQ(value) {\n        var res = '',\n            base64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        value = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n\n        while (value || !res) {\n          var next = value & 32 - 1;\n          value >>= 5;\n          if (value) next |= 32;\n          res += base64[next];\n        }\n\n        return res;\n      }\n\n      var url = options.url || '',\n          sourceMaps = options.sourceMaps,\n          paperFeatures = options.paperFeatures || {},\n          source = options.source || code,\n          offset = options.offset || 0,\n          agent = paper.agent,\n          version = agent.versionNumber,\n          offsetCode = false,\n          lineBreaks = /\\r\\n|\\n|\\r/mg,\n          map;\n\n      if (sourceMaps && (agent.chrome && version >= 30 || agent.webkit && version >= 537.76 || agent.firefox && version >= 23 || agent.node)) {\n        if (agent.node) {\n          offset -= 2;\n        } else if (window && url && !window.location.href.indexOf(url)) {\n          var html = document.getElementsByTagName('html')[0].innerHTML;\n          offset = html.substr(0, html.indexOf(code) + 1).match(lineBreaks).length + 1;\n        }\n\n        offsetCode = offset > 0 && !(agent.chrome && version >= 36 || agent.safari && version >= 600 || agent.firefox && version >= 40 || agent.node);\n        var mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n        mappings.length = (code.match(lineBreaks) || []).length + 1 + (offsetCode ? offset : 0);\n        map = {\n          version: 3,\n          file: url,\n          names: [],\n          mappings: mappings.join(';AACA'),\n          sourceRoot: '',\n          sources: [url],\n          sourcesContent: [source]\n        };\n      }\n\n      if (paperFeatures.operatorOverloading !== false || paperFeatures.moduleExports !== false) {\n        walkAST(parse(code, {\n          ranges: true,\n          preserveParens: true,\n          sourceType: 'module'\n        }), null, paperFeatures);\n      }\n\n      if (map) {\n        if (offsetCode) {\n          code = new Array(offset + 1).join('\\n') + code;\n        }\n\n        if (/^(inline|both)$/.test(sourceMaps)) {\n          code += \"\\n//# sourceMappingURL=data:application/json;base64,\" + self.btoa(unescape(encodeURIComponent(JSON.stringify(map))));\n        }\n\n        code += \"\\n//# sourceURL=\" + (url || 'paperscript');\n      }\n\n      return {\n        url: url,\n        source: source,\n        code: code,\n        map: map\n      };\n    }\n\n    function execute(code, scope, options) {\n      paper = scope;\n      var view = scope.getView(),\n          tool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(code) && !/\\bnew\\s+Tool\\b/.test(code) ? new Tool() : null,\n          toolHandlers = tool ? tool._events : [],\n          handlers = ['onFrame', 'onResize'].concat(toolHandlers),\n          params = [],\n          args = [],\n          func,\n          compiled = typeof code === 'object' ? code : compile(code, options);\n      code = compiled.code;\n\n      function expose(scope, hidden) {\n        for (var key in scope) {\n          if ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)' + key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n            params.push(key);\n            args.push(scope[key]);\n          }\n        }\n      }\n\n      expose({\n        __$__: __$__,\n        $__: $__,\n        paper: scope,\n        tool: tool\n      }, true);\n      expose(scope);\n      code = 'var module = { exports: {} }; ' + code;\n      var exports = Base.each(handlers, function (key) {\n        if (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n          params.push(key);\n          this.push('module.exports.' + key + ' = ' + key + ';');\n        }\n      }, []).join('\\n');\n\n      if (exports) {\n        code += '\\n' + exports;\n      }\n\n      code += '\\nreturn module.exports;';\n      var agent = paper.agent;\n\n      if (document && (agent.chrome || agent.firefox && agent.versionNumber < 40)) {\n        var script = document.createElement('script'),\n            head = document.head || document.getElementsByTagName('head')[0];\n        if (agent.firefox) code = '\\n' + code;\n        script.appendChild(document.createTextNode('document.__paperscript__ = function(' + params + ') {' + code + '\\n}'));\n        head.appendChild(script);\n        func = document.__paperscript__;\n        delete document.__paperscript__;\n        head.removeChild(script);\n      } else {\n        func = Function(params, code);\n      }\n\n      var exports = func && func.apply(scope, args);\n      var obj = exports || {};\n      Base.each(toolHandlers, function (key) {\n        var value = obj[key];\n        if (value) tool[key] = value;\n      });\n\n      if (view) {\n        if (obj.onResize) view.setOnResize(obj.onResize);\n        view.emit('resize', {\n          size: view.size,\n          delta: new Point()\n        });\n        if (obj.onFrame) view.setOnFrame(obj.onFrame);\n        view.requestUpdate();\n      }\n\n      return exports;\n    }\n\n    function loadScript(script) {\n      if (/^text\\/(?:x-|)paperscript$/.test(script.type) && PaperScope.getAttribute(script, 'ignore') !== 'true') {\n        var canvasId = PaperScope.getAttribute(script, 'canvas'),\n            canvas = document.getElementById(canvasId),\n            src = script.src || script.getAttribute('data-src'),\n            async = PaperScope.hasAttribute(script, 'async'),\n            scopeAttribute = 'data-paper-scope';\n        if (!canvas) throw new Error('Unable to find canvas with id \"' + canvasId + '\"');\n        var scope = PaperScope.get(canvas.getAttribute(scopeAttribute)) || new PaperScope().setup(canvas);\n        canvas.setAttribute(scopeAttribute, scope._id);\n\n        if (src) {\n          Http.request({\n            url: src,\n            async: async,\n            mimeType: 'text/plain',\n            onLoad: function (code) {\n              execute(code, scope, src);\n            }\n          });\n        } else {\n          execute(script.innerHTML, scope, script.baseURI);\n        }\n\n        script.setAttribute('data-paper-ignore', 'true');\n        return scope;\n      }\n    }\n\n    function loadAll() {\n      Base.each(document && document.getElementsByTagName('script'), loadScript);\n    }\n\n    function load(script) {\n      return script ? loadScript(script) : loadAll();\n    }\n\n    if (window) {\n      if (document.readyState === 'complete') {\n        setTimeout(loadAll);\n      } else {\n        DomEvent.add(window, {\n          load: loadAll\n        });\n      }\n    }\n\n    return {\n      compile: compile,\n      execute: execute,\n      load: load,\n      parse: parse,\n      calculateBinary: __$__,\n      calculateUnary: $__\n    };\n  }.call(this);\n\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar _pixelRatio;\n\nfunction getDevicePixelRatio() {\n  if (_pixelRatio) {\n    return _pixelRatio;\n  }\n\n  var canvas = Util_1.Util.createCanvasElement();\n  var context = canvas.getContext('2d');\n\n  _pixelRatio = function () {\n    var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1,\n        backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }();\n\n  return _pixelRatio;\n}\n\nvar Canvas = function () {\n  function Canvas(config) {\n    this.pixelRatio = 1;\n    this.width = 0;\n    this.height = 0;\n    this.isCache = false;\n    var conf = config || {};\n    var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n    this.pixelRatio = pixelRatio;\n    this._canvas = Util_1.Util.createCanvasElement();\n    this._canvas.style.padding = '0';\n    this._canvas.style.margin = '0';\n    this._canvas.style.border = '0';\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = '0';\n    this._canvas.style.left = '0';\n  }\n\n  Canvas.prototype.getContext = function () {\n    return this.context;\n  };\n\n  Canvas.prototype.getPixelRatio = function () {\n    return this.pixelRatio;\n  };\n\n  Canvas.prototype.setPixelRatio = function (pixelRatio) {\n    var previousRatio = this.pixelRatio;\n    this.pixelRatio = pixelRatio;\n    this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n  };\n\n  Canvas.prototype.setWidth = function (width) {\n    this.width = this._canvas.width = width * this.pixelRatio;\n    this._canvas.style.width = width + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.setHeight = function (height) {\n    this.height = this._canvas.height = height * this.pixelRatio;\n    this._canvas.style.height = height + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  Canvas.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  Canvas.prototype.setSize = function (width, height) {\n    this.setWidth(width || 0);\n    this.setHeight(height || 0);\n  };\n\n  Canvas.prototype.toDataURL = function (mimeType, quality) {\n    try {\n      return this._canvas.toDataURL(mimeType, quality);\n    } catch (e) {\n      try {\n        return this._canvas.toDataURL();\n      } catch (err) {\n        Util_1.Util.error('Unable to get data URL. ' + err.message + ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n        return '';\n      }\n    }\n  };\n\n  return Canvas;\n}();\n\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\n\nvar SceneCanvas = function (_super) {\n  __extends(SceneCanvas, _super);\n\n  function SceneCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.context = new Context_1.SceneContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return SceneCanvas;\n}(Canvas);\n\nexports.SceneCanvas = SceneCanvas;\n\nvar HitCanvas = function (_super) {\n  __extends(HitCanvas, _super);\n\n  function HitCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.hitCanvas = true;\n    _this.context = new Context_1.HitContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return HitCanvas;\n}(Canvas);\n\nexports.HitCanvas = HitCanvas;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Container = function (_super) {\n  __extends(Container, _super);\n\n  function Container() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.children = new Util_1.Collection();\n    return _this;\n  }\n\n  Container.prototype.getChildren = function (filterFunc) {\n    if (!filterFunc) {\n      return this.children;\n    }\n\n    var results = new Util_1.Collection();\n    this.children.each(function (child) {\n      if (filterFunc(child)) {\n        results.push(child);\n      }\n    });\n    return results;\n  };\n\n  Container.prototype.hasChildren = function () {\n    return this.getChildren().length > 0;\n  };\n\n  Container.prototype.removeChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.remove();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.destroyChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.destroy();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.add = function () {\n    var children = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      children[_i] = arguments[_i];\n    }\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    var child = children[0];\n\n    if (child.getParent()) {\n      child.moveTo(this);\n      return this;\n    }\n\n    var _children = this.children;\n\n    this._validateAdd(child);\n\n    child._clearCaches();\n\n    child.index = _children.length;\n    child.parent = this;\n\n    _children.push(child);\n\n    this._fire('add', {\n      child: child\n    });\n\n    return this;\n  };\n\n  Container.prototype.destroy = function () {\n    if (this.hasChildren()) {\n      this.destroyChildren();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    return this;\n  };\n\n  Container.prototype.find = function (selector) {\n    return this._generalFind(selector, false);\n  };\n\n  Container.prototype.get = function (selector) {\n    Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n    return this.find(selector);\n  };\n\n  Container.prototype.findOne = function (selector) {\n    var result = this._generalFind(selector, true);\n\n    return result.length > 0 ? result[0] : undefined;\n  };\n\n  Container.prototype._generalFind = function (selector, findOne) {\n    var retArr = [];\n\n    this._descendants(function (node) {\n      var valid = node._isMatch(selector);\n\n      if (valid) {\n        retArr.push(node);\n      }\n\n      if (valid && findOne) {\n        return true;\n      }\n\n      return false;\n    });\n\n    return Util_1.Collection.toCollection(retArr);\n  };\n\n  Container.prototype._descendants = function (fn) {\n    var shouldStop = false;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      shouldStop = fn(child);\n\n      if (shouldStop) {\n        return true;\n      }\n\n      if (!child.hasChildren()) {\n        continue;\n      }\n\n      shouldStop = child._descendants(fn);\n\n      if (shouldStop) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.toObject = function () {\n    var obj = Node_1.Node.prototype.toObject.call(this);\n    obj.children = [];\n    var children = this.getChildren();\n    var len = children.length;\n\n    for (var n = 0; n < len; n++) {\n      var child = children[n];\n      obj.children.push(child.toObject());\n    }\n\n    return obj;\n  };\n\n  Container.prototype.isAncestorOf = function (node) {\n    var parent = node.getParent();\n\n    while (parent) {\n      if (parent._id === this._id) {\n        return true;\n      }\n\n      parent = parent.getParent();\n    }\n\n    return false;\n  };\n\n  Container.prototype.clone = function (obj) {\n    var node = Node_1.Node.prototype.clone.call(this, obj);\n    this.getChildren().each(function (no) {\n      node.add(no.clone());\n    });\n    return node;\n  };\n\n  Container.prototype.getAllIntersections = function (pos) {\n    var arr = [];\n    this.find('Shape').each(function (shape) {\n      if (shape.isVisible() && shape.intersects(pos)) {\n        arr.push(shape);\n      }\n    });\n    return arr;\n  };\n\n  Container.prototype._setChildrenIndices = function () {\n    this.children.each(function (child, n) {\n      child.index = n;\n    });\n  };\n\n  Container.prototype.drawScene = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas(),\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n\n    var caching = canvas && canvas.isCache;\n\n    if (!this.isVisible() && !caching) {\n      return this;\n    }\n\n    if (cachedSceneCanvas) {\n      context.save();\n      var m = this.getAbsoluteTransform(top).getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n      this._drawCachedSceneCanvas(context);\n\n      context.restore();\n    } else {\n      this._drawChildren('drawScene', canvas, top);\n    }\n\n    return this;\n  };\n\n  Container.prototype.drawHit = function (can, top) {\n    if (!this.shouldDrawHit(top)) {\n      return this;\n    }\n\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (cachedHitCanvas) {\n      context.save();\n      var m = this.getAbsoluteTransform(top).getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n      this._drawCachedHitCanvas(context);\n\n      context.restore();\n    } else {\n      this._drawChildren('drawHit', canvas, top);\n    }\n\n    return this;\n  };\n\n  Container.prototype._drawChildren = function (drawMethod, canvas, top) {\n    var context = canvas && canvas.getContext(),\n        clipWidth = this.clipWidth(),\n        clipHeight = this.clipHeight(),\n        clipFunc = this.clipFunc(),\n        hasClip = clipWidth && clipHeight || clipFunc;\n    var selfCache = top === this;\n\n    if (hasClip) {\n      context.save();\n      var transform = this.getAbsoluteTransform(top);\n      var m = transform.getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      context.beginPath();\n\n      if (clipFunc) {\n        clipFunc.call(this, context, this);\n      } else {\n        var clipX = this.clipX();\n        var clipY = this.clipY();\n        context.rect(clipX, clipY, clipWidth, clipHeight);\n      }\n\n      context.clip();\n      m = transform.copy().invert().getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    }\n\n    var hasComposition = !selfCache && this.globalCompositeOperation() !== 'source-over' && drawMethod === 'drawScene';\n\n    if (hasComposition) {\n      context.save();\n\n      context._applyGlobalCompositeOperation(this);\n    }\n\n    this.children.each(function (child) {\n      child[drawMethod](canvas, top);\n    });\n\n    if (hasComposition) {\n      context.restore();\n    }\n\n    if (hasClip) {\n      context.restore();\n    }\n  };\n\n  Container.prototype.getClientRect = function (config) {\n    config = config || {};\n    var skipTransform = config.skipTransform;\n    var relativeTo = config.relativeTo;\n    var minX, minY, maxX, maxY;\n    var selfRect = {\n      x: Infinity,\n      y: Infinity,\n      width: 0,\n      height: 0\n    };\n    var that = this;\n    this.children.each(function (child) {\n      if (!child.visible()) {\n        return;\n      }\n\n      var rect = child.getClientRect({\n        relativeTo: that,\n        skipShadow: config.skipShadow,\n        skipStroke: config.skipStroke\n      });\n\n      if (rect.width === 0 && rect.height === 0) {\n        return;\n      }\n\n      if (minX === undefined) {\n        minX = rect.x;\n        minY = rect.y;\n        maxX = rect.x + rect.width;\n        maxY = rect.y + rect.height;\n      } else {\n        minX = Math.min(minX, rect.x);\n        minY = Math.min(minY, rect.y);\n        maxX = Math.max(maxX, rect.x + rect.width);\n        maxY = Math.max(maxY, rect.y + rect.height);\n      }\n    });\n    var shapes = this.find('Shape');\n    var hasVisible = false;\n\n    for (var i = 0; i < shapes.length; i++) {\n      var shape = shapes[i];\n\n      if (shape._isVisible(this)) {\n        hasVisible = true;\n        break;\n      }\n    }\n\n    if (hasVisible && minX !== undefined) {\n      selfRect = {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      };\n    } else {\n      selfRect = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (!skipTransform) {\n      return this._transformedRect(selfRect, relativeTo);\n    }\n\n    return selfRect;\n  };\n\n  return Container;\n}(Node_1.Node);\n\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nexports.DD = {\n  get isDragging() {\n    var flag = false;\n\n    exports.DD._dragElements.forEach(function (elem) {\n      if (elem.dragStatus === 'dragging') {\n        flag = true;\n      }\n    });\n\n    return flag;\n  },\n\n  justDragged: false,\n\n  get node() {\n    var node;\n\n    exports.DD._dragElements.forEach(function (elem) {\n      node = elem.node;\n    });\n\n    return node;\n  },\n\n  _dragElements: new Map(),\n  _drag: function (evt) {\n    var nodesToFireEvents = [];\n\n    exports.DD._dragElements.forEach(function (elem, key) {\n      var node = elem.node;\n      var stage = node.getStage();\n      stage.setPointersPositions(evt);\n\n      if (elem.pointerId === undefined) {\n        elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n      }\n\n      var pos = stage._changedPointerPositions.find(function (pos) {\n        return pos.id === elem.pointerId;\n      });\n\n      if (!pos) {\n        return;\n      }\n\n      if (elem.dragStatus !== 'dragging') {\n        var dragDistance = node.dragDistance();\n        var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n\n        if (distance < dragDistance) {\n          return;\n        }\n\n        node.startDrag({\n          evt: evt\n        });\n\n        if (!node.isDragging()) {\n          return;\n        }\n      }\n\n      node._setDragPosition(evt, elem);\n\n      nodesToFireEvents.push(node);\n    });\n\n    nodesToFireEvents.forEach(function (node) {\n      node.fire('dragmove', {\n        type: 'dragmove',\n        target: node,\n        evt: evt\n      }, true);\n    });\n  },\n  _endDragBefore: function (evt) {\n    exports.DD._dragElements.forEach(function (elem, key) {\n      var node = elem.node;\n      var stage = node.getStage();\n\n      if (evt) {\n        stage.setPointersPositions(evt);\n      }\n\n      var pos = stage._changedPointerPositions.find(function (pos) {\n        return pos.id === elem.pointerId;\n      });\n\n      if (!pos) {\n        return;\n      }\n\n      if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n        exports.DD.justDragged = true;\n        Global_1.Konva.listenClickTap = false;\n        elem.dragStatus = 'stopped';\n      }\n\n      var drawNode = elem.node.getLayer() || elem.node instanceof Global_1.Konva['Stage'] && elem.node;\n\n      if (drawNode) {\n        drawNode.batchDraw();\n      }\n    });\n  },\n  _endDragAfter: function (evt) {\n    exports.DD._dragElements.forEach(function (elem, key) {\n      if (elem.dragStatus === 'stopped') {\n        elem.node.fire('dragend', {\n          type: 'dragend',\n          target: elem.node,\n          evt: evt\n        }, true);\n      }\n\n      if (elem.dragStatus !== 'dragging') {\n        exports.DD._dragElements.delete(key);\n      }\n    });\n  }\n};\n\nif (Global_1.Konva.isBrowser) {\n  window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n  window.addEventListener('touchend', exports.DD._endDragBefore, true);\n  window.addEventListener('mousemove', exports.DD._drag);\n  window.addEventListener('touchmove', exports.DD._drag);\n  window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n  window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Group = function (_super) {\n  __extends(Group, _super);\n\n  function Group() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Group.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to groups.');\n    }\n  };\n\n  return Group;\n}(Container_1.Container);\n\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\n\nGlobal_1._registerNode(Group);\n\nUtil_1.Collection.mapMethods(Group);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar now = function () {\n  if (Global_1.glob.performance && Global_1.glob.performance.now) {\n    return function () {\n      return Global_1.glob.performance.now();\n    };\n  }\n\n  return function () {\n    return new Date().getTime();\n  };\n}();\n\nvar Animation = function () {\n  function Animation(func, layers) {\n    this.id = Animation.animIdCounter++;\n    this.frame = {\n      time: 0,\n      timeDiff: 0,\n      lastTime: now(),\n      frameRate: 0\n    };\n    this.func = func;\n    this.setLayers(layers);\n  }\n\n  Animation.prototype.setLayers = function (layers) {\n    var lays = [];\n\n    if (!layers) {\n      lays = [];\n    } else if (layers.length > 0) {\n      lays = layers;\n    } else {\n      lays = [layers];\n    }\n\n    this.layers = lays;\n    return this;\n  };\n\n  Animation.prototype.getLayers = function () {\n    return this.layers;\n  };\n\n  Animation.prototype.addLayer = function (layer) {\n    var layers = this.layers,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (layers[n]._id === layer._id) {\n        return false;\n      }\n    }\n\n    this.layers.push(layer);\n    return true;\n  };\n\n  Animation.prototype.isRunning = function () {\n    var a = Animation,\n        animations = a.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === this.id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Animation.prototype.start = function () {\n    this.stop();\n    this.frame.timeDiff = 0;\n    this.frame.lastTime = now();\n\n    Animation._addAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype.stop = function () {\n    Animation._removeAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype._updateFrameObject = function (time) {\n    this.frame.timeDiff = time - this.frame.lastTime;\n    this.frame.lastTime = time;\n    this.frame.time += this.frame.timeDiff;\n    this.frame.frameRate = 1000 / this.frame.timeDiff;\n  };\n\n  Animation._addAnimation = function (anim) {\n    this.animations.push(anim);\n\n    this._handleAnimation();\n  };\n\n  Animation._removeAnimation = function (anim) {\n    var id = anim.id,\n        animations = this.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === id) {\n        this.animations.splice(n, 1);\n        break;\n      }\n    }\n  };\n\n  Animation._runFrames = function () {\n    var layerHash = {},\n        animations = this.animations,\n        anim,\n        layers,\n        func,\n        n,\n        i,\n        layersLen,\n        layer,\n        key,\n        needRedraw;\n\n    for (n = 0; n < animations.length; n++) {\n      anim = animations[n];\n      layers = anim.layers;\n      func = anim.func;\n\n      anim._updateFrameObject(now());\n\n      layersLen = layers.length;\n\n      if (func) {\n        needRedraw = func.call(anim, anim.frame) !== false;\n      } else {\n        needRedraw = true;\n      }\n\n      if (!needRedraw) {\n        continue;\n      }\n\n      for (i = 0; i < layersLen; i++) {\n        layer = layers[i];\n\n        if (layer._id !== undefined) {\n          layerHash[layer._id] = layer;\n        }\n      }\n    }\n\n    for (key in layerHash) {\n      if (!layerHash.hasOwnProperty(key)) {\n        continue;\n      }\n\n      layerHash[key].draw();\n    }\n  };\n\n  Animation._animationLoop = function () {\n    var Anim = Animation;\n\n    if (Anim.animations.length) {\n      Anim._runFrames();\n\n      requestAnimationFrame(Anim._animationLoop);\n    } else {\n      Anim.animRunning = false;\n    }\n  };\n\n  Animation._handleAnimation = function () {\n    if (!this.animRunning) {\n      this.animRunning = true;\n      requestAnimationFrame(this._animationLoop);\n    }\n  };\n\n  Animation.animations = [];\n  Animation.animIdCounter = 0;\n  Animation.animRunning = false;\n  return Animation;\n}();\n\nexports.Animation = Animation;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Global_1 = require(\"./Global\");\n\nvar COMMA = ',',\n    OPEN_PAREN = '(',\n    CLOSE_PAREN = ')',\n    OPEN_PAREN_BRACKET = '([',\n    CLOSE_BRACKET_PAREN = '])',\n    SEMICOLON = ';',\n    DOUBLE_PAREN = '()',\n    EQUALS = '=',\n    CONTEXT_METHODS = ['arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect', 'clip', 'closePath', 'createLinearGradient', 'createPattern', 'createRadialGradient', 'drawImage', 'ellipse', 'fill', 'fillText', 'getImageData', 'createImageData', 'lineTo', 'moveTo', 'putImageData', 'quadraticCurveTo', 'rect', 'restore', 'rotate', 'save', 'scale', 'setLineDash', 'setTransform', 'stroke', 'strokeText', 'transform', 'translate'];\nvar CONTEXT_PROPERTIES = ['fillStyle', 'strokeStyle', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'font', 'textAlign', 'textBaseline', 'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled'];\nvar traceArrMax = 100;\n\nvar Context = function () {\n  function Context(canvas) {\n    this.canvas = canvas;\n    this._context = canvas._canvas.getContext('2d');\n\n    if (Global_1.Konva.enableTrace) {\n      this.traceArr = [];\n\n      this._enableTrace();\n    }\n  }\n\n  Context.prototype.fillShape = function (shape) {\n    if (shape.fillEnabled()) {\n      this._fill(shape);\n    }\n  };\n\n  Context.prototype._fill = function (shape) {};\n\n  Context.prototype.strokeShape = function (shape) {\n    if (shape.hasStroke()) {\n      this._stroke(shape);\n    }\n  };\n\n  Context.prototype._stroke = function (shape) {};\n\n  Context.prototype.fillStrokeShape = function (shape) {\n    if (shape.attrs.fillAfterStrokeEnabled) {\n      this.strokeShape(shape);\n      this.fillShape(shape);\n    } else {\n      this.fillShape(shape);\n      this.strokeShape(shape);\n    }\n  };\n\n  Context.prototype.getTrace = function (relaxed) {\n    var traceArr = this.traceArr,\n        len = traceArr.length,\n        str = '',\n        n,\n        trace,\n        method,\n        args;\n\n    for (n = 0; n < len; n++) {\n      trace = traceArr[n];\n      method = trace.method;\n\n      if (method) {\n        args = trace.args;\n        str += method;\n\n        if (relaxed) {\n          str += DOUBLE_PAREN;\n        } else {\n          if (Util_1.Util._isArray(args[0])) {\n            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n          } else {\n            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n          }\n        }\n      } else {\n        str += trace.property;\n\n        if (!relaxed) {\n          str += EQUALS + trace.val;\n        }\n      }\n\n      str += SEMICOLON;\n    }\n\n    return str;\n  };\n\n  Context.prototype.clearTrace = function () {\n    this.traceArr = [];\n  };\n\n  Context.prototype._trace = function (str) {\n    var traceArr = this.traceArr,\n        len;\n    traceArr.push(str);\n    len = traceArr.length;\n\n    if (len >= traceArrMax) {\n      traceArr.shift();\n    }\n  };\n\n  Context.prototype.reset = function () {\n    var pixelRatio = this.getCanvas().getPixelRatio();\n    this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n  };\n\n  Context.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  Context.prototype.clear = function (bounds) {\n    var canvas = this.getCanvas();\n\n    if (bounds) {\n      this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n    } else {\n      this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n    }\n  };\n\n  Context.prototype._applyLineCap = function (shape) {\n    var lineCap = shape.getLineCap();\n\n    if (lineCap) {\n      this.setAttr('lineCap', lineCap);\n    }\n  };\n\n  Context.prototype._applyOpacity = function (shape) {\n    var absOpacity = shape.getAbsoluteOpacity();\n\n    if (absOpacity !== 1) {\n      this.setAttr('globalAlpha', absOpacity);\n    }\n  };\n\n  Context.prototype._applyLineJoin = function (shape) {\n    var lineJoin = shape.attrs.lineJoin;\n\n    if (lineJoin) {\n      this.setAttr('lineJoin', lineJoin);\n    }\n  };\n\n  Context.prototype.setAttr = function (attr, val) {\n    this._context[attr] = val;\n  };\n\n  Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n    this._context.arcTo(a0, a1, a2, a3, a4);\n  };\n\n  Context.prototype.beginPath = function () {\n    this._context.beginPath();\n  };\n\n  Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.clearRect = function (a0, a1, a2, a3) {\n    this._context.clearRect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.clip = function () {\n    this._context.clip();\n  };\n\n  Context.prototype.closePath = function () {\n    this._context.closePath();\n  };\n\n  Context.prototype.createImageData = function (a0, a1) {\n    var a = arguments;\n\n    if (a.length === 2) {\n      return this._context.createImageData(a0, a1);\n    } else if (a.length === 1) {\n      return this._context.createImageData(a0);\n    }\n  };\n\n  Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n    return this._context.createLinearGradient(a0, a1, a2, a3);\n  };\n\n  Context.prototype.createPattern = function (a0, a1) {\n    return this._context.createPattern(a0, a1);\n  };\n\n  Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n    return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n    var a = arguments,\n        _context = this._context;\n\n    if (a.length === 3) {\n      _context.drawImage(a0, a1, a2);\n    } else if (a.length === 5) {\n      _context.drawImage(a0, a1, a2, a3, a4);\n    } else if (a.length === 9) {\n      _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n    }\n  };\n\n  Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n    this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n  };\n\n  Context.prototype.isPointInPath = function (x, y) {\n    return this._context.isPointInPath(x, y);\n  };\n\n  Context.prototype.fill = function () {\n    this._context.fill();\n  };\n\n  Context.prototype.fillRect = function (x, y, width, height) {\n    this._context.fillRect(x, y, width, height);\n  };\n\n  Context.prototype.strokeRect = function (x, y, width, height) {\n    this._context.strokeRect(x, y, width, height);\n  };\n\n  Context.prototype.fillText = function (a0, a1, a2) {\n    this._context.fillText(a0, a1, a2);\n  };\n\n  Context.prototype.measureText = function (text) {\n    return this._context.measureText(text);\n  };\n\n  Context.prototype.getImageData = function (a0, a1, a2, a3) {\n    return this._context.getImageData(a0, a1, a2, a3);\n  };\n\n  Context.prototype.lineTo = function (a0, a1) {\n    this._context.lineTo(a0, a1);\n  };\n\n  Context.prototype.moveTo = function (a0, a1) {\n    this._context.moveTo(a0, a1);\n  };\n\n  Context.prototype.rect = function (a0, a1, a2, a3) {\n    this._context.rect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.putImageData = function (a0, a1, a2) {\n    this._context.putImageData(a0, a1, a2);\n  };\n\n  Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n    this._context.quadraticCurveTo(a0, a1, a2, a3);\n  };\n\n  Context.prototype.restore = function () {\n    this._context.restore();\n  };\n\n  Context.prototype.rotate = function (a0) {\n    this._context.rotate(a0);\n  };\n\n  Context.prototype.save = function () {\n    this._context.save();\n  };\n\n  Context.prototype.scale = function (a0, a1) {\n    this._context.scale(a0, a1);\n  };\n\n  Context.prototype.setLineDash = function (a0) {\n    if (this._context.setLineDash) {\n      this._context.setLineDash(a0);\n    } else if ('mozDash' in this._context) {\n      this._context['mozDash'] = a0;\n    } else if ('webkitLineDash' in this._context) {\n      this._context['webkitLineDash'] = a0;\n    }\n  };\n\n  Context.prototype.getLineDash = function () {\n    return this._context.getLineDash();\n  };\n\n  Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.setTransform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.stroke = function () {\n    this._context.stroke();\n  };\n\n  Context.prototype.strokeText = function (a0, a1, a2, a3) {\n    this._context.strokeText(a0, a1, a2, a3);\n  };\n\n  Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.transform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.translate = function (a0, a1) {\n    this._context.translate(a0, a1);\n  };\n\n  Context.prototype._enableTrace = function () {\n    var that = this,\n        len = CONTEXT_METHODS.length,\n        _simplifyArray = Util_1.Util._simplifyArray,\n        origSetter = this.setAttr,\n        n,\n        args;\n\n    var func = function (methodName) {\n      var origMethod = that[methodName],\n          ret;\n\n      that[methodName] = function () {\n        args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n        ret = origMethod.apply(that, arguments);\n\n        that._trace({\n          method: methodName,\n          args: args\n        });\n\n        return ret;\n      };\n    };\n\n    for (n = 0; n < len; n++) {\n      func(CONTEXT_METHODS[n]);\n    }\n\n    that.setAttr = function () {\n      origSetter.apply(that, arguments);\n      var prop = arguments[0];\n      var val = arguments[1];\n\n      if (prop === 'shadowOffsetX' || prop === 'shadowOffsetY' || prop === 'shadowBlur') {\n        val = val / this.canvas.getPixelRatio();\n      }\n\n      that._trace({\n        property: prop,\n        val: val\n      });\n    };\n  };\n\n  Context.prototype._applyGlobalCompositeOperation = function (node) {\n    var globalCompositeOperation = node.getGlobalCompositeOperation();\n\n    if (globalCompositeOperation !== 'source-over') {\n      this.setAttr('globalCompositeOperation', globalCompositeOperation);\n    }\n  };\n\n  return Context;\n}();\n\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n  Object.defineProperty(Context.prototype, prop, {\n    get: function () {\n      return this._context[prop];\n    },\n    set: function (val) {\n      this._context[prop] = val;\n    }\n  });\n});\n\nvar SceneContext = function (_super) {\n  __extends(SceneContext, _super);\n\n  function SceneContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SceneContext.prototype._fillColor = function (shape) {\n    var fill = shape.fill();\n    this.setAttr('fillStyle', fill);\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillPattern = function (shape) {\n    var fillPatternX = shape.getFillPatternX(),\n        fillPatternY = shape.getFillPatternY(),\n        fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()),\n        fillPatternOffsetX = shape.getFillPatternOffsetX(),\n        fillPatternOffsetY = shape.getFillPatternOffsetY(),\n        fillPatternScaleX = shape.getFillPatternScaleX(),\n        fillPatternScaleY = shape.getFillPatternScaleY();\n\n    if (fillPatternX || fillPatternY) {\n      this.translate(fillPatternX || 0, fillPatternY || 0);\n    }\n\n    if (fillPatternRotation) {\n      this.rotate(fillPatternRotation);\n    }\n\n    if (fillPatternScaleX || fillPatternScaleY) {}\n\n    if (fillPatternOffsetX || fillPatternOffsetY) {\n      this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n    }\n\n    this.setAttr('fillStyle', shape._getFillPattern());\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillLinearGradient = function (shape) {\n    var grd = shape._getLinearGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fillRadialGradient = function (shape) {\n    var grd = shape._getRadialGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fill = function (shape) {\n    var hasColor = shape.fill(),\n        fillPriority = shape.getFillPriority();\n\n    if (hasColor && fillPriority === 'color') {\n      this._fillColor(shape);\n\n      return;\n    }\n\n    var hasPattern = shape.getFillPatternImage();\n\n    if (hasPattern && fillPriority === 'pattern') {\n      this._fillPattern(shape);\n\n      return;\n    }\n\n    var hasLinearGradient = shape.getFillLinearGradientColorStops();\n\n    if (hasLinearGradient && fillPriority === 'linear-gradient') {\n      this._fillLinearGradient(shape);\n\n      return;\n    }\n\n    var hasRadialGradient = shape.getFillRadialGradientColorStops();\n\n    if (hasRadialGradient && fillPriority === 'radial-gradient') {\n      this._fillRadialGradient(shape);\n\n      return;\n    }\n\n    if (hasColor) {\n      this._fillColor(shape);\n    } else if (hasPattern) {\n      this._fillPattern(shape);\n    } else if (hasLinearGradient) {\n      this._fillLinearGradient(shape);\n    } else if (hasRadialGradient) {\n      this._fillRadialGradient(shape);\n    }\n  };\n\n  SceneContext.prototype._strokeLinearGradient = function (shape) {\n    var start = shape.getStrokeLinearGradientStartPoint(),\n        end = shape.getStrokeLinearGradientEndPoint(),\n        colorStops = shape.getStrokeLinearGradientColorStops(),\n        grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n\n    if (colorStops) {\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      this.setAttr('strokeStyle', grd);\n    }\n  };\n\n  SceneContext.prototype._stroke = function (shape) {\n    var dash = shape.dash(),\n        strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n    if (shape.hasStroke()) {\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      if (dash && shape.dashEnabled()) {\n        this.setLineDash(dash);\n        this.setAttr('lineDashOffset', shape.dashOffset());\n      }\n\n      this.setAttr('lineWidth', shape.strokeWidth());\n\n      if (!shape.getShadowForStrokeEnabled()) {\n        this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n      }\n\n      var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n\n      if (hasLinearGradient) {\n        this._strokeLinearGradient(shape);\n      } else {\n        this.setAttr('strokeStyle', shape.stroke());\n      }\n\n      shape._strokeFunc(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  SceneContext.prototype._applyShadow = function (shape) {\n    var util = Util_1.Util,\n        color = util.get(shape.getShadowRGBA(), 'black'),\n        blur = util.get(shape.getShadowBlur(), 5),\n        offset = util.get(shape.getShadowOffset(), {\n      x: 0,\n      y: 0\n    }),\n        scale = shape.getAbsoluteScale(),\n        ratio = this.canvas.getPixelRatio(),\n        scaleX = scale.x * ratio,\n        scaleY = scale.y * ratio;\n    this.setAttr('shadowColor', color);\n    this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n    this.setAttr('shadowOffsetX', offset.x * scaleX);\n    this.setAttr('shadowOffsetY', offset.y * scaleY);\n  };\n\n  return SceneContext;\n}(Context);\n\nexports.SceneContext = SceneContext;\n\nvar HitContext = function (_super) {\n  __extends(HitContext, _super);\n\n  function HitContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HitContext.prototype._fill = function (shape) {\n    this.save();\n    this.setAttr('fillStyle', shape.colorKey);\n\n    shape._fillFuncHit(this);\n\n    this.restore();\n  };\n\n  HitContext.prototype.strokeShape = function (shape) {\n    if (shape.hasHitStroke()) {\n      this._stroke(shape);\n    }\n  };\n\n  HitContext.prototype._stroke = function (shape) {\n    if (shape.hasHitStroke()) {\n      var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      var hitStrokeWidth = shape.hitStrokeWidth();\n      var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n      this.setAttr('lineWidth', strokeWidth);\n      this.setAttr('strokeStyle', shape.colorKey);\n\n      shape._strokeFuncHit(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  return HitContext;\n}(Context);\n\nexports.HitContext = HitContext;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Captures = new Map();\nvar SUPPORT_POINTER_EVENTS = Global_1.Konva._global['PointerEvent'] !== undefined;\n\nfunction getCapturedShape(pointerId) {\n  return Captures.get(pointerId);\n}\n\nexports.getCapturedShape = getCapturedShape;\n\nfunction createEvent(evt) {\n  return {\n    evt: evt,\n    pointerId: evt.pointerId\n  };\n}\n\nexports.createEvent = createEvent;\n\nfunction hasPointerCapture(pointerId, shape) {\n  return Captures.get(pointerId) === shape;\n}\n\nexports.hasPointerCapture = hasPointerCapture;\n\nfunction setPointerCapture(pointerId, shape) {\n  releaseCapture(pointerId);\n  var stage = shape.getStage();\n  if (!stage) return;\n  Captures.set(pointerId, shape);\n\n  if (SUPPORT_POINTER_EVENTS) {\n    shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n  }\n}\n\nexports.setPointerCapture = setPointerCapture;\n\nfunction releaseCapture(pointerId, target) {\n  var shape = Captures.get(pointerId);\n  if (!shape) return;\n  var stage = shape.getStage();\n\n  if (stage && stage.content) {}\n\n  Captures.delete(pointerId);\n\n  if (SUPPORT_POINTER_EVENTS) {\n    shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n  }\n}\n\nexports.releaseCapture = releaseCapture;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Global_1 = require(\"./Global\");\n\nvar HASH = '#',\n    BEFORE_DRAW = 'beforeDraw',\n    DRAW = 'draw',\n    INTERSECTION_OFFSETS = [{\n  x: 0,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}],\n    INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\n\nvar Layer = function (_super) {\n  __extends(Layer, _super);\n\n  function Layer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.canvas = new Canvas_1.SceneCanvas();\n    _this.hitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1\n    });\n    _this._waitingForDraw = false;\n\n    _this.on('visibleChange.konva', _this._checkVisibility);\n\n    _this._checkVisibility();\n\n    _this.on('imageSmoothingEnabledChange.konva', _this._setSmoothEnabled);\n\n    _this._setSmoothEnabled();\n\n    return _this;\n  }\n\n  Layer.prototype.createPNGStream = function () {\n    var c = this.canvas._canvas;\n    return c.createPNGStream();\n  };\n\n  Layer.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  Layer.prototype.getHitCanvas = function () {\n    return this.hitCanvas;\n  };\n\n  Layer.prototype.getContext = function () {\n    return this.getCanvas().getContext();\n  };\n\n  Layer.prototype.clear = function (bounds) {\n    this.getContext().clear(bounds);\n    this.getHitCanvas().getContext().clear(bounds);\n    return this;\n  };\n\n  Layer.prototype.setZIndex = function (index) {\n    _super.prototype.setZIndex.call(this, index);\n\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n\n      if (index < stage.children.length - 1) {\n        stage.content.insertBefore(this.getCanvas()._canvas, stage.children[index + 1].getCanvas()._canvas);\n      } else {\n        stage.content.appendChild(this.getCanvas()._canvas);\n      }\n    }\n\n    return this;\n  };\n\n  Layer.prototype.moveToTop = function () {\n    Node_1.Node.prototype.moveToTop.call(this);\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  Layer.prototype.moveUp = function () {\n    var moved = Node_1.Node.prototype.moveUp.call(this);\n\n    if (!moved) {\n      return false;\n    }\n\n    var stage = this.getStage();\n\n    if (!stage) {\n      return false;\n    }\n\n    stage.content.removeChild(this.getCanvas()._canvas);\n\n    if (this.index < stage.children.length - 1) {\n      stage.content.insertBefore(this.getCanvas()._canvas, stage.children[this.index + 1].getCanvas()._canvas);\n    } else {\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  Layer.prototype.moveDown = function () {\n    if (Node_1.Node.prototype.moveDown.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.children;\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Layer.prototype.moveToBottom = function () {\n    if (Node_1.Node.prototype.moveToBottom.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.children;\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Layer.prototype.getLayer = function () {\n    return this;\n  };\n\n  Layer.prototype.remove = function () {\n    var _canvas = this.getCanvas()._canvas;\n\n    Node_1.Node.prototype.remove.call(this);\n\n    if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n      _canvas.parentNode.removeChild(_canvas);\n    }\n\n    return this;\n  };\n\n  Layer.prototype.getStage = function () {\n    return this.parent;\n  };\n\n  Layer.prototype.setSize = function (_a) {\n    var width = _a.width,\n        height = _a.height;\n    this.canvas.setSize(width, height);\n    this.hitCanvas.setSize(width, height);\n\n    this._setSmoothEnabled();\n\n    return this;\n  };\n\n  Layer.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to a layer.');\n    }\n  };\n\n  Layer.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    config.width = config.width || this.getWidth();\n    config.height = config.height || this.getHeight();\n    config.x = config.x !== undefined ? config.x : this.x();\n    config.y = config.y !== undefined ? config.y : this.y();\n    return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n  };\n\n  Layer.prototype._checkVisibility = function () {\n    var visible = this.visible();\n\n    if (visible) {\n      this.canvas._canvas.style.display = 'block';\n    } else {\n      this.canvas._canvas.style.display = 'none';\n    }\n  };\n\n  Layer.prototype._setSmoothEnabled = function () {\n    this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n  };\n\n  Layer.prototype.getWidth = function () {\n    if (this.parent) {\n      return this.parent.width();\n    }\n  };\n\n  Layer.prototype.setWidth = function () {\n    Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n  };\n\n  Layer.prototype.getHeight = function () {\n    if (this.parent) {\n      return this.parent.height();\n    }\n  };\n\n  Layer.prototype.setHeight = function () {\n    Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n  };\n\n  Layer.prototype.batchDraw = function () {\n    var _this = this;\n\n    if (!this._waitingForDraw) {\n      this._waitingForDraw = true;\n      Util_1.Util.requestAnimFrame(function () {\n        _this.draw();\n\n        _this._waitingForDraw = false;\n      });\n    }\n\n    return this;\n  };\n\n  Layer.prototype.getIntersection = function (pos, selector) {\n    if (!this.isListening() || !this.isVisible()) {\n      return null;\n    }\n\n    var spiralSearchDistance = 1;\n    var continueSearch = false;\n\n    while (true) {\n      for (var i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n        var intersectionOffset = INTERSECTION_OFFSETS[i];\n\n        var obj = this._getIntersection({\n          x: pos.x + intersectionOffset.x * spiralSearchDistance,\n          y: pos.y + intersectionOffset.y * spiralSearchDistance\n        });\n\n        var shape = obj.shape;\n\n        if (shape && selector) {\n          return shape.findAncestor(selector, true);\n        } else if (shape) {\n          return shape;\n        }\n\n        continueSearch = !!obj.antialiased;\n\n        if (!obj.antialiased) {\n          break;\n        }\n      }\n\n      if (continueSearch) {\n        spiralSearchDistance += 1;\n      } else {\n        return null;\n      }\n    }\n  };\n\n  Layer.prototype._getIntersection = function (pos) {\n    var ratio = this.hitCanvas.pixelRatio;\n    var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n    var p3 = p[3];\n\n    if (p3 === 255) {\n      var colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n\n      var shape = Shape_1.shapes[HASH + colorKey];\n\n      if (shape) {\n        return {\n          shape: shape\n        };\n      }\n\n      return {\n        antialiased: true\n      };\n    } else if (p3 > 0) {\n      return {\n        antialiased: true\n      };\n    }\n\n    return {};\n  };\n\n  Layer.prototype.drawScene = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    this._fire(BEFORE_DRAW, {\n      node: this\n    });\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawScene.call(this, canvas, top);\n\n    this._fire(DRAW, {\n      node: this\n    });\n\n    return this;\n  };\n\n  Layer.prototype.drawHit = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas;\n\n    if (layer && layer.clearBeforeDraw()) {\n      layer.getHitCanvas().getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawHit.call(this, canvas, top);\n    return this;\n  };\n\n  Layer.prototype.enableHitGraph = function () {\n    this.hitGraphEnabled(true);\n    return this;\n  };\n\n  Layer.prototype.disableHitGraph = function () {\n    this.hitGraphEnabled(false);\n    return this;\n  };\n\n  Layer.prototype.setHitGraphEnabled = function (val) {\n    Util_1.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n    this.listening(val);\n  };\n\n  Layer.prototype.getHitGraphEnabled = function (val) {\n    Util_1.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n    return this.listening();\n  };\n\n  Layer.prototype.toggleHitCanvas = function () {\n    if (!this.parent) {\n      return;\n    }\n\n    var parent = this.parent;\n    var added = !!this.hitCanvas._canvas.parentNode;\n\n    if (added) {\n      parent.content.removeChild(this.hitCanvas._canvas);\n    } else {\n      parent.content.appendChild(this.hitCanvas._canvas);\n    }\n  };\n\n  return Layer;\n}(Container_1.Container);\n\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\n\nGlobal_1._registerNode(Layer);\n\nFactory_1.Factory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Line = function (_super) {\n  __extends(Line, _super);\n\n  function Line(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n      this._clearCache('tensionPoints');\n    });\n\n    return _this;\n  }\n\n  Line.prototype._sceneFunc = function (context) {\n    var points = this.points(),\n        length = points.length,\n        tension = this.tension(),\n        closed = this.closed(),\n        bezier = this.bezier(),\n        tp,\n        len,\n        n;\n\n    if (!length) {\n      return;\n    }\n\n    context.beginPath();\n    context.moveTo(points[0], points[1]);\n\n    if (tension !== 0 && length > 4) {\n      tp = this.getTensionPoints();\n      len = tp.length;\n      n = closed ? 0 : 4;\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n      }\n\n      while (n < len - 2) {\n        context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n      }\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n      }\n    } else if (bezier) {\n      n = 2;\n\n      while (n < length) {\n        context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n      }\n    } else {\n      for (n = 2; n < length; n += 2) {\n        context.lineTo(points[n], points[n + 1]);\n      }\n    }\n\n    if (closed) {\n      context.closePath();\n      context.fillStrokeShape(this);\n    } else {\n      context.strokeShape(this);\n    }\n  };\n\n  Line.prototype.getTensionPoints = function () {\n    return this._getCache('tensionPoints', this._getTensionPoints);\n  };\n\n  Line.prototype._getTensionPoints = function () {\n    if (this.closed()) {\n      return this._getTensionPointsClosed();\n    } else {\n      return Util_1.Util._expandPoints(this.points(), this.tension());\n    }\n  };\n\n  Line.prototype._getTensionPointsClosed = function () {\n    var p = this.points(),\n        len = p.length,\n        tension = this.tension(),\n        firstControlPoints = Util_1.Util._getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension),\n        lastControlPoints = Util_1.Util._getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension),\n        middle = Util_1.Util._expandPoints(p, tension),\n        tp = [firstControlPoints[2], firstControlPoints[3]].concat(middle).concat([lastControlPoints[0], lastControlPoints[1], p[len - 2], p[len - 1], lastControlPoints[2], lastControlPoints[3], firstControlPoints[0], firstControlPoints[1], p[0], p[1]]);\n\n    return tp;\n  };\n\n  Line.prototype.getWidth = function () {\n    return this.getSelfRect().width;\n  };\n\n  Line.prototype.getHeight = function () {\n    return this.getSelfRect().height;\n  };\n\n  Line.prototype.getSelfRect = function () {\n    var points = this.points();\n\n    if (points.length < 4) {\n      return {\n        x: points[0] || 0,\n        y: points[1] || 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (this.tension() !== 0) {\n      points = __spreadArrays([points[0], points[1]], this._getTensionPoints(), [points[points.length - 2], points[points.length - 1]]);\n    } else {\n      points = this.points();\n    }\n\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  };\n\n  return Line;\n}(Shape_1.Shape);\n\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n\nGlobal_1._registerNode(Line);\n\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], Validators_1.getNumberArrayValidator());\nUtil_1.Collection.mapMethods(Line);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Path = function (_super) {\n  __extends(Path, _super);\n\n  function Path(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dataArray = [];\n    _this.pathLength = 0;\n    _this.dataArray = Path.parsePathData(_this.data());\n    _this.pathLength = 0;\n\n    for (var i = 0; i < _this.dataArray.length; ++i) {\n      _this.pathLength += _this.dataArray[i].pathLength;\n    }\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path.parsePathData(this.data());\n      this.pathLength = 0;\n\n      for (var i = 0; i < this.dataArray.length; ++i) {\n        this.pathLength += this.dataArray[i].pathLength;\n      }\n    });\n\n    return _this;\n  }\n\n  Path.prototype._sceneFunc = function (context) {\n    var ca = this.dataArray;\n    context.beginPath();\n    var isClosed = false;\n\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n\n      switch (c) {\n        case 'L':\n          context.lineTo(p[0], p[1]);\n          break;\n\n        case 'M':\n          context.moveTo(p[0], p[1]);\n          break;\n\n        case 'C':\n          context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n          break;\n\n        case 'Q':\n          context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n          break;\n\n        case 'A':\n          var cx = p[0],\n              cy = p[1],\n              rx = p[2],\n              ry = p[3],\n              theta = p[4],\n              dTheta = p[5],\n              psi = p[6],\n              fs = p[7];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(psi);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-psi);\n          context.translate(-cx, -cy);\n          break;\n\n        case 'z':\n          isClosed = true;\n          context.closePath();\n          break;\n      }\n    }\n\n    if (!isClosed && !this.hasFill()) {\n      context.strokeShape(this);\n    } else {\n      context.fillStrokeShape(this);\n    }\n  };\n\n  Path.prototype.getSelfRect = function () {\n    var points = [];\n    this.dataArray.forEach(function (data) {\n      if (data.command === 'A') {\n        var start = data.points[4];\n        var dTheta = data.points[5];\n        var end = data.points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n\n        if (dTheta < 0) {\n          for (var t = start - inc; t > end; t -= inc) {\n            var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n            points.push(point.x, point.y);\n          }\n        } else {\n          for (var t = start + inc; t < end; t += inc) {\n            var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n            points.push(point.x, point.y);\n          }\n        }\n      } else if (data.command === 'C') {\n        for (var t = 0.0; t <= 1; t += 0.01) {\n          var point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n          points.push(point.x, point.y);\n        }\n      } else {\n        points = points.concat(data.points);\n      }\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n\n      if (!isNaN(x)) {\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n      }\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  Path.prototype.getLength = function () {\n    return this.pathLength;\n  };\n\n  Path.prototype.getPointAtLength = function (length) {\n    var point,\n        i = 0,\n        ii = this.dataArray.length;\n\n    if (!ii) {\n      return null;\n    }\n\n    while (i < ii && length > this.dataArray[i].pathLength) {\n      length -= this.dataArray[i].pathLength;\n      ++i;\n    }\n\n    if (i === ii) {\n      point = this.dataArray[i - 1].points.slice(-2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    if (length < 0.01) {\n      point = this.dataArray[i].points.slice(0, 2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    var cp = this.dataArray[i];\n    var p = cp.points;\n\n    switch (cp.command) {\n      case 'L':\n        return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n\n      case 'C':\n        return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n\n      case 'Q':\n        return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n\n      case 'A':\n        var cx = p[0],\n            cy = p[1],\n            rx = p[2],\n            ry = p[3],\n            theta = p[4],\n            dTheta = p[5],\n            psi = p[6];\n        theta += dTheta * length / cp.pathLength;\n        return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n    }\n\n    return null;\n  };\n\n  Path.getLineLength = function (x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n    if (fromX === undefined) {\n      fromX = P1x;\n    }\n\n    if (fromY === undefined) {\n      fromY = P1y;\n    }\n\n    var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (P2x < P1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt;\n\n    if (P2x === P1x) {\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix, iy;\n      var len = this.getLineLength(P1x, P1y, P2x, P2y);\n      var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n      u = u / (len * len);\n      ix = P1x + u * (P2x - P1x);\n      iy = P1y + u * (P2y - P1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (P2x < P1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  };\n\n  Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n    function CB1(t) {\n      return t * t * t;\n    }\n\n    function CB2(t) {\n      return 3 * t * t * (1 - t);\n    }\n\n    function CB3(t) {\n      return 3 * t * (1 - t) * (1 - t);\n    }\n\n    function CB4(t) {\n      return (1 - t) * (1 - t) * (1 - t);\n    }\n\n    var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n    var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n    function QB1(t) {\n      return t * t;\n    }\n\n    function QB2(t) {\n      return 2 * t * (1 - t);\n    }\n\n    function QB3(t) {\n      return (1 - t) * (1 - t);\n    }\n\n    var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n    var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi),\n        sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  };\n\n  Path.parsePathData = function (data) {\n    if (!data) {\n      return [];\n    }\n\n    var cs = data;\n    var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\n    cs = cs.replace(new RegExp(' ', 'g'), ',');\n\n    for (var n = 0; n < cc.length; n++) {\n      cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n    }\n\n    var arr = cs.split('|');\n    var ca = [];\n    var coords = [];\n    var cpx = 0;\n    var cpy = 0;\n    var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n    var match;\n\n    for (n = 1; n < arr.length; n++) {\n      var str = arr[n];\n      var c = str.charAt(0);\n      str = str.slice(1);\n      coords.length = 0;\n\n      while (match = re.exec(str)) {\n        coords.push(match[0]);\n      }\n\n      var p = [];\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        var parsed = parseFloat(coords[j]);\n\n        if (!isNaN(parsed)) {\n          p.push(parsed);\n        } else {\n          p.push(0);\n        }\n      }\n\n      while (p.length > 0) {\n        if (isNaN(p[0])) {\n          break;\n        }\n\n        var cmd = null;\n        var points = [];\n        var startX = cpx,\n            startY = cpy;\n        var prevCmd, ctlPtx, ctlPty;\n        var rx, ry, psi, fa, fs, x1, y1;\n\n        switch (c) {\n          case 'l':\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'm':\n            var dx = p.shift();\n            var dy = p.shift();\n            cpx += dx;\n            cpy += dy;\n            cmd = 'M';\n\n            if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n              for (var idx = ca.length - 2; idx >= 0; idx--) {\n                if (ca[idx].command === 'M') {\n                  cpx = ca[idx].points[0] + dx;\n                  cpy = ca[idx].points[1] + dy;\n                  break;\n                }\n              }\n            }\n\n            points.push(cpx, cpy);\n            c = 'l';\n            break;\n\n          case 'M':\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'M';\n            points.push(cpx, cpy);\n            c = 'L';\n            break;\n\n          case 'h':\n            cpx += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'C':\n            points.push(p.shift(), p.shift(), p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'c':\n            points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'Q':\n            points.push(p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'q':\n            points.push(cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n\n          case 'a':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n        }\n\n        ca.push({\n          command: cmd || c,\n          points: points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, cmd || c, points)\n        });\n      }\n\n      if (c === 'z' || c === 'Z') {\n        ca.push({\n          command: 'z',\n          points: [],\n          start: undefined,\n          pathLength: 0\n        });\n      }\n    }\n\n    return ca;\n  };\n\n  Path.calcLength = function (x, y, cmd, points) {\n    var len, p1, p2, t;\n    var path = Path;\n\n    switch (cmd) {\n      case 'L':\n        return path.getLineLength(x, y, points[0], points[1]);\n\n      case 'C':\n        len = 0.0;\n        p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'Q':\n        len = 0.0;\n        p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'A':\n        len = 0.0;\n        var start = points[4];\n        var dTheta = points[5];\n        var end = points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n\n        p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n        if (dTheta < 0) {\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        } else {\n          for (t = start + inc; t < end; t += inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        }\n\n        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n        return len;\n    }\n\n    return 0;\n  };\n\n  Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n    var psi = psiDeg * (Math.PI / 180.0);\n    var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= Math.sqrt(lambda);\n      ry *= Math.sqrt(lambda);\n    }\n\n    var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n\n    if (fa === fs) {\n      f *= -1;\n    }\n\n    if (isNaN(f)) {\n      f = 0;\n    }\n\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n\n    var vMag = function (v) {\n      return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    };\n\n    var vRatio = function (u, v) {\n      return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n    };\n\n    var vAngle = function (u, v) {\n      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n    };\n\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = Math.PI;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (fs === 0 && dTheta > 0) {\n      dTheta = dTheta - 2 * Math.PI;\n    }\n\n    if (fs === 1 && dTheta < 0) {\n      dTheta = dTheta + 2 * Math.PI;\n    }\n\n    return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n  };\n\n  return Path;\n}(Shape_1.Shape);\n\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n\nGlobal_1._registerNode(Path);\n\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Rect = function (_super) {\n  __extends(Rect, _super);\n\n  function Rect() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Rect.prototype._sceneFunc = function (context) {\n    var cornerRadius = this.cornerRadius(),\n        width = this.width(),\n        height = this.height();\n    context.beginPath();\n\n    if (!cornerRadius) {\n      context.rect(0, 0, width, height);\n    } else {\n      var topLeft = 0;\n      var topRight = 0;\n      var bottomLeft = 0;\n      var bottomRight = 0;\n\n      if (typeof cornerRadius === 'number') {\n        topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n      } else {\n        topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n        topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n        bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n        bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n      }\n\n      context.moveTo(topLeft, 0);\n      context.lineTo(width - topRight, 0);\n      context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);\n      context.lineTo(width, height - bottomRight);\n      context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n      context.lineTo(bottomLeft, height);\n      context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n      context.lineTo(0, topLeft);\n      context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  return Rect;\n}(Shape_1.Shape);\n\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\n\nGlobal_1._registerNode(Rect);\n\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0, Validators_1.getNumberOrArrayOfNumbersValidator(4));\nUtil_1.Collection.mapMethods(Rect);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nfunction stringToArray(string) {\n  return Array.from(string);\n}\n\nexports.stringToArray = stringToArray;\nvar AUTO = 'auto',\n    CENTER = 'center',\n    JUSTIFY = 'justify',\n    CHANGE_KONVA = 'Change.konva',\n    CONTEXT_2D = '2d',\n    DASH = '-',\n    LEFT = 'left',\n    TEXT = 'text',\n    TEXT_UPPER = 'Text',\n    TOP = 'top',\n    BOTTOM = 'bottom',\n    MIDDLE = 'middle',\n    NORMAL = 'normal',\n    PX_SPACE = 'px ',\n    SPACE = ' ',\n    RIGHT = 'right',\n    WORD = 'word',\n    CHAR = 'char',\n    NONE = 'none',\n    ELLIPSIS = '…',\n    ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'fontVariant', 'padding', 'align', 'verticalAlign', 'lineHeight', 'text', 'width', 'height', 'wrap', 'ellipsis', 'letterSpacing'],\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\n\nfunction normalizeFontFamily(fontFamily) {\n  return fontFamily.split(',').map(function (family) {\n    family = family.trim();\n    var hasSpace = family.indexOf(' ') >= 0;\n    var hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n\n    if (hasSpace && !hasQuotes) {\n      family = \"\\\"\" + family + \"\\\"\";\n    }\n\n    return family;\n  }).join(', ');\n}\n\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n  return dummyContext;\n}\n\nfunction _fillFunc(context) {\n  context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction checkDefaultFill(config) {\n  config = config || {};\n\n  if (!config.fillLinearGradientColorStops && !config.fillRadialGradientColorStops && !config.fillPatternImage) {\n    config.fill = config.fill || 'black';\n  }\n\n  return config;\n}\n\nvar Text = function (_super) {\n  __extends(Text, _super);\n\n  function Text(config) {\n    var _this = _super.call(this, checkDefaultFill(config)) || this;\n\n    _this._partialTextX = 0;\n    _this._partialTextY = 0;\n\n    for (var n = 0; n < attrChangeListLen; n++) {\n      _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  Text.prototype._sceneFunc = function (context) {\n    var textArr = this.textArr,\n        textArrLen = textArr.length;\n\n    if (!this.text()) {\n      return;\n    }\n\n    var padding = this.padding(),\n        fontSize = this.fontSize(),\n        lineHeightPx = this.lineHeight() * fontSize,\n        verticalAlign = this.verticalAlign(),\n        alignY = 0,\n        align = this.align(),\n        totalWidth = this.getWidth(),\n        letterSpacing = this.letterSpacing(),\n        fill = this.fill(),\n        textDecoration = this.textDecoration(),\n        shouldUnderline = textDecoration.indexOf('underline') !== -1,\n        shouldLineThrough = textDecoration.indexOf('line-through') !== -1,\n        n;\n    var translateY = 0;\n    var translateY = lineHeightPx / 2;\n    var lineTranslateX = 0;\n    var lineTranslateY = 0;\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', MIDDLE);\n    context.setAttr('textAlign', LEFT);\n\n    if (verticalAlign === MIDDLE) {\n      alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n    } else if (verticalAlign === BOTTOM) {\n      alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n    }\n\n    context.translate(padding, alignY + padding);\n\n    for (n = 0; n < textArrLen; n++) {\n      var lineTranslateX = 0;\n      var lineTranslateY = 0;\n      var obj = textArr[n],\n          text = obj.text,\n          width = obj.width,\n          lastLine = n !== textArrLen - 1,\n          spacesNumber,\n          oneWord,\n          lineWidth;\n      context.save();\n\n      if (align === RIGHT) {\n        lineTranslateX += totalWidth - width - padding * 2;\n      } else if (align === CENTER) {\n        lineTranslateX += (totalWidth - width - padding * 2) / 2;\n      }\n\n      if (shouldUnderline) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (shouldLineThrough) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY);\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (letterSpacing !== 0 || align === JUSTIFY) {\n        spacesNumber = text.split(' ').length - 1;\n        var array = stringToArray(text);\n\n        for (var li = 0; li < array.length; li++) {\n          var letter = array[li];\n\n          if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n            lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n          }\n\n          this._partialTextX = lineTranslateX;\n          this._partialTextY = translateY + lineTranslateY;\n          this._partialText = letter;\n          context.fillStrokeShape(this);\n          lineTranslateX += this.measureSize(letter).width + letterSpacing;\n        }\n      } else {\n        this._partialTextX = lineTranslateX;\n        this._partialTextY = translateY + lineTranslateY;\n        this._partialText = text;\n        context.fillStrokeShape(this);\n      }\n\n      context.restore();\n\n      if (textArrLen > 1) {\n        translateY += lineHeightPx;\n      }\n    }\n  };\n\n  Text.prototype._hitFunc = function (context) {\n    var width = this.getWidth(),\n        height = this.getHeight();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Text.prototype.setText = function (text) {\n    var str = Util_1.Util._isString(text) ? text : text === null || text === undefined ? '' : text + '';\n\n    this._setAttr(TEXT, str);\n\n    return this;\n  };\n\n  Text.prototype.getWidth = function () {\n    var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n    return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n  };\n\n  Text.prototype.getHeight = function () {\n    var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n    return isAuto ? this.fontSize() * this.textArr.length * this.lineHeight() + this.padding() * 2 : this.attrs.height;\n  };\n\n  Text.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  Text.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  Text.prototype.measureSize = function (text) {\n    var _context = getDummyContext(),\n        fontSize = this.fontSize(),\n        metrics;\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n    metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: fontSize\n    };\n  };\n\n  Text.prototype._getContextFont = function () {\n    if (Global_1.Konva.UA.isIE) {\n      return this.fontStyle() + SPACE + this.fontSize() + PX_SPACE + this.fontFamily();\n    }\n\n    return this.fontStyle() + SPACE + this.fontVariant() + SPACE + (this.fontSize() + PX_SPACE) + normalizeFontFamily(this.fontFamily());\n  };\n\n  Text.prototype._addTextLine = function (line) {\n    if (this.align() === JUSTIFY) {\n      line = line.trim();\n    }\n\n    var width = this._getTextWidth(line);\n\n    return this.textArr.push({\n      text: line,\n      width: width\n    });\n  };\n\n  Text.prototype._getTextWidth = function (text) {\n    var letterSpacing = this.letterSpacing();\n    var length = text.length;\n    return getDummyContext().measureText(text).width + (length ? letterSpacing * (length - 1) : 0);\n  };\n\n  Text.prototype._setTextData = function () {\n    var lines = this.text().split('\\n'),\n        fontSize = +this.fontSize(),\n        textWidth = 0,\n        lineHeightPx = this.lineHeight() * fontSize,\n        width = this.attrs.width,\n        height = this.attrs.height,\n        fixedWidth = width !== AUTO && width !== undefined,\n        fixedHeight = height !== AUTO && height !== undefined,\n        padding = this.padding(),\n        maxWidth = width - padding * 2,\n        maxHeightPx = height - padding * 2,\n        currentHeightPx = 0,\n        wrap = this.wrap(),\n        shouldWrap = wrap !== NONE,\n        wrapAtWord = wrap !== CHAR && shouldWrap,\n        shouldAddEllipsis = this.ellipsis();\n    this.textArr = [];\n    getDummyContext().font = this._getContextFont();\n    var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n\n    for (var i = 0, max = lines.length; i < max; ++i) {\n      var line = lines[i];\n\n      var lineWidth = this._getTextWidth(line);\n\n      if (fixedWidth && lineWidth > maxWidth) {\n        while (line.length > 0) {\n          var low = 0,\n              high = line.length,\n              match = '',\n              matchWidth = 0;\n\n          while (low < high) {\n            var mid = low + high >>> 1,\n                substr = line.slice(0, mid + 1),\n                substrWidth = this._getTextWidth(substr) + additionalWidth;\n\n            if (substrWidth <= maxWidth) {\n              low = mid + 1;\n              match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n              matchWidth = substrWidth;\n            } else {\n              high = mid;\n            }\n          }\n\n          if (match) {\n            if (wrapAtWord) {\n              var wrapIndex;\n              var nextChar = line[match.length];\n              var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n\n              if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                wrapIndex = match.length;\n              } else {\n                wrapIndex = Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) + 1;\n              }\n\n              if (wrapIndex > 0) {\n                low = wrapIndex;\n                match = match.slice(0, low);\n                matchWidth = this._getTextWidth(match);\n              }\n            }\n\n            match = match.trimRight();\n\n            this._addTextLine(match);\n\n            textWidth = Math.max(textWidth, matchWidth);\n            currentHeightPx += lineHeightPx;\n\n            if (!shouldWrap || fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n              var lastLine = this.textArr[this.textArr.length - 1];\n\n              if (lastLine) {\n                if (shouldAddEllipsis) {\n                  var haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n\n                  if (!haveSpace) {\n                    lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n                  }\n\n                  this.textArr.splice(this.textArr.length - 1, 1);\n\n                  this._addTextLine(lastLine.text + ELLIPSIS);\n                }\n              }\n\n              break;\n            }\n\n            line = line.slice(low);\n            line = line.trimLeft();\n\n            if (line.length > 0) {\n              lineWidth = this._getTextWidth(line);\n\n              if (lineWidth <= maxWidth) {\n                this._addTextLine(line);\n\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n                break;\n              }\n            }\n          } else {\n            break;\n          }\n        }\n      } else {\n        this._addTextLine(line);\n\n        currentHeightPx += lineHeightPx;\n        textWidth = Math.max(textWidth, lineWidth);\n      }\n\n      if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n        break;\n      }\n    }\n\n    this.textHeight = fontSize;\n    this.textWidth = textWidth;\n  };\n\n  Text.prototype.getStrokeScaleEnabled = function () {\n    return true;\n  };\n\n  return Text;\n}(Shape_1.Shape);\n\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = ['text', 'fontSize', 'padding', 'wrap', 'lineHeight'];\n\nGlobal_2._registerNode(Text);\n\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CoreInternals_1 = require(\"./_CoreInternals\");\n\nvar Arc_1 = require(\"./shapes/Arc\");\n\nvar Arrow_1 = require(\"./shapes/Arrow\");\n\nvar Circle_1 = require(\"./shapes/Circle\");\n\nvar Ellipse_1 = require(\"./shapes/Ellipse\");\n\nvar Image_1 = require(\"./shapes/Image\");\n\nvar Label_1 = require(\"./shapes/Label\");\n\nvar Line_1 = require(\"./shapes/Line\");\n\nvar Path_1 = require(\"./shapes/Path\");\n\nvar Rect_1 = require(\"./shapes/Rect\");\n\nvar RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\n\nvar Ring_1 = require(\"./shapes/Ring\");\n\nvar Sprite_1 = require(\"./shapes/Sprite\");\n\nvar Star_1 = require(\"./shapes/Star\");\n\nvar Text_1 = require(\"./shapes/Text\");\n\nvar TextPath_1 = require(\"./shapes/TextPath\");\n\nvar Transformer_1 = require(\"./shapes/Transformer\");\n\nvar Wedge_1 = require(\"./shapes/Wedge\");\n\nvar Blur_1 = require(\"./filters/Blur\");\n\nvar Brighten_1 = require(\"./filters/Brighten\");\n\nvar Contrast_1 = require(\"./filters/Contrast\");\n\nvar Emboss_1 = require(\"./filters/Emboss\");\n\nvar Enhance_1 = require(\"./filters/Enhance\");\n\nvar Grayscale_1 = require(\"./filters/Grayscale\");\n\nvar HSL_1 = require(\"./filters/HSL\");\n\nvar HSV_1 = require(\"./filters/HSV\");\n\nvar Invert_1 = require(\"./filters/Invert\");\n\nvar Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\n\nvar Mask_1 = require(\"./filters/Mask\");\n\nvar Noise_1 = require(\"./filters/Noise\");\n\nvar Pixelate_1 = require(\"./filters/Pixelate\");\n\nvar Posterize_1 = require(\"./filters/Posterize\");\n\nvar RGB_1 = require(\"./filters/RGB\");\n\nvar RGBA_1 = require(\"./filters/RGBA\");\n\nvar Sepia_1 = require(\"./filters/Sepia\");\n\nvar Solarize_1 = require(\"./filters/Solarize\");\n\nvar Threshold_1 = require(\"./filters/Threshold\");\n\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n  Arc: Arc_1.Arc,\n  Arrow: Arrow_1.Arrow,\n  Circle: Circle_1.Circle,\n  Ellipse: Ellipse_1.Ellipse,\n  Image: Image_1.Image,\n  Label: Label_1.Label,\n  Tag: Label_1.Tag,\n  Line: Line_1.Line,\n  Path: Path_1.Path,\n  Rect: Rect_1.Rect,\n  RegularPolygon: RegularPolygon_1.RegularPolygon,\n  Ring: Ring_1.Ring,\n  Sprite: Sprite_1.Sprite,\n  Star: Star_1.Star,\n  Text: Text_1.Text,\n  TextPath: TextPath_1.TextPath,\n  Transformer: Transformer_1.Transformer,\n  Wedge: Wedge_1.Wedge,\n  Filters: {\n    Blur: Blur_1.Blur,\n    Brighten: Brighten_1.Brighten,\n    Contrast: Contrast_1.Contrast,\n    Emboss: Emboss_1.Emboss,\n    Enhance: Enhance_1.Enhance,\n    Grayscale: Grayscale_1.Grayscale,\n    HSL: HSL_1.HSL,\n    HSV: HSV_1.HSV,\n    Invert: Invert_1.Invert,\n    Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n    Mask: Mask_1.Mask,\n    Noise: Noise_1.Noise,\n    Pixelate: Pixelate_1.Pixelate,\n    Posterize: Posterize_1.Posterize,\n    RGB: RGB_1.RGB,\n    RGBA: RGBA_1.RGBA,\n    Sepia: Sepia_1.Sepia,\n    Solarize: Solarize_1.Solarize,\n    Threshold: Threshold_1.Threshold\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Stage_1 = require(\"./Stage\");\n\nvar Layer_1 = require(\"./Layer\");\n\nvar FastLayer_1 = require(\"./FastLayer\");\n\nvar Group_1 = require(\"./Group\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Tween_1 = require(\"./Tween\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n  Collection: Util_1.Collection,\n  Util: Util_1.Util,\n  Transform: Util_1.Transform,\n  Node: Node_1.Node,\n  ids: Node_1.ids,\n  names: Node_1.names,\n  Container: Container_1.Container,\n  Stage: Stage_1.Stage,\n  stages: Stage_1.stages,\n  Layer: Layer_1.Layer,\n  FastLayer: FastLayer_1.FastLayer,\n  Group: Group_1.Group,\n  DD: DragAndDrop_1.DD,\n  Shape: Shape_1.Shape,\n  shapes: Shape_1.shapes,\n  Animation: Animation_1.Animation,\n  Tween: Tween_1.Tween,\n  Easings: Tween_1.Easings,\n  Context: Context_1.Context,\n  Canvas: Canvas_1.Canvas\n});","var g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || new Function(\"return this\")();\n} catch (e) {\n  // This works if the window reference is available\n  if (typeof window === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Global_2 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar STAGE = 'Stage',\n    STRING = 'string',\n    PX = 'px',\n    MOUSEOUT = 'mouseout',\n    MOUSELEAVE = 'mouseleave',\n    MOUSEOVER = 'mouseover',\n    MOUSEENTER = 'mouseenter',\n    MOUSEMOVE = 'mousemove',\n    MOUSEDOWN = 'mousedown',\n    MOUSEUP = 'mouseup',\n    POINTERMOVE = 'pointermove',\n    POINTERDOWN = 'pointerdown',\n    POINTERUP = 'pointerup',\n    POINTERCANCEL = 'pointercancel',\n    LOSTPOINTERCAPTURE = 'lostpointercapture',\n    CONTEXTMENU = 'contextmenu',\n    CLICK = 'click',\n    DBL_CLICK = 'dblclick',\n    TOUCHSTART = 'touchstart',\n    TOUCHEND = 'touchend',\n    TAP = 'tap',\n    DBL_TAP = 'dbltap',\n    TOUCHMOVE = 'touchmove',\n    WHEEL = 'wheel',\n    CONTENT_MOUSEOUT = 'contentMouseout',\n    CONTENT_MOUSEOVER = 'contentMouseover',\n    CONTENT_MOUSEMOVE = 'contentMousemove',\n    CONTENT_MOUSEDOWN = 'contentMousedown',\n    CONTENT_MOUSEUP = 'contentMouseup',\n    CONTENT_CONTEXTMENU = 'contentContextmenu',\n    CONTENT_CLICK = 'contentClick',\n    CONTENT_DBL_CLICK = 'contentDblclick',\n    CONTENT_TOUCHSTART = 'contentTouchstart',\n    CONTENT_TOUCHEND = 'contentTouchend',\n    CONTENT_DBL_TAP = 'contentDbltap',\n    CONTENT_TAP = 'contentTap',\n    CONTENT_TOUCHMOVE = 'contentTouchmove',\n    CONTENT_POINTERMOVE = 'contentPointermove',\n    CONTENT_POINTERDOWN = 'contentPointerdown',\n    CONTENT_POINTERUP = 'contentPointerup',\n    CONTENT_WHEEL = 'contentWheel',\n    RELATIVE = 'relative',\n    KONVA_CONTENT = 'konvajs-content',\n    SPACE = ' ',\n    UNDERSCORE = '_',\n    CONTAINER = 'container',\n    MAX_LAYERS_NUMBER = 5,\n    EMPTY_STRING = '',\n    EVENTS = [MOUSEENTER, MOUSEDOWN, MOUSEMOVE, MOUSEUP, MOUSEOUT, TOUCHSTART, TOUCHMOVE, TOUCHEND, MOUSEOVER, WHEEL, CONTEXTMENU, POINTERDOWN, POINTERMOVE, POINTERUP, POINTERCANCEL, LOSTPOINTERCAPTURE],\n    eventsLength = EVENTS.length;\n\nfunction addEvent(ctx, eventName) {\n  ctx.content.addEventListener(eventName, function (evt) {\n    ctx[UNDERSCORE + eventName](evt);\n  }, false);\n}\n\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\n\nfunction checkNoClip(attrs) {\n  if (attrs === void 0) {\n    attrs = {};\n  }\n\n  if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n    Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n  }\n\n  return attrs;\n}\n\nvar Stage = function (_super) {\n  __extends(Stage, _super);\n\n  function Stage(config) {\n    var _this = _super.call(this, checkNoClip(config)) || this;\n\n    _this._pointerPositions = [];\n    _this._changedPointerPositions = [];\n\n    _this._buildDOM();\n\n    _this._bindContentEvents();\n\n    exports.stages.push(_this);\n\n    _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n\n    _this.on('visibleChange.konva', _this._checkVisibility);\n\n    _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n      checkNoClip(_this.attrs);\n    });\n\n    _this._checkVisibility();\n\n    return _this;\n  }\n\n  Stage.prototype._validateAdd = function (child) {\n    var isLayer = child.getType() === 'Layer';\n    var isFastLayer = child.getType() === 'FastLayer';\n    var valid = isLayer || isFastLayer;\n\n    if (!valid) {\n      Util_1.Util.throw('You may only add layers to the stage.');\n    }\n  };\n\n  Stage.prototype._checkVisibility = function () {\n    if (!this.content) {\n      return;\n    }\n\n    var style = this.visible() ? '' : 'none';\n    this.content.style.display = style;\n  };\n\n  Stage.prototype.setContainer = function (container) {\n    if (typeof container === STRING) {\n      if (container.charAt(0) === '.') {\n        var className = container.slice(1);\n        container = document.getElementsByClassName(className)[0];\n      } else {\n        var id;\n\n        if (container.charAt(0) !== '#') {\n          id = container;\n        } else {\n          id = container.slice(1);\n        }\n\n        container = document.getElementById(id);\n      }\n\n      if (!container) {\n        throw 'Can not find container in document with id ' + id;\n      }\n    }\n\n    this._setAttr(CONTAINER, container);\n\n    if (this.content) {\n      if (this.content.parentElement) {\n        this.content.parentElement.removeChild(this.content);\n      }\n\n      container.appendChild(this.content);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.shouldDrawHit = function () {\n    return true;\n  };\n\n  Stage.prototype.clear = function () {\n    var layers = this.children,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      layers[n].clear();\n    }\n\n    return this;\n  };\n\n  Stage.prototype.clone = function (obj) {\n    if (!obj) {\n      obj = {};\n    }\n\n    obj.container = document.createElement('div');\n    return Container_1.Container.prototype.clone.call(this, obj);\n  };\n\n  Stage.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    var content = this.content;\n\n    if (content && Util_1.Util._isInDocument(content)) {\n      this.container().removeChild(content);\n    }\n\n    var index = exports.stages.indexOf(this);\n\n    if (index > -1) {\n      exports.stages.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getPointerPosition = function () {\n    var pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n\n    if (!pos) {\n      Util_1.Util.warn(NO_POINTERS_MESSAGE);\n      return null;\n    }\n\n    return {\n      x: pos.x,\n      y: pos.y\n    };\n  };\n\n  Stage.prototype._getPointerById = function (id) {\n    return this._pointerPositions.find(function (p) {\n      return p.id === id;\n    });\n  };\n\n  Stage.prototype.getPointersPositions = function () {\n    return this._pointerPositions;\n  };\n\n  Stage.prototype.getStage = function () {\n    return this;\n  };\n\n  Stage.prototype.getContent = function () {\n    return this.content;\n  };\n\n  Stage.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    config.x = config.x || 0;\n    config.y = config.y || 0;\n    config.width = config.width || this.width();\n    config.height = config.height || this.height();\n    var canvas = new Canvas_1.SceneCanvas({\n      width: config.width,\n      height: config.height,\n      pixelRatio: config.pixelRatio || 1\n    });\n\n    var _context = canvas.getContext()._context;\n\n    var layers = this.children;\n\n    if (config.x || config.y) {\n      _context.translate(-1 * config.x, -1 * config.y);\n    }\n\n    layers.each(function (layer) {\n      if (!layer.isVisible()) {\n        return;\n      }\n\n      var layerCanvas = layer._toKonvaCanvas(config);\n\n      _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n    });\n    return canvas;\n  };\n\n  Stage.prototype.getIntersection = function (pos, selector) {\n    if (!pos) {\n      return null;\n    }\n\n    var layers = this.children,\n        len = layers.length,\n        end = len - 1,\n        n,\n        shape;\n\n    for (n = end; n >= 0; n--) {\n      shape = layers[n].getIntersection(pos, selector);\n\n      if (shape) {\n        return shape;\n      }\n    }\n\n    return null;\n  };\n\n  Stage.prototype._resizeDOM = function () {\n    var width = this.width();\n    var height = this.height();\n\n    if (this.content) {\n      this.content.style.width = width + PX;\n      this.content.style.height = height + PX;\n    }\n\n    this.bufferCanvas.setSize(width, height);\n    this.bufferHitCanvas.setSize(width, height);\n    this.children.each(function (layer) {\n      layer.setSize({\n        width: width,\n        height: height\n      });\n      layer.draw();\n    });\n  };\n\n  Stage.prototype.add = function (layer) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    _super.prototype.add.call(this, layer);\n\n    var length = this.children.length;\n\n    if (length > MAX_LAYERS_NUMBER) {\n      Util_1.Util.warn('The stage has ' + length + ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n    }\n\n    layer.setSize({\n      width: this.width(),\n      height: this.height()\n    });\n    layer.draw();\n\n    if (Global_1.Konva.isBrowser) {\n      this.content.appendChild(layer.canvas._canvas);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getParent = function () {\n    return null;\n  };\n\n  Stage.prototype.getLayer = function () {\n    return null;\n  };\n\n  Stage.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  Stage.prototype.getLayers = function () {\n    return this.getChildren();\n  };\n\n  Stage.prototype._bindContentEvents = function () {\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    for (var n = 0; n < eventsLength; n++) {\n      addEvent(this, EVENTS[n]);\n    }\n  };\n\n  Stage.prototype._mouseenter = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(MOUSEENTER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseover = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(CONTENT_MOUSEOVER, {\n      evt: evt\n    });\n\n    this._fire(MOUSEOVER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseout = function (evt) {\n    var _a;\n\n    this.setPointersPositions(evt);\n    var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n    var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n\n    if (targetShape && eventsEnabled) {\n      targetShape._fireAndBubble(MOUSEOUT, {\n        evt: evt\n      });\n\n      targetShape._fireAndBubble(MOUSELEAVE, {\n        evt: evt\n      });\n\n      this._fire(MOUSELEAVE, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      this.targetShape = null;\n    } else if (eventsEnabled) {\n      this._fire(MOUSELEAVE, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      this._fire(MOUSEOUT, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this.pointerPos = undefined;\n    this._pointerPositions = [];\n\n    this._fire(CONTENT_MOUSEOUT, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mousemove = function (evt) {\n    var _a;\n\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchmove(evt);\n    }\n\n    this.setPointersPositions(evt);\n\n    var pointerId = Util_1.Util._getFirstPointerId(evt);\n\n    var shape;\n    var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n    var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n\n    if (eventsEnabled) {\n      shape = this.getIntersection(this.getPointerPosition());\n\n      if (shape && shape.isListening()) {\n        var differentTarget = targetShape !== shape;\n\n        if (eventsEnabled && differentTarget) {\n          if (targetShape) {\n            targetShape._fireAndBubble(MOUSEOUT, {\n              evt: evt,\n              pointerId: pointerId\n            }, shape);\n\n            targetShape._fireAndBubble(MOUSELEAVE, {\n              evt: evt,\n              pointerId: pointerId\n            }, shape);\n          }\n\n          shape._fireAndBubble(MOUSEOVER, {\n            evt: evt,\n            pointerId: pointerId\n          }, targetShape);\n\n          shape._fireAndBubble(MOUSEENTER, {\n            evt: evt,\n            pointerId: pointerId\n          }, targetShape);\n\n          shape._fireAndBubble(MOUSEMOVE, {\n            evt: evt,\n            pointerId: pointerId\n          });\n\n          this.targetShape = shape;\n        } else {\n          shape._fireAndBubble(MOUSEMOVE, {\n            evt: evt,\n            pointerId: pointerId\n          });\n        }\n      } else {\n        if (targetShape && eventsEnabled) {\n          targetShape._fireAndBubble(MOUSEOUT, {\n            evt: evt,\n            pointerId: pointerId\n          });\n\n          targetShape._fireAndBubble(MOUSELEAVE, {\n            evt: evt,\n            pointerId: pointerId\n          });\n\n          this._fire(MOUSEOVER, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n            pointerId: pointerId\n          });\n\n          this.targetShape = null;\n        }\n\n        this._fire(MOUSEMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this,\n          pointerId: pointerId\n        });\n      }\n\n      this._fire(CONTENT_MOUSEMOVE, {\n        evt: evt\n      });\n    }\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._mousedown = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchstart(evt);\n    }\n\n    this.setPointersPositions(evt);\n\n    var pointerId = Util_1.Util._getFirstPointerId(evt);\n\n    var shape = this.getIntersection(this.getPointerPosition());\n    DragAndDrop_1.DD.justDragged = false;\n    Global_1.Konva.listenClickTap = true;\n\n    if (shape && shape.isListening()) {\n      this.clickStartShape = shape;\n\n      shape._fireAndBubble(MOUSEDOWN, {\n        evt: evt,\n        pointerId: pointerId\n      });\n    } else {\n      this._fire(MOUSEDOWN, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: pointerId\n      });\n    }\n\n    this._fire(CONTENT_MOUSEDOWN, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mouseup = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchend(evt);\n    }\n\n    this.setPointersPositions(evt);\n\n    var pointerId = Util_1.Util._getFirstPointerId(evt);\n\n    var shape = this.getIntersection(this.getPointerPosition()),\n        clickStartShape = this.clickStartShape,\n        clickEndShape = this.clickEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else if (!DragAndDrop_1.DD.justDragged) {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n\n    if (shape && shape.isListening()) {\n      this.clickEndShape = shape;\n\n      shape._fireAndBubble(MOUSEUP, {\n        evt: evt,\n        pointerId: pointerId\n      });\n\n      if (Global_1.Konva.listenClickTap && clickStartShape && clickStartShape._id === shape._id) {\n        shape._fireAndBubble(CLICK, {\n          evt: evt,\n          pointerId: pointerId\n        });\n\n        if (fireDblClick && clickEndShape && clickEndShape === shape) {\n          shape._fireAndBubble(DBL_CLICK, {\n            evt: evt,\n            pointerId: pointerId\n          });\n        }\n      }\n    } else {\n      this.clickEndShape = null;\n\n      this._fire(MOUSEUP, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: pointerId\n      });\n\n      if (Global_1.Konva.listenClickTap) {\n        this._fire(CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this,\n          pointerId: pointerId\n        });\n      }\n\n      if (fireDblClick) {\n        this._fire(DBL_CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this,\n          pointerId: pointerId\n        });\n      }\n    }\n\n    this._fire(CONTENT_MOUSEUP, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_CLICK, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_CLICK, {\n          evt: evt\n        });\n      }\n    }\n\n    Global_1.Konva.listenClickTap = false;\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._contextmenu = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(CONTEXTMENU, {\n        evt: evt\n      });\n    } else {\n      this._fire(CONTEXTMENU, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_CONTEXTMENU, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchstart = function (evt) {\n    var _this = this;\n\n    this.setPointersPositions(evt);\n    var triggeredOnShape = false;\n\n    this._changedPointerPositions.forEach(function (pos) {\n      var shape = _this.getIntersection(pos);\n\n      Global_1.Konva.listenClickTap = true;\n      DragAndDrop_1.DD.justDragged = false;\n      var hasShape = shape && shape.isListening();\n\n      if (!hasShape) {\n        return;\n      }\n\n      if (Global_1.Konva.captureTouchEventsEnabled) {\n        shape.setPointerCapture(pos.id);\n      }\n\n      _this.tapStartShape = shape;\n\n      shape._fireAndBubble(TOUCHSTART, {\n        evt: evt,\n        pointerId: pos.id\n      }, _this);\n\n      triggeredOnShape = true;\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    });\n\n    if (!triggeredOnShape) {\n      this._fire(TOUCHSTART, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: this._changedPointerPositions[0].id\n      });\n    }\n\n    this._fire(CONTENT_TOUCHSTART, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchmove = function (evt) {\n    var _this = this;\n\n    this.setPointersPositions(evt);\n    var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n\n    if (eventsEnabled) {\n      var triggeredOnShape = false;\n      var processedShapesIds = {};\n\n      this._changedPointerPositions.forEach(function (pos) {\n        var shape = PointerEvents.getCapturedShape(pos.id) || _this.getIntersection(pos);\n\n        var hasShape = shape && shape.isListening();\n\n        if (!hasShape) {\n          return;\n        }\n\n        if (processedShapesIds[shape._id]) {\n          return;\n        }\n\n        processedShapesIds[shape._id] = true;\n\n        shape._fireAndBubble(TOUCHMOVE, {\n          evt: evt,\n          pointerId: pos.id\n        });\n\n        triggeredOnShape = true;\n\n        if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n          evt.preventDefault();\n        }\n      });\n\n      if (!triggeredOnShape) {\n        this._fire(TOUCHMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this,\n          pointerId: this._changedPointerPositions[0].id\n        });\n      }\n\n      this._fire(CONTENT_TOUCHMOVE, {\n        evt: evt\n      });\n    }\n\n    if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._touchend = function (evt) {\n    var _this = this;\n\n    this.setPointersPositions(evt);\n    var tapEndShape = this.tapEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else if (!DragAndDrop_1.DD.justDragged) {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n    var triggeredOnShape = false;\n    var processedShapesIds = {};\n    var tapTriggered = false;\n    var dblTapTriggered = false;\n\n    this._changedPointerPositions.forEach(function (pos) {\n      var shape = PointerEvents.getCapturedShape(pos.id) || _this.getIntersection(pos);\n\n      if (shape) {\n        shape.releaseCapture(pos.id);\n      }\n\n      var hasShape = shape && shape.isListening();\n\n      if (!hasShape) {\n        return;\n      }\n\n      if (processedShapesIds[shape._id]) {\n        return;\n      }\n\n      processedShapesIds[shape._id] = true;\n      _this.tapEndShape = shape;\n\n      shape._fireAndBubble(TOUCHEND, {\n        evt: evt,\n        pointerId: pos.id\n      });\n\n      triggeredOnShape = true;\n\n      if (Global_1.Konva.listenClickTap && shape === _this.tapStartShape) {\n        tapTriggered = true;\n\n        shape._fireAndBubble(TAP, {\n          evt: evt,\n          pointerId: pos.id\n        });\n\n        if (fireDblClick && tapEndShape && tapEndShape === shape) {\n          dblTapTriggered = true;\n\n          shape._fireAndBubble(DBL_TAP, {\n            evt: evt,\n            pointerId: pos.id\n          });\n        }\n      }\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    });\n\n    if (!triggeredOnShape) {\n      this._fire(TOUCHEND, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: this._changedPointerPositions[0].id\n      });\n    }\n\n    if (Global_1.Konva.listenClickTap && !tapTriggered) {\n      this.tapEndShape = null;\n\n      this._fire(TAP, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: this._changedPointerPositions[0].id\n      });\n    }\n\n    if (fireDblClick && !dblTapTriggered) {\n      this._fire(DBL_TAP, {\n        evt: evt,\n        target: this,\n        currentTarget: this,\n        pointerId: this._changedPointerPositions[0].id\n      });\n    }\n\n    this._fire(CONTENT_TOUCHEND, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_TAP, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_TAP, {\n          evt: evt\n        });\n      }\n    }\n\n    if (this.preventDefault() && evt.cancelable) {\n      evt.preventDefault();\n    }\n\n    Global_1.Konva.listenClickTap = false;\n  };\n\n  Stage.prototype._wheel = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(WHEEL, {\n        evt: evt\n      });\n    } else {\n      this._fire(WHEEL, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_WHEEL, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._pointerdown = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointermove = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointerup = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._pointercancel = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._lostpointercapture = function (evt) {\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype.setPointersPositions = function (evt) {\n    var _this = this;\n\n    var contentPosition = this._getContentPosition(),\n        x = null,\n        y = null;\n\n    evt = evt ? evt : window.event;\n\n    if (evt.touches !== undefined) {\n      this._pointerPositions = [];\n      this._changedPointerPositions = [];\n      Util_1.Collection.prototype.each.call(evt.touches, function (touch) {\n        _this._pointerPositions.push({\n          id: touch.identifier,\n          x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n          y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n        });\n      });\n      Util_1.Collection.prototype.each.call(evt.changedTouches || evt.touches, function (touch) {\n        _this._changedPointerPositions.push({\n          id: touch.identifier,\n          x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n          y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n        });\n      });\n    } else {\n      x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n      y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n      this.pointerPos = {\n        x: x,\n        y: y\n      };\n      this._pointerPositions = [{\n        x: x,\n        y: y,\n        id: Util_1.Util._getFirstPointerId(evt)\n      }];\n      this._changedPointerPositions = [{\n        x: x,\n        y: y,\n        id: Util_1.Util._getFirstPointerId(evt)\n      }];\n    }\n  };\n\n  Stage.prototype._setPointerPosition = function (evt) {\n    Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n    this.setPointersPositions(evt);\n  };\n\n  Stage.prototype._getContentPosition = function () {\n    if (!this.content || !this.content.getBoundingClientRect) {\n      return {\n        top: 0,\n        left: 0,\n        scaleX: 1,\n        scaleY: 1\n      };\n    }\n\n    var rect = this.content.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      scaleX: rect.width / this.content.clientWidth || 1,\n      scaleY: rect.height / this.content.clientHeight || 1\n    };\n  };\n\n  Stage.prototype._buildDOM = function () {\n    this.bufferCanvas = new Canvas_1.SceneCanvas({\n      width: this.width(),\n      height: this.height()\n    });\n    this.bufferHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1,\n      width: this.width(),\n      height: this.height()\n    });\n\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    var container = this.container();\n\n    if (!container) {\n      throw 'Stage has no container. A container is required.';\n    }\n\n    container.innerHTML = EMPTY_STRING;\n    this.content = document.createElement('div');\n    this.content.style.position = RELATIVE;\n    this.content.style.userSelect = 'none';\n    this.content.className = KONVA_CONTENT;\n    this.content.setAttribute('role', 'presentation');\n    container.appendChild(this.content);\n\n    this._resizeDOM();\n  };\n\n  Stage.prototype.cache = function () {\n    Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n    return this;\n  };\n\n  Stage.prototype.clearCache = function () {\n    return this;\n  };\n\n  Stage.prototype.batchDraw = function () {\n    this.children.each(function (layer) {\n      layer.batchDraw();\n    });\n    return this;\n  };\n\n  return Stage;\n}(Container_1.Container);\n\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\n\nGlobal_2._registerNode(Stage);\n\nFactory_1.Factory.addGetterSetter(Stage, 'container');","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Layer_1 = require(\"./Layer\");\n\nvar Global_1 = require(\"./Global\");\n\nvar FastLayer = function (_super) {\n  __extends(FastLayer, _super);\n\n  function FastLayer(attrs) {\n    var _this = _super.call(this, attrs) || this;\n\n    _this.listening(false);\n\n    Util_1.Util.warn('Konva.Fast layer is deprecated. Please use \"new Konva.Layer({ listening: false })\" instead.');\n    return _this;\n  }\n\n  return FastLayer;\n}(Layer_1.Layer);\n\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\n\nGlobal_1._registerNode(FastLayer);\n\nUtil_1.Collection.mapMethods(FastLayer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Global_1 = require(\"./Global\");\n\nvar blacklist = {\n  node: 1,\n  duration: 1,\n  easing: 1,\n  onFinish: 1,\n  yoyo: 1\n},\n    PAUSED = 1,\n    PLAYING = 2,\n    REVERSING = 3,\n    idCounter = 0,\n    colorAttrs = ['fill', 'stroke', 'shadowColor'];\n\nvar TweenEngine = function () {\n  function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n    this.prop = prop;\n    this.propFunc = propFunc;\n    this.begin = begin;\n    this._pos = begin;\n    this.duration = duration;\n    this._change = 0;\n    this.prevPos = 0;\n    this.yoyo = yoyo;\n    this._time = 0;\n    this._position = 0;\n    this._startTime = 0;\n    this._finish = 0;\n    this.func = func;\n    this._change = finish - this.begin;\n    this.pause();\n  }\n\n  TweenEngine.prototype.fire = function (str) {\n    var handler = this[str];\n\n    if (handler) {\n      handler();\n    }\n  };\n\n  TweenEngine.prototype.setTime = function (t) {\n    if (t > this.duration) {\n      if (this.yoyo) {\n        this._time = this.duration;\n        this.reverse();\n      } else {\n        this.finish();\n      }\n    } else if (t < 0) {\n      if (this.yoyo) {\n        this._time = 0;\n        this.play();\n      } else {\n        this.reset();\n      }\n    } else {\n      this._time = t;\n      this.update();\n    }\n  };\n\n  TweenEngine.prototype.getTime = function () {\n    return this._time;\n  };\n\n  TweenEngine.prototype.setPosition = function (p) {\n    this.prevPos = this._pos;\n    this.propFunc(p);\n    this._pos = p;\n  };\n\n  TweenEngine.prototype.getPosition = function (t) {\n    if (t === undefined) {\n      t = this._time;\n    }\n\n    return this.func(t, this.begin, this._change, this.duration);\n  };\n\n  TweenEngine.prototype.play = function () {\n    this.state = PLAYING;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onPlay');\n  };\n\n  TweenEngine.prototype.reverse = function () {\n    this.state = REVERSING;\n    this._time = this.duration - this._time;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onReverse');\n  };\n\n  TweenEngine.prototype.seek = function (t) {\n    this.pause();\n    this._time = t;\n    this.update();\n    this.fire('onSeek');\n  };\n\n  TweenEngine.prototype.reset = function () {\n    this.pause();\n    this._time = 0;\n    this.update();\n    this.fire('onReset');\n  };\n\n  TweenEngine.prototype.finish = function () {\n    this.pause();\n    this._time = this.duration;\n    this.update();\n    this.fire('onFinish');\n  };\n\n  TweenEngine.prototype.update = function () {\n    this.setPosition(this.getPosition(this._time));\n    this.fire('onUpdate');\n  };\n\n  TweenEngine.prototype.onEnterFrame = function () {\n    var t = this.getTimer() - this._startTime;\n\n    if (this.state === PLAYING) {\n      this.setTime(t);\n    } else if (this.state === REVERSING) {\n      this.setTime(this.duration - t);\n    }\n  };\n\n  TweenEngine.prototype.pause = function () {\n    this.state = PAUSED;\n    this.fire('onPause');\n  };\n\n  TweenEngine.prototype.getTimer = function () {\n    return new Date().getTime();\n  };\n\n  return TweenEngine;\n}();\n\nvar Tween = function () {\n  function Tween(config) {\n    var that = this,\n        node = config.node,\n        nodeId = node._id,\n        duration,\n        easing = config.easing || exports.Easings.Linear,\n        yoyo = !!config.yoyo,\n        key;\n\n    if (typeof config.duration === 'undefined') {\n      duration = 0.3;\n    } else if (config.duration === 0) {\n      duration = 0.001;\n    } else {\n      duration = config.duration;\n    }\n\n    this.node = node;\n    this._id = idCounter++;\n    var layers = node.getLayer() || (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n\n    if (!layers) {\n      Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n    }\n\n    this.anim = new Animation_1.Animation(function () {\n      that.tween.onEnterFrame();\n    }, layers);\n    this.tween = new TweenEngine(key, function (i) {\n      that._tweenFunc(i);\n    }, easing, 0, 1, duration * 1000, yoyo);\n\n    this._addListeners();\n\n    if (!Tween.attrs[nodeId]) {\n      Tween.attrs[nodeId] = {};\n    }\n\n    if (!Tween.attrs[nodeId][this._id]) {\n      Tween.attrs[nodeId][this._id] = {};\n    }\n\n    if (!Tween.tweens[nodeId]) {\n      Tween.tweens[nodeId] = {};\n    }\n\n    for (key in config) {\n      if (blacklist[key] === undefined) {\n        this._addAttr(key, config[key]);\n      }\n    }\n\n    this.reset();\n    this.onFinish = config.onFinish;\n    this.onReset = config.onReset;\n    this.onUpdate = config.onUpdate;\n  }\n\n  Tween.prototype._addAttr = function (key, end) {\n    var node = this.node,\n        nodeId = node._id,\n        start,\n        diff,\n        tweenId,\n        n,\n        len,\n        trueEnd,\n        trueStart,\n        endRGBA;\n    tweenId = Tween.tweens[nodeId][key];\n\n    if (tweenId) {\n      delete Tween.attrs[nodeId][tweenId][key];\n    }\n\n    start = node.getAttr(key);\n\n    if (Util_1.Util._isArray(end)) {\n      diff = [];\n      len = Math.max(end.length, start.length);\n\n      if (key === 'points' && end.length !== start.length) {\n        if (end.length > start.length) {\n          trueStart = start;\n          start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n        } else {\n          trueEnd = end;\n          end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n        }\n      }\n\n      if (key.indexOf('fill') === 0) {\n        for (n = 0; n < len; n++) {\n          if (n % 2 === 0) {\n            diff.push(end[n] - start[n]);\n          } else {\n            var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n            endRGBA = Util_1.Util.colorToRGBA(end[n]);\n            start[n] = startRGBA;\n            diff.push({\n              r: endRGBA.r - startRGBA.r,\n              g: endRGBA.g - startRGBA.g,\n              b: endRGBA.b - startRGBA.b,\n              a: endRGBA.a - startRGBA.a\n            });\n          }\n        }\n      } else {\n        for (n = 0; n < len; n++) {\n          diff.push(end[n] - start[n]);\n        }\n      }\n    } else if (colorAttrs.indexOf(key) !== -1) {\n      start = Util_1.Util.colorToRGBA(start);\n      endRGBA = Util_1.Util.colorToRGBA(end);\n      diff = {\n        r: endRGBA.r - start.r,\n        g: endRGBA.g - start.g,\n        b: endRGBA.b - start.b,\n        a: endRGBA.a - start.a\n      };\n    } else {\n      diff = end - start;\n    }\n\n    Tween.attrs[nodeId][this._id][key] = {\n      start: start,\n      diff: diff,\n      end: end,\n      trueEnd: trueEnd,\n      trueStart: trueStart\n    };\n    Tween.tweens[nodeId][key] = this._id;\n  };\n\n  Tween.prototype._tweenFunc = function (i) {\n    var node = this.node,\n        attrs = Tween.attrs[node._id][this._id],\n        key,\n        attr,\n        start,\n        diff,\n        newVal,\n        n,\n        len,\n        end;\n\n    for (key in attrs) {\n      attr = attrs[key];\n      start = attr.start;\n      diff = attr.diff;\n      end = attr.end;\n\n      if (Util_1.Util._isArray(start)) {\n        newVal = [];\n        len = Math.max(start.length, end.length);\n\n        if (key.indexOf('fill') === 0) {\n          for (n = 0; n < len; n++) {\n            if (n % 2 === 0) {\n              newVal.push((start[n] || 0) + diff[n] * i);\n            } else {\n              newVal.push('rgba(' + Math.round(start[n].r + diff[n].r * i) + ',' + Math.round(start[n].g + diff[n].g * i) + ',' + Math.round(start[n].b + diff[n].b * i) + ',' + (start[n].a + diff[n].a * i) + ')');\n            }\n          }\n        } else {\n          for (n = 0; n < len; n++) {\n            newVal.push((start[n] || 0) + diff[n] * i);\n          }\n        }\n      } else if (colorAttrs.indexOf(key) !== -1) {\n        newVal = 'rgba(' + Math.round(start.r + diff.r * i) + ',' + Math.round(start.g + diff.g * i) + ',' + Math.round(start.b + diff.b * i) + ',' + (start.a + diff.a * i) + ')';\n      } else {\n        newVal = start + diff * i;\n      }\n\n      node.setAttr(key, newVal);\n    }\n  };\n\n  Tween.prototype._addListeners = function () {\n    var _this = this;\n\n    this.tween.onPlay = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onReverse = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onPause = function () {\n      _this.anim.stop();\n    };\n\n    this.tween.onFinish = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueEnd) {\n        node.setAttr('points', attrs.points.trueEnd);\n      }\n\n      if (_this.onFinish) {\n        _this.onFinish.call(_this);\n      }\n    };\n\n    this.tween.onReset = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueStart) {\n        node.points(attrs.points.trueStart);\n      }\n\n      if (_this.onReset) {\n        _this.onReset();\n      }\n    };\n\n    this.tween.onUpdate = function () {\n      if (_this.onUpdate) {\n        _this.onUpdate.call(_this);\n      }\n    };\n  };\n\n  Tween.prototype.play = function () {\n    this.tween.play();\n    return this;\n  };\n\n  Tween.prototype.reverse = function () {\n    this.tween.reverse();\n    return this;\n  };\n\n  Tween.prototype.reset = function () {\n    this.tween.reset();\n    return this;\n  };\n\n  Tween.prototype.seek = function (t) {\n    this.tween.seek(t * 1000);\n    return this;\n  };\n\n  Tween.prototype.pause = function () {\n    this.tween.pause();\n    return this;\n  };\n\n  Tween.prototype.finish = function () {\n    this.tween.finish();\n    return this;\n  };\n\n  Tween.prototype.destroy = function () {\n    var nodeId = this.node._id,\n        thisId = this._id,\n        attrs = Tween.tweens[nodeId],\n        key;\n    this.pause();\n\n    for (key in attrs) {\n      delete Tween.tweens[nodeId][key];\n    }\n\n    delete Tween.attrs[nodeId][thisId];\n  };\n\n  Tween.attrs = {};\n  Tween.tweens = {};\n  return Tween;\n}();\n\nexports.Tween = Tween;\n\nNode_1.Node.prototype.to = function (params) {\n  var onFinish = params.onFinish;\n  params.node = this;\n\n  params.onFinish = function () {\n    this.destroy();\n\n    if (onFinish) {\n      onFinish();\n    }\n  };\n\n  var tween = new Tween(params);\n  tween.play();\n};\n\nexports.Easings = {\n  BackEaseIn: function (t, b, c, d) {\n    var s = 1.70158;\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  BackEaseOut: function (t, b, c, d) {\n    var s = 1.70158;\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  BackEaseInOut: function (t, b, c, d) {\n    var s = 1.70158;\n\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  },\n  ElasticEaseIn: function (t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  ElasticEaseOut: function (t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  ElasticEaseInOut: function (t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    }\n\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n  },\n  BounceEaseOut: function (t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  BounceEaseIn: function (t, b, c, d) {\n    return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n  },\n  BounceEaseInOut: function (t, b, c, d) {\n    if (t < d / 2) {\n      return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n    } else {\n      return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n    }\n  },\n  EaseIn: function (t, b, c, d) {\n    return c * (t /= d) * t + b;\n  },\n  EaseOut: function (t, b, c, d) {\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  EaseInOut: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    }\n\n    return -c / 2 * (--t * (t - 2) - 1) + b;\n  },\n  StrongEaseIn: function (t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  StrongEaseOut: function (t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  StrongEaseInOut: function (t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  },\n  Linear: function (t, b, c, d) {\n    return c * t / d + b;\n  }\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Arc = function (_super) {\n  __extends(Arc, _super);\n\n  function Arc() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arc.prototype._sceneFunc = function (context) {\n    var angle = Global_1.Konva.getAngle(this.angle()),\n        clockwise = this.clockwise();\n    context.beginPath();\n    context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n    context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Arc.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Arc.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Arc;\n}(Shape_1.Shape);\n\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_2._registerNode(Arc);\n\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Arc);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Line_1 = require(\"./Line\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Arrow = function (_super) {\n  __extends(Arrow, _super);\n\n  function Arrow() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arrow.prototype._sceneFunc = function (ctx) {\n    _super.prototype._sceneFunc.call(this, ctx);\n\n    var PI2 = Math.PI * 2;\n    var points = this.points();\n    var tp = points;\n    var fromTension = this.tension() !== 0 && points.length > 4;\n\n    if (fromTension) {\n      tp = this.getTensionPoints();\n    }\n\n    var n = points.length;\n    var dx, dy;\n\n    if (fromTension) {\n      dx = points[n - 2] - (tp[tp.length - 2] + tp[tp.length - 4]) / 2;\n      dy = points[n - 1] - (tp[tp.length - 1] + tp[tp.length - 3]) / 2;\n    } else {\n      dx = points[n - 2] - points[n - 4];\n      dy = points[n - 1] - points[n - 3];\n    }\n\n    var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n    var length = this.pointerLength();\n    var width = this.pointerWidth();\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(points[n - 2], points[n - 1]);\n    ctx.rotate(radians);\n    ctx.moveTo(0, 0);\n    ctx.lineTo(-length, width / 2);\n    ctx.lineTo(-length, -width / 2);\n    ctx.closePath();\n    ctx.restore();\n\n    if (this.pointerAtBeginning()) {\n      ctx.save();\n      ctx.translate(points[0], points[1]);\n\n      if (fromTension) {\n        dx = (tp[0] + tp[2]) / 2 - points[0];\n        dy = (tp[1] + tp[3]) / 2 - points[1];\n      } else {\n        dx = points[2] - points[0];\n        dy = points[3] - points[1];\n      }\n\n      ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n      ctx.moveTo(0, 0);\n      ctx.lineTo(-length, width / 2);\n      ctx.lineTo(-length, -width / 2);\n      ctx.closePath();\n      ctx.restore();\n    }\n\n    var isDashEnabled = this.dashEnabled();\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = false;\n      ctx.setLineDash([]);\n    }\n\n    ctx.fillStrokeShape(this);\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = true;\n    }\n  };\n\n  Arrow.prototype.getSelfRect = function () {\n    var lineRect = _super.prototype.getSelfRect.call(this);\n\n    var offset = this.pointerWidth() / 2;\n    return {\n      x: lineRect.x - offset,\n      y: lineRect.y - offset,\n      width: lineRect.width + offset * 2,\n      height: lineRect.height + offset * 2\n    };\n  };\n\n  return Arrow;\n}(Line_1.Line);\n\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\n\nGlobal_1._registerNode(Arrow);\n\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Circle = function (_super) {\n  __extends(Circle, _super);\n\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Circle.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Circle.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.setWidth = function (width) {\n    if (this.radius() !== width / 2) {\n      this.radius(width / 2);\n    }\n  };\n\n  Circle.prototype.setHeight = function (height) {\n    if (this.radius() !== height / 2) {\n      this.radius(height / 2);\n    }\n  };\n\n  return Circle;\n}(Shape_1.Shape);\n\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(Circle);\n\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Ellipse = function (_super) {\n  __extends(Ellipse, _super);\n\n  function Ellipse() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ellipse.prototype._sceneFunc = function (context) {\n    var rx = this.radiusX(),\n        ry = this.radiusY();\n    context.beginPath();\n    context.save();\n\n    if (rx !== ry) {\n      context.scale(1, ry / rx);\n    }\n\n    context.arc(0, 0, rx, 0, Math.PI * 2, false);\n    context.restore();\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ellipse.prototype.getWidth = function () {\n    return this.radiusX() * 2;\n  };\n\n  Ellipse.prototype.getHeight = function () {\n    return this.radiusY() * 2;\n  };\n\n  Ellipse.prototype.setWidth = function (width) {\n    this.radiusX(width / 2);\n  };\n\n  Ellipse.prototype.setHeight = function (height) {\n    this.radiusY(height / 2);\n  };\n\n  return Ellipse;\n}(Shape_1.Shape);\n\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n\nGlobal_1._registerNode(Ellipse);\n\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ellipse);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Image = function (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Image.prototype._useBufferCanvas = function () {\n    return _super.prototype._useBufferCanvas.call(this, true);\n  };\n\n  Image.prototype._sceneFunc = function (context) {\n    var width = this.getWidth();\n    var height = this.getHeight();\n    var image = this.attrs.image;\n    var params;\n\n    if (image) {\n      var cropWidth = this.attrs.cropWidth;\n      var cropHeight = this.attrs.cropHeight;\n\n      if (cropWidth && cropHeight) {\n        params = [image, this.cropX(), this.cropY(), cropWidth, cropHeight, 0, 0, width, height];\n      } else {\n        params = [image, 0, 0, width, height];\n      }\n    }\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      context.drawImage.apply(context, params);\n    }\n  };\n\n  Image.prototype._hitFunc = function (context) {\n    var width = this.width(),\n        height = this.height();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Image.prototype.getWidth = function () {\n    var _a, _b;\n\n    return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : ((_b = this.image()) === null || _b === void 0 ? void 0 : _b.width) || 0;\n  };\n\n  Image.prototype.getHeight = function () {\n    var _a, _b;\n\n    return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : ((_b = this.image()) === null || _b === void 0 ? void 0 : _b.height) || 0;\n  };\n\n  Image.fromURL = function (url, callback) {\n    var img = Util_1.Util.createImageElement();\n\n    img.onload = function () {\n      var image = new Image({\n        image: img\n      });\n      callback(image);\n    };\n\n    img.crossOrigin = 'Anonymous';\n    img.src = url;\n  };\n\n  return Image;\n}(Shape_1.Shape);\n\nexports.Image = Image;\nImage.prototype.className = 'Image';\n\nGlobal_1._registerNode(Image);\n\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'padding', 'lineHeight', 'text', 'width', 'height'],\n    CHANGE_KONVA = 'Change.konva',\n    NONE = 'none',\n    UP = 'up',\n    RIGHT = 'right',\n    DOWN = 'down',\n    LEFT = 'left',\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\n\nvar Label = function (_super) {\n  __extends(Label, _super);\n\n  function Label(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('add.konva', function (evt) {\n      this._addListeners(evt.child);\n\n      this._sync();\n    });\n\n    return _this;\n  }\n\n  Label.prototype.getText = function () {\n    return this.find('Text')[0];\n  };\n\n  Label.prototype.getTag = function () {\n    return this.find('Tag')[0];\n  };\n\n  Label.prototype._addListeners = function (text) {\n    var that = this,\n        n;\n\n    var func = function () {\n      that._sync();\n    };\n\n    for (n = 0; n < attrChangeListLen; n++) {\n      text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n    }\n  };\n\n  Label.prototype.getWidth = function () {\n    return this.getText().width();\n  };\n\n  Label.prototype.getHeight = function () {\n    return this.getText().height();\n  };\n\n  Label.prototype._sync = function () {\n    var text = this.getText(),\n        tag = this.getTag(),\n        width,\n        height,\n        pointerDirection,\n        pointerWidth,\n        x,\n        y,\n        pointerHeight;\n\n    if (text && tag) {\n      width = text.width();\n      height = text.height();\n      pointerDirection = tag.pointerDirection();\n      pointerWidth = tag.pointerWidth();\n      pointerHeight = tag.pointerHeight();\n      x = 0;\n      y = 0;\n\n      switch (pointerDirection) {\n        case UP:\n          x = width / 2;\n          y = -1 * pointerHeight;\n          break;\n\n        case RIGHT:\n          x = width + pointerWidth;\n          y = height / 2;\n          break;\n\n        case DOWN:\n          x = width / 2;\n          y = height + pointerHeight;\n          break;\n\n        case LEFT:\n          x = -1 * pointerWidth;\n          y = height / 2;\n          break;\n      }\n\n      tag.setAttrs({\n        x: -1 * x,\n        y: -1 * y,\n        width: width,\n        height: height\n      });\n      text.setAttrs({\n        x: -1 * x,\n        y: -1 * y\n      });\n    }\n  };\n\n  return Label;\n}(Group_1.Group);\n\nexports.Label = Label;\nLabel.prototype.className = 'Label';\n\nGlobal_1._registerNode(Label);\n\nUtil_1.Collection.mapMethods(Label);\n\nvar Tag = function (_super) {\n  __extends(Tag, _super);\n\n  function Tag() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tag.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        pointerDirection = this.pointerDirection(),\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        cornerRadius = this.cornerRadius();\n    var topLeft = 0;\n    var topRight = 0;\n    var bottomLeft = 0;\n    var bottomRight = 0;\n\n    if (typeof cornerRadius === 'number') {\n      topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n    } else {\n      topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n      topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n      bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n      bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n    }\n\n    context.beginPath();\n    context.moveTo(topLeft, 0);\n\n    if (pointerDirection === UP) {\n      context.lineTo((width - pointerWidth) / 2, 0);\n      context.lineTo(width / 2, -1 * pointerHeight);\n      context.lineTo((width + pointerWidth) / 2, 0);\n    }\n\n    context.lineTo(width - topRight, 0);\n    context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);\n\n    if (pointerDirection === RIGHT) {\n      context.lineTo(width, (height - pointerHeight) / 2);\n      context.lineTo(width + pointerWidth, height / 2);\n      context.lineTo(width, (height + pointerHeight) / 2);\n    }\n\n    context.lineTo(width, height - bottomRight);\n    context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n\n    if (pointerDirection === DOWN) {\n      context.lineTo((width + pointerWidth) / 2, height);\n      context.lineTo(width / 2, height + pointerHeight);\n      context.lineTo((width - pointerWidth) / 2, height);\n    }\n\n    context.lineTo(bottomLeft, height);\n    context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n\n    if (pointerDirection === LEFT) {\n      context.lineTo(0, (height + pointerHeight) / 2);\n      context.lineTo(-1 * pointerWidth, height / 2);\n      context.lineTo(0, (height - pointerHeight) / 2);\n    }\n\n    context.lineTo(0, topLeft);\n    context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Tag.prototype.getSelfRect = function () {\n    var x = 0,\n        y = 0,\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        direction = this.pointerDirection(),\n        width = this.width(),\n        height = this.height();\n\n    if (direction === UP) {\n      y -= pointerHeight;\n      height += pointerHeight;\n    } else if (direction === DOWN) {\n      height += pointerHeight;\n    } else if (direction === LEFT) {\n      x -= pointerWidth * 1.5;\n      width += pointerWidth;\n    } else if (direction === RIGHT) {\n      width += pointerWidth * 1.5;\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  return Tag;\n}(Shape_1.Shape);\n\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\n\nGlobal_1._registerNode(Tag);\n\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, Validators_1.getNumberOrArrayOfNumbersValidator(4));\nUtil_1.Collection.mapMethods(Tag);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar RegularPolygon = function (_super) {\n  __extends(RegularPolygon, _super);\n\n  function RegularPolygon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RegularPolygon.prototype._sceneFunc = function (context) {\n    var points = this._getPoints();\n\n    context.beginPath();\n    context.moveTo(points[0].x, points[0].y);\n\n    for (var n = 1; n < points.length; n++) {\n      context.lineTo(points[n].x, points[n].y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  RegularPolygon.prototype._getPoints = function () {\n    var sides = this.attrs.sides;\n    var radius = this.attrs.radius || 0;\n    var points = [];\n\n    for (var n = 0; n < sides; n++) {\n      points.push({\n        x: radius * Math.sin(n * 2 * Math.PI / sides),\n        y: -1 * radius * Math.cos(n * 2 * Math.PI / sides)\n      });\n    }\n\n    return points;\n  };\n\n  RegularPolygon.prototype.getSelfRect = function () {\n    var points = this._getPoints();\n\n    var minX = points[0].x;\n    var maxX = points[0].y;\n    var minY = points[0].x;\n    var maxY = points[0].y;\n    points.forEach(function (point) {\n      minX = Math.min(minX, point.x);\n      maxX = Math.max(maxX, point.x);\n      minY = Math.min(minY, point.y);\n      maxY = Math.max(maxY, point.y);\n    });\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  };\n\n  RegularPolygon.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  RegularPolygon.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return RegularPolygon;\n}(Shape_1.Shape);\n\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(RegularPolygon);\n\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(RegularPolygon);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar PIx2 = Math.PI * 2;\n\nvar Ring = function (_super) {\n  __extends(Ring, _super);\n\n  function Ring() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ring.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n    context.moveTo(this.outerRadius(), 0);\n    context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ring.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Ring.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Ring;\n}(Shape_1.Shape);\n\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Ring);\n\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ring);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Animation_1 = require(\"../Animation\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Sprite = function (_super) {\n  __extends(Sprite, _super);\n\n  function Sprite(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._updated = true;\n    _this.anim = new Animation_1.Animation(function () {\n      var updated = _this._updated;\n      _this._updated = false;\n      return updated;\n    });\n\n    _this.on('animationChange.konva', function () {\n      this.frameIndex(0);\n    });\n\n    _this.on('frameIndexChange.konva', function () {\n      this._updated = true;\n    });\n\n    _this.on('frameRateChange.konva', function () {\n      if (!this.anim.isRunning()) {\n        return;\n      }\n\n      clearInterval(this.interval);\n\n      this._setInterval();\n    });\n\n    return _this;\n  }\n\n  Sprite.prototype._sceneFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        x = set[ix4 + 0],\n        y = set[ix4 + 1],\n        width = set[ix4 + 2],\n        height = set[ix4 + 3],\n        image = this.image();\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      if (offsets) {\n        var offset = offsets[anim],\n            ix2 = index * 2;\n        context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n      } else {\n        context.drawImage(image, x, y, width, height, 0, 0, width, height);\n      }\n    }\n  };\n\n  Sprite.prototype._hitFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        width = set[ix4 + 2],\n        height = set[ix4 + 3];\n    context.beginPath();\n\n    if (offsets) {\n      var offset = offsets[anim];\n      var ix2 = index * 2;\n      context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n    } else {\n      context.rect(0, 0, width, height);\n    }\n\n    context.closePath();\n    context.fillShape(this);\n  };\n\n  Sprite.prototype._useBufferCanvas = function () {\n    return _super.prototype._useBufferCanvas.call(this, true);\n  };\n\n  Sprite.prototype._setInterval = function () {\n    var that = this;\n    this.interval = setInterval(function () {\n      that._updateIndex();\n    }, 1000 / this.frameRate());\n  };\n\n  Sprite.prototype.start = function () {\n    if (this.isRunning()) {\n      return;\n    }\n\n    var layer = this.getLayer();\n    this.anim.setLayers(layer);\n\n    this._setInterval();\n\n    this.anim.start();\n  };\n\n  Sprite.prototype.stop = function () {\n    this.anim.stop();\n    clearInterval(this.interval);\n  };\n\n  Sprite.prototype.isRunning = function () {\n    return this.anim.isRunning();\n  };\n\n  Sprite.prototype._updateIndex = function () {\n    var index = this.frameIndex(),\n        animation = this.animation(),\n        animations = this.animations(),\n        anim = animations[animation],\n        len = anim.length / 4;\n\n    if (index < len - 1) {\n      this.frameIndex(index + 1);\n    } else {\n      this.frameIndex(0);\n    }\n  };\n\n  return Sprite;\n}(Shape_1.Shape);\n\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n\nGlobal_1._registerNode(Sprite);\n\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n  index: 'frameIndex',\n  getIndex: 'getFrameIndex',\n  setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Star = function (_super) {\n  __extends(Star, _super);\n\n  function Star() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Star.prototype._sceneFunc = function (context) {\n    var innerRadius = this.innerRadius(),\n        outerRadius = this.outerRadius(),\n        numPoints = this.numPoints();\n    context.beginPath();\n    context.moveTo(0, 0 - outerRadius);\n\n    for (var n = 1; n < numPoints * 2; n++) {\n      var radius = n % 2 === 0 ? outerRadius : innerRadius;\n      var x = radius * Math.sin(n * Math.PI / numPoints);\n      var y = -1 * radius * Math.cos(n * Math.PI / numPoints);\n      context.lineTo(x, y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Star.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Star.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Star;\n}(Shape_1.Shape);\n\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Star);\n\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Star);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Path_1 = require(\"./Path\");\n\nvar Text_1 = require(\"./Text\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar EMPTY_STRING = '',\n    NORMAL = 'normal';\n\nfunction _fillFunc(context) {\n  context.fillText(this.partialText, 0, 0);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this.partialText, 0, 0);\n}\n\nvar TextPath = function (_super) {\n  __extends(TextPath, _super);\n\n  function TextPath(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dummyCanvas = Util_1.Util.createCanvasElement();\n    _this.dataArray = [];\n    _this.dataArray = Path_1.Path.parsePathData(_this.attrs.data);\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n\n      this._setTextData();\n    });\n\n    _this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva', _this._setTextData);\n\n    if (config && config['getKerning']) {\n      Util_1.Util.warn('getKerning TextPath API is deprecated. Please use \"kerningFunc\" instead.');\n\n      _this.kerningFunc(config['getKerning']);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  TextPath.prototype._sceneFunc = function (context) {\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', this.textBaseline());\n    context.setAttr('textAlign', 'left');\n    context.save();\n    var textDecoration = this.textDecoration();\n    var fill = this.fill();\n    var fontSize = this.fontSize();\n    var glyphInfo = this.glyphInfo;\n\n    if (textDecoration === 'underline') {\n      context.beginPath();\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      context.save();\n      var p0 = glyphInfo[i].p0;\n      context.translate(p0.x, p0.y);\n      context.rotate(glyphInfo[i].rotation);\n      this.partialText = glyphInfo[i].text;\n      context.fillStrokeShape(this);\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          context.moveTo(0, fontSize / 2 + 1);\n        }\n\n        context.lineTo(fontSize, fontSize / 2 + 1);\n      }\n\n      context.restore();\n    }\n\n    if (textDecoration === 'underline') {\n      context.strokeStyle = fill;\n      context.lineWidth = fontSize / 20;\n      context.stroke();\n    }\n\n    context.restore();\n  };\n\n  TextPath.prototype._hitFunc = function (context) {\n    context.beginPath();\n    var glyphInfo = this.glyphInfo;\n\n    if (glyphInfo.length >= 1) {\n      var p0 = glyphInfo[0].p0;\n      context.moveTo(p0.x, p0.y);\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      var p1 = glyphInfo[i].p1;\n      context.lineTo(p1.x, p1.y);\n    }\n\n    context.setAttr('lineWidth', this.fontSize());\n    context.setAttr('strokeStyle', this.colorKey);\n    context.stroke();\n  };\n\n  TextPath.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  TextPath.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  TextPath.prototype.setText = function (text) {\n    return Text_1.Text.prototype.setText.call(this, text);\n  };\n\n  TextPath.prototype._getContextFont = function () {\n    return Text_1.Text.prototype._getContextFont.call(this);\n  };\n\n  TextPath.prototype._getTextSize = function (text) {\n    var dummyCanvas = this.dummyCanvas;\n\n    var _context = dummyCanvas.getContext('2d');\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n\n    var metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: parseInt(this.attrs.fontSize, 10)\n    };\n  };\n\n  TextPath.prototype._setTextData = function () {\n    var that = this;\n\n    var size = this._getTextSize(this.attrs.text);\n\n    var letterSpacing = this.letterSpacing();\n    var align = this.align();\n    var kerningFunc = this.kerningFunc();\n    this.textWidth = size.width;\n    this.textHeight = size.height;\n    var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n    this.glyphInfo = [];\n    var fullPathWidth = 0;\n\n    for (var l = 0; l < that.dataArray.length; l++) {\n      if (that.dataArray[l].pathLength > 0) {\n        fullPathWidth += that.dataArray[l].pathLength;\n      }\n    }\n\n    var offset = 0;\n\n    if (align === 'center') {\n      offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n    }\n\n    if (align === 'right') {\n      offset = Math.max(0, fullPathWidth - textFullWidth);\n    }\n\n    var charArr = Text_1.stringToArray(this.text());\n    var spacesNumber = this.text().split(' ').length - 1;\n    var p0, p1, pathCmd;\n    var pIndex = -1;\n    var currentT = 0;\n\n    var getNextPathSegment = function () {\n      currentT = 0;\n      var pathData = that.dataArray;\n\n      for (var j = pIndex + 1; j < pathData.length; j++) {\n        if (pathData[j].pathLength > 0) {\n          pIndex = j;\n          return pathData[j];\n        } else if (pathData[j].command === 'M') {\n          p0 = {\n            x: pathData[j].points[0],\n            y: pathData[j].points[1]\n          };\n        }\n      }\n\n      return {};\n    };\n\n    var findSegmentToFitCharacter = function (c) {\n      var glyphWidth = that._getTextSize(c).width + letterSpacing;\n\n      if (c === ' ' && align === 'justify') {\n        glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n      }\n\n      var currLen = 0;\n      var attempts = 0;\n      p1 = undefined;\n\n      while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 && attempts < 20) {\n        attempts++;\n        var cumulativePathLength = currLen;\n\n        while (pathCmd === undefined) {\n          pathCmd = getNextPathSegment();\n\n          if (pathCmd && cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n            cumulativePathLength += pathCmd.pathLength;\n            pathCmd = undefined;\n          }\n        }\n\n        if (pathCmd === {} || p0 === undefined) {\n          return undefined;\n        }\n\n        var needNewSegment = false;\n\n        switch (pathCmd.command) {\n          case 'L':\n            if (Path_1.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n              p1 = Path_1.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n            } else {\n              pathCmd = undefined;\n            }\n\n            break;\n\n          case 'A':\n            var start = pathCmd.points[4];\n            var dTheta = pathCmd.points[5];\n            var end = pathCmd.points[4] + dTheta;\n\n            if (currentT === 0) {\n              currentT = start + 0.00000001;\n            } else if (glyphWidth > currLen) {\n              currentT += Math.PI / 180.0 * dTheta / Math.abs(dTheta);\n            } else {\n              currentT -= Math.PI / 360.0 * dTheta / Math.abs(dTheta);\n            }\n\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              currentT = end;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n            break;\n\n          case 'C':\n            if (currentT === 0) {\n              if (glyphWidth > pathCmd.pathLength) {\n                currentT = 0.00000001;\n              } else {\n                currentT = glyphWidth / pathCmd.pathLength;\n              }\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength / 2;\n            } else {\n              currentT = Math.max(currentT - (currLen - glyphWidth) / pathCmd.pathLength / 2, 0);\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n            break;\n\n          case 'Q':\n            if (currentT === 0) {\n              currentT = glyphWidth / pathCmd.pathLength;\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n            } else {\n              currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n            break;\n        }\n\n        if (p1 !== undefined) {\n          currLen = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n        }\n\n        if (needNewSegment) {\n          needNewSegment = false;\n          pathCmd = undefined;\n        }\n      }\n    };\n\n    var testChar = 'C';\n    var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n    var lettersInOffset = offset / glyphWidth - 1;\n\n    for (var k = 0; k < lettersInOffset; k++) {\n      findSegmentToFitCharacter(testChar);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      p0 = p1;\n    }\n\n    for (var i = 0; i < charArr.length; i++) {\n      findSegmentToFitCharacter(charArr[i]);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      var width = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n      var kern = 0;\n\n      if (kerningFunc) {\n        try {\n          kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n        } catch (e) {\n          kern = 0;\n        }\n      }\n\n      p0.x += kern;\n      p1.x += kern;\n      this.textWidth += kern;\n      var midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n      var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n      this.glyphInfo.push({\n        transposeX: midpoint.x,\n        transposeY: midpoint.y,\n        text: charArr[i],\n        rotation: rotation,\n        p0: p0,\n        p1: p1\n      });\n      p0 = p1;\n    }\n  };\n\n  TextPath.prototype.getSelfRect = function () {\n    if (!this.glyphInfo.length) {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    var points = [];\n    this.glyphInfo.forEach(function (info) {\n      points.push(info.p0.x);\n      points.push(info.p0.y);\n      points.push(info.p1.x);\n      points.push(info.p1.y);\n    });\n    var minX = points[0] || 0;\n    var maxX = points[0] || 0;\n    var minY = points[1] || 0;\n    var maxY = points[1] || 0;\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    var fontSize = this.fontSize();\n    return {\n      x: minX - fontSize / 2,\n      y: minY - fontSize / 2,\n      width: maxX - minX + fontSize,\n      height: maxY - minY + fontSize\n    };\n  };\n\n  return TextPath;\n}(Shape_1.Shape);\n\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n\nGlobal_1._registerNode(TextPath);\n\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\nUtil_1.Collection.mapMethods(TextPath);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Rect_1 = require(\"./Rect\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = ['resizeEnabledChange', 'rotateAnchorOffsetChange', 'rotateEnabledChange', 'enabledAnchorsChange', 'anchorSizeChange', 'borderEnabledChange', 'borderStrokeChange', 'borderStrokeWidthChange', 'borderDashChange', 'anchorStrokeChange', 'anchorStrokeWidthChange', 'anchorFillChange', 'anchorCornerRadiusChange', 'ignoreStrokeChange'].map(function (e) {\n  return e + (\".\" + EVENTS_NAME);\n}).join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = ['widthChange', 'heightChange', 'scaleXChange', 'scaleYChange', 'skewXChange', 'skewYChange', 'rotationChange', 'offsetXChange', 'offsetYChange', 'transformsEnabledChange', 'strokeWidthChange'].map(function (e) {\n  return e + (\".\" + EVENTS_NAME);\n}).join(' ');\nvar ANGLES = {\n  'top-left': -45,\n  'top-center': 0,\n  'top-right': 45,\n  'middle-right': -90,\n  'middle-left': 90,\n  'bottom-left': -135,\n  'bottom-center': 180,\n  'bottom-right': 135\n};\nvar TOUCH_DEVICE = ('ontouchstart' in Global_1.Konva._global);\n\nfunction getCursor(anchorName, rad) {\n  if (anchorName === 'rotater') {\n    return 'crosshair';\n  }\n\n  rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n  var angle = (Util_1.Util._radToDeg(rad) % 360 + 360) % 360;\n\n  if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n    return 'nwse-resize';\n  } else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n    return 'nwse-resize';\n  } else {\n    Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n    return 'pointer';\n  }\n}\n\nvar ANCHORS_NAMES = ['top-left', 'top-center', 'top-right', 'middle-right', 'middle-left', 'bottom-left', 'bottom-center', 'bottom-right'];\nvar MAX_SAFE_INTEGER = 100000000;\n\nfunction getCenter(shape) {\n  return {\n    x: shape.x + shape.width / 2 * Math.cos(shape.rotation) + shape.height / 2 * Math.sin(-shape.rotation),\n    y: shape.y + shape.height / 2 * Math.cos(shape.rotation) + shape.width / 2 * Math.sin(shape.rotation)\n  };\n}\n\nfunction rotateAroundPoint(shape, angleRad, point) {\n  var x = point.x + (shape.x - point.x) * Math.cos(angleRad) - (shape.y - point.y) * Math.sin(angleRad);\n  var y = point.y + (shape.x - point.x) * Math.sin(angleRad) + (shape.y - point.y) * Math.cos(angleRad);\n  return __assign(__assign({}, shape), {\n    rotation: shape.rotation + angleRad,\n    x: x,\n    y: y\n  });\n}\n\nfunction rotateAroundCenter(shape, deltaRad) {\n  var center = getCenter(shape);\n  return rotateAroundPoint(shape, deltaRad, center);\n}\n\nfunction getSnap(snaps, newRotationRad, tol) {\n  var snapped = newRotationRad;\n\n  for (var i = 0; i < snaps.length; i++) {\n    var angle = Global_1.Konva.getAngle(snaps[i]);\n    var absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n    var dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n\n    if (dif < tol) {\n      snapped = angle;\n    }\n  }\n\n  return snapped;\n}\n\nvar Transformer = function (_super) {\n  __extends(Transformer, _super);\n\n  function Transformer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._transforming = false;\n\n    _this._createElements();\n\n    _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n    _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n    _this.update = _this.update.bind(_this);\n\n    _this.on(ATTR_CHANGE_LIST, _this.update);\n\n    if (_this.getNode()) {\n      _this.update();\n    }\n\n    return _this;\n  }\n\n  Transformer.prototype.attachTo = function (node) {\n    this.setNode(node);\n    return this;\n  };\n\n  Transformer.prototype.setNode = function (node) {\n    Util_1.Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n    return this.setNodes([node]);\n  };\n\n  Transformer.prototype.getNode = function () {\n    return this._nodes && this._nodes[0];\n  };\n\n  Transformer.prototype.setNodes = function (nodes) {\n    var _this = this;\n\n    if (nodes === void 0) {\n      nodes = [];\n    }\n\n    if (this._nodes && this._nodes.length) {\n      this.detach();\n    }\n\n    this._nodes = nodes;\n\n    if (nodes.length === 1) {\n      this.rotation(nodes[0].rotation());\n    } else {\n      this.rotation(0);\n    }\n\n    this._nodes.forEach(function (node) {\n      var additionalEvents = node._attrsAffectingSize.map(function (prop) {\n        return prop + 'Change.' + EVENTS_NAME;\n      }).join(' ');\n\n      var onChange = function () {\n        if (_this.nodes().length === 1) {\n          _this.rotation(_this.nodes()[0].rotation());\n        }\n\n        _this._resetTransformCache();\n\n        if (!_this._transforming && !_this.isDragging()) {\n          _this.update();\n        }\n      };\n\n      node.on(additionalEvents, onChange);\n      node.on(TRANSFORM_CHANGE_STR, onChange);\n      node.on(\"_clearTransformCache.\" + EVENTS_NAME, onChange);\n      node.on(\"xChange.\" + EVENTS_NAME + \" yChange.\" + EVENTS_NAME, onChange);\n\n      _this._proxyDrag(node);\n    });\n\n    this._resetTransformCache();\n\n    var elementsCreated = !!this.findOne('.top-left');\n\n    if (elementsCreated) {\n      this.update();\n    }\n\n    return this;\n  };\n\n  Transformer.prototype._proxyDrag = function (node) {\n    var _this = this;\n\n    var lastPos;\n    node.on(\"dragstart.\" + EVENTS_NAME, function (e) {\n      lastPos = node.getAbsolutePosition();\n\n      if (!_this.isDragging() && node !== _this.findOne('.back')) {\n        _this.startDrag(e, false);\n      }\n    });\n    node.on(\"dragmove.\" + EVENTS_NAME, function (e) {\n      if (!lastPos) {\n        return;\n      }\n\n      var abs = node.getAbsolutePosition();\n      var dx = abs.x - lastPos.x;\n      var dy = abs.y - lastPos.y;\n\n      _this.nodes().forEach(function (otherNode) {\n        if (otherNode === node) {\n          return;\n        }\n\n        if (otherNode.isDragging()) {\n          return;\n        }\n\n        var otherAbs = otherNode.getAbsolutePosition();\n        otherNode.setAbsolutePosition({\n          x: otherAbs.x + dx,\n          y: otherAbs.y + dy\n        });\n        otherNode.startDrag(e);\n      });\n\n      lastPos = null;\n    });\n  };\n\n  Transformer.prototype.getNodes = function () {\n    return this._nodes || [];\n  };\n\n  Transformer.prototype.getActiveAnchor = function () {\n    return this._movingAnchorName;\n  };\n\n  Transformer.prototype.detach = function () {\n    if (this._nodes) {\n      this._nodes.forEach(function (node) {\n        node.off('.' + EVENTS_NAME);\n      });\n    }\n\n    this._nodes = [];\n\n    this._resetTransformCache();\n  };\n\n  Transformer.prototype._resetTransformCache = function () {\n    this._clearCache(NODES_RECT);\n\n    this._clearCache('transform');\n\n    this._clearSelfAndDescendantCache('absoluteTransform');\n  };\n\n  Transformer.prototype._getNodeRect = function () {\n    return this._getCache(NODES_RECT, this.__getNodeRect);\n  };\n\n  Transformer.prototype.__getNodeShape = function (node, rot, relative) {\n    if (rot === void 0) {\n      rot = this.rotation();\n    }\n\n    var rect = node.getClientRect({\n      skipTransform: true,\n      skipShadow: true,\n      skipStroke: this.ignoreStroke()\n    });\n    var absScale = node.getAbsoluteScale(relative);\n    var absPos = node.getAbsolutePosition(relative);\n    var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n    var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n    var rotation = (Global_1.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) % (Math.PI * 2);\n    var box = {\n      x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n      y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n      width: rect.width * absScale.x,\n      height: rect.height * absScale.y,\n      rotation: rotation\n    };\n    return rotateAroundPoint(box, -Global_1.Konva.getAngle(rot), {\n      x: 0,\n      y: 0\n    });\n  };\n\n  Transformer.prototype.__getNodeRect = function () {\n    var _this = this;\n\n    var node = this.getNode();\n\n    if (!node) {\n      return {\n        x: -MAX_SAFE_INTEGER,\n        y: -MAX_SAFE_INTEGER,\n        width: 0,\n        height: 0,\n        rotation: 0\n      };\n    }\n\n    var totalPoints = [];\n    this.nodes().map(function (node) {\n      var box = node.getClientRect({\n        skipTransform: true,\n        skipShadow: true,\n        skipStroke: _this.ignoreStroke()\n      });\n      var points = [{\n        x: box.x,\n        y: box.y\n      }, {\n        x: box.x + box.width,\n        y: box.y\n      }, {\n        x: box.x + box.width,\n        y: box.y + box.height\n      }, {\n        x: box.x,\n        y: box.y + box.height\n      }];\n      var trans = node.getAbsoluteTransform();\n      points.forEach(function (point) {\n        var transformed = trans.point(point);\n        totalPoints.push(transformed);\n      });\n    });\n    var tr = new Util_1.Transform();\n    tr.rotate(-Global_1.Konva.getAngle(this.rotation()));\n    var minX, minY, maxX, maxY;\n    totalPoints.forEach(function (point) {\n      var transformed = tr.point(point);\n\n      if (minX === undefined) {\n        minX = maxX = transformed.x;\n        minY = maxY = transformed.y;\n      }\n\n      minX = Math.min(minX, transformed.x);\n      minY = Math.min(minY, transformed.y);\n      maxX = Math.max(maxX, transformed.x);\n      maxY = Math.max(maxY, transformed.y);\n    });\n    tr.invert();\n    var p = tr.point({\n      x: minX,\n      y: minY\n    });\n    return {\n      x: p.x,\n      y: p.y,\n      width: maxX - minX,\n      height: maxY - minY,\n      rotation: Global_1.Konva.getAngle(this.rotation())\n    };\n  };\n\n  Transformer.prototype.getX = function () {\n    return this._getNodeRect().x;\n  };\n\n  Transformer.prototype.getY = function () {\n    return this._getNodeRect().y;\n  };\n\n  Transformer.prototype.getWidth = function () {\n    return this._getNodeRect().width;\n  };\n\n  Transformer.prototype.getHeight = function () {\n    return this._getNodeRect().height;\n  };\n\n  Transformer.prototype._createElements = function () {\n    this._createBack();\n\n    ANCHORS_NAMES.forEach(function (name) {\n      this._createAnchor(name);\n    }.bind(this));\n\n    this._createAnchor('rotater');\n  };\n\n  Transformer.prototype._createAnchor = function (name) {\n    var _this = this;\n\n    var anchor = new Rect_1.Rect({\n      stroke: 'rgb(0, 161, 255)',\n      fill: 'white',\n      strokeWidth: 1,\n      name: name + ' _anchor',\n      dragDistance: 0,\n      draggable: true,\n      hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto'\n    });\n    var self = this;\n    anchor.on('mousedown touchstart', function (e) {\n      self._handleMouseDown(e);\n    });\n    anchor.on('dragstart', function (e) {\n      anchor.stopDrag();\n      e.cancelBubble = true;\n    });\n    anchor.on('dragend', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('mouseenter', function () {\n      var rad = Global_1.Konva.getAngle(_this.rotation());\n      var cursor = getCursor(name, rad);\n      anchor.getStage().content.style.cursor = cursor;\n      _this._cursorChange = true;\n    });\n    anchor.on('mouseout', function () {\n      anchor.getStage().content.style.cursor = '';\n      _this._cursorChange = false;\n    });\n    this.add(anchor);\n  };\n\n  Transformer.prototype._createBack = function () {\n    var _this = this;\n\n    var back = new Shape_1.Shape({\n      name: 'back',\n      width: 0,\n      height: 0,\n      draggable: true,\n      sceneFunc: function (ctx) {\n        var tr = this.getParent();\n        var padding = tr.padding();\n        ctx.beginPath();\n        ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n        ctx.moveTo(this.width() / 2, -padding);\n\n        if (tr.rotateEnabled()) {\n          ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()) - padding);\n        }\n\n        ctx.fillStrokeShape(this);\n      },\n      hitFunc: function (ctx, shape) {\n        if (!_this.shouldOverdrawWholeArea()) {\n          return;\n        }\n\n        var padding = _this.padding();\n\n        ctx.beginPath();\n        ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n        ctx.fillStrokeShape(shape);\n      }\n    });\n    this.add(back);\n\n    this._proxyDrag(back);\n\n    back.on('dragstart', function (e) {\n      e.cancelBubble = true;\n    });\n    back.on('dragmove', function (e) {\n      e.cancelBubble = true;\n    });\n    back.on('dragend', function (e) {\n      e.cancelBubble = true;\n    });\n  };\n\n  Transformer.prototype._handleMouseDown = function (e) {\n    this._movingAnchorName = e.target.name().split(' ')[0];\n\n    var attrs = this._getNodeRect();\n\n    var width = attrs.width;\n    var height = attrs.height;\n    var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n    this.sin = Math.abs(height / hypotenuse);\n    this.cos = Math.abs(width / hypotenuse);\n    window.addEventListener('mousemove', this._handleMouseMove);\n    window.addEventListener('touchmove', this._handleMouseMove);\n    window.addEventListener('mouseup', this._handleMouseUp, true);\n    window.addEventListener('touchend', this._handleMouseUp, true);\n    this._transforming = true;\n    var ap = e.target.getAbsolutePosition();\n    var pos = e.target.getStage().getPointerPosition();\n    this._anchorDragOffset = {\n      x: pos.x - ap.x,\n      y: pos.y - ap.y\n    };\n\n    this._fire('transformstart', {\n      evt: e,\n      target: this.getNode()\n    });\n\n    this._nodes.forEach(function (target) {\n      target._fire('transformstart', {\n        evt: e,\n        target: target\n      });\n    });\n  };\n\n  Transformer.prototype._handleMouseMove = function (e) {\n    var x, y, newHypotenuse;\n    var anchorNode = this.findOne('.' + this._movingAnchorName);\n    var stage = anchorNode.getStage();\n    stage.setPointersPositions(e);\n    var pp = stage.getPointerPosition();\n    var newNodePos = {\n      x: pp.x - this._anchorDragOffset.x,\n      y: pp.y - this._anchorDragOffset.y\n    };\n    var oldAbs = anchorNode.getAbsolutePosition();\n    anchorNode.setAbsolutePosition(newNodePos);\n    var newAbs = anchorNode.getAbsolutePosition();\n\n    if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n      return;\n    }\n\n    if (this._movingAnchorName === 'rotater') {\n      var attrs = this._getNodeRect();\n\n      x = anchorNode.x() - attrs.width / 2;\n      y = -anchorNode.y() + attrs.height / 2;\n      var delta = Math.atan2(-y, x) + Math.PI / 2;\n\n      if (attrs.height < 0) {\n        delta -= Math.PI;\n      }\n\n      var oldRotation = Global_1.Konva.getAngle(this.rotation());\n      var newRotation = oldRotation + delta;\n      var tol = Global_1.Konva.getAngle(this.rotationSnapTolerance());\n      var snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n      var diff = snappedRot - attrs.rotation;\n      var shape = rotateAroundCenter(attrs, diff);\n\n      this._fitNodesInto(shape, e);\n\n      return;\n    }\n\n    var keepProportion = this.keepRatio() || e.shiftKey;\n    var centeredScaling = this.centeredScaling() || e.altKey;\n\n    if (this._movingAnchorName === 'top-left') {\n      if (keepProportion) {\n        var comparePoint = centeredScaling ? {\n          x: this.width() / 2,\n          y: this.height() / 2\n        } : {\n          x: this.findOne('.bottom-right').x(),\n          y: this.findOne('.bottom-right').y()\n        };\n        newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) + Math.pow(comparePoint.y - anchorNode.y(), 2));\n        var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n        var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n        x = newHypotenuse * this.cos * reverseX;\n        y = newHypotenuse * this.sin * reverseY;\n        this.findOne('.top-left').x(comparePoint.x - x);\n        this.findOne('.top-left').y(comparePoint.y - y);\n      }\n    } else if (this._movingAnchorName === 'top-center') {\n      this.findOne('.top-left').y(anchorNode.y());\n    } else if (this._movingAnchorName === 'top-right') {\n      if (keepProportion) {\n        var comparePoint = centeredScaling ? {\n          x: this.width() / 2,\n          y: this.height() / 2\n        } : {\n          x: this.findOne('.bottom-left').x(),\n          y: this.findOne('.bottom-left').y()\n        };\n        newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) + Math.pow(comparePoint.y - anchorNode.y(), 2));\n        var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n        var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n        x = newHypotenuse * this.cos * reverseX;\n        y = newHypotenuse * this.sin * reverseY;\n        this.findOne('.top-right').x(comparePoint.x + x);\n        this.findOne('.top-right').y(comparePoint.y - y);\n      }\n\n      var pos = anchorNode.position();\n      this.findOne('.top-left').y(pos.y);\n      this.findOne('.bottom-right').x(pos.x);\n    } else if (this._movingAnchorName === 'middle-left') {\n      this.findOne('.top-left').x(anchorNode.x());\n    } else if (this._movingAnchorName === 'middle-right') {\n      this.findOne('.bottom-right').x(anchorNode.x());\n    } else if (this._movingAnchorName === 'bottom-left') {\n      if (keepProportion) {\n        var comparePoint = centeredScaling ? {\n          x: this.width() / 2,\n          y: this.height() / 2\n        } : {\n          x: this.findOne('.top-right').x(),\n          y: this.findOne('.top-right').y()\n        };\n        newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) + Math.pow(anchorNode.y() - comparePoint.y, 2));\n        var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n        var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n        x = newHypotenuse * this.cos * reverseX;\n        y = newHypotenuse * this.sin * reverseY;\n        anchorNode.x(comparePoint.x - x);\n        anchorNode.y(comparePoint.y + y);\n      }\n\n      pos = anchorNode.position();\n      this.findOne('.top-left').x(pos.x);\n      this.findOne('.bottom-right').y(pos.y);\n    } else if (this._movingAnchorName === 'bottom-center') {\n      this.findOne('.bottom-right').y(anchorNode.y());\n    } else if (this._movingAnchorName === 'bottom-right') {\n      if (keepProportion) {\n        var comparePoint = centeredScaling ? {\n          x: this.width() / 2,\n          y: this.height() / 2\n        } : {\n          x: this.findOne('.top-left').x(),\n          y: this.findOne('.top-left').y()\n        };\n        newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) + Math.pow(anchorNode.y() - comparePoint.y, 2));\n        var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n        var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n        x = newHypotenuse * this.cos * reverseX;\n        y = newHypotenuse * this.sin * reverseY;\n        this.findOne('.bottom-right').x(comparePoint.x + x);\n        this.findOne('.bottom-right').y(comparePoint.y + y);\n      }\n    } else {\n      console.error(new Error('Wrong position argument of selection resizer: ' + this._movingAnchorName));\n    }\n\n    var centeredScaling = this.centeredScaling() || e.altKey;\n\n    if (centeredScaling) {\n      var topLeft = this.findOne('.top-left');\n      var bottomRight = this.findOne('.bottom-right');\n      var topOffsetX = topLeft.x();\n      var topOffsetY = topLeft.y();\n      var bottomOffsetX = this.getWidth() - bottomRight.x();\n      var bottomOffsetY = this.getHeight() - bottomRight.y();\n      bottomRight.move({\n        x: -topOffsetX,\n        y: -topOffsetY\n      });\n      topLeft.move({\n        x: bottomOffsetX,\n        y: bottomOffsetY\n      });\n    }\n\n    var absPos = this.findOne('.top-left').getAbsolutePosition();\n    x = absPos.x;\n    y = absPos.y;\n    var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n    var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n\n    this._fitNodesInto({\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      rotation: Global_1.Konva.getAngle(this.rotation())\n    }, e);\n  };\n\n  Transformer.prototype._handleMouseUp = function (e) {\n    this._removeEvents(e);\n  };\n\n  Transformer.prototype.getAbsoluteTransform = function () {\n    return this.getTransform();\n  };\n\n  Transformer.prototype._removeEvents = function (e) {\n    if (this._transforming) {\n      this._transforming = false;\n      window.removeEventListener('mousemove', this._handleMouseMove);\n      window.removeEventListener('touchmove', this._handleMouseMove);\n      window.removeEventListener('mouseup', this._handleMouseUp, true);\n      window.removeEventListener('touchend', this._handleMouseUp, true);\n      var node = this.getNode();\n\n      this._fire('transformend', {\n        evt: e,\n        target: node\n      });\n\n      if (node) {\n        this._nodes.forEach(function (target) {\n          target._fire('transformend', {\n            evt: e,\n            target: target\n          });\n        });\n      }\n\n      this._movingAnchorName = null;\n    }\n  };\n\n  Transformer.prototype._fitNodesInto = function (newAttrs, evt) {\n    var _this = this;\n\n    var oldAttrs = this._getNodeRect();\n\n    var minSize = 1;\n\n    if (Util_1.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n      this.update();\n      return;\n    }\n\n    if (Util_1.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n      this.update();\n      return;\n    }\n\n    var allowNegativeScale = true;\n    var t = new Util_1.Transform();\n    t.rotate(Global_1.Konva.getAngle(this.rotation()));\n\n    if (this._movingAnchorName && newAttrs.width < 0 && this._movingAnchorName.indexOf('left') >= 0) {\n      var offset = t.point({\n        x: -this.padding() * 2,\n        y: 0\n      });\n      newAttrs.x += offset.x;\n      newAttrs.y += offset.y;\n      newAttrs.width += this.padding() * 2;\n      this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n      this._anchorDragOffset.x -= offset.x;\n      this._anchorDragOffset.y -= offset.y;\n\n      if (!allowNegativeScale) {\n        this.update();\n        return;\n      }\n    } else if (this._movingAnchorName && newAttrs.width < 0 && this._movingAnchorName.indexOf('right') >= 0) {\n      var offset = t.point({\n        x: this.padding() * 2,\n        y: 0\n      });\n      this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n      this._anchorDragOffset.x -= offset.x;\n      this._anchorDragOffset.y -= offset.y;\n      newAttrs.width += this.padding() * 2;\n\n      if (!allowNegativeScale) {\n        this.update();\n        return;\n      }\n    }\n\n    if (this._movingAnchorName && newAttrs.height < 0 && this._movingAnchorName.indexOf('top') >= 0) {\n      var offset = t.point({\n        x: 0,\n        y: -this.padding() * 2\n      });\n      newAttrs.x += offset.x;\n      newAttrs.y += offset.y;\n      this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n      this._anchorDragOffset.x -= offset.x;\n      this._anchorDragOffset.y -= offset.y;\n      newAttrs.height += this.padding() * 2;\n\n      if (!allowNegativeScale) {\n        this.update();\n        return;\n      }\n    } else if (this._movingAnchorName && newAttrs.height < 0 && this._movingAnchorName.indexOf('bottom') >= 0) {\n      var offset = t.point({\n        x: 0,\n        y: this.padding() * 2\n      });\n      this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n      this._anchorDragOffset.x -= offset.x;\n      this._anchorDragOffset.y -= offset.y;\n      newAttrs.height += this.padding() * 2;\n\n      if (!allowNegativeScale) {\n        this.update();\n        return;\n      }\n    }\n\n    if (this.boundBoxFunc()) {\n      var bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n\n      if (bounded) {\n        newAttrs = bounded;\n      } else {\n        Util_1.Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n      }\n    }\n\n    var baseSize = 10000000;\n    var oldTr = new Util_1.Transform();\n    oldTr.translate(oldAttrs.x, oldAttrs.y);\n    oldTr.rotate(oldAttrs.rotation);\n    oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n    var newTr = new Util_1.Transform();\n    newTr.translate(newAttrs.x, newAttrs.y);\n    newTr.rotate(newAttrs.rotation);\n    newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n    var delta = newTr.multiply(oldTr.invert());\n\n    this._nodes.forEach(function (node) {\n      var _a;\n\n      var parentTransform = node.getParent().getAbsoluteTransform();\n      var localTransform = node.getTransform().copy();\n      localTransform.translate(node.offsetX(), node.offsetY());\n      var newLocalTransform = new Util_1.Transform();\n      newLocalTransform.multiply(parentTransform.copy().invert()).multiply(delta).multiply(parentTransform).multiply(localTransform);\n      var attrs = newLocalTransform.decompose();\n      node.setAttrs(attrs);\n\n      _this._fire('transform', {\n        evt: evt,\n        target: node\n      });\n\n      node._fire('transform', {\n        evt: evt,\n        target: node\n      });\n\n      (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n    });\n\n    this.rotation(Util_1.Util._getRotation(newAttrs.rotation));\n\n    this._resetTransformCache();\n\n    this.update();\n    this.getLayer().batchDraw();\n  };\n\n  Transformer.prototype.forceUpdate = function () {\n    this._resetTransformCache();\n\n    this.update();\n  };\n\n  Transformer.prototype._batchChangeChild = function (selector, attrs) {\n    var anchor = this.findOne(selector);\n    anchor.setAttrs(attrs);\n  };\n\n  Transformer.prototype.update = function () {\n    var _this = this;\n\n    var _a;\n\n    var attrs = this._getNodeRect();\n\n    this.rotation(Util_1.Util._getRotation(attrs.rotation));\n    var width = attrs.width;\n    var height = attrs.height;\n    var enabledAnchors = this.enabledAnchors();\n    var resizeEnabled = this.resizeEnabled();\n    var padding = this.padding();\n    var anchorSize = this.anchorSize();\n    this.find('._anchor').each(function (node) {\n      node.setAttrs({\n        width: anchorSize,\n        height: anchorSize,\n        offsetX: anchorSize / 2,\n        offsetY: anchorSize / 2,\n        stroke: _this.anchorStroke(),\n        strokeWidth: _this.anchorStrokeWidth(),\n        fill: _this.anchorFill(),\n        cornerRadius: _this.anchorCornerRadius()\n      });\n    });\n\n    this._batchChangeChild('.top-left', {\n      x: 0,\n      y: 0,\n      offsetX: anchorSize / 2 + padding,\n      offsetY: anchorSize / 2 + padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0\n    });\n\n    this._batchChangeChild('.top-center', {\n      x: width / 2,\n      y: 0,\n      offsetY: anchorSize / 2 + padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0\n    });\n\n    this._batchChangeChild('.top-right', {\n      x: width,\n      y: 0,\n      offsetX: anchorSize / 2 - padding,\n      offsetY: anchorSize / 2 + padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0\n    });\n\n    this._batchChangeChild('.middle-left', {\n      x: 0,\n      y: height / 2,\n      offsetX: anchorSize / 2 + padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0\n    });\n\n    this._batchChangeChild('.middle-right', {\n      x: width,\n      y: height / 2,\n      offsetX: anchorSize / 2 - padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0\n    });\n\n    this._batchChangeChild('.bottom-left', {\n      x: 0,\n      y: height,\n      offsetX: anchorSize / 2 + padding,\n      offsetY: anchorSize / 2 - padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0\n    });\n\n    this._batchChangeChild('.bottom-center', {\n      x: width / 2,\n      y: height,\n      offsetY: anchorSize / 2 - padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0\n    });\n\n    this._batchChangeChild('.bottom-right', {\n      x: width,\n      y: height,\n      offsetX: anchorSize / 2 - padding,\n      offsetY: anchorSize / 2 - padding,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0\n    });\n\n    this._batchChangeChild('.rotater', {\n      x: width / 2,\n      y: -this.rotateAnchorOffset() * Util_1.Util._sign(height) - padding,\n      visible: this.rotateEnabled()\n    });\n\n    this._batchChangeChild('.back', {\n      width: width,\n      height: height,\n      visible: this.borderEnabled(),\n      stroke: this.borderStroke(),\n      strokeWidth: this.borderStrokeWidth(),\n      dash: this.borderDash(),\n      x: 0,\n      y: 0\n    });\n\n    (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n  };\n\n  Transformer.prototype.isTransforming = function () {\n    return this._transforming;\n  };\n\n  Transformer.prototype.stopTransform = function () {\n    if (this._transforming) {\n      this._removeEvents();\n\n      var anchorNode = this.findOne('.' + this._movingAnchorName);\n\n      if (anchorNode) {\n        anchorNode.stopDrag();\n      }\n    }\n  };\n\n  Transformer.prototype.destroy = function () {\n    if (this.getStage() && this._cursorChange) {\n      this.getStage().content.style.cursor = '';\n    }\n\n    Group_1.Group.prototype.destroy.call(this);\n    this.detach();\n\n    this._removeEvents();\n\n    return this;\n  };\n\n  Transformer.prototype.toObject = function () {\n    return Node_1.Node.prototype.toObject.call(this);\n  };\n\n  return Transformer;\n}(Group_1.Group);\n\nexports.Transformer = Transformer;\n\nfunction validateAnchors(val) {\n  if (!(val instanceof Array)) {\n    Util_1.Util.warn('enabledAnchors value should be an array');\n  }\n\n  if (val instanceof Array) {\n    val.forEach(function (name) {\n      if (ANCHORS_NAMES.indexOf(name) === -1) {\n        Util_1.Util.warn('Unknown anchor name: ' + name + '. Available names are: ' + ANCHORS_NAMES.join(', '));\n      }\n    });\n  }\n\n  return val || [];\n}\n\nTransformer.prototype.className = 'Transformer';\n\nGlobal_2._registerNode(Transformer);\n\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'nodes');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory_1.Factory.backCompat(Transformer, {\n  lineEnabled: 'borderEnabled',\n  rotateHandlerOffset: 'rotateAnchorOffset',\n  enabledHandlers: 'enabledAnchors'\n});\nUtil_1.Collection.mapMethods(Transformer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Wedge = function (_super) {\n  __extends(Wedge, _super);\n\n  function Wedge() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Wedge.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n    context.lineTo(0, 0);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Wedge.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  Wedge.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return Wedge;\n}(Shape_1.Shape);\n\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_2._registerNode(Wedge);\n\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n  angleDeg: 'angle',\n  getAngleDeg: 'getAngle',\n  setAngleDeg: 'setAngle'\n});\nUtil_1.Collection.mapMethods(Wedge);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction BlurStack() {\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n}\n\nvar mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n\nfunction filterGaussBlurRGBA(imageData, radius) {\n  var pixels = imageData.data,\n      width = imageData.width,\n      height = imageData.height;\n  var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n  var div = radius + radius + 1,\n      widthMinus1 = width - 1,\n      heightMinus1 = height - 1,\n      radiusPlus1 = radius + 1,\n      sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2,\n      stackStart = new BlurStack(),\n      stackEnd = null,\n      stack = stackStart,\n      stackIn = null,\n      stackOut = null,\n      mul_sum = mul_table[radius],\n      shg_sum = shg_table[radius];\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  yw = yi = 0;\n\n  for (y = 0; y < height; y++) {\n    r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      r_in_sum += stackIn.r = pixels[p];\n      g_in_sum += stackIn.g = pixels[p + 1];\n      b_in_sum += stackIn.b = pixels[p + 2];\n      a_in_sum += stackIn.a = pixels[p + 3];\n      r_sum += r_in_sum;\n      g_sum += g_in_sum;\n      b_sum += b_in_sum;\n      a_sum += a_in_sum;\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n    yi = x << 2;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      r_sum += r_in_sum += stackIn.r = pixels[p];\n      g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n      b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n      a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n}\n\nexports.Blur = function Blur(imageData) {\n  var radius = Math.round(this.blurRadius());\n\n  if (radius > 0) {\n    filterGaussBlurRGBA(imageData, radius);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Brighten = function (imageData) {\n  var brightness = this.brightness() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] += brightness;\n    data[i + 1] += brightness;\n    data[i + 2] += brightness;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Contrast = function (imageData) {\n  var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n  var data = imageData.data,\n      nPixels = data.length,\n      red = 150,\n      green = 150,\n      blue = 150,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    red = data[i];\n    green = data[i + 1];\n    blue = data[i + 2];\n    red /= 255;\n    red -= 0.5;\n    red *= adjust;\n    red += 0.5;\n    red *= 255;\n    green /= 255;\n    green -= 0.5;\n    green *= adjust;\n    green += 0.5;\n    green *= 255;\n    blue /= 255;\n    blue -= 0.5;\n    blue *= adjust;\n    blue += 0.5;\n    blue *= 255;\n    red = red < 0 ? 0 : red > 255 ? 255 : red;\n    green = green < 0 ? 0 : green > 255 ? 255 : green;\n    blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n    data[i] = red;\n    data[i + 1] = green;\n    data[i + 2] = blue;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Emboss = function (imageData) {\n  var strength = this.embossStrength() * 10,\n      greyLevel = this.embossWhiteLevel() * 255,\n      direction = this.embossDirection(),\n      blend = this.embossBlend(),\n      dirY = 0,\n      dirX = 0,\n      data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  switch (direction) {\n    case 'top-left':\n      dirY = -1;\n      dirX = -1;\n      break;\n\n    case 'top':\n      dirY = -1;\n      dirX = 0;\n      break;\n\n    case 'top-right':\n      dirY = -1;\n      dirX = 1;\n      break;\n\n    case 'right':\n      dirY = 0;\n      dirX = 1;\n      break;\n\n    case 'bottom-right':\n      dirY = 1;\n      dirX = 1;\n      break;\n\n    case 'bottom':\n      dirY = 1;\n      dirX = 0;\n      break;\n\n    case 'bottom-left':\n      dirY = 1;\n      dirX = -1;\n      break;\n\n    case 'left':\n      dirY = 0;\n      dirX = -1;\n      break;\n\n    default:\n      Util_1.Util.error('Unknown emboss direction: ' + direction);\n  }\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var otherY = dirY;\n\n    if (y + otherY < 1) {\n      otherY = 0;\n    }\n\n    if (y + otherY > h) {\n      otherY = 0;\n    }\n\n    var offsetYOther = (y - 1 + otherY) * w * 4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var otherX = dirX;\n\n      if (x + otherX < 1) {\n        otherX = 0;\n      }\n\n      if (x + otherX > w) {\n        otherX = 0;\n      }\n\n      var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n      var dR = data[offset] - data[offsetOther];\n      var dG = data[offset + 1] - data[offsetOther + 1];\n      var dB = data[offset + 2] - data[offsetOther + 2];\n      var dif = dR;\n      var absDif = dif > 0 ? dif : -dif;\n      var absG = dG > 0 ? dG : -dG;\n      var absB = dB > 0 ? dB : -dB;\n\n      if (absG > absDif) {\n        dif = dG;\n      }\n\n      if (absB > absDif) {\n        dif = dB;\n      }\n\n      dif *= strength;\n\n      if (blend) {\n        var r = data[offset] + dif;\n        var g = data[offset + 1] + dif;\n        var b = data[offset + 2] + dif;\n        data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n        data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n        data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n      } else {\n        var grey = greyLevel - dif;\n\n        if (grey < 0) {\n          grey = 0;\n        } else if (grey > 255) {\n          grey = 255;\n        }\n\n        data[offset] = data[offset + 1] = data[offset + 2] = grey;\n      }\n    } while (--x);\n  } while (--y);\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n  var fromRange = fromMax - fromMin,\n      toRange = toMax - toMin,\n      toValue;\n\n  if (fromRange === 0) {\n    return toMin + toRange / 2;\n  }\n\n  if (toRange === 0) {\n    return toMin;\n  }\n\n  toValue = (fromValue - fromMin) / fromRange;\n  toValue = toRange * toValue + toMin;\n  return toValue;\n}\n\nexports.Enhance = function (imageData) {\n  var data = imageData.data,\n      nSubPixels = data.length,\n      rMin = data[0],\n      rMax = rMin,\n      r,\n      gMin = data[1],\n      gMax = gMin,\n      g,\n      bMin = data[2],\n      bMax = bMin,\n      b,\n      i;\n  var enhanceAmount = this.enhance();\n\n  if (enhanceAmount === 0) {\n    return;\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    r = data[i + 0];\n\n    if (r < rMin) {\n      rMin = r;\n    } else if (r > rMax) {\n      rMax = r;\n    }\n\n    g = data[i + 1];\n\n    if (g < gMin) {\n      gMin = g;\n    } else if (g > gMax) {\n      gMax = g;\n    }\n\n    b = data[i + 2];\n\n    if (b < bMin) {\n      bMin = b;\n    } else if (b > bMax) {\n      bMax = b;\n    }\n  }\n\n  if (rMax === rMin) {\n    rMax = 255;\n    rMin = 0;\n  }\n\n  if (gMax === gMin) {\n    gMax = 255;\n    gMin = 0;\n  }\n\n  if (bMax === bMin) {\n    bMax = 255;\n    bMin = 0;\n  }\n\n  var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n\n  if (enhanceAmount > 0) {\n    rGoalMax = rMax + enhanceAmount * (255 - rMax);\n    rGoalMin = rMin - enhanceAmount * (rMin - 0);\n    gGoalMax = gMax + enhanceAmount * (255 - gMax);\n    gGoalMin = gMin - enhanceAmount * (gMin - 0);\n    bGoalMax = bMax + enhanceAmount * (255 - bMax);\n    bGoalMin = bMin - enhanceAmount * (bMin - 0);\n  } else {\n    rMid = (rMax + rMin) * 0.5;\n    rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n    rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n    gMid = (gMax + gMin) * 0.5;\n    gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n    gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n    bMid = (bMax + bMin) * 0.5;\n    bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n    bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n    data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n    data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Grayscale = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i,\n      brightness;\n\n  for (i = 0; i < len; i += 4) {\n    brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n    data[i] = brightness;\n    data[i + 1] = brightness;\n    data[i + 2] = brightness;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n\nexports.HSL = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = 1,\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      l = this.luminance() * 127,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b + l;\n    data[i + 1] = gr * r + gg * g + gb * b + l;\n    data[i + 2] = br * r + bg * g + bb * b + l;\n    data[i + 3] = a;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.HSV = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = Math.pow(2, this.value()),\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b;\n    data[i + 1] = gr * r + gg * g + gb * b;\n    data[i + 2] = br * r + bg * g + bb * b;\n    data[i + 3] = a;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Invert = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] = 255 - data[i];\n    data[i + 1] = 255 - data[i + 1];\n    data[i + 2] = 255 - data[i + 2];\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar ToPolar = function (src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta;\n  var conversion = 360 / tSize * Math.PI / 180,\n      sin,\n      cos;\n\n  for (theta = 0; theta < tSize; theta += 1) {\n    sin = Math.sin(theta * conversion);\n    cos = Math.cos(theta * conversion);\n\n    for (radius = 0; radius < rSize; radius += 1) {\n      x = Math.floor(xMid + rMax * radius / rSize * cos);\n      y = Math.floor(yMid + rMax * radius / rSize * sin);\n      i = (y * xSize + x) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (theta + radius * xSize) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nvar FromPolar = function (src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      dx,\n      dy,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta,\n      phaseShift = opt.polarRotation || 0;\n  var x1, y1;\n\n  for (x = 0; x < xSize; x += 1) {\n    for (y = 0; y < ySize; y += 1) {\n      dx = x - xMid;\n      dy = y - yMid;\n      radius = Math.sqrt(dx * dx + dy * dy) * rSize / rMax;\n      theta = (Math.atan2(dy, dx) * 180 / Math.PI + 360 + phaseShift) % 360;\n      theta = theta * tSize / 360;\n      x1 = Math.floor(theta);\n      y1 = Math.floor(radius);\n      i = (y1 * xSize + x1) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (y * xSize + x) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nexports.Kaleidoscope = function (imageData) {\n  var xSize = imageData.width,\n      ySize = imageData.height;\n  var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n  var power = Math.round(this.kaleidoscopePower());\n  var angle = Math.round(this.kaleidoscopeAngle());\n  var offset = Math.floor(xSize * (angle % 360) / 360);\n\n  if (power < 1) {\n    return;\n  }\n\n  var tempCanvas = Util_1.Util.createCanvasElement();\n  tempCanvas.width = xSize;\n  tempCanvas.height = ySize;\n  var scratchData = tempCanvas.getContext('2d').getImageData(0, 0, xSize, ySize);\n  ToPolar(imageData, scratchData, {\n    polarCenterX: xSize / 2,\n    polarCenterY: ySize / 2\n  });\n  var minSectionSize = xSize / Math.pow(2, power);\n\n  while (minSectionSize <= 8) {\n    minSectionSize = minSectionSize * 2;\n    power -= 1;\n  }\n\n  minSectionSize = Math.ceil(minSectionSize);\n  var sectionSize = minSectionSize;\n  var xStart = 0,\n      xEnd = sectionSize,\n      xDelta = 1;\n\n  if (offset + minSectionSize > xSize) {\n    xStart = sectionSize;\n    xEnd = 0;\n    xDelta = -1;\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    for (x = xStart; x !== xEnd; x += xDelta) {\n      xoff = Math.round(x + offset) % xSize;\n      srcPos = (xSize * y + xoff) * 4;\n      r = scratchData.data[srcPos + 0];\n      g = scratchData.data[srcPos + 1];\n      b = scratchData.data[srcPos + 2];\n      a = scratchData.data[srcPos + 3];\n      dstPos = (xSize * y + x) * 4;\n      scratchData.data[dstPos + 0] = r;\n      scratchData.data[dstPos + 1] = g;\n      scratchData.data[dstPos + 2] = b;\n      scratchData.data[dstPos + 3] = a;\n    }\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    sectionSize = Math.floor(minSectionSize);\n\n    for (i = 0; i < power; i += 1) {\n      for (x = 0; x < sectionSize + 1; x += 1) {\n        srcPos = (xSize * y + x) * 4;\n        r = scratchData.data[srcPos + 0];\n        g = scratchData.data[srcPos + 1];\n        b = scratchData.data[srcPos + 2];\n        a = scratchData.data[srcPos + 3];\n        dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n        scratchData.data[dstPos + 0] = r;\n        scratchData.data[dstPos + 1] = g;\n        scratchData.data[dstPos + 2] = b;\n        scratchData.data[dstPos + 3] = a;\n      }\n\n      sectionSize *= 2;\n    }\n  }\n\n  FromPolar(scratchData, imageData, {\n    polarRotation: 0\n  });\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction pixelAt(idata, x, y) {\n  var idx = (y * idata.width + x) * 4;\n  var d = [];\n  d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n  return d;\n}\n\nfunction rgbDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\n}\n\nfunction rgbMean(pTab) {\n  var m = [0, 0, 0];\n\n  for (var i = 0; i < pTab.length; i++) {\n    m[0] += pTab[i][0];\n    m[1] += pTab[i][1];\n    m[2] += pTab[i][2];\n  }\n\n  m[0] /= pTab.length;\n  m[1] /= pTab.length;\n  m[2] /= pTab.length;\n  return m;\n}\n\nfunction backgroundMask(idata, threshold) {\n  var rgbv_no = pixelAt(idata, 0, 0);\n  var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n  var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n  var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n  var thres = threshold || 10;\n\n  if (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {\n    var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n    var mask = [];\n\n    for (var i = 0; i < idata.width * idata.height; i++) {\n      var d = rgbDistance(mean, [idata.data[i * 4], idata.data[i * 4 + 1], idata.data[i * 4 + 2]]);\n      mask[i] = d < thres ? 0 : 255;\n    }\n\n    return mask;\n  }\n}\n\nfunction applyMask(idata, mask) {\n  for (var i = 0; i < idata.width * idata.height; i++) {\n    idata.data[4 * i + 3] = mask[i];\n  }\n}\n\nfunction erodeMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a === 255 * 8 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction dilateMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a >= 255 * 4 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction smoothEdgeMask(mask, sw, sh) {\n  var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a;\n    }\n  }\n\n  return maskResult;\n}\n\nexports.Mask = function (imageData) {\n  var threshold = this.threshold(),\n      mask = backgroundMask(imageData, threshold);\n\n  if (mask) {\n    mask = erodeMask(mask, imageData.width, imageData.height);\n    mask = dilateMask(mask, imageData.width, imageData.height);\n    mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n    applyMask(imageData, mask);\n  }\n\n  return imageData;\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Noise = function (imageData) {\n  var amount = this.noise() * 255,\n      data = imageData.data,\n      nPixels = data.length,\n      half = amount / 2,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    data[i + 0] += half - 2 * half * Math.random();\n    data[i + 1] += half - 2 * half * Math.random();\n    data[i + 2] += half - 2 * half * Math.random();\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Pixelate = function (imageData) {\n  var pixelSize = Math.ceil(this.pixelSize()),\n      width = imageData.width,\n      height = imageData.height,\n      x,\n      y,\n      i,\n      red,\n      green,\n      blue,\n      alpha,\n      nBinsX = Math.ceil(width / pixelSize),\n      nBinsY = Math.ceil(height / pixelSize),\n      xBinStart,\n      xBinEnd,\n      yBinStart,\n      yBinEnd,\n      xBin,\n      yBin,\n      pixelsInBin,\n      data = imageData.data;\n\n  if (pixelSize <= 0) {\n    Util_1.Util.error('pixelSize value can not be <= 0');\n    return;\n  }\n\n  for (xBin = 0; xBin < nBinsX; xBin += 1) {\n    for (yBin = 0; yBin < nBinsY; yBin += 1) {\n      red = 0;\n      green = 0;\n      blue = 0;\n      alpha = 0;\n      xBinStart = xBin * pixelSize;\n      xBinEnd = xBinStart + pixelSize;\n      yBinStart = yBin * pixelSize;\n      yBinEnd = yBinStart + pixelSize;\n      pixelsInBin = 0;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          red += data[i + 0];\n          green += data[i + 1];\n          blue += data[i + 2];\n          alpha += data[i + 3];\n          pixelsInBin += 1;\n        }\n      }\n\n      red = red / pixelsInBin;\n      green = green / pixelsInBin;\n      blue = blue / pixelsInBin;\n      alpha = alpha / pixelsInBin;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          data[i + 0] = red;\n          data[i + 1] = green;\n          data[i + 2] = blue;\n          data[i + 3] = alpha;\n        }\n      }\n    }\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Posterize = function (imageData) {\n  var levels = Math.round(this.levels() * 254) + 1,\n      data = imageData.data,\n      len = data.length,\n      scale = 255 / levels,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = Math.floor(data[i] / scale) * scale;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGB = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      i,\n      brightness;\n\n  for (i = 0; i < nPixels; i += 4) {\n    brightness = (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n    data[i] = brightness * red;\n    data[i + 1] = brightness * green;\n    data[i + 2] = brightness * blue;\n    data[i + 3] = data[i + 3];\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGBA = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      alpha = this.alpha(),\n      i,\n      ia;\n\n  for (i = 0; i < nPixels; i += 4) {\n    ia = 1 - alpha;\n    data[i] = red * alpha + data[i] * ia;\n    data[i + 1] = green * alpha + data[i + 1] * ia;\n    data[i + 2] = blue * alpha + data[i + 2] * ia;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 1) {\n    return 1;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return val;\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Sepia = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      i,\n      r,\n      g,\n      b;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n    data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n    data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Solarize = function (imageData) {\n  var data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var r = data[offset];\n      var g = data[offset + 1];\n      var b = data[offset + 2];\n\n      if (r > 127) {\n        r = 255 - r;\n      }\n\n      if (g > 127) {\n        g = 255 - g;\n      }\n\n      if (b > 127) {\n        b = 255 - b;\n      }\n\n      data[offset] = r;\n      data[offset + 1] = g;\n      data[offset + 2] = b;\n    } while (--x);\n  } while (--y);\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Threshold = function (imageData) {\n  var level = this.threshold() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = data[i] < level ? 0 : 255;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","// Reserved word lists for various dialects of the language\n\nvar reservedWords = {\n  3: \"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",\n  5: \"class enum extends super const export import\",\n  6: \"enum\",\n  strict: \"implements interface let package private protected public static yield\",\n  strictBind: \"eval arguments\"\n};\n\n// And the keywords\n\nvar ecma5AndLessKeywords = \"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\";\n\nvar keywords = {\n  5: ecma5AndLessKeywords,\n  \"5module\": ecma5AndLessKeywords + \" export import\",\n  6: ecma5AndLessKeywords + \" const class extends export import super\"\n};\n\nvar keywordRelationalOperator = /^in(stanceof)?$/;\n\n// ## Character categories\n\n// Big ugly regular expressions that match characters in the\n// whitespace, identifier, and identifier-start categories. These\n// are only applied when a character is found to actually have a\n// code point above 128.\n// Generated by `bin/generate-identifier-regex.js`.\nvar nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u052f\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05d0-\\u05ea\\u05ef-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086a\\u08a0-\\u08b4\\u08b6-\\u08bd\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u09fc\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0af9\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d\\u0c58-\\u0c5a\\u0c60\\u0c61\\u0c80\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d54-\\u0d56\\u0d5f-\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e86-\\u0e8a\\u0e8c-\\u0ea3\\u0ea5\\u0ea7-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f5\\u13f8-\\u13fd\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f8\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1878\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19b0-\\u19c9\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1c80-\\u1c88\\u1c90-\\u1cba\\u1cbd-\\u1cbf\\u1ce9-\\u1cec\\u1cee-\\u1cf3\\u1cf5\\u1cf6\\u1cfa\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2118-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309b-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312f\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fef\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua69d\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua7bf\\ua7c2-\\ua7c6\\ua7f7-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua8fd\\ua8fe\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\ua9e0-\\ua9e4\\ua9e6-\\ua9ef\\ua9fa-\\ua9fe\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa7e-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab5a\\uab5c-\\uab67\\uab70-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\nvar nonASCIIidentifierChars = \"\\u200c\\u200d\\xb7\\u0300-\\u036f\\u0387\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u0669\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u06f0-\\u06f9\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07c0-\\u07c9\\u07eb-\\u07f3\\u07fd\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08d3-\\u08e1\\u08e3-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u09e6-\\u09ef\\u09fe\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0ae6-\\u0aef\\u0afa-\\u0aff\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c00-\\u0c04\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c66-\\u0c6f\\u0c81-\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0ce6-\\u0cef\\u0d00-\\u0d03\\u0d3b\\u0d3c\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0de6-\\u0def\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0e50-\\u0e59\\u0eb1\\u0eb4-\\u0ebc\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1040-\\u1049\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u1369-\\u1371\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b4-\\u17d3\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u194f\\u19d0-\\u19da\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1ab0-\\u1abd\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1bad\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1c40-\\u1c49\\u1c50-\\u1c59\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf4\\u1cf7-\\u1cf9\\u1dc0-\\u1df9\\u1dfb-\\u1dff\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua620-\\ua629\\ua66f\\ua674-\\ua67d\\ua69e\\ua69f\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c5\\ua8d0-\\ua8d9\\ua8e0-\\ua8f1\\ua8ff-\\ua909\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\ua9d0-\\ua9d9\\ua9e5\\ua9f0-\\ua9f9\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa50-\\uaa59\\uaa7b-\\uaa7d\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uaaeb-\\uaaef\\uaaf5\\uaaf6\\uabe3-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n\nvar nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\nvar nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\nnonASCIIidentifierStartChars = nonASCIIidentifierChars = null;\n\n// These are a run-length and offset encoded representation of the\n// >0xffff code points that are a valid part of identifiers. The\n// offset starts at 0x10000, and each pair of numbers represents an\n// offset to the next range, and then a size of the range. They were\n// generated by bin/generate-identifier-regex.js\n\n// eslint-disable-next-line comma-spacing\nvar astralIdentifierStartCodes = [0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541];\n\n// eslint-disable-next-line comma-spacing\nvar astralIdentifierCodes = [509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];\n\n// This has a complexity linear to the value of the code. The\n// assumption is that looking up astral identifier characters is\n// rare.\nfunction isInAstralSet(code, set) {\n  var pos = 0x10000;\n  for (var i = 0; i < set.length; i += 2) {\n    pos += set[i];\n    if (pos > code) { return false }\n    pos += set[i + 1];\n    if (pos >= code) { return true }\n  }\n}\n\n// Test whether a given character code starts an identifier.\n\nfunction isIdentifierStart(code, astral) {\n  if (code < 65) { return code === 36 }\n  if (code < 91) { return true }\n  if (code < 97) { return code === 95 }\n  if (code < 123) { return true }\n  if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code)) }\n  if (astral === false) { return false }\n  return isInAstralSet(code, astralIdentifierStartCodes)\n}\n\n// Test whether a given character is part of an identifier.\n\nfunction isIdentifierChar(code, astral) {\n  if (code < 48) { return code === 36 }\n  if (code < 58) { return true }\n  if (code < 65) { return false }\n  if (code < 91) { return true }\n  if (code < 97) { return code === 95 }\n  if (code < 123) { return true }\n  if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code)) }\n  if (astral === false) { return false }\n  return isInAstralSet(code, astralIdentifierStartCodes) || isInAstralSet(code, astralIdentifierCodes)\n}\n\n// ## Token types\n\n// The assignment of fine-grained, information-carrying type objects\n// allows the tokenizer to store the information it has about a\n// token in a way that is very cheap for the parser to look up.\n\n// All token type variables start with an underscore, to make them\n// easy to recognize.\n\n// The `beforeExpr` property is used to disambiguate between regular\n// expressions and divisions. It is set on all token types that can\n// be followed by an expression (thus, a slash after them would be a\n// regular expression).\n//\n// The `startsExpr` property is used to check if the token ends a\n// `yield` expression. It is set on all token types that either can\n// directly start an expression (like a quotation mark) or can\n// continue an expression (like the body of a string).\n//\n// `isLoop` marks a keyword as starting a loop, which is important\n// to know when parsing a label, in order to allow or disallow\n// continue jumps to that label.\n\nvar TokenType = function TokenType(label, conf) {\n  if ( conf === void 0 ) conf = {};\n\n  this.label = label;\n  this.keyword = conf.keyword;\n  this.beforeExpr = !!conf.beforeExpr;\n  this.startsExpr = !!conf.startsExpr;\n  this.isLoop = !!conf.isLoop;\n  this.isAssign = !!conf.isAssign;\n  this.prefix = !!conf.prefix;\n  this.postfix = !!conf.postfix;\n  this.binop = conf.binop || null;\n  this.updateContext = null;\n};\n\nfunction binop(name, prec) {\n  return new TokenType(name, {beforeExpr: true, binop: prec})\n}\nvar beforeExpr = {beforeExpr: true}, startsExpr = {startsExpr: true};\n\n// Map keyword names to token types.\n\nvar keywords$1 = {};\n\n// Succinct definitions of keyword token types\nfunction kw(name, options) {\n  if ( options === void 0 ) options = {};\n\n  options.keyword = name;\n  return keywords$1[name] = new TokenType(name, options)\n}\n\nvar types = {\n  num: new TokenType(\"num\", startsExpr),\n  regexp: new TokenType(\"regexp\", startsExpr),\n  string: new TokenType(\"string\", startsExpr),\n  name: new TokenType(\"name\", startsExpr),\n  eof: new TokenType(\"eof\"),\n\n  // Punctuation token types.\n  bracketL: new TokenType(\"[\", {beforeExpr: true, startsExpr: true}),\n  bracketR: new TokenType(\"]\"),\n  braceL: new TokenType(\"{\", {beforeExpr: true, startsExpr: true}),\n  braceR: new TokenType(\"}\"),\n  parenL: new TokenType(\"(\", {beforeExpr: true, startsExpr: true}),\n  parenR: new TokenType(\")\"),\n  comma: new TokenType(\",\", beforeExpr),\n  semi: new TokenType(\";\", beforeExpr),\n  colon: new TokenType(\":\", beforeExpr),\n  dot: new TokenType(\".\"),\n  question: new TokenType(\"?\", beforeExpr),\n  arrow: new TokenType(\"=>\", beforeExpr),\n  template: new TokenType(\"template\"),\n  invalidTemplate: new TokenType(\"invalidTemplate\"),\n  ellipsis: new TokenType(\"...\", beforeExpr),\n  backQuote: new TokenType(\"`\", startsExpr),\n  dollarBraceL: new TokenType(\"${\", {beforeExpr: true, startsExpr: true}),\n\n  // Operators. These carry several kinds of properties to help the\n  // parser use them properly (the presence of these properties is\n  // what categorizes them as operators).\n  //\n  // `binop`, when present, specifies that this operator is a binary\n  // operator, and will refer to its precedence.\n  //\n  // `prefix` and `postfix` mark the operator as a prefix or postfix\n  // unary operator.\n  //\n  // `isAssign` marks all of `=`, `+=`, `-=` etcetera, which act as\n  // binary operators with a very low precedence, that should result\n  // in AssignmentExpression nodes.\n\n  eq: new TokenType(\"=\", {beforeExpr: true, isAssign: true}),\n  assign: new TokenType(\"_=\", {beforeExpr: true, isAssign: true}),\n  incDec: new TokenType(\"++/--\", {prefix: true, postfix: true, startsExpr: true}),\n  prefix: new TokenType(\"!/~\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  logicalOR: binop(\"||\", 1),\n  logicalAND: binop(\"&&\", 2),\n  bitwiseOR: binop(\"|\", 3),\n  bitwiseXOR: binop(\"^\", 4),\n  bitwiseAND: binop(\"&\", 5),\n  equality: binop(\"==/!=/===/!==\", 6),\n  relational: binop(\"</>/<=/>=\", 7),\n  bitShift: binop(\"<</>>/>>>\", 8),\n  plusMin: new TokenType(\"+/-\", {beforeExpr: true, binop: 9, prefix: true, startsExpr: true}),\n  modulo: binop(\"%\", 10),\n  star: binop(\"*\", 10),\n  slash: binop(\"/\", 10),\n  starstar: new TokenType(\"**\", {beforeExpr: true}),\n\n  // Keyword token types.\n  _break: kw(\"break\"),\n  _case: kw(\"case\", beforeExpr),\n  _catch: kw(\"catch\"),\n  _continue: kw(\"continue\"),\n  _debugger: kw(\"debugger\"),\n  _default: kw(\"default\", beforeExpr),\n  _do: kw(\"do\", {isLoop: true, beforeExpr: true}),\n  _else: kw(\"else\", beforeExpr),\n  _finally: kw(\"finally\"),\n  _for: kw(\"for\", {isLoop: true}),\n  _function: kw(\"function\", startsExpr),\n  _if: kw(\"if\"),\n  _return: kw(\"return\", beforeExpr),\n  _switch: kw(\"switch\"),\n  _throw: kw(\"throw\", beforeExpr),\n  _try: kw(\"try\"),\n  _var: kw(\"var\"),\n  _const: kw(\"const\"),\n  _while: kw(\"while\", {isLoop: true}),\n  _with: kw(\"with\"),\n  _new: kw(\"new\", {beforeExpr: true, startsExpr: true}),\n  _this: kw(\"this\", startsExpr),\n  _super: kw(\"super\", startsExpr),\n  _class: kw(\"class\", startsExpr),\n  _extends: kw(\"extends\", beforeExpr),\n  _export: kw(\"export\"),\n  _import: kw(\"import\", startsExpr),\n  _null: kw(\"null\", startsExpr),\n  _true: kw(\"true\", startsExpr),\n  _false: kw(\"false\", startsExpr),\n  _in: kw(\"in\", {beforeExpr: true, binop: 7}),\n  _instanceof: kw(\"instanceof\", {beforeExpr: true, binop: 7}),\n  _typeof: kw(\"typeof\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  _void: kw(\"void\", {beforeExpr: true, prefix: true, startsExpr: true}),\n  _delete: kw(\"delete\", {beforeExpr: true, prefix: true, startsExpr: true})\n};\n\n// Matches a whole line break (where CRLF is considered a single\n// line break). Used to count lines.\n\nvar lineBreak = /\\r\\n?|\\n|\\u2028|\\u2029/;\nvar lineBreakG = new RegExp(lineBreak.source, \"g\");\n\nfunction isNewLine(code, ecma2019String) {\n  return code === 10 || code === 13 || (!ecma2019String && (code === 0x2028 || code === 0x2029))\n}\n\nvar nonASCIIwhitespace = /[\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n\nvar skipWhiteSpace = /(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g;\n\nvar ref = Object.prototype;\nvar hasOwnProperty = ref.hasOwnProperty;\nvar toString = ref.toString;\n\n// Checks if an object has a property.\n\nfunction has(obj, propName) {\n  return hasOwnProperty.call(obj, propName)\n}\n\nvar isArray = Array.isArray || (function (obj) { return (\n  toString.call(obj) === \"[object Array]\"\n); });\n\nfunction wordsRegexp(words) {\n  return new RegExp(\"^(?:\" + words.replace(/ /g, \"|\") + \")$\")\n}\n\n// These are used when `options.locations` is on, for the\n// `startLoc` and `endLoc` properties.\n\nvar Position = function Position(line, col) {\n  this.line = line;\n  this.column = col;\n};\n\nPosition.prototype.offset = function offset (n) {\n  return new Position(this.line, this.column + n)\n};\n\nvar SourceLocation = function SourceLocation(p, start, end) {\n  this.start = start;\n  this.end = end;\n  if (p.sourceFile !== null) { this.source = p.sourceFile; }\n};\n\n// The `getLineInfo` function is mostly useful when the\n// `locations` option is off (for performance reasons) and you\n// want to find the line/column position for a given character\n// offset. `input` should be the code string that the offset refers\n// into.\n\nfunction getLineInfo(input, offset) {\n  for (var line = 1, cur = 0;;) {\n    lineBreakG.lastIndex = cur;\n    var match = lineBreakG.exec(input);\n    if (match && match.index < offset) {\n      ++line;\n      cur = match.index + match[0].length;\n    } else {\n      return new Position(line, offset - cur)\n    }\n  }\n}\n\n// A second optional argument can be given to further configure\n// the parser process. These options are recognized:\n\nvar defaultOptions = {\n  // `ecmaVersion` indicates the ECMAScript version to parse. Must be\n  // either 3, 5, 6 (2015), 7 (2016), 8 (2017), 9 (2018), or 10\n  // (2019). This influences support for strict mode, the set of\n  // reserved words, and support for new syntax features. The default\n  // is 9.\n  ecmaVersion: 9,\n  // `sourceType` indicates the mode the code should be parsed in.\n  // Can be either `\"script\"` or `\"module\"`. This influences global\n  // strict mode and parsing of `import` and `export` declarations.\n  sourceType: \"script\",\n  // `onInsertedSemicolon` can be a callback that will be called\n  // when a semicolon is automatically inserted. It will be passed\n  // the position of the comma as an offset, and if `locations` is\n  // enabled, it is given the location as a `{line, column}` object\n  // as second argument.\n  onInsertedSemicolon: null,\n  // `onTrailingComma` is similar to `onInsertedSemicolon`, but for\n  // trailing commas.\n  onTrailingComma: null,\n  // By default, reserved words are only enforced if ecmaVersion >= 5.\n  // Set `allowReserved` to a boolean value to explicitly turn this on\n  // an off. When this option has the value \"never\", reserved words\n  // and keywords can also not be used as property names.\n  allowReserved: null,\n  // When enabled, a return at the top level is not considered an\n  // error.\n  allowReturnOutsideFunction: false,\n  // When enabled, import/export statements are not constrained to\n  // appearing at the top of the program.\n  allowImportExportEverywhere: false,\n  // When enabled, await identifiers are allowed to appear at the top-level scope,\n  // but they are still not allowed in non-async functions.\n  allowAwaitOutsideFunction: false,\n  // When enabled, hashbang directive in the beginning of file\n  // is allowed and treated as a line comment.\n  allowHashBang: false,\n  // When `locations` is on, `loc` properties holding objects with\n  // `start` and `end` properties in `{line, column}` form (with\n  // line being 1-based and column 0-based) will be attached to the\n  // nodes.\n  locations: false,\n  // A function can be passed as `onToken` option, which will\n  // cause Acorn to call that function with object in the same\n  // format as tokens returned from `tokenizer().getToken()`. Note\n  // that you are not allowed to call the parser from the\n  // callback—that will corrupt its internal state.\n  onToken: null,\n  // A function can be passed as `onComment` option, which will\n  // cause Acorn to call that function with `(block, text, start,\n  // end)` parameters whenever a comment is skipped. `block` is a\n  // boolean indicating whether this is a block (`/* */`) comment,\n  // `text` is the content of the comment, and `start` and `end` are\n  // character offsets that denote the start and end of the comment.\n  // When the `locations` option is on, two more parameters are\n  // passed, the full `{line, column}` locations of the start and\n  // end of the comments. Note that you are not allowed to call the\n  // parser from the callback—that will corrupt its internal state.\n  onComment: null,\n  // Nodes have their start and end characters offsets recorded in\n  // `start` and `end` properties (directly on the node, rather than\n  // the `loc` object, which holds line/column data. To also add a\n  // [semi-standardized][range] `range` property holding a `[start,\n  // end]` array with the same numbers, set the `ranges` option to\n  // `true`.\n  //\n  // [range]: https://bugzilla.mozilla.org/show_bug.cgi?id=745678\n  ranges: false,\n  // It is possible to parse multiple files into a single AST by\n  // passing the tree produced by parsing the first file as\n  // `program` option in subsequent parses. This will add the\n  // toplevel forms of the parsed file to the `Program` (top) node\n  // of an existing parse tree.\n  program: null,\n  // When `locations` is on, you can pass this to record the source\n  // file in every node's `loc` object.\n  sourceFile: null,\n  // This value, if given, is stored in every node, whether\n  // `locations` is on or off.\n  directSourceFile: null,\n  // When enabled, parenthesized expressions are represented by\n  // (non-standard) ParenthesizedExpression nodes\n  preserveParens: false\n};\n\n// Interpret and default an options object\n\nfunction getOptions(opts) {\n  var options = {};\n\n  for (var opt in defaultOptions)\n    { options[opt] = opts && has(opts, opt) ? opts[opt] : defaultOptions[opt]; }\n\n  if (options.ecmaVersion >= 2015)\n    { options.ecmaVersion -= 2009; }\n\n  if (options.allowReserved == null)\n    { options.allowReserved = options.ecmaVersion < 5; }\n\n  if (isArray(options.onToken)) {\n    var tokens = options.onToken;\n    options.onToken = function (token) { return tokens.push(token); };\n  }\n  if (isArray(options.onComment))\n    { options.onComment = pushComment(options, options.onComment); }\n\n  return options\n}\n\nfunction pushComment(options, array) {\n  return function(block, text, start, end, startLoc, endLoc) {\n    var comment = {\n      type: block ? \"Block\" : \"Line\",\n      value: text,\n      start: start,\n      end: end\n    };\n    if (options.locations)\n      { comment.loc = new SourceLocation(this, startLoc, endLoc); }\n    if (options.ranges)\n      { comment.range = [start, end]; }\n    array.push(comment);\n  }\n}\n\n// Each scope gets a bitset that may contain these flags\nvar\n    SCOPE_TOP = 1,\n    SCOPE_FUNCTION = 2,\n    SCOPE_VAR = SCOPE_TOP | SCOPE_FUNCTION,\n    SCOPE_ASYNC = 4,\n    SCOPE_GENERATOR = 8,\n    SCOPE_ARROW = 16,\n    SCOPE_SIMPLE_CATCH = 32,\n    SCOPE_SUPER = 64,\n    SCOPE_DIRECT_SUPER = 128;\n\nfunction functionFlags(async, generator) {\n  return SCOPE_FUNCTION | (async ? SCOPE_ASYNC : 0) | (generator ? SCOPE_GENERATOR : 0)\n}\n\n// Used in checkLVal and declareName to determine the type of a binding\nvar\n    BIND_NONE = 0, // Not a binding\n    BIND_VAR = 1, // Var-style binding\n    BIND_LEXICAL = 2, // Let- or const-style binding\n    BIND_FUNCTION = 3, // Function declaration\n    BIND_SIMPLE_CATCH = 4, // Simple (identifier pattern) catch binding\n    BIND_OUTSIDE = 5; // Special case for function names as bound inside the function\n\nvar Parser = function Parser(options, input, startPos) {\n  this.options = options = getOptions(options);\n  this.sourceFile = options.sourceFile;\n  this.keywords = wordsRegexp(keywords[options.ecmaVersion >= 6 ? 6 : options.sourceType === \"module\" ? \"5module\" : 5]);\n  var reserved = \"\";\n  if (options.allowReserved !== true) {\n    for (var v = options.ecmaVersion;; v--)\n      { if (reserved = reservedWords[v]) { break } }\n    if (options.sourceType === \"module\") { reserved += \" await\"; }\n  }\n  this.reservedWords = wordsRegexp(reserved);\n  var reservedStrict = (reserved ? reserved + \" \" : \"\") + reservedWords.strict;\n  this.reservedWordsStrict = wordsRegexp(reservedStrict);\n  this.reservedWordsStrictBind = wordsRegexp(reservedStrict + \" \" + reservedWords.strictBind);\n  this.input = String(input);\n\n  // Used to signal to callers of `readWord1` whether the word\n  // contained any escape sequences. This is needed because words with\n  // escape sequences must not be interpreted as keywords.\n  this.containsEsc = false;\n\n  // Set up token state\n\n  // The current position of the tokenizer in the input.\n  if (startPos) {\n    this.pos = startPos;\n    this.lineStart = this.input.lastIndexOf(\"\\n\", startPos - 1) + 1;\n    this.curLine = this.input.slice(0, this.lineStart).split(lineBreak).length;\n  } else {\n    this.pos = this.lineStart = 0;\n    this.curLine = 1;\n  }\n\n  // Properties of the current token:\n  // Its type\n  this.type = types.eof;\n  // For tokens that include more information than their type, the value\n  this.value = null;\n  // Its start and end offset\n  this.start = this.end = this.pos;\n  // And, if locations are used, the {line, column} object\n  // corresponding to those offsets\n  this.startLoc = this.endLoc = this.curPosition();\n\n  // Position information for the previous token\n  this.lastTokEndLoc = this.lastTokStartLoc = null;\n  this.lastTokStart = this.lastTokEnd = this.pos;\n\n  // The context stack is used to superficially track syntactic\n  // context to predict whether a regular expression is allowed in a\n  // given position.\n  this.context = this.initialContext();\n  this.exprAllowed = true;\n\n  // Figure out if it's a module code.\n  this.inModule = options.sourceType === \"module\";\n  this.strict = this.inModule || this.strictDirective(this.pos);\n\n  // Used to signify the start of a potential arrow function\n  this.potentialArrowAt = -1;\n\n  // Positions to delayed-check that yield/await does not exist in default parameters.\n  this.yieldPos = this.awaitPos = this.awaitIdentPos = 0;\n  // Labels in scope.\n  this.labels = [];\n  // Thus-far undefined exports.\n  this.undefinedExports = {};\n\n  // If enabled, skip leading hashbang line.\n  if (this.pos === 0 && options.allowHashBang && this.input.slice(0, 2) === \"#!\")\n    { this.skipLineComment(2); }\n\n  // Scope tracking for duplicate variable names (see scope.js)\n  this.scopeStack = [];\n  this.enterScope(SCOPE_TOP);\n\n  // For RegExp validation\n  this.regexpState = null;\n};\n\nvar prototypeAccessors = { inFunction: { configurable: true },inGenerator: { configurable: true },inAsync: { configurable: true },allowSuper: { configurable: true },allowDirectSuper: { configurable: true },treatFunctionsAsVar: { configurable: true } };\n\nParser.prototype.parse = function parse () {\n  var node = this.options.program || this.startNode();\n  this.nextToken();\n  return this.parseTopLevel(node)\n};\n\nprototypeAccessors.inFunction.get = function () { return (this.currentVarScope().flags & SCOPE_FUNCTION) > 0 };\nprototypeAccessors.inGenerator.get = function () { return (this.currentVarScope().flags & SCOPE_GENERATOR) > 0 };\nprototypeAccessors.inAsync.get = function () { return (this.currentVarScope().flags & SCOPE_ASYNC) > 0 };\nprototypeAccessors.allowSuper.get = function () { return (this.currentThisScope().flags & SCOPE_SUPER) > 0 };\nprototypeAccessors.allowDirectSuper.get = function () { return (this.currentThisScope().flags & SCOPE_DIRECT_SUPER) > 0 };\nprototypeAccessors.treatFunctionsAsVar.get = function () { return this.treatFunctionsAsVarInScope(this.currentScope()) };\n\n// Switch to a getter for 7.0.0.\nParser.prototype.inNonArrowFunction = function inNonArrowFunction () { return (this.currentThisScope().flags & SCOPE_FUNCTION) > 0 };\n\nParser.extend = function extend () {\n    var plugins = [], len = arguments.length;\n    while ( len-- ) plugins[ len ] = arguments[ len ];\n\n  var cls = this;\n  for (var i = 0; i < plugins.length; i++) { cls = plugins[i](cls); }\n  return cls\n};\n\nParser.parse = function parse (input, options) {\n  return new this(options, input).parse()\n};\n\nParser.parseExpressionAt = function parseExpressionAt (input, pos, options) {\n  var parser = new this(options, input, pos);\n  parser.nextToken();\n  return parser.parseExpression()\n};\n\nParser.tokenizer = function tokenizer (input, options) {\n  return new this(options, input)\n};\n\nObject.defineProperties( Parser.prototype, prototypeAccessors );\n\nvar pp = Parser.prototype;\n\n// ## Parser utilities\n\nvar literal = /^(?:'((?:\\\\.|[^'\\\\])*?)'|\"((?:\\\\.|[^\"\\\\])*?)\")/;\npp.strictDirective = function(start) {\n  for (;;) {\n    // Try to find string literal.\n    skipWhiteSpace.lastIndex = start;\n    start += skipWhiteSpace.exec(this.input)[0].length;\n    var match = literal.exec(this.input.slice(start));\n    if (!match) { return false }\n    if ((match[1] || match[2]) === \"use strict\") { return true }\n    start += match[0].length;\n\n    // Skip semicolon, if any.\n    skipWhiteSpace.lastIndex = start;\n    start += skipWhiteSpace.exec(this.input)[0].length;\n    if (this.input[start] === \";\")\n      { start++; }\n  }\n};\n\n// Predicate that tests whether the next token is of the given\n// type, and if yes, consumes it as a side effect.\n\npp.eat = function(type) {\n  if (this.type === type) {\n    this.next();\n    return true\n  } else {\n    return false\n  }\n};\n\n// Tests whether parsed token is a contextual keyword.\n\npp.isContextual = function(name) {\n  return this.type === types.name && this.value === name && !this.containsEsc\n};\n\n// Consumes contextual keyword if possible.\n\npp.eatContextual = function(name) {\n  if (!this.isContextual(name)) { return false }\n  this.next();\n  return true\n};\n\n// Asserts that following token is given contextual keyword.\n\npp.expectContextual = function(name) {\n  if (!this.eatContextual(name)) { this.unexpected(); }\n};\n\n// Test whether a semicolon can be inserted at the current position.\n\npp.canInsertSemicolon = function() {\n  return this.type === types.eof ||\n    this.type === types.braceR ||\n    lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n};\n\npp.insertSemicolon = function() {\n  if (this.canInsertSemicolon()) {\n    if (this.options.onInsertedSemicolon)\n      { this.options.onInsertedSemicolon(this.lastTokEnd, this.lastTokEndLoc); }\n    return true\n  }\n};\n\n// Consume a semicolon, or, failing that, see if we are allowed to\n// pretend that there is a semicolon at this position.\n\npp.semicolon = function() {\n  if (!this.eat(types.semi) && !this.insertSemicolon()) { this.unexpected(); }\n};\n\npp.afterTrailingComma = function(tokType, notNext) {\n  if (this.type === tokType) {\n    if (this.options.onTrailingComma)\n      { this.options.onTrailingComma(this.lastTokStart, this.lastTokStartLoc); }\n    if (!notNext)\n      { this.next(); }\n    return true\n  }\n};\n\n// Expect a token of a given type. If found, consume it, otherwise,\n// raise an unexpected token error.\n\npp.expect = function(type) {\n  this.eat(type) || this.unexpected();\n};\n\n// Raise an unexpected token error.\n\npp.unexpected = function(pos) {\n  this.raise(pos != null ? pos : this.start, \"Unexpected token\");\n};\n\nfunction DestructuringErrors() {\n  this.shorthandAssign =\n  this.trailingComma =\n  this.parenthesizedAssign =\n  this.parenthesizedBind =\n  this.doubleProto =\n    -1;\n}\n\npp.checkPatternErrors = function(refDestructuringErrors, isAssign) {\n  if (!refDestructuringErrors) { return }\n  if (refDestructuringErrors.trailingComma > -1)\n    { this.raiseRecoverable(refDestructuringErrors.trailingComma, \"Comma is not permitted after the rest element\"); }\n  var parens = isAssign ? refDestructuringErrors.parenthesizedAssign : refDestructuringErrors.parenthesizedBind;\n  if (parens > -1) { this.raiseRecoverable(parens, \"Parenthesized pattern\"); }\n};\n\npp.checkExpressionErrors = function(refDestructuringErrors, andThrow) {\n  if (!refDestructuringErrors) { return false }\n  var shorthandAssign = refDestructuringErrors.shorthandAssign;\n  var doubleProto = refDestructuringErrors.doubleProto;\n  if (!andThrow) { return shorthandAssign >= 0 || doubleProto >= 0 }\n  if (shorthandAssign >= 0)\n    { this.raise(shorthandAssign, \"Shorthand property assignments are valid only in destructuring patterns\"); }\n  if (doubleProto >= 0)\n    { this.raiseRecoverable(doubleProto, \"Redefinition of __proto__ property\"); }\n};\n\npp.checkYieldAwaitInDefaultParams = function() {\n  if (this.yieldPos && (!this.awaitPos || this.yieldPos < this.awaitPos))\n    { this.raise(this.yieldPos, \"Yield expression cannot be a default value\"); }\n  if (this.awaitPos)\n    { this.raise(this.awaitPos, \"Await expression cannot be a default value\"); }\n};\n\npp.isSimpleAssignTarget = function(expr) {\n  if (expr.type === \"ParenthesizedExpression\")\n    { return this.isSimpleAssignTarget(expr.expression) }\n  return expr.type === \"Identifier\" || expr.type === \"MemberExpression\"\n};\n\nvar pp$1 = Parser.prototype;\n\n// ### Statement parsing\n\n// Parse a program. Initializes the parser, reads any number of\n// statements, and wraps them in a Program node.  Optionally takes a\n// `program` argument.  If present, the statements will be appended\n// to its body instead of creating a new node.\n\npp$1.parseTopLevel = function(node) {\n  var exports = {};\n  if (!node.body) { node.body = []; }\n  while (this.type !== types.eof) {\n    var stmt = this.parseStatement(null, true, exports);\n    node.body.push(stmt);\n  }\n  if (this.inModule)\n    { for (var i = 0, list = Object.keys(this.undefinedExports); i < list.length; i += 1)\n      {\n        var name = list[i];\n\n        this.raiseRecoverable(this.undefinedExports[name].start, (\"Export '\" + name + \"' is not defined\"));\n      } }\n  this.adaptDirectivePrologue(node.body);\n  this.next();\n  node.sourceType = this.options.sourceType;\n  return this.finishNode(node, \"Program\")\n};\n\nvar loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\npp$1.isLet = function(context) {\n  if (this.options.ecmaVersion < 6 || !this.isContextual(\"let\")) { return false }\n  skipWhiteSpace.lastIndex = this.pos;\n  var skip = skipWhiteSpace.exec(this.input);\n  var next = this.pos + skip[0].length, nextCh = this.input.charCodeAt(next);\n  // For ambiguous cases, determine if a LexicalDeclaration (or only a\n  // Statement) is allowed here. If context is not empty then only a Statement\n  // is allowed. However, `let [` is an explicit negative lookahead for\n  // ExpressionStatement, so special-case it first.\n  if (nextCh === 91) { return true } // '['\n  if (context) { return false }\n\n  if (nextCh === 123) { return true } // '{'\n  if (isIdentifierStart(nextCh, true)) {\n    var pos = next + 1;\n    while (isIdentifierChar(this.input.charCodeAt(pos), true)) { ++pos; }\n    var ident = this.input.slice(next, pos);\n    if (!keywordRelationalOperator.test(ident)) { return true }\n  }\n  return false\n};\n\n// check 'async [no LineTerminator here] function'\n// - 'async /*foo*/ function' is OK.\n// - 'async /*\\n*/ function' is invalid.\npp$1.isAsyncFunction = function() {\n  if (this.options.ecmaVersion < 8 || !this.isContextual(\"async\"))\n    { return false }\n\n  skipWhiteSpace.lastIndex = this.pos;\n  var skip = skipWhiteSpace.exec(this.input);\n  var next = this.pos + skip[0].length;\n  return !lineBreak.test(this.input.slice(this.pos, next)) &&\n    this.input.slice(next, next + 8) === \"function\" &&\n    (next + 8 === this.input.length || !isIdentifierChar(this.input.charAt(next + 8)))\n};\n\n// Parse a single statement.\n//\n// If expecting a statement and finding a slash operator, parse a\n// regular expression literal. This is to handle cases like\n// `if (foo) /blah/.exec(foo)`, where looking at the previous token\n// does not help.\n\npp$1.parseStatement = function(context, topLevel, exports) {\n  var starttype = this.type, node = this.startNode(), kind;\n\n  if (this.isLet(context)) {\n    starttype = types._var;\n    kind = \"let\";\n  }\n\n  // Most types of statements are recognized by the keyword they\n  // start with. Many are trivial to parse, some require a bit of\n  // complexity.\n\n  switch (starttype) {\n  case types._break: case types._continue: return this.parseBreakContinueStatement(node, starttype.keyword)\n  case types._debugger: return this.parseDebuggerStatement(node)\n  case types._do: return this.parseDoStatement(node)\n  case types._for: return this.parseForStatement(node)\n  case types._function:\n    // Function as sole body of either an if statement or a labeled statement\n    // works, but not when it is part of a labeled statement that is the sole\n    // body of an if statement.\n    if ((context && (this.strict || context !== \"if\" && context !== \"label\")) && this.options.ecmaVersion >= 6) { this.unexpected(); }\n    return this.parseFunctionStatement(node, false, !context)\n  case types._class:\n    if (context) { this.unexpected(); }\n    return this.parseClass(node, true)\n  case types._if: return this.parseIfStatement(node)\n  case types._return: return this.parseReturnStatement(node)\n  case types._switch: return this.parseSwitchStatement(node)\n  case types._throw: return this.parseThrowStatement(node)\n  case types._try: return this.parseTryStatement(node)\n  case types._const: case types._var:\n    kind = kind || this.value;\n    if (context && kind !== \"var\") { this.unexpected(); }\n    return this.parseVarStatement(node, kind)\n  case types._while: return this.parseWhileStatement(node)\n  case types._with: return this.parseWithStatement(node)\n  case types.braceL: return this.parseBlock(true, node)\n  case types.semi: return this.parseEmptyStatement(node)\n  case types._export:\n  case types._import:\n    if (this.options.ecmaVersion > 10 && starttype === types._import) {\n      skipWhiteSpace.lastIndex = this.pos;\n      var skip = skipWhiteSpace.exec(this.input);\n      var next = this.pos + skip[0].length, nextCh = this.input.charCodeAt(next);\n      if (nextCh === 40) // '('\n        { return this.parseExpressionStatement(node, this.parseExpression()) }\n    }\n\n    if (!this.options.allowImportExportEverywhere) {\n      if (!topLevel)\n        { this.raise(this.start, \"'import' and 'export' may only appear at the top level\"); }\n      if (!this.inModule)\n        { this.raise(this.start, \"'import' and 'export' may appear only with 'sourceType: module'\"); }\n    }\n    return starttype === types._import ? this.parseImport(node) : this.parseExport(node, exports)\n\n    // If the statement does not start with a statement keyword or a\n    // brace, it's an ExpressionStatement or LabeledStatement. We\n    // simply start parsing an expression, and afterwards, if the\n    // next token is a colon and the expression was a simple\n    // Identifier node, we switch to interpreting it as a label.\n  default:\n    if (this.isAsyncFunction()) {\n      if (context) { this.unexpected(); }\n      this.next();\n      return this.parseFunctionStatement(node, true, !context)\n    }\n\n    var maybeName = this.value, expr = this.parseExpression();\n    if (starttype === types.name && expr.type === \"Identifier\" && this.eat(types.colon))\n      { return this.parseLabeledStatement(node, maybeName, expr, context) }\n    else { return this.parseExpressionStatement(node, expr) }\n  }\n};\n\npp$1.parseBreakContinueStatement = function(node, keyword) {\n  var isBreak = keyword === \"break\";\n  this.next();\n  if (this.eat(types.semi) || this.insertSemicolon()) { node.label = null; }\n  else if (this.type !== types.name) { this.unexpected(); }\n  else {\n    node.label = this.parseIdent();\n    this.semicolon();\n  }\n\n  // Verify that there is an actual destination to break or\n  // continue to.\n  var i = 0;\n  for (; i < this.labels.length; ++i) {\n    var lab = this.labels[i];\n    if (node.label == null || lab.name === node.label.name) {\n      if (lab.kind != null && (isBreak || lab.kind === \"loop\")) { break }\n      if (node.label && isBreak) { break }\n    }\n  }\n  if (i === this.labels.length) { this.raise(node.start, \"Unsyntactic \" + keyword); }\n  return this.finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\")\n};\n\npp$1.parseDebuggerStatement = function(node) {\n  this.next();\n  this.semicolon();\n  return this.finishNode(node, \"DebuggerStatement\")\n};\n\npp$1.parseDoStatement = function(node) {\n  this.next();\n  this.labels.push(loopLabel);\n  node.body = this.parseStatement(\"do\");\n  this.labels.pop();\n  this.expect(types._while);\n  node.test = this.parseParenExpression();\n  if (this.options.ecmaVersion >= 6)\n    { this.eat(types.semi); }\n  else\n    { this.semicolon(); }\n  return this.finishNode(node, \"DoWhileStatement\")\n};\n\n// Disambiguating between a `for` and a `for`/`in` or `for`/`of`\n// loop is non-trivial. Basically, we have to parse the init `var`\n// statement or expression, disallowing the `in` operator (see\n// the second parameter to `parseExpression`), and then check\n// whether the next token is `in` or `of`. When there is no init\n// part (semicolon immediately after the opening parenthesis), it\n// is a regular `for` loop.\n\npp$1.parseForStatement = function(node) {\n  this.next();\n  var awaitAt = (this.options.ecmaVersion >= 9 && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction)) && this.eatContextual(\"await\")) ? this.lastTokStart : -1;\n  this.labels.push(loopLabel);\n  this.enterScope(0);\n  this.expect(types.parenL);\n  if (this.type === types.semi) {\n    if (awaitAt > -1) { this.unexpected(awaitAt); }\n    return this.parseFor(node, null)\n  }\n  var isLet = this.isLet();\n  if (this.type === types._var || this.type === types._const || isLet) {\n    var init$1 = this.startNode(), kind = isLet ? \"let\" : this.value;\n    this.next();\n    this.parseVar(init$1, true, kind);\n    this.finishNode(init$1, \"VariableDeclaration\");\n    if ((this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) && init$1.declarations.length === 1) {\n      if (this.options.ecmaVersion >= 9) {\n        if (this.type === types._in) {\n          if (awaitAt > -1) { this.unexpected(awaitAt); }\n        } else { node.await = awaitAt > -1; }\n      }\n      return this.parseForIn(node, init$1)\n    }\n    if (awaitAt > -1) { this.unexpected(awaitAt); }\n    return this.parseFor(node, init$1)\n  }\n  var refDestructuringErrors = new DestructuringErrors;\n  var init = this.parseExpression(true, refDestructuringErrors);\n  if (this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) {\n    if (this.options.ecmaVersion >= 9) {\n      if (this.type === types._in) {\n        if (awaitAt > -1) { this.unexpected(awaitAt); }\n      } else { node.await = awaitAt > -1; }\n    }\n    this.toAssignable(init, false, refDestructuringErrors);\n    this.checkLVal(init);\n    return this.parseForIn(node, init)\n  } else {\n    this.checkExpressionErrors(refDestructuringErrors, true);\n  }\n  if (awaitAt > -1) { this.unexpected(awaitAt); }\n  return this.parseFor(node, init)\n};\n\npp$1.parseFunctionStatement = function(node, isAsync, declarationPosition) {\n  this.next();\n  return this.parseFunction(node, FUNC_STATEMENT | (declarationPosition ? 0 : FUNC_HANGING_STATEMENT), false, isAsync)\n};\n\npp$1.parseIfStatement = function(node) {\n  this.next();\n  node.test = this.parseParenExpression();\n  // allow function declarations in branches, but only in non-strict mode\n  node.consequent = this.parseStatement(\"if\");\n  node.alternate = this.eat(types._else) ? this.parseStatement(\"if\") : null;\n  return this.finishNode(node, \"IfStatement\")\n};\n\npp$1.parseReturnStatement = function(node) {\n  if (!this.inFunction && !this.options.allowReturnOutsideFunction)\n    { this.raise(this.start, \"'return' outside of function\"); }\n  this.next();\n\n  // In `return` (and `break`/`continue`), the keywords with\n  // optional arguments, we eagerly look for a semicolon or the\n  // possibility to insert one.\n\n  if (this.eat(types.semi) || this.insertSemicolon()) { node.argument = null; }\n  else { node.argument = this.parseExpression(); this.semicolon(); }\n  return this.finishNode(node, \"ReturnStatement\")\n};\n\npp$1.parseSwitchStatement = function(node) {\n  this.next();\n  node.discriminant = this.parseParenExpression();\n  node.cases = [];\n  this.expect(types.braceL);\n  this.labels.push(switchLabel);\n  this.enterScope(0);\n\n  // Statements under must be grouped (by label) in SwitchCase\n  // nodes. `cur` is used to keep the node that we are currently\n  // adding statements to.\n\n  var cur;\n  for (var sawDefault = false; this.type !== types.braceR;) {\n    if (this.type === types._case || this.type === types._default) {\n      var isCase = this.type === types._case;\n      if (cur) { this.finishNode(cur, \"SwitchCase\"); }\n      node.cases.push(cur = this.startNode());\n      cur.consequent = [];\n      this.next();\n      if (isCase) {\n        cur.test = this.parseExpression();\n      } else {\n        if (sawDefault) { this.raiseRecoverable(this.lastTokStart, \"Multiple default clauses\"); }\n        sawDefault = true;\n        cur.test = null;\n      }\n      this.expect(types.colon);\n    } else {\n      if (!cur) { this.unexpected(); }\n      cur.consequent.push(this.parseStatement(null));\n    }\n  }\n  this.exitScope();\n  if (cur) { this.finishNode(cur, \"SwitchCase\"); }\n  this.next(); // Closing brace\n  this.labels.pop();\n  return this.finishNode(node, \"SwitchStatement\")\n};\n\npp$1.parseThrowStatement = function(node) {\n  this.next();\n  if (lineBreak.test(this.input.slice(this.lastTokEnd, this.start)))\n    { this.raise(this.lastTokEnd, \"Illegal newline after throw\"); }\n  node.argument = this.parseExpression();\n  this.semicolon();\n  return this.finishNode(node, \"ThrowStatement\")\n};\n\n// Reused empty array added for node fields that are always empty.\n\nvar empty = [];\n\npp$1.parseTryStatement = function(node) {\n  this.next();\n  node.block = this.parseBlock();\n  node.handler = null;\n  if (this.type === types._catch) {\n    var clause = this.startNode();\n    this.next();\n    if (this.eat(types.parenL)) {\n      clause.param = this.parseBindingAtom();\n      var simple = clause.param.type === \"Identifier\";\n      this.enterScope(simple ? SCOPE_SIMPLE_CATCH : 0);\n      this.checkLVal(clause.param, simple ? BIND_SIMPLE_CATCH : BIND_LEXICAL);\n      this.expect(types.parenR);\n    } else {\n      if (this.options.ecmaVersion < 10) { this.unexpected(); }\n      clause.param = null;\n      this.enterScope(0);\n    }\n    clause.body = this.parseBlock(false);\n    this.exitScope();\n    node.handler = this.finishNode(clause, \"CatchClause\");\n  }\n  node.finalizer = this.eat(types._finally) ? this.parseBlock() : null;\n  if (!node.handler && !node.finalizer)\n    { this.raise(node.start, \"Missing catch or finally clause\"); }\n  return this.finishNode(node, \"TryStatement\")\n};\n\npp$1.parseVarStatement = function(node, kind) {\n  this.next();\n  this.parseVar(node, false, kind);\n  this.semicolon();\n  return this.finishNode(node, \"VariableDeclaration\")\n};\n\npp$1.parseWhileStatement = function(node) {\n  this.next();\n  node.test = this.parseParenExpression();\n  this.labels.push(loopLabel);\n  node.body = this.parseStatement(\"while\");\n  this.labels.pop();\n  return this.finishNode(node, \"WhileStatement\")\n};\n\npp$1.parseWithStatement = function(node) {\n  if (this.strict) { this.raise(this.start, \"'with' in strict mode\"); }\n  this.next();\n  node.object = this.parseParenExpression();\n  node.body = this.parseStatement(\"with\");\n  return this.finishNode(node, \"WithStatement\")\n};\n\npp$1.parseEmptyStatement = function(node) {\n  this.next();\n  return this.finishNode(node, \"EmptyStatement\")\n};\n\npp$1.parseLabeledStatement = function(node, maybeName, expr, context) {\n  for (var i$1 = 0, list = this.labels; i$1 < list.length; i$1 += 1)\n    {\n    var label = list[i$1];\n\n    if (label.name === maybeName)\n      { this.raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n  } }\n  var kind = this.type.isLoop ? \"loop\" : this.type === types._switch ? \"switch\" : null;\n  for (var i = this.labels.length - 1; i >= 0; i--) {\n    var label$1 = this.labels[i];\n    if (label$1.statementStart === node.start) {\n      // Update information about previous labels on this node\n      label$1.statementStart = this.start;\n      label$1.kind = kind;\n    } else { break }\n  }\n  this.labels.push({name: maybeName, kind: kind, statementStart: this.start});\n  node.body = this.parseStatement(context ? context.indexOf(\"label\") === -1 ? context + \"label\" : context : \"label\");\n  this.labels.pop();\n  node.label = expr;\n  return this.finishNode(node, \"LabeledStatement\")\n};\n\npp$1.parseExpressionStatement = function(node, expr) {\n  node.expression = expr;\n  this.semicolon();\n  return this.finishNode(node, \"ExpressionStatement\")\n};\n\n// Parse a semicolon-enclosed block of statements, handling `\"use\n// strict\"` declarations when `allowStrict` is true (used for\n// function bodies).\n\npp$1.parseBlock = function(createNewLexicalScope, node) {\n  if ( createNewLexicalScope === void 0 ) createNewLexicalScope = true;\n  if ( node === void 0 ) node = this.startNode();\n\n  node.body = [];\n  this.expect(types.braceL);\n  if (createNewLexicalScope) { this.enterScope(0); }\n  while (!this.eat(types.braceR)) {\n    var stmt = this.parseStatement(null);\n    node.body.push(stmt);\n  }\n  if (createNewLexicalScope) { this.exitScope(); }\n  return this.finishNode(node, \"BlockStatement\")\n};\n\n// Parse a regular `for` loop. The disambiguation code in\n// `parseStatement` will already have parsed the init statement or\n// expression.\n\npp$1.parseFor = function(node, init) {\n  node.init = init;\n  this.expect(types.semi);\n  node.test = this.type === types.semi ? null : this.parseExpression();\n  this.expect(types.semi);\n  node.update = this.type === types.parenR ? null : this.parseExpression();\n  this.expect(types.parenR);\n  node.body = this.parseStatement(\"for\");\n  this.exitScope();\n  this.labels.pop();\n  return this.finishNode(node, \"ForStatement\")\n};\n\n// Parse a `for`/`in` and `for`/`of` loop, which are almost\n// same from parser's perspective.\n\npp$1.parseForIn = function(node, init) {\n  var isForIn = this.type === types._in;\n  this.next();\n\n  if (\n    init.type === \"VariableDeclaration\" &&\n    init.declarations[0].init != null &&\n    (\n      !isForIn ||\n      this.options.ecmaVersion < 8 ||\n      this.strict ||\n      init.kind !== \"var\" ||\n      init.declarations[0].id.type !== \"Identifier\"\n    )\n  ) {\n    this.raise(\n      init.start,\n      ((isForIn ? \"for-in\" : \"for-of\") + \" loop variable declaration may not have an initializer\")\n    );\n  } else if (init.type === \"AssignmentPattern\") {\n    this.raise(init.start, \"Invalid left-hand side in for-loop\");\n  }\n  node.left = init;\n  node.right = isForIn ? this.parseExpression() : this.parseMaybeAssign();\n  this.expect(types.parenR);\n  node.body = this.parseStatement(\"for\");\n  this.exitScope();\n  this.labels.pop();\n  return this.finishNode(node, isForIn ? \"ForInStatement\" : \"ForOfStatement\")\n};\n\n// Parse a list of variable declarations.\n\npp$1.parseVar = function(node, isFor, kind) {\n  node.declarations = [];\n  node.kind = kind;\n  for (;;) {\n    var decl = this.startNode();\n    this.parseVarId(decl, kind);\n    if (this.eat(types.eq)) {\n      decl.init = this.parseMaybeAssign(isFor);\n    } else if (kind === \"const\" && !(this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\")))) {\n      this.unexpected();\n    } else if (decl.id.type !== \"Identifier\" && !(isFor && (this.type === types._in || this.isContextual(\"of\")))) {\n      this.raise(this.lastTokEnd, \"Complex binding patterns require an initialization value\");\n    } else {\n      decl.init = null;\n    }\n    node.declarations.push(this.finishNode(decl, \"VariableDeclarator\"));\n    if (!this.eat(types.comma)) { break }\n  }\n  return node\n};\n\npp$1.parseVarId = function(decl, kind) {\n  decl.id = this.parseBindingAtom();\n  this.checkLVal(decl.id, kind === \"var\" ? BIND_VAR : BIND_LEXICAL, false);\n};\n\nvar FUNC_STATEMENT = 1, FUNC_HANGING_STATEMENT = 2, FUNC_NULLABLE_ID = 4;\n\n// Parse a function declaration or literal (depending on the\n// `statement & FUNC_STATEMENT`).\n\n// Remove `allowExpressionBody` for 7.0.0, as it is only called with false\npp$1.parseFunction = function(node, statement, allowExpressionBody, isAsync) {\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 9 || this.options.ecmaVersion >= 6 && !isAsync) {\n    if (this.type === types.star && (statement & FUNC_HANGING_STATEMENT))\n      { this.unexpected(); }\n    node.generator = this.eat(types.star);\n  }\n  if (this.options.ecmaVersion >= 8)\n    { node.async = !!isAsync; }\n\n  if (statement & FUNC_STATEMENT) {\n    node.id = (statement & FUNC_NULLABLE_ID) && this.type !== types.name ? null : this.parseIdent();\n    if (node.id && !(statement & FUNC_HANGING_STATEMENT))\n      // If it is a regular function declaration in sloppy mode, then it is\n      // subject to Annex B semantics (BIND_FUNCTION). Otherwise, the binding\n      // mode depends on properties of the current scope (see\n      // treatFunctionsAsVar).\n      { this.checkLVal(node.id, (this.strict || node.generator || node.async) ? this.treatFunctionsAsVar ? BIND_VAR : BIND_LEXICAL : BIND_FUNCTION); }\n  }\n\n  var oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.awaitIdentPos = 0;\n  this.enterScope(functionFlags(node.async, node.generator));\n\n  if (!(statement & FUNC_STATEMENT))\n    { node.id = this.type === types.name ? this.parseIdent() : null; }\n\n  this.parseFunctionParams(node);\n  this.parseFunctionBody(node, allowExpressionBody, false);\n\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.awaitIdentPos = oldAwaitIdentPos;\n  return this.finishNode(node, (statement & FUNC_STATEMENT) ? \"FunctionDeclaration\" : \"FunctionExpression\")\n};\n\npp$1.parseFunctionParams = function(node) {\n  this.expect(types.parenL);\n  node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n  this.checkYieldAwaitInDefaultParams();\n};\n\n// Parse a class declaration or literal (depending on the\n// `isStatement` parameter).\n\npp$1.parseClass = function(node, isStatement) {\n  this.next();\n\n  // ecma-262 14.6 Class Definitions\n  // A class definition is always strict mode code.\n  var oldStrict = this.strict;\n  this.strict = true;\n\n  this.parseClassId(node, isStatement);\n  this.parseClassSuper(node);\n  var classBody = this.startNode();\n  var hadConstructor = false;\n  classBody.body = [];\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    var element = this.parseClassElement(node.superClass !== null);\n    if (element) {\n      classBody.body.push(element);\n      if (element.type === \"MethodDefinition\" && element.kind === \"constructor\") {\n        if (hadConstructor) { this.raise(element.start, \"Duplicate constructor in the same class\"); }\n        hadConstructor = true;\n      }\n    }\n  }\n  node.body = this.finishNode(classBody, \"ClassBody\");\n  this.strict = oldStrict;\n  return this.finishNode(node, isStatement ? \"ClassDeclaration\" : \"ClassExpression\")\n};\n\npp$1.parseClassElement = function(constructorAllowsSuper) {\n  var this$1 = this;\n\n  if (this.eat(types.semi)) { return null }\n\n  var method = this.startNode();\n  var tryContextual = function (k, noLineBreak) {\n    if ( noLineBreak === void 0 ) noLineBreak = false;\n\n    var start = this$1.start, startLoc = this$1.startLoc;\n    if (!this$1.eatContextual(k)) { return false }\n    if (this$1.type !== types.parenL && (!noLineBreak || !this$1.canInsertSemicolon())) { return true }\n    if (method.key) { this$1.unexpected(); }\n    method.computed = false;\n    method.key = this$1.startNodeAt(start, startLoc);\n    method.key.name = k;\n    this$1.finishNode(method.key, \"Identifier\");\n    return false\n  };\n\n  method.kind = \"method\";\n  method.static = tryContextual(\"static\");\n  var isGenerator = this.eat(types.star);\n  var isAsync = false;\n  if (!isGenerator) {\n    if (this.options.ecmaVersion >= 8 && tryContextual(\"async\", true)) {\n      isAsync = true;\n      isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n    } else if (tryContextual(\"get\")) {\n      method.kind = \"get\";\n    } else if (tryContextual(\"set\")) {\n      method.kind = \"set\";\n    }\n  }\n  if (!method.key) { this.parsePropertyName(method); }\n  var key = method.key;\n  var allowsDirectSuper = false;\n  if (!method.computed && !method.static && (key.type === \"Identifier\" && key.name === \"constructor\" ||\n      key.type === \"Literal\" && key.value === \"constructor\")) {\n    if (method.kind !== \"method\") { this.raise(key.start, \"Constructor can't have get/set modifier\"); }\n    if (isGenerator) { this.raise(key.start, \"Constructor can't be a generator\"); }\n    if (isAsync) { this.raise(key.start, \"Constructor can't be an async method\"); }\n    method.kind = \"constructor\";\n    allowsDirectSuper = constructorAllowsSuper;\n  } else if (method.static && key.type === \"Identifier\" && key.name === \"prototype\") {\n    this.raise(key.start, \"Classes may not have a static property named prototype\");\n  }\n  this.parseClassMethod(method, isGenerator, isAsync, allowsDirectSuper);\n  if (method.kind === \"get\" && method.value.params.length !== 0)\n    { this.raiseRecoverable(method.value.start, \"getter should have no params\"); }\n  if (method.kind === \"set\" && method.value.params.length !== 1)\n    { this.raiseRecoverable(method.value.start, \"setter should have exactly one param\"); }\n  if (method.kind === \"set\" && method.value.params[0].type === \"RestElement\")\n    { this.raiseRecoverable(method.value.params[0].start, \"Setter cannot use rest params\"); }\n  return method\n};\n\npp$1.parseClassMethod = function(method, isGenerator, isAsync, allowsDirectSuper) {\n  method.value = this.parseMethod(isGenerator, isAsync, allowsDirectSuper);\n  return this.finishNode(method, \"MethodDefinition\")\n};\n\npp$1.parseClassId = function(node, isStatement) {\n  if (this.type === types.name) {\n    node.id = this.parseIdent();\n    if (isStatement)\n      { this.checkLVal(node.id, BIND_LEXICAL, false); }\n  } else {\n    if (isStatement === true)\n      { this.unexpected(); }\n    node.id = null;\n  }\n};\n\npp$1.parseClassSuper = function(node) {\n  node.superClass = this.eat(types._extends) ? this.parseExprSubscripts() : null;\n};\n\n// Parses module export declaration.\n\npp$1.parseExport = function(node, exports) {\n  this.next();\n  // export * from '...'\n  if (this.eat(types.star)) {\n    this.expectContextual(\"from\");\n    if (this.type !== types.string) { this.unexpected(); }\n    node.source = this.parseExprAtom();\n    this.semicolon();\n    return this.finishNode(node, \"ExportAllDeclaration\")\n  }\n  if (this.eat(types._default)) { // export default ...\n    this.checkExport(exports, \"default\", this.lastTokStart);\n    var isAsync;\n    if (this.type === types._function || (isAsync = this.isAsyncFunction())) {\n      var fNode = this.startNode();\n      this.next();\n      if (isAsync) { this.next(); }\n      node.declaration = this.parseFunction(fNode, FUNC_STATEMENT | FUNC_NULLABLE_ID, false, isAsync);\n    } else if (this.type === types._class) {\n      var cNode = this.startNode();\n      node.declaration = this.parseClass(cNode, \"nullableID\");\n    } else {\n      node.declaration = this.parseMaybeAssign();\n      this.semicolon();\n    }\n    return this.finishNode(node, \"ExportDefaultDeclaration\")\n  }\n  // export var|const|let|function|class ...\n  if (this.shouldParseExportStatement()) {\n    node.declaration = this.parseStatement(null);\n    if (node.declaration.type === \"VariableDeclaration\")\n      { this.checkVariableExport(exports, node.declaration.declarations); }\n    else\n      { this.checkExport(exports, node.declaration.id.name, node.declaration.id.start); }\n    node.specifiers = [];\n    node.source = null;\n  } else { // export { x, y as z } [from '...']\n    node.declaration = null;\n    node.specifiers = this.parseExportSpecifiers(exports);\n    if (this.eatContextual(\"from\")) {\n      if (this.type !== types.string) { this.unexpected(); }\n      node.source = this.parseExprAtom();\n    } else {\n      for (var i = 0, list = node.specifiers; i < list.length; i += 1) {\n        // check for keywords used as local names\n        var spec = list[i];\n\n        this.checkUnreserved(spec.local);\n        // check if export is defined\n        this.checkLocalExport(spec.local);\n      }\n\n      node.source = null;\n    }\n    this.semicolon();\n  }\n  return this.finishNode(node, \"ExportNamedDeclaration\")\n};\n\npp$1.checkExport = function(exports, name, pos) {\n  if (!exports) { return }\n  if (has(exports, name))\n    { this.raiseRecoverable(pos, \"Duplicate export '\" + name + \"'\"); }\n  exports[name] = true;\n};\n\npp$1.checkPatternExport = function(exports, pat) {\n  var type = pat.type;\n  if (type === \"Identifier\")\n    { this.checkExport(exports, pat.name, pat.start); }\n  else if (type === \"ObjectPattern\")\n    { for (var i = 0, list = pat.properties; i < list.length; i += 1)\n      {\n        var prop = list[i];\n\n        this.checkPatternExport(exports, prop);\n      } }\n  else if (type === \"ArrayPattern\")\n    { for (var i$1 = 0, list$1 = pat.elements; i$1 < list$1.length; i$1 += 1) {\n      var elt = list$1[i$1];\n\n        if (elt) { this.checkPatternExport(exports, elt); }\n    } }\n  else if (type === \"Property\")\n    { this.checkPatternExport(exports, pat.value); }\n  else if (type === \"AssignmentPattern\")\n    { this.checkPatternExport(exports, pat.left); }\n  else if (type === \"RestElement\")\n    { this.checkPatternExport(exports, pat.argument); }\n  else if (type === \"ParenthesizedExpression\")\n    { this.checkPatternExport(exports, pat.expression); }\n};\n\npp$1.checkVariableExport = function(exports, decls) {\n  if (!exports) { return }\n  for (var i = 0, list = decls; i < list.length; i += 1)\n    {\n    var decl = list[i];\n\n    this.checkPatternExport(exports, decl.id);\n  }\n};\n\npp$1.shouldParseExportStatement = function() {\n  return this.type.keyword === \"var\" ||\n    this.type.keyword === \"const\" ||\n    this.type.keyword === \"class\" ||\n    this.type.keyword === \"function\" ||\n    this.isLet() ||\n    this.isAsyncFunction()\n};\n\n// Parses a comma-separated list of module exports.\n\npp$1.parseExportSpecifiers = function(exports) {\n  var nodes = [], first = true;\n  // export { x, y as z } [from '...']\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this.expect(types.comma);\n      if (this.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var node = this.startNode();\n    node.local = this.parseIdent(true);\n    node.exported = this.eatContextual(\"as\") ? this.parseIdent(true) : node.local;\n    this.checkExport(exports, node.exported.name, node.exported.start);\n    nodes.push(this.finishNode(node, \"ExportSpecifier\"));\n  }\n  return nodes\n};\n\n// Parses import declaration.\n\npp$1.parseImport = function(node) {\n  this.next();\n  // import '...'\n  if (this.type === types.string) {\n    node.specifiers = empty;\n    node.source = this.parseExprAtom();\n  } else {\n    node.specifiers = this.parseImportSpecifiers();\n    this.expectContextual(\"from\");\n    node.source = this.type === types.string ? this.parseExprAtom() : this.unexpected();\n  }\n  this.semicolon();\n  return this.finishNode(node, \"ImportDeclaration\")\n};\n\n// Parses a comma-separated list of module imports.\n\npp$1.parseImportSpecifiers = function() {\n  var nodes = [], first = true;\n  if (this.type === types.name) {\n    // import defaultObj, { x, y as z } from '...'\n    var node = this.startNode();\n    node.local = this.parseIdent();\n    this.checkLVal(node.local, BIND_LEXICAL);\n    nodes.push(this.finishNode(node, \"ImportDefaultSpecifier\"));\n    if (!this.eat(types.comma)) { return nodes }\n  }\n  if (this.type === types.star) {\n    var node$1 = this.startNode();\n    this.next();\n    this.expectContextual(\"as\");\n    node$1.local = this.parseIdent();\n    this.checkLVal(node$1.local, BIND_LEXICAL);\n    nodes.push(this.finishNode(node$1, \"ImportNamespaceSpecifier\"));\n    return nodes\n  }\n  this.expect(types.braceL);\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this.expect(types.comma);\n      if (this.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var node$2 = this.startNode();\n    node$2.imported = this.parseIdent(true);\n    if (this.eatContextual(\"as\")) {\n      node$2.local = this.parseIdent();\n    } else {\n      this.checkUnreserved(node$2.imported);\n      node$2.local = node$2.imported;\n    }\n    this.checkLVal(node$2.local, BIND_LEXICAL);\n    nodes.push(this.finishNode(node$2, \"ImportSpecifier\"));\n  }\n  return nodes\n};\n\n// Set `ExpressionStatement#directive` property for directive prologues.\npp$1.adaptDirectivePrologue = function(statements) {\n  for (var i = 0; i < statements.length && this.isDirectiveCandidate(statements[i]); ++i) {\n    statements[i].directive = statements[i].expression.raw.slice(1, -1);\n  }\n};\npp$1.isDirectiveCandidate = function(statement) {\n  return (\n    statement.type === \"ExpressionStatement\" &&\n    statement.expression.type === \"Literal\" &&\n    typeof statement.expression.value === \"string\" &&\n    // Reject parenthesized strings.\n    (this.input[statement.start] === \"\\\"\" || this.input[statement.start] === \"'\")\n  )\n};\n\nvar pp$2 = Parser.prototype;\n\n// Convert existing expression atom to assignable pattern\n// if possible.\n\npp$2.toAssignable = function(node, isBinding, refDestructuringErrors) {\n  if (this.options.ecmaVersion >= 6 && node) {\n    switch (node.type) {\n    case \"Identifier\":\n      if (this.inAsync && node.name === \"await\")\n        { this.raise(node.start, \"Cannot use 'await' as identifier inside an async function\"); }\n      break\n\n    case \"ObjectPattern\":\n    case \"ArrayPattern\":\n    case \"RestElement\":\n      break\n\n    case \"ObjectExpression\":\n      node.type = \"ObjectPattern\";\n      if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n      for (var i = 0, list = node.properties; i < list.length; i += 1) {\n        var prop = list[i];\n\n      this.toAssignable(prop, isBinding);\n        // Early error:\n        //   AssignmentRestProperty[Yield, Await] :\n        //     `...` DestructuringAssignmentTarget[Yield, Await]\n        //\n        //   It is a Syntax Error if |DestructuringAssignmentTarget| is an |ArrayLiteral| or an |ObjectLiteral|.\n        if (\n          prop.type === \"RestElement\" &&\n          (prop.argument.type === \"ArrayPattern\" || prop.argument.type === \"ObjectPattern\")\n        ) {\n          this.raise(prop.argument.start, \"Unexpected token\");\n        }\n      }\n      break\n\n    case \"Property\":\n      // AssignmentProperty has type === \"Property\"\n      if (node.kind !== \"init\") { this.raise(node.key.start, \"Object pattern can't contain getter or setter\"); }\n      this.toAssignable(node.value, isBinding);\n      break\n\n    case \"ArrayExpression\":\n      node.type = \"ArrayPattern\";\n      if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n      this.toAssignableList(node.elements, isBinding);\n      break\n\n    case \"SpreadElement\":\n      node.type = \"RestElement\";\n      this.toAssignable(node.argument, isBinding);\n      if (node.argument.type === \"AssignmentPattern\")\n        { this.raise(node.argument.start, \"Rest elements cannot have a default value\"); }\n      break\n\n    case \"AssignmentExpression\":\n      if (node.operator !== \"=\") { this.raise(node.left.end, \"Only '=' operator can be used for specifying default value.\"); }\n      node.type = \"AssignmentPattern\";\n      delete node.operator;\n      this.toAssignable(node.left, isBinding);\n      // falls through to AssignmentPattern\n\n    case \"AssignmentPattern\":\n      break\n\n    case \"ParenthesizedExpression\":\n      this.toAssignable(node.expression, isBinding, refDestructuringErrors);\n      break\n\n    case \"MemberExpression\":\n      if (!isBinding) { break }\n\n    default:\n      this.raise(node.start, \"Assigning to rvalue\");\n    }\n  } else if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n  return node\n};\n\n// Convert list of expression atoms to binding list.\n\npp$2.toAssignableList = function(exprList, isBinding) {\n  var end = exprList.length;\n  for (var i = 0; i < end; i++) {\n    var elt = exprList[i];\n    if (elt) { this.toAssignable(elt, isBinding); }\n  }\n  if (end) {\n    var last = exprList[end - 1];\n    if (this.options.ecmaVersion === 6 && isBinding && last && last.type === \"RestElement\" && last.argument.type !== \"Identifier\")\n      { this.unexpected(last.argument.start); }\n  }\n  return exprList\n};\n\n// Parses spread element.\n\npp$2.parseSpread = function(refDestructuringErrors) {\n  var node = this.startNode();\n  this.next();\n  node.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n  return this.finishNode(node, \"SpreadElement\")\n};\n\npp$2.parseRestBinding = function() {\n  var node = this.startNode();\n  this.next();\n\n  // RestElement inside of a function parameter must be an identifier\n  if (this.options.ecmaVersion === 6 && this.type !== types.name)\n    { this.unexpected(); }\n\n  node.argument = this.parseBindingAtom();\n\n  return this.finishNode(node, \"RestElement\")\n};\n\n// Parses lvalue (assignable) atom.\n\npp$2.parseBindingAtom = function() {\n  if (this.options.ecmaVersion >= 6) {\n    switch (this.type) {\n    case types.bracketL:\n      var node = this.startNode();\n      this.next();\n      node.elements = this.parseBindingList(types.bracketR, true, true);\n      return this.finishNode(node, \"ArrayPattern\")\n\n    case types.braceL:\n      return this.parseObj(true)\n    }\n  }\n  return this.parseIdent()\n};\n\npp$2.parseBindingList = function(close, allowEmpty, allowTrailingComma) {\n  var elts = [], first = true;\n  while (!this.eat(close)) {\n    if (first) { first = false; }\n    else { this.expect(types.comma); }\n    if (allowEmpty && this.type === types.comma) {\n      elts.push(null);\n    } else if (allowTrailingComma && this.afterTrailingComma(close)) {\n      break\n    } else if (this.type === types.ellipsis) {\n      var rest = this.parseRestBinding();\n      this.parseBindingListItem(rest);\n      elts.push(rest);\n      if (this.type === types.comma) { this.raise(this.start, \"Comma is not permitted after the rest element\"); }\n      this.expect(close);\n      break\n    } else {\n      var elem = this.parseMaybeDefault(this.start, this.startLoc);\n      this.parseBindingListItem(elem);\n      elts.push(elem);\n    }\n  }\n  return elts\n};\n\npp$2.parseBindingListItem = function(param) {\n  return param\n};\n\n// Parses assignment pattern around given atom if possible.\n\npp$2.parseMaybeDefault = function(startPos, startLoc, left) {\n  left = left || this.parseBindingAtom();\n  if (this.options.ecmaVersion < 6 || !this.eat(types.eq)) { return left }\n  var node = this.startNodeAt(startPos, startLoc);\n  node.left = left;\n  node.right = this.parseMaybeAssign();\n  return this.finishNode(node, \"AssignmentPattern\")\n};\n\n// Verify that a node is an lval — something that can be assigned\n// to.\n// bindingType can be either:\n// 'var' indicating that the lval creates a 'var' binding\n// 'let' indicating that the lval creates a lexical ('let' or 'const') binding\n// 'none' indicating that the binding should be checked for illegal identifiers, but not for duplicate references\n\npp$2.checkLVal = function(expr, bindingType, checkClashes) {\n  if ( bindingType === void 0 ) bindingType = BIND_NONE;\n\n  switch (expr.type) {\n  case \"Identifier\":\n    if (bindingType === BIND_LEXICAL && expr.name === \"let\")\n      { this.raiseRecoverable(expr.start, \"let is disallowed as a lexically bound name\"); }\n    if (this.strict && this.reservedWordsStrictBind.test(expr.name))\n      { this.raiseRecoverable(expr.start, (bindingType ? \"Binding \" : \"Assigning to \") + expr.name + \" in strict mode\"); }\n    if (checkClashes) {\n      if (has(checkClashes, expr.name))\n        { this.raiseRecoverable(expr.start, \"Argument name clash\"); }\n      checkClashes[expr.name] = true;\n    }\n    if (bindingType !== BIND_NONE && bindingType !== BIND_OUTSIDE) { this.declareName(expr.name, bindingType, expr.start); }\n    break\n\n  case \"MemberExpression\":\n    if (bindingType) { this.raiseRecoverable(expr.start, \"Binding member expression\"); }\n    break\n\n  case \"ObjectPattern\":\n    for (var i = 0, list = expr.properties; i < list.length; i += 1)\n      {\n    var prop = list[i];\n\n    this.checkLVal(prop, bindingType, checkClashes);\n  }\n    break\n\n  case \"Property\":\n    // AssignmentProperty has type === \"Property\"\n    this.checkLVal(expr.value, bindingType, checkClashes);\n    break\n\n  case \"ArrayPattern\":\n    for (var i$1 = 0, list$1 = expr.elements; i$1 < list$1.length; i$1 += 1) {\n      var elem = list$1[i$1];\n\n    if (elem) { this.checkLVal(elem, bindingType, checkClashes); }\n    }\n    break\n\n  case \"AssignmentPattern\":\n    this.checkLVal(expr.left, bindingType, checkClashes);\n    break\n\n  case \"RestElement\":\n    this.checkLVal(expr.argument, bindingType, checkClashes);\n    break\n\n  case \"ParenthesizedExpression\":\n    this.checkLVal(expr.expression, bindingType, checkClashes);\n    break\n\n  default:\n    this.raise(expr.start, (bindingType ? \"Binding\" : \"Assigning to\") + \" rvalue\");\n  }\n};\n\n// A recursive descent parser operates by defining functions for all\n\nvar pp$3 = Parser.prototype;\n\n// Check if property name clashes with already added.\n// Object/class getters and setters are not allowed to clash —\n// either with each other or with an init property — and in\n// strict mode, init properties are also not allowed to be repeated.\n\npp$3.checkPropClash = function(prop, propHash, refDestructuringErrors) {\n  if (this.options.ecmaVersion >= 9 && prop.type === \"SpreadElement\")\n    { return }\n  if (this.options.ecmaVersion >= 6 && (prop.computed || prop.method || prop.shorthand))\n    { return }\n  var key = prop.key;\n  var name;\n  switch (key.type) {\n  case \"Identifier\": name = key.name; break\n  case \"Literal\": name = String(key.value); break\n  default: return\n  }\n  var kind = prop.kind;\n  if (this.options.ecmaVersion >= 6) {\n    if (name === \"__proto__\" && kind === \"init\") {\n      if (propHash.proto) {\n        if (refDestructuringErrors && refDestructuringErrors.doubleProto < 0) { refDestructuringErrors.doubleProto = key.start; }\n        // Backwards-compat kludge. Can be removed in version 6.0\n        else { this.raiseRecoverable(key.start, \"Redefinition of __proto__ property\"); }\n      }\n      propHash.proto = true;\n    }\n    return\n  }\n  name = \"$\" + name;\n  var other = propHash[name];\n  if (other) {\n    var redefinition;\n    if (kind === \"init\") {\n      redefinition = this.strict && other.init || other.get || other.set;\n    } else {\n      redefinition = other.init || other[kind];\n    }\n    if (redefinition)\n      { this.raiseRecoverable(key.start, \"Redefinition of property\"); }\n  } else {\n    other = propHash[name] = {\n      init: false,\n      get: false,\n      set: false\n    };\n  }\n  other[kind] = true;\n};\n\n// ### Expression parsing\n\n// These nest, from the most general expression type at the top to\n// 'atomic', nondivisible expression types at the bottom. Most of\n// the functions will simply let the function(s) below them parse,\n// and, *if* the syntactic construct they handle is present, wrap\n// the AST node that the inner parser gave them in another node.\n\n// Parse a full expression. The optional arguments are used to\n// forbid the `in` operator (in for loops initalization expressions)\n// and provide reference for storing '=' operator inside shorthand\n// property assignment in contexts where both object expression\n// and object pattern might appear (so it's possible to raise\n// delayed syntax error at correct position).\n\npp$3.parseExpression = function(noIn, refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseMaybeAssign(noIn, refDestructuringErrors);\n  if (this.type === types.comma) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.expressions = [expr];\n    while (this.eat(types.comma)) { node.expressions.push(this.parseMaybeAssign(noIn, refDestructuringErrors)); }\n    return this.finishNode(node, \"SequenceExpression\")\n  }\n  return expr\n};\n\n// Parse an assignment expression. This includes applications of\n// operators like `+=`.\n\npp$3.parseMaybeAssign = function(noIn, refDestructuringErrors, afterLeftParse) {\n  if (this.isContextual(\"yield\")) {\n    if (this.inGenerator) { return this.parseYield(noIn) }\n    // The tokenizer will assume an expression is allowed after\n    // `yield`, but this isn't that kind of yield\n    else { this.exprAllowed = false; }\n  }\n\n  var ownDestructuringErrors = false, oldParenAssign = -1, oldTrailingComma = -1, oldShorthandAssign = -1;\n  if (refDestructuringErrors) {\n    oldParenAssign = refDestructuringErrors.parenthesizedAssign;\n    oldTrailingComma = refDestructuringErrors.trailingComma;\n    oldShorthandAssign = refDestructuringErrors.shorthandAssign;\n    refDestructuringErrors.parenthesizedAssign = refDestructuringErrors.trailingComma = refDestructuringErrors.shorthandAssign = -1;\n  } else {\n    refDestructuringErrors = new DestructuringErrors;\n    ownDestructuringErrors = true;\n  }\n\n  var startPos = this.start, startLoc = this.startLoc;\n  if (this.type === types.parenL || this.type === types.name)\n    { this.potentialArrowAt = this.start; }\n  var left = this.parseMaybeConditional(noIn, refDestructuringErrors);\n  if (afterLeftParse) { left = afterLeftParse.call(this, left, startPos, startLoc); }\n  if (this.type.isAssign) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.operator = this.value;\n    node.left = this.type === types.eq ? this.toAssignable(left, false, refDestructuringErrors) : left;\n    if (!ownDestructuringErrors) { DestructuringErrors.call(refDestructuringErrors); }\n    refDestructuringErrors.shorthandAssign = -1; // reset because shorthand default was used correctly\n    this.checkLVal(left);\n    this.next();\n    node.right = this.parseMaybeAssign(noIn);\n    return this.finishNode(node, \"AssignmentExpression\")\n  } else {\n    if (ownDestructuringErrors) { this.checkExpressionErrors(refDestructuringErrors, true); }\n  }\n  if (oldParenAssign > -1) { refDestructuringErrors.parenthesizedAssign = oldParenAssign; }\n  if (oldTrailingComma > -1) { refDestructuringErrors.trailingComma = oldTrailingComma; }\n  if (oldShorthandAssign > -1) { refDestructuringErrors.shorthandAssign = oldShorthandAssign; }\n  return left\n};\n\n// Parse a ternary conditional (`?:`) operator.\n\npp$3.parseMaybeConditional = function(noIn, refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseExprOps(noIn, refDestructuringErrors);\n  if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n  if (this.eat(types.question)) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.test = expr;\n    node.consequent = this.parseMaybeAssign();\n    this.expect(types.colon);\n    node.alternate = this.parseMaybeAssign(noIn);\n    return this.finishNode(node, \"ConditionalExpression\")\n  }\n  return expr\n};\n\n// Start the precedence parser.\n\npp$3.parseExprOps = function(noIn, refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseMaybeUnary(refDestructuringErrors, false);\n  if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n  return expr.start === startPos && expr.type === \"ArrowFunctionExpression\" ? expr : this.parseExprOp(expr, startPos, startLoc, -1, noIn)\n};\n\n// Parse binary operators with the operator precedence parsing\n// algorithm. `left` is the left-hand side of the operator.\n// `minPrec` provides context that allows the function to stop and\n// defer further parser to one of its callers when it encounters an\n// operator that has a lower precedence than the set it is parsing.\n\npp$3.parseExprOp = function(left, leftStartPos, leftStartLoc, minPrec, noIn) {\n  var prec = this.type.binop;\n  if (prec != null && (!noIn || this.type !== types._in)) {\n    if (prec > minPrec) {\n      var logical = this.type === types.logicalOR || this.type === types.logicalAND;\n      var op = this.value;\n      this.next();\n      var startPos = this.start, startLoc = this.startLoc;\n      var right = this.parseExprOp(this.parseMaybeUnary(null, false), startPos, startLoc, prec, noIn);\n      var node = this.buildBinary(leftStartPos, leftStartLoc, left, right, op, logical);\n      return this.parseExprOp(node, leftStartPos, leftStartLoc, minPrec, noIn)\n    }\n  }\n  return left\n};\n\npp$3.buildBinary = function(startPos, startLoc, left, right, op, logical) {\n  var node = this.startNodeAt(startPos, startLoc);\n  node.left = left;\n  node.operator = op;\n  node.right = right;\n  return this.finishNode(node, logical ? \"LogicalExpression\" : \"BinaryExpression\")\n};\n\n// Parse unary operators, both prefix and postfix.\n\npp$3.parseMaybeUnary = function(refDestructuringErrors, sawUnary) {\n  var startPos = this.start, startLoc = this.startLoc, expr;\n  if (this.isContextual(\"await\") && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction))) {\n    expr = this.parseAwait();\n    sawUnary = true;\n  } else if (this.type.prefix) {\n    var node = this.startNode(), update = this.type === types.incDec;\n    node.operator = this.value;\n    node.prefix = true;\n    this.next();\n    node.argument = this.parseMaybeUnary(null, true);\n    this.checkExpressionErrors(refDestructuringErrors, true);\n    if (update) { this.checkLVal(node.argument); }\n    else if (this.strict && node.operator === \"delete\" &&\n             node.argument.type === \"Identifier\")\n      { this.raiseRecoverable(node.start, \"Deleting local variable in strict mode\"); }\n    else { sawUnary = true; }\n    expr = this.finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n  } else {\n    expr = this.parseExprSubscripts(refDestructuringErrors);\n    if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n    while (this.type.postfix && !this.canInsertSemicolon()) {\n      var node$1 = this.startNodeAt(startPos, startLoc);\n      node$1.operator = this.value;\n      node$1.prefix = false;\n      node$1.argument = expr;\n      this.checkLVal(expr);\n      this.next();\n      expr = this.finishNode(node$1, \"UpdateExpression\");\n    }\n  }\n\n  if (!sawUnary && this.eat(types.starstar))\n    { return this.buildBinary(startPos, startLoc, expr, this.parseMaybeUnary(null, false), \"**\", false) }\n  else\n    { return expr }\n};\n\n// Parse call, dot, and `[]`-subscript expressions.\n\npp$3.parseExprSubscripts = function(refDestructuringErrors) {\n  var startPos = this.start, startLoc = this.startLoc;\n  var expr = this.parseExprAtom(refDestructuringErrors);\n  var skipArrowSubscripts = expr.type === \"ArrowFunctionExpression\" && this.input.slice(this.lastTokStart, this.lastTokEnd) !== \")\";\n  if (this.checkExpressionErrors(refDestructuringErrors) || skipArrowSubscripts) { return expr }\n  var result = this.parseSubscripts(expr, startPos, startLoc);\n  if (refDestructuringErrors && result.type === \"MemberExpression\") {\n    if (refDestructuringErrors.parenthesizedAssign >= result.start) { refDestructuringErrors.parenthesizedAssign = -1; }\n    if (refDestructuringErrors.parenthesizedBind >= result.start) { refDestructuringErrors.parenthesizedBind = -1; }\n  }\n  return result\n};\n\npp$3.parseSubscripts = function(base, startPos, startLoc, noCalls) {\n  var maybeAsyncArrow = this.options.ecmaVersion >= 8 && base.type === \"Identifier\" && base.name === \"async\" &&\n      this.lastTokEnd === base.end && !this.canInsertSemicolon() && this.input.slice(base.start, base.end) === \"async\";\n  while (true) {\n    var element = this.parseSubscript(base, startPos, startLoc, noCalls, maybeAsyncArrow);\n    if (element === base || element.type === \"ArrowFunctionExpression\") { return element }\n    base = element;\n  }\n};\n\npp$3.parseSubscript = function(base, startPos, startLoc, noCalls, maybeAsyncArrow) {\n  var computed = this.eat(types.bracketL);\n  if (computed || this.eat(types.dot)) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.object = base;\n    node.property = computed ? this.parseExpression() : this.parseIdent(this.options.allowReserved !== \"never\");\n    node.computed = !!computed;\n    if (computed) { this.expect(types.bracketR); }\n    base = this.finishNode(node, \"MemberExpression\");\n  } else if (!noCalls && this.eat(types.parenL)) {\n    var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    this.awaitIdentPos = 0;\n    var exprList = this.parseExprList(types.parenR, this.options.ecmaVersion >= 8 && base.type !== \"Import\", false, refDestructuringErrors);\n    if (maybeAsyncArrow && !this.canInsertSemicolon() && this.eat(types.arrow)) {\n      this.checkPatternErrors(refDestructuringErrors, false);\n      this.checkYieldAwaitInDefaultParams();\n      if (this.awaitIdentPos > 0)\n        { this.raise(this.awaitIdentPos, \"Cannot use 'await' as identifier inside an async function\"); }\n      this.yieldPos = oldYieldPos;\n      this.awaitPos = oldAwaitPos;\n      this.awaitIdentPos = oldAwaitIdentPos;\n      return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), exprList, true)\n    }\n    this.checkExpressionErrors(refDestructuringErrors, true);\n    this.yieldPos = oldYieldPos || this.yieldPos;\n    this.awaitPos = oldAwaitPos || this.awaitPos;\n    this.awaitIdentPos = oldAwaitIdentPos || this.awaitIdentPos;\n    var node$1 = this.startNodeAt(startPos, startLoc);\n    node$1.callee = base;\n    node$1.arguments = exprList;\n    if (node$1.callee.type === \"Import\") {\n      if (node$1.arguments.length !== 1) {\n        this.raise(node$1.start, \"import() requires exactly one argument\");\n      }\n\n      var importArg = node$1.arguments[0];\n      if (importArg && importArg.type === \"SpreadElement\") {\n        this.raise(importArg.start, \"... is not allowed in import()\");\n      }\n    }\n    base = this.finishNode(node$1, \"CallExpression\");\n  } else if (this.type === types.backQuote) {\n    var node$2 = this.startNodeAt(startPos, startLoc);\n    node$2.tag = base;\n    node$2.quasi = this.parseTemplate({isTagged: true});\n    base = this.finishNode(node$2, \"TaggedTemplateExpression\");\n  }\n  return base\n};\n\n// Parse an atomic expression — either a single token that is an\n// expression, an expression started by a keyword like `function` or\n// `new`, or an expression wrapped in punctuation like `()`, `[]`,\n// or `{}`.\n\npp$3.parseExprAtom = function(refDestructuringErrors) {\n  // If a division operator appears in an expression position, the\n  // tokenizer got confused, and we force it to read a regexp instead.\n  if (this.type === types.slash) { this.readRegexp(); }\n\n  var node, canBeArrow = this.potentialArrowAt === this.start;\n  switch (this.type) {\n  case types._super:\n    if (!this.allowSuper)\n      { this.raise(this.start, \"'super' keyword outside a method\"); }\n    node = this.startNode();\n    this.next();\n    if (this.type === types.parenL && !this.allowDirectSuper)\n      { this.raise(node.start, \"super() call outside constructor of a subclass\"); }\n    // The `super` keyword can appear at below:\n    // SuperProperty:\n    //     super [ Expression ]\n    //     super . IdentifierName\n    // SuperCall:\n    //     super Arguments\n    if (this.type !== types.dot && this.type !== types.bracketL && this.type !== types.parenL)\n      { this.unexpected(); }\n    return this.finishNode(node, \"Super\")\n\n  case types._this:\n    node = this.startNode();\n    this.next();\n    return this.finishNode(node, \"ThisExpression\")\n\n  case types.name:\n    var startPos = this.start, startLoc = this.startLoc, containsEsc = this.containsEsc;\n    var id = this.parseIdent(false);\n    if (this.options.ecmaVersion >= 8 && !containsEsc && id.name === \"async\" && !this.canInsertSemicolon() && this.eat(types._function))\n      { return this.parseFunction(this.startNodeAt(startPos, startLoc), 0, false, true) }\n    if (canBeArrow && !this.canInsertSemicolon()) {\n      if (this.eat(types.arrow))\n        { return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], false) }\n      if (this.options.ecmaVersion >= 8 && id.name === \"async\" && this.type === types.name && !containsEsc) {\n        id = this.parseIdent(false);\n        if (this.canInsertSemicolon() || !this.eat(types.arrow))\n          { this.unexpected(); }\n        return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], true)\n      }\n    }\n    return id\n\n  case types.regexp:\n    var value = this.value;\n    node = this.parseLiteral(value.value);\n    node.regex = {pattern: value.pattern, flags: value.flags};\n    return node\n\n  case types.num: case types.string:\n    return this.parseLiteral(this.value)\n\n  case types._null: case types._true: case types._false:\n    node = this.startNode();\n    node.value = this.type === types._null ? null : this.type === types._true;\n    node.raw = this.type.keyword;\n    this.next();\n    return this.finishNode(node, \"Literal\")\n\n  case types.parenL:\n    var start = this.start, expr = this.parseParenAndDistinguishExpression(canBeArrow);\n    if (refDestructuringErrors) {\n      if (refDestructuringErrors.parenthesizedAssign < 0 && !this.isSimpleAssignTarget(expr))\n        { refDestructuringErrors.parenthesizedAssign = start; }\n      if (refDestructuringErrors.parenthesizedBind < 0)\n        { refDestructuringErrors.parenthesizedBind = start; }\n    }\n    return expr\n\n  case types.bracketL:\n    node = this.startNode();\n    this.next();\n    node.elements = this.parseExprList(types.bracketR, true, true, refDestructuringErrors);\n    return this.finishNode(node, \"ArrayExpression\")\n\n  case types.braceL:\n    return this.parseObj(false, refDestructuringErrors)\n\n  case types._function:\n    node = this.startNode();\n    this.next();\n    return this.parseFunction(node, 0)\n\n  case types._class:\n    return this.parseClass(this.startNode(), false)\n\n  case types._new:\n    return this.parseNew()\n\n  case types.backQuote:\n    return this.parseTemplate()\n\n  case types._import:\n    if (this.options.ecmaVersion > 10) {\n      return this.parseDynamicImport()\n    } else {\n      return this.unexpected()\n    }\n\n  default:\n    this.unexpected();\n  }\n};\n\npp$3.parseDynamicImport = function() {\n  var node = this.startNode();\n  this.next();\n  if (this.type !== types.parenL) {\n    this.unexpected();\n  }\n  return this.finishNode(node, \"Import\")\n};\n\npp$3.parseLiteral = function(value) {\n  var node = this.startNode();\n  node.value = value;\n  node.raw = this.input.slice(this.start, this.end);\n  if (node.raw.charCodeAt(node.raw.length - 1) === 110) { node.bigint = node.raw.slice(0, -1); }\n  this.next();\n  return this.finishNode(node, \"Literal\")\n};\n\npp$3.parseParenExpression = function() {\n  this.expect(types.parenL);\n  var val = this.parseExpression();\n  this.expect(types.parenR);\n  return val\n};\n\npp$3.parseParenAndDistinguishExpression = function(canBeArrow) {\n  var startPos = this.start, startLoc = this.startLoc, val, allowTrailingComma = this.options.ecmaVersion >= 8;\n  if (this.options.ecmaVersion >= 6) {\n    this.next();\n\n    var innerStartPos = this.start, innerStartLoc = this.startLoc;\n    var exprList = [], first = true, lastIsComma = false;\n    var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, spreadStart;\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    // Do not save awaitIdentPos to allow checking awaits nested in parameters\n    while (this.type !== types.parenR) {\n      first ? first = false : this.expect(types.comma);\n      if (allowTrailingComma && this.afterTrailingComma(types.parenR, true)) {\n        lastIsComma = true;\n        break\n      } else if (this.type === types.ellipsis) {\n        spreadStart = this.start;\n        exprList.push(this.parseParenItem(this.parseRestBinding()));\n        if (this.type === types.comma) { this.raise(this.start, \"Comma is not permitted after the rest element\"); }\n        break\n      } else {\n        exprList.push(this.parseMaybeAssign(false, refDestructuringErrors, this.parseParenItem));\n      }\n    }\n    var innerEndPos = this.start, innerEndLoc = this.startLoc;\n    this.expect(types.parenR);\n\n    if (canBeArrow && !this.canInsertSemicolon() && this.eat(types.arrow)) {\n      this.checkPatternErrors(refDestructuringErrors, false);\n      this.checkYieldAwaitInDefaultParams();\n      this.yieldPos = oldYieldPos;\n      this.awaitPos = oldAwaitPos;\n      return this.parseParenArrowList(startPos, startLoc, exprList)\n    }\n\n    if (!exprList.length || lastIsComma) { this.unexpected(this.lastTokStart); }\n    if (spreadStart) { this.unexpected(spreadStart); }\n    this.checkExpressionErrors(refDestructuringErrors, true);\n    this.yieldPos = oldYieldPos || this.yieldPos;\n    this.awaitPos = oldAwaitPos || this.awaitPos;\n\n    if (exprList.length > 1) {\n      val = this.startNodeAt(innerStartPos, innerStartLoc);\n      val.expressions = exprList;\n      this.finishNodeAt(val, \"SequenceExpression\", innerEndPos, innerEndLoc);\n    } else {\n      val = exprList[0];\n    }\n  } else {\n    val = this.parseParenExpression();\n  }\n\n  if (this.options.preserveParens) {\n    var par = this.startNodeAt(startPos, startLoc);\n    par.expression = val;\n    return this.finishNode(par, \"ParenthesizedExpression\")\n  } else {\n    return val\n  }\n};\n\npp$3.parseParenItem = function(item) {\n  return item\n};\n\npp$3.parseParenArrowList = function(startPos, startLoc, exprList) {\n  return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), exprList)\n};\n\n// New's precedence is slightly tricky. It must allow its argument to\n// be a `[]` or dot subscript expression, but not a call — at least,\n// not without wrapping it in parentheses. Thus, it uses the noCalls\n// argument to parseSubscripts to prevent it from consuming the\n// argument list.\n\nvar empty$1 = [];\n\npp$3.parseNew = function() {\n  var node = this.startNode();\n  var meta = this.parseIdent(true);\n  if (this.options.ecmaVersion >= 6 && this.eat(types.dot)) {\n    node.meta = meta;\n    var containsEsc = this.containsEsc;\n    node.property = this.parseIdent(true);\n    if (node.property.name !== \"target\" || containsEsc)\n      { this.raiseRecoverable(node.property.start, \"The only valid meta property for new is new.target\"); }\n    if (!this.inNonArrowFunction())\n      { this.raiseRecoverable(node.start, \"new.target can only be used in functions\"); }\n    return this.finishNode(node, \"MetaProperty\")\n  }\n  var startPos = this.start, startLoc = this.startLoc;\n  node.callee = this.parseSubscripts(this.parseExprAtom(), startPos, startLoc, true);\n  if (this.options.ecmaVersion > 10 && node.callee.type === \"Import\") {\n    this.raise(node.callee.start, \"Cannot use new with import(...)\");\n  }\n  if (this.eat(types.parenL)) { node.arguments = this.parseExprList(types.parenR, this.options.ecmaVersion >= 8 && node.callee.type !== \"Import\", false); }\n  else { node.arguments = empty$1; }\n  return this.finishNode(node, \"NewExpression\")\n};\n\n// Parse template expression.\n\npp$3.parseTemplateElement = function(ref) {\n  var isTagged = ref.isTagged;\n\n  var elem = this.startNode();\n  if (this.type === types.invalidTemplate) {\n    if (!isTagged) {\n      this.raiseRecoverable(this.start, \"Bad escape sequence in untagged template literal\");\n    }\n    elem.value = {\n      raw: this.value,\n      cooked: null\n    };\n  } else {\n    elem.value = {\n      raw: this.input.slice(this.start, this.end).replace(/\\r\\n?/g, \"\\n\"),\n      cooked: this.value\n    };\n  }\n  this.next();\n  elem.tail = this.type === types.backQuote;\n  return this.finishNode(elem, \"TemplateElement\")\n};\n\npp$3.parseTemplate = function(ref) {\n  if ( ref === void 0 ) ref = {};\n  var isTagged = ref.isTagged; if ( isTagged === void 0 ) isTagged = false;\n\n  var node = this.startNode();\n  this.next();\n  node.expressions = [];\n  var curElt = this.parseTemplateElement({isTagged: isTagged});\n  node.quasis = [curElt];\n  while (!curElt.tail) {\n    if (this.type === types.eof) { this.raise(this.pos, \"Unterminated template literal\"); }\n    this.expect(types.dollarBraceL);\n    node.expressions.push(this.parseExpression());\n    this.expect(types.braceR);\n    node.quasis.push(curElt = this.parseTemplateElement({isTagged: isTagged}));\n  }\n  this.next();\n  return this.finishNode(node, \"TemplateLiteral\")\n};\n\npp$3.isAsyncProp = function(prop) {\n  return !prop.computed && prop.key.type === \"Identifier\" && prop.key.name === \"async\" &&\n    (this.type === types.name || this.type === types.num || this.type === types.string || this.type === types.bracketL || this.type.keyword || (this.options.ecmaVersion >= 9 && this.type === types.star)) &&\n    !lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n};\n\n// Parse an object literal or binding pattern.\n\npp$3.parseObj = function(isPattern, refDestructuringErrors) {\n  var node = this.startNode(), first = true, propHash = {};\n  node.properties = [];\n  this.next();\n  while (!this.eat(types.braceR)) {\n    if (!first) {\n      this.expect(types.comma);\n      if (this.afterTrailingComma(types.braceR)) { break }\n    } else { first = false; }\n\n    var prop = this.parseProperty(isPattern, refDestructuringErrors);\n    if (!isPattern) { this.checkPropClash(prop, propHash, refDestructuringErrors); }\n    node.properties.push(prop);\n  }\n  return this.finishNode(node, isPattern ? \"ObjectPattern\" : \"ObjectExpression\")\n};\n\npp$3.parseProperty = function(isPattern, refDestructuringErrors) {\n  var prop = this.startNode(), isGenerator, isAsync, startPos, startLoc;\n  if (this.options.ecmaVersion >= 9 && this.eat(types.ellipsis)) {\n    if (isPattern) {\n      prop.argument = this.parseIdent(false);\n      if (this.type === types.comma) {\n        this.raise(this.start, \"Comma is not permitted after the rest element\");\n      }\n      return this.finishNode(prop, \"RestElement\")\n    }\n    // To disallow parenthesized identifier via `this.toAssignable()`.\n    if (this.type === types.parenL && refDestructuringErrors) {\n      if (refDestructuringErrors.parenthesizedAssign < 0) {\n        refDestructuringErrors.parenthesizedAssign = this.start;\n      }\n      if (refDestructuringErrors.parenthesizedBind < 0) {\n        refDestructuringErrors.parenthesizedBind = this.start;\n      }\n    }\n    // Parse argument.\n    prop.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n    // To disallow trailing comma via `this.toAssignable()`.\n    if (this.type === types.comma && refDestructuringErrors && refDestructuringErrors.trailingComma < 0) {\n      refDestructuringErrors.trailingComma = this.start;\n    }\n    // Finish\n    return this.finishNode(prop, \"SpreadElement\")\n  }\n  if (this.options.ecmaVersion >= 6) {\n    prop.method = false;\n    prop.shorthand = false;\n    if (isPattern || refDestructuringErrors) {\n      startPos = this.start;\n      startLoc = this.startLoc;\n    }\n    if (!isPattern)\n      { isGenerator = this.eat(types.star); }\n  }\n  var containsEsc = this.containsEsc;\n  this.parsePropertyName(prop);\n  if (!isPattern && !containsEsc && this.options.ecmaVersion >= 8 && !isGenerator && this.isAsyncProp(prop)) {\n    isAsync = true;\n    isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n    this.parsePropertyName(prop, refDestructuringErrors);\n  } else {\n    isAsync = false;\n  }\n  this.parsePropertyValue(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc);\n  return this.finishNode(prop, \"Property\")\n};\n\npp$3.parsePropertyValue = function(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc) {\n  if ((isGenerator || isAsync) && this.type === types.colon)\n    { this.unexpected(); }\n\n  if (this.eat(types.colon)) {\n    prop.value = isPattern ? this.parseMaybeDefault(this.start, this.startLoc) : this.parseMaybeAssign(false, refDestructuringErrors);\n    prop.kind = \"init\";\n  } else if (this.options.ecmaVersion >= 6 && this.type === types.parenL) {\n    if (isPattern) { this.unexpected(); }\n    prop.kind = \"init\";\n    prop.method = true;\n    prop.value = this.parseMethod(isGenerator, isAsync);\n  } else if (!isPattern && !containsEsc &&\n             this.options.ecmaVersion >= 5 && !prop.computed && prop.key.type === \"Identifier\" &&\n             (prop.key.name === \"get\" || prop.key.name === \"set\") &&\n             (this.type !== types.comma && this.type !== types.braceR)) {\n    if (isGenerator || isAsync) { this.unexpected(); }\n    prop.kind = prop.key.name;\n    this.parsePropertyName(prop);\n    prop.value = this.parseMethod(false);\n    var paramCount = prop.kind === \"get\" ? 0 : 1;\n    if (prop.value.params.length !== paramCount) {\n      var start = prop.value.start;\n      if (prop.kind === \"get\")\n        { this.raiseRecoverable(start, \"getter should have no params\"); }\n      else\n        { this.raiseRecoverable(start, \"setter should have exactly one param\"); }\n    } else {\n      if (prop.kind === \"set\" && prop.value.params[0].type === \"RestElement\")\n        { this.raiseRecoverable(prop.value.params[0].start, \"Setter cannot use rest params\"); }\n    }\n  } else if (this.options.ecmaVersion >= 6 && !prop.computed && prop.key.type === \"Identifier\") {\n    if (isGenerator || isAsync) { this.unexpected(); }\n    this.checkUnreserved(prop.key);\n    if (prop.key.name === \"await\" && !this.awaitIdentPos)\n      { this.awaitIdentPos = startPos; }\n    prop.kind = \"init\";\n    if (isPattern) {\n      prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n    } else if (this.type === types.eq && refDestructuringErrors) {\n      if (refDestructuringErrors.shorthandAssign < 0)\n        { refDestructuringErrors.shorthandAssign = this.start; }\n      prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n    } else {\n      prop.value = prop.key;\n    }\n    prop.shorthand = true;\n  } else { this.unexpected(); }\n};\n\npp$3.parsePropertyName = function(prop) {\n  if (this.options.ecmaVersion >= 6) {\n    if (this.eat(types.bracketL)) {\n      prop.computed = true;\n      prop.key = this.parseMaybeAssign();\n      this.expect(types.bracketR);\n      return prop.key\n    } else {\n      prop.computed = false;\n    }\n  }\n  return prop.key = this.type === types.num || this.type === types.string ? this.parseExprAtom() : this.parseIdent(this.options.allowReserved !== \"never\")\n};\n\n// Initialize empty function node.\n\npp$3.initFunction = function(node) {\n  node.id = null;\n  if (this.options.ecmaVersion >= 6) { node.generator = node.expression = false; }\n  if (this.options.ecmaVersion >= 8) { node.async = false; }\n};\n\n// Parse object or class method.\n\npp$3.parseMethod = function(isGenerator, isAsync, allowDirectSuper) {\n  var node = this.startNode(), oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 6)\n    { node.generator = isGenerator; }\n  if (this.options.ecmaVersion >= 8)\n    { node.async = !!isAsync; }\n\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.awaitIdentPos = 0;\n  this.enterScope(functionFlags(isAsync, node.generator) | SCOPE_SUPER | (allowDirectSuper ? SCOPE_DIRECT_SUPER : 0));\n\n  this.expect(types.parenL);\n  node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n  this.checkYieldAwaitInDefaultParams();\n  this.parseFunctionBody(node, false, true);\n\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.awaitIdentPos = oldAwaitIdentPos;\n  return this.finishNode(node, \"FunctionExpression\")\n};\n\n// Parse arrow function expression with given parameters.\n\npp$3.parseArrowExpression = function(node, params, isAsync) {\n  var oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n\n  this.enterScope(functionFlags(isAsync, false) | SCOPE_ARROW);\n  this.initFunction(node);\n  if (this.options.ecmaVersion >= 8) { node.async = !!isAsync; }\n\n  this.yieldPos = 0;\n  this.awaitPos = 0;\n  this.awaitIdentPos = 0;\n\n  node.params = this.toAssignableList(params, true);\n  this.parseFunctionBody(node, true, false);\n\n  this.yieldPos = oldYieldPos;\n  this.awaitPos = oldAwaitPos;\n  this.awaitIdentPos = oldAwaitIdentPos;\n  return this.finishNode(node, \"ArrowFunctionExpression\")\n};\n\n// Parse function body and check parameters.\n\npp$3.parseFunctionBody = function(node, isArrowFunction, isMethod) {\n  var isExpression = isArrowFunction && this.type !== types.braceL;\n  var oldStrict = this.strict, useStrict = false;\n\n  if (isExpression) {\n    node.body = this.parseMaybeAssign();\n    node.expression = true;\n    this.checkParams(node, false);\n  } else {\n    var nonSimple = this.options.ecmaVersion >= 7 && !this.isSimpleParamList(node.params);\n    if (!oldStrict || nonSimple) {\n      useStrict = this.strictDirective(this.end);\n      // If this is a strict mode function, verify that argument names\n      // are not repeated, and it does not try to bind the words `eval`\n      // or `arguments`.\n      if (useStrict && nonSimple)\n        { this.raiseRecoverable(node.start, \"Illegal 'use strict' directive in function with non-simple parameter list\"); }\n    }\n    // Start a new scope with regard to labels and the `inFunction`\n    // flag (restore them to their old value afterwards).\n    var oldLabels = this.labels;\n    this.labels = [];\n    if (useStrict) { this.strict = true; }\n\n    // Add the params to varDeclaredNames to ensure that an error is thrown\n    // if a let/const declaration in the function clashes with one of the params.\n    this.checkParams(node, !oldStrict && !useStrict && !isArrowFunction && !isMethod && this.isSimpleParamList(node.params));\n    node.body = this.parseBlock(false);\n    node.expression = false;\n    this.adaptDirectivePrologue(node.body.body);\n    this.labels = oldLabels;\n  }\n  this.exitScope();\n\n  // Ensure the function name isn't a forbidden identifier in strict mode, e.g. 'eval'\n  if (this.strict && node.id) { this.checkLVal(node.id, BIND_OUTSIDE); }\n  this.strict = oldStrict;\n};\n\npp$3.isSimpleParamList = function(params) {\n  for (var i = 0, list = params; i < list.length; i += 1)\n    {\n    var param = list[i];\n\n    if (param.type !== \"Identifier\") { return false\n  } }\n  return true\n};\n\n// Checks function params for various disallowed patterns such as using \"eval\"\n// or \"arguments\" and duplicate parameters.\n\npp$3.checkParams = function(node, allowDuplicates) {\n  var nameHash = {};\n  for (var i = 0, list = node.params; i < list.length; i += 1)\n    {\n    var param = list[i];\n\n    this.checkLVal(param, BIND_VAR, allowDuplicates ? null : nameHash);\n  }\n};\n\n// Parses a comma-separated list of expressions, and returns them as\n// an array. `close` is the token type that ends the list, and\n// `allowEmpty` can be turned on to allow subsequent commas with\n// nothing in between them to be parsed as `null` (which is needed\n// for array literals).\n\npp$3.parseExprList = function(close, allowTrailingComma, allowEmpty, refDestructuringErrors) {\n  var elts = [], first = true;\n  while (!this.eat(close)) {\n    if (!first) {\n      this.expect(types.comma);\n      if (allowTrailingComma && this.afterTrailingComma(close)) { break }\n    } else { first = false; }\n\n    var elt = (void 0);\n    if (allowEmpty && this.type === types.comma)\n      { elt = null; }\n    else if (this.type === types.ellipsis) {\n      elt = this.parseSpread(refDestructuringErrors);\n      if (refDestructuringErrors && this.type === types.comma && refDestructuringErrors.trailingComma < 0)\n        { refDestructuringErrors.trailingComma = this.start; }\n    } else {\n      elt = this.parseMaybeAssign(false, refDestructuringErrors);\n    }\n    elts.push(elt);\n  }\n  return elts\n};\n\npp$3.checkUnreserved = function(ref) {\n  var start = ref.start;\n  var end = ref.end;\n  var name = ref.name;\n\n  if (this.inGenerator && name === \"yield\")\n    { this.raiseRecoverable(start, \"Cannot use 'yield' as identifier inside a generator\"); }\n  if (this.inAsync && name === \"await\")\n    { this.raiseRecoverable(start, \"Cannot use 'await' as identifier inside an async function\"); }\n  if (this.keywords.test(name))\n    { this.raise(start, (\"Unexpected keyword '\" + name + \"'\")); }\n  if (this.options.ecmaVersion < 6 &&\n    this.input.slice(start, end).indexOf(\"\\\\\") !== -1) { return }\n  var re = this.strict ? this.reservedWordsStrict : this.reservedWords;\n  if (re.test(name)) {\n    if (!this.inAsync && name === \"await\")\n      { this.raiseRecoverable(start, \"Cannot use keyword 'await' outside an async function\"); }\n    this.raiseRecoverable(start, (\"The keyword '\" + name + \"' is reserved\"));\n  }\n};\n\n// Parse the next token as an identifier. If `liberal` is true (used\n// when parsing properties), it will also convert keywords into\n// identifiers.\n\npp$3.parseIdent = function(liberal, isBinding) {\n  var node = this.startNode();\n  if (this.type === types.name) {\n    node.name = this.value;\n  } else if (this.type.keyword) {\n    node.name = this.type.keyword;\n\n    // To fix https://github.com/acornjs/acorn/issues/575\n    // `class` and `function` keywords push new context into this.context.\n    // But there is no chance to pop the context if the keyword is consumed as an identifier such as a property name.\n    // If the previous token is a dot, this does not apply because the context-managing code already ignored the keyword\n    if ((node.name === \"class\" || node.name === \"function\") &&\n        (this.lastTokEnd !== this.lastTokStart + 1 || this.input.charCodeAt(this.lastTokStart) !== 46)) {\n      this.context.pop();\n    }\n  } else {\n    this.unexpected();\n  }\n  this.next();\n  this.finishNode(node, \"Identifier\");\n  if (!liberal) {\n    this.checkUnreserved(node);\n    if (node.name === \"await\" && !this.awaitIdentPos)\n      { this.awaitIdentPos = node.start; }\n  }\n  return node\n};\n\n// Parses yield expression inside generator.\n\npp$3.parseYield = function(noIn) {\n  if (!this.yieldPos) { this.yieldPos = this.start; }\n\n  var node = this.startNode();\n  this.next();\n  if (this.type === types.semi || this.canInsertSemicolon() || (this.type !== types.star && !this.type.startsExpr)) {\n    node.delegate = false;\n    node.argument = null;\n  } else {\n    node.delegate = this.eat(types.star);\n    node.argument = this.parseMaybeAssign(noIn);\n  }\n  return this.finishNode(node, \"YieldExpression\")\n};\n\npp$3.parseAwait = function() {\n  if (!this.awaitPos) { this.awaitPos = this.start; }\n\n  var node = this.startNode();\n  this.next();\n  node.argument = this.parseMaybeUnary(null, true);\n  return this.finishNode(node, \"AwaitExpression\")\n};\n\nvar pp$4 = Parser.prototype;\n\n// This function is used to raise exceptions on parse errors. It\n// takes an offset integer (into the current `input`) to indicate\n// the location of the error, attaches the position to the end\n// of the error message, and then raises a `SyntaxError` with that\n// message.\n\npp$4.raise = function(pos, message) {\n  var loc = getLineInfo(this.input, pos);\n  message += \" (\" + loc.line + \":\" + loc.column + \")\";\n  var err = new SyntaxError(message);\n  err.pos = pos; err.loc = loc; err.raisedAt = this.pos;\n  throw err\n};\n\npp$4.raiseRecoverable = pp$4.raise;\n\npp$4.curPosition = function() {\n  if (this.options.locations) {\n    return new Position(this.curLine, this.pos - this.lineStart)\n  }\n};\n\nvar pp$5 = Parser.prototype;\n\nvar Scope = function Scope(flags) {\n  this.flags = flags;\n  // A list of var-declared names in the current lexical scope\n  this.var = [];\n  // A list of lexically-declared names in the current lexical scope\n  this.lexical = [];\n  // A list of lexically-declared FunctionDeclaration names in the current lexical scope\n  this.functions = [];\n};\n\n// The functions in this module keep track of declared variables in the current scope in order to detect duplicate variable names.\n\npp$5.enterScope = function(flags) {\n  this.scopeStack.push(new Scope(flags));\n};\n\npp$5.exitScope = function() {\n  this.scopeStack.pop();\n};\n\n// The spec says:\n// > At the top level of a function, or script, function declarations are\n// > treated like var declarations rather than like lexical declarations.\npp$5.treatFunctionsAsVarInScope = function(scope) {\n  return (scope.flags & SCOPE_FUNCTION) || !this.inModule && (scope.flags & SCOPE_TOP)\n};\n\npp$5.declareName = function(name, bindingType, pos) {\n  var redeclared = false;\n  if (bindingType === BIND_LEXICAL) {\n    var scope = this.currentScope();\n    redeclared = scope.lexical.indexOf(name) > -1 || scope.functions.indexOf(name) > -1 || scope.var.indexOf(name) > -1;\n    scope.lexical.push(name);\n    if (this.inModule && (scope.flags & SCOPE_TOP))\n      { delete this.undefinedExports[name]; }\n  } else if (bindingType === BIND_SIMPLE_CATCH) {\n    var scope$1 = this.currentScope();\n    scope$1.lexical.push(name);\n  } else if (bindingType === BIND_FUNCTION) {\n    var scope$2 = this.currentScope();\n    if (this.treatFunctionsAsVar)\n      { redeclared = scope$2.lexical.indexOf(name) > -1; }\n    else\n      { redeclared = scope$2.lexical.indexOf(name) > -1 || scope$2.var.indexOf(name) > -1; }\n    scope$2.functions.push(name);\n  } else {\n    for (var i = this.scopeStack.length - 1; i >= 0; --i) {\n      var scope$3 = this.scopeStack[i];\n      if (scope$3.lexical.indexOf(name) > -1 && !((scope$3.flags & SCOPE_SIMPLE_CATCH) && scope$3.lexical[0] === name) ||\n          !this.treatFunctionsAsVarInScope(scope$3) && scope$3.functions.indexOf(name) > -1) {\n        redeclared = true;\n        break\n      }\n      scope$3.var.push(name);\n      if (this.inModule && (scope$3.flags & SCOPE_TOP))\n        { delete this.undefinedExports[name]; }\n      if (scope$3.flags & SCOPE_VAR) { break }\n    }\n  }\n  if (redeclared) { this.raiseRecoverable(pos, (\"Identifier '\" + name + \"' has already been declared\")); }\n};\n\npp$5.checkLocalExport = function(id) {\n  // scope.functions must be empty as Module code is always strict.\n  if (this.scopeStack[0].lexical.indexOf(id.name) === -1 &&\n      this.scopeStack[0].var.indexOf(id.name) === -1) {\n    this.undefinedExports[id.name] = id;\n  }\n};\n\npp$5.currentScope = function() {\n  return this.scopeStack[this.scopeStack.length - 1]\n};\n\npp$5.currentVarScope = function() {\n  for (var i = this.scopeStack.length - 1;; i--) {\n    var scope = this.scopeStack[i];\n    if (scope.flags & SCOPE_VAR) { return scope }\n  }\n};\n\n// Could be useful for `this`, `new.target`, `super()`, `super.property`, and `super[property]`.\npp$5.currentThisScope = function() {\n  for (var i = this.scopeStack.length - 1;; i--) {\n    var scope = this.scopeStack[i];\n    if (scope.flags & SCOPE_VAR && !(scope.flags & SCOPE_ARROW)) { return scope }\n  }\n};\n\nvar Node = function Node(parser, pos, loc) {\n  this.type = \"\";\n  this.start = pos;\n  this.end = 0;\n  if (parser.options.locations)\n    { this.loc = new SourceLocation(parser, loc); }\n  if (parser.options.directSourceFile)\n    { this.sourceFile = parser.options.directSourceFile; }\n  if (parser.options.ranges)\n    { this.range = [pos, 0]; }\n};\n\n// Start an AST node, attaching a start offset.\n\nvar pp$6 = Parser.prototype;\n\npp$6.startNode = function() {\n  return new Node(this, this.start, this.startLoc)\n};\n\npp$6.startNodeAt = function(pos, loc) {\n  return new Node(this, pos, loc)\n};\n\n// Finish an AST node, adding `type` and `end` properties.\n\nfunction finishNodeAt(node, type, pos, loc) {\n  node.type = type;\n  node.end = pos;\n  if (this.options.locations)\n    { node.loc.end = loc; }\n  if (this.options.ranges)\n    { node.range[1] = pos; }\n  return node\n}\n\npp$6.finishNode = function(node, type) {\n  return finishNodeAt.call(this, node, type, this.lastTokEnd, this.lastTokEndLoc)\n};\n\n// Finish node at given position\n\npp$6.finishNodeAt = function(node, type, pos, loc) {\n  return finishNodeAt.call(this, node, type, pos, loc)\n};\n\n// The algorithm used to determine whether a regexp can appear at a\n\nvar TokContext = function TokContext(token, isExpr, preserveSpace, override, generator) {\n  this.token = token;\n  this.isExpr = !!isExpr;\n  this.preserveSpace = !!preserveSpace;\n  this.override = override;\n  this.generator = !!generator;\n};\n\nvar types$1 = {\n  b_stat: new TokContext(\"{\", false),\n  b_expr: new TokContext(\"{\", true),\n  b_tmpl: new TokContext(\"${\", false),\n  p_stat: new TokContext(\"(\", false),\n  p_expr: new TokContext(\"(\", true),\n  q_tmpl: new TokContext(\"`\", true, true, function (p) { return p.tryReadTemplateToken(); }),\n  f_stat: new TokContext(\"function\", false),\n  f_expr: new TokContext(\"function\", true),\n  f_expr_gen: new TokContext(\"function\", true, false, null, true),\n  f_gen: new TokContext(\"function\", false, false, null, true)\n};\n\nvar pp$7 = Parser.prototype;\n\npp$7.initialContext = function() {\n  return [types$1.b_stat]\n};\n\npp$7.braceIsBlock = function(prevType) {\n  var parent = this.curContext();\n  if (parent === types$1.f_expr || parent === types$1.f_stat)\n    { return true }\n  if (prevType === types.colon && (parent === types$1.b_stat || parent === types$1.b_expr))\n    { return !parent.isExpr }\n\n  // The check for `tt.name && exprAllowed` detects whether we are\n  // after a `yield` or `of` construct. See the `updateContext` for\n  // `tt.name`.\n  if (prevType === types._return || prevType === types.name && this.exprAllowed)\n    { return lineBreak.test(this.input.slice(this.lastTokEnd, this.start)) }\n  if (prevType === types._else || prevType === types.semi || prevType === types.eof || prevType === types.parenR || prevType === types.arrow)\n    { return true }\n  if (prevType === types.braceL)\n    { return parent === types$1.b_stat }\n  if (prevType === types._var || prevType === types._const || prevType === types.name)\n    { return false }\n  return !this.exprAllowed\n};\n\npp$7.inGeneratorContext = function() {\n  for (var i = this.context.length - 1; i >= 1; i--) {\n    var context = this.context[i];\n    if (context.token === \"function\")\n      { return context.generator }\n  }\n  return false\n};\n\npp$7.updateContext = function(prevType) {\n  var update, type = this.type;\n  if (type.keyword && prevType === types.dot)\n    { this.exprAllowed = false; }\n  else if (update = type.updateContext)\n    { update.call(this, prevType); }\n  else\n    { this.exprAllowed = type.beforeExpr; }\n};\n\n// Token-specific context update code\n\ntypes.parenR.updateContext = types.braceR.updateContext = function() {\n  if (this.context.length === 1) {\n    this.exprAllowed = true;\n    return\n  }\n  var out = this.context.pop();\n  if (out === types$1.b_stat && this.curContext().token === \"function\") {\n    out = this.context.pop();\n  }\n  this.exprAllowed = !out.isExpr;\n};\n\ntypes.braceL.updateContext = function(prevType) {\n  this.context.push(this.braceIsBlock(prevType) ? types$1.b_stat : types$1.b_expr);\n  this.exprAllowed = true;\n};\n\ntypes.dollarBraceL.updateContext = function() {\n  this.context.push(types$1.b_tmpl);\n  this.exprAllowed = true;\n};\n\ntypes.parenL.updateContext = function(prevType) {\n  var statementParens = prevType === types._if || prevType === types._for || prevType === types._with || prevType === types._while;\n  this.context.push(statementParens ? types$1.p_stat : types$1.p_expr);\n  this.exprAllowed = true;\n};\n\ntypes.incDec.updateContext = function() {\n  // tokExprAllowed stays unchanged\n};\n\ntypes._function.updateContext = types._class.updateContext = function(prevType) {\n  if (prevType.beforeExpr && prevType !== types.semi && prevType !== types._else &&\n      !(prevType === types._return && lineBreak.test(this.input.slice(this.lastTokEnd, this.start))) &&\n      !((prevType === types.colon || prevType === types.braceL) && this.curContext() === types$1.b_stat))\n    { this.context.push(types$1.f_expr); }\n  else\n    { this.context.push(types$1.f_stat); }\n  this.exprAllowed = false;\n};\n\ntypes.backQuote.updateContext = function() {\n  if (this.curContext() === types$1.q_tmpl)\n    { this.context.pop(); }\n  else\n    { this.context.push(types$1.q_tmpl); }\n  this.exprAllowed = false;\n};\n\ntypes.star.updateContext = function(prevType) {\n  if (prevType === types._function) {\n    var index = this.context.length - 1;\n    if (this.context[index] === types$1.f_expr)\n      { this.context[index] = types$1.f_expr_gen; }\n    else\n      { this.context[index] = types$1.f_gen; }\n  }\n  this.exprAllowed = true;\n};\n\ntypes.name.updateContext = function(prevType) {\n  var allowed = false;\n  if (this.options.ecmaVersion >= 6 && prevType !== types.dot) {\n    if (this.value === \"of\" && !this.exprAllowed ||\n        this.value === \"yield\" && this.inGeneratorContext())\n      { allowed = true; }\n  }\n  this.exprAllowed = allowed;\n};\n\n// This file contains Unicode properties extracted from the ECMAScript\n// specification. The lists are extracted like so:\n// $$('#table-binary-unicode-properties > figure > table > tbody > tr > td:nth-child(1) code').map(el => el.innerText)\n\n// #table-binary-unicode-properties\nvar ecma9BinaryProperties = \"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS\";\nvar ecma10BinaryProperties = ecma9BinaryProperties + \" Extended_Pictographic\";\nvar ecma11BinaryProperties = ecma10BinaryProperties;\nvar unicodeBinaryProperties = {\n  9: ecma9BinaryProperties,\n  10: ecma10BinaryProperties,\n  11: ecma11BinaryProperties\n};\n\n// #table-unicode-general-category-values\nvar unicodeGeneralCategoryValues = \"Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu\";\n\n// #table-unicode-script-values\nvar ecma9ScriptValues = \"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb\";\nvar ecma10ScriptValues = ecma9ScriptValues + \" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd\";\nvar ecma11ScriptValues = ecma10ScriptValues + \" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho\";\nvar unicodeScriptValues = {\n  9: ecma9ScriptValues,\n  10: ecma10ScriptValues,\n  11: ecma11ScriptValues\n};\n\nvar data = {};\nfunction buildUnicodeData(ecmaVersion) {\n  var d = data[ecmaVersion] = {\n    binary: wordsRegexp(unicodeBinaryProperties[ecmaVersion] + \" \" + unicodeGeneralCategoryValues),\n    nonBinary: {\n      General_Category: wordsRegexp(unicodeGeneralCategoryValues),\n      Script: wordsRegexp(unicodeScriptValues[ecmaVersion])\n    }\n  };\n  d.nonBinary.Script_Extensions = d.nonBinary.Script;\n\n  d.nonBinary.gc = d.nonBinary.General_Category;\n  d.nonBinary.sc = d.nonBinary.Script;\n  d.nonBinary.scx = d.nonBinary.Script_Extensions;\n}\nbuildUnicodeData(9);\nbuildUnicodeData(10);\nbuildUnicodeData(11);\n\nvar pp$8 = Parser.prototype;\n\nvar RegExpValidationState = function RegExpValidationState(parser) {\n  this.parser = parser;\n  this.validFlags = \"gim\" + (parser.options.ecmaVersion >= 6 ? \"uy\" : \"\") + (parser.options.ecmaVersion >= 9 ? \"s\" : \"\");\n  this.unicodeProperties = data[parser.options.ecmaVersion >= 11 ? 11 : parser.options.ecmaVersion];\n  this.source = \"\";\n  this.flags = \"\";\n  this.start = 0;\n  this.switchU = false;\n  this.switchN = false;\n  this.pos = 0;\n  this.lastIntValue = 0;\n  this.lastStringValue = \"\";\n  this.lastAssertionIsQuantifiable = false;\n  this.numCapturingParens = 0;\n  this.maxBackReference = 0;\n  this.groupNames = [];\n  this.backReferenceNames = [];\n};\n\nRegExpValidationState.prototype.reset = function reset (start, pattern, flags) {\n  var unicode = flags.indexOf(\"u\") !== -1;\n  this.start = start | 0;\n  this.source = pattern + \"\";\n  this.flags = flags;\n  this.switchU = unicode && this.parser.options.ecmaVersion >= 6;\n  this.switchN = unicode && this.parser.options.ecmaVersion >= 9;\n};\n\nRegExpValidationState.prototype.raise = function raise (message) {\n  this.parser.raiseRecoverable(this.start, (\"Invalid regular expression: /\" + (this.source) + \"/: \" + message));\n};\n\n// If u flag is given, this returns the code point at the index (it combines a surrogate pair).\n// Otherwise, this returns the code unit of the index (can be a part of a surrogate pair).\nRegExpValidationState.prototype.at = function at (i) {\n  var s = this.source;\n  var l = s.length;\n  if (i >= l) {\n    return -1\n  }\n  var c = s.charCodeAt(i);\n  if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l) {\n    return c\n  }\n  var next = s.charCodeAt(i + 1);\n  return next >= 0xDC00 && next <= 0xDFFF ? (c << 10) + next - 0x35FDC00 : c\n};\n\nRegExpValidationState.prototype.nextIndex = function nextIndex (i) {\n  var s = this.source;\n  var l = s.length;\n  if (i >= l) {\n    return l\n  }\n  var c = s.charCodeAt(i), next;\n  if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l ||\n      (next = s.charCodeAt(i + 1)) < 0xDC00 || next > 0xDFFF) {\n    return i + 1\n  }\n  return i + 2\n};\n\nRegExpValidationState.prototype.current = function current () {\n  return this.at(this.pos)\n};\n\nRegExpValidationState.prototype.lookahead = function lookahead () {\n  return this.at(this.nextIndex(this.pos))\n};\n\nRegExpValidationState.prototype.advance = function advance () {\n  this.pos = this.nextIndex(this.pos);\n};\n\nRegExpValidationState.prototype.eat = function eat (ch) {\n  if (this.current() === ch) {\n    this.advance();\n    return true\n  }\n  return false\n};\n\nfunction codePointToString(ch) {\n  if (ch <= 0xFFFF) { return String.fromCharCode(ch) }\n  ch -= 0x10000;\n  return String.fromCharCode((ch >> 10) + 0xD800, (ch & 0x03FF) + 0xDC00)\n}\n\n/**\n * Validate the flags part of a given RegExpLiteral.\n *\n * @param {RegExpValidationState} state The state to validate RegExp.\n * @returns {void}\n */\npp$8.validateRegExpFlags = function(state) {\n  var validFlags = state.validFlags;\n  var flags = state.flags;\n\n  for (var i = 0; i < flags.length; i++) {\n    var flag = flags.charAt(i);\n    if (validFlags.indexOf(flag) === -1) {\n      this.raise(state.start, \"Invalid regular expression flag\");\n    }\n    if (flags.indexOf(flag, i + 1) > -1) {\n      this.raise(state.start, \"Duplicate regular expression flag\");\n    }\n  }\n};\n\n/**\n * Validate the pattern part of a given RegExpLiteral.\n *\n * @param {RegExpValidationState} state The state to validate RegExp.\n * @returns {void}\n */\npp$8.validateRegExpPattern = function(state) {\n  this.regexp_pattern(state);\n\n  // The goal symbol for the parse is |Pattern[~U, ~N]|. If the result of\n  // parsing contains a |GroupName|, reparse with the goal symbol\n  // |Pattern[~U, +N]| and use this result instead. Throw a *SyntaxError*\n  // exception if _P_ did not conform to the grammar, if any elements of _P_\n  // were not matched by the parse, or if any Early Error conditions exist.\n  if (!state.switchN && this.options.ecmaVersion >= 9 && state.groupNames.length > 0) {\n    state.switchN = true;\n    this.regexp_pattern(state);\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Pattern\npp$8.regexp_pattern = function(state) {\n  state.pos = 0;\n  state.lastIntValue = 0;\n  state.lastStringValue = \"\";\n  state.lastAssertionIsQuantifiable = false;\n  state.numCapturingParens = 0;\n  state.maxBackReference = 0;\n  state.groupNames.length = 0;\n  state.backReferenceNames.length = 0;\n\n  this.regexp_disjunction(state);\n\n  if (state.pos !== state.source.length) {\n    // Make the same messages as V8.\n    if (state.eat(0x29 /* ) */)) {\n      state.raise(\"Unmatched ')'\");\n    }\n    if (state.eat(0x5D /* [ */) || state.eat(0x7D /* } */)) {\n      state.raise(\"Lone quantifier brackets\");\n    }\n  }\n  if (state.maxBackReference > state.numCapturingParens) {\n    state.raise(\"Invalid escape\");\n  }\n  for (var i = 0, list = state.backReferenceNames; i < list.length; i += 1) {\n    var name = list[i];\n\n    if (state.groupNames.indexOf(name) === -1) {\n      state.raise(\"Invalid named capture referenced\");\n    }\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Disjunction\npp$8.regexp_disjunction = function(state) {\n  this.regexp_alternative(state);\n  while (state.eat(0x7C /* | */)) {\n    this.regexp_alternative(state);\n  }\n\n  // Make the same message as V8.\n  if (this.regexp_eatQuantifier(state, true)) {\n    state.raise(\"Nothing to repeat\");\n  }\n  if (state.eat(0x7B /* { */)) {\n    state.raise(\"Lone quantifier brackets\");\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Alternative\npp$8.regexp_alternative = function(state) {\n  while (state.pos < state.source.length && this.regexp_eatTerm(state))\n    { }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-Term\npp$8.regexp_eatTerm = function(state) {\n  if (this.regexp_eatAssertion(state)) {\n    // Handle `QuantifiableAssertion Quantifier` alternative.\n    // `state.lastAssertionIsQuantifiable` is true if the last eaten Assertion\n    // is a QuantifiableAssertion.\n    if (state.lastAssertionIsQuantifiable && this.regexp_eatQuantifier(state)) {\n      // Make the same message as V8.\n      if (state.switchU) {\n        state.raise(\"Invalid quantifier\");\n      }\n    }\n    return true\n  }\n\n  if (state.switchU ? this.regexp_eatAtom(state) : this.regexp_eatExtendedAtom(state)) {\n    this.regexp_eatQuantifier(state);\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-Assertion\npp$8.regexp_eatAssertion = function(state) {\n  var start = state.pos;\n  state.lastAssertionIsQuantifiable = false;\n\n  // ^, $\n  if (state.eat(0x5E /* ^ */) || state.eat(0x24 /* $ */)) {\n    return true\n  }\n\n  // \\b \\B\n  if (state.eat(0x5C /* \\ */)) {\n    if (state.eat(0x42 /* B */) || state.eat(0x62 /* b */)) {\n      return true\n    }\n    state.pos = start;\n  }\n\n  // Lookahead / Lookbehind\n  if (state.eat(0x28 /* ( */) && state.eat(0x3F /* ? */)) {\n    var lookbehind = false;\n    if (this.options.ecmaVersion >= 9) {\n      lookbehind = state.eat(0x3C /* < */);\n    }\n    if (state.eat(0x3D /* = */) || state.eat(0x21 /* ! */)) {\n      this.regexp_disjunction(state);\n      if (!state.eat(0x29 /* ) */)) {\n        state.raise(\"Unterminated group\");\n      }\n      state.lastAssertionIsQuantifiable = !lookbehind;\n      return true\n    }\n  }\n\n  state.pos = start;\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Quantifier\npp$8.regexp_eatQuantifier = function(state, noError) {\n  if ( noError === void 0 ) noError = false;\n\n  if (this.regexp_eatQuantifierPrefix(state, noError)) {\n    state.eat(0x3F /* ? */);\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-QuantifierPrefix\npp$8.regexp_eatQuantifierPrefix = function(state, noError) {\n  return (\n    state.eat(0x2A /* * */) ||\n    state.eat(0x2B /* + */) ||\n    state.eat(0x3F /* ? */) ||\n    this.regexp_eatBracedQuantifier(state, noError)\n  )\n};\npp$8.regexp_eatBracedQuantifier = function(state, noError) {\n  var start = state.pos;\n  if (state.eat(0x7B /* { */)) {\n    var min = 0, max = -1;\n    if (this.regexp_eatDecimalDigits(state)) {\n      min = state.lastIntValue;\n      if (state.eat(0x2C /* , */) && this.regexp_eatDecimalDigits(state)) {\n        max = state.lastIntValue;\n      }\n      if (state.eat(0x7D /* } */)) {\n        // SyntaxError in https://www.ecma-international.org/ecma-262/8.0/#sec-term\n        if (max !== -1 && max < min && !noError) {\n          state.raise(\"numbers out of order in {} quantifier\");\n        }\n        return true\n      }\n    }\n    if (state.switchU && !noError) {\n      state.raise(\"Incomplete quantifier\");\n    }\n    state.pos = start;\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Atom\npp$8.regexp_eatAtom = function(state) {\n  return (\n    this.regexp_eatPatternCharacters(state) ||\n    state.eat(0x2E /* . */) ||\n    this.regexp_eatReverseSolidusAtomEscape(state) ||\n    this.regexp_eatCharacterClass(state) ||\n    this.regexp_eatUncapturingGroup(state) ||\n    this.regexp_eatCapturingGroup(state)\n  )\n};\npp$8.regexp_eatReverseSolidusAtomEscape = function(state) {\n  var start = state.pos;\n  if (state.eat(0x5C /* \\ */)) {\n    if (this.regexp_eatAtomEscape(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$8.regexp_eatUncapturingGroup = function(state) {\n  var start = state.pos;\n  if (state.eat(0x28 /* ( */)) {\n    if (state.eat(0x3F /* ? */) && state.eat(0x3A /* : */)) {\n      this.regexp_disjunction(state);\n      if (state.eat(0x29 /* ) */)) {\n        return true\n      }\n      state.raise(\"Unterminated group\");\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$8.regexp_eatCapturingGroup = function(state) {\n  if (state.eat(0x28 /* ( */)) {\n    if (this.options.ecmaVersion >= 9) {\n      this.regexp_groupSpecifier(state);\n    } else if (state.current() === 0x3F /* ? */) {\n      state.raise(\"Invalid group\");\n    }\n    this.regexp_disjunction(state);\n    if (state.eat(0x29 /* ) */)) {\n      state.numCapturingParens += 1;\n      return true\n    }\n    state.raise(\"Unterminated group\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ExtendedAtom\npp$8.regexp_eatExtendedAtom = function(state) {\n  return (\n    state.eat(0x2E /* . */) ||\n    this.regexp_eatReverseSolidusAtomEscape(state) ||\n    this.regexp_eatCharacterClass(state) ||\n    this.regexp_eatUncapturingGroup(state) ||\n    this.regexp_eatCapturingGroup(state) ||\n    this.regexp_eatInvalidBracedQuantifier(state) ||\n    this.regexp_eatExtendedPatternCharacter(state)\n  )\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-InvalidBracedQuantifier\npp$8.regexp_eatInvalidBracedQuantifier = function(state) {\n  if (this.regexp_eatBracedQuantifier(state, true)) {\n    state.raise(\"Nothing to repeat\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-SyntaxCharacter\npp$8.regexp_eatSyntaxCharacter = function(state) {\n  var ch = state.current();\n  if (isSyntaxCharacter(ch)) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n  return false\n};\nfunction isSyntaxCharacter(ch) {\n  return (\n    ch === 0x24 /* $ */ ||\n    ch >= 0x28 /* ( */ && ch <= 0x2B /* + */ ||\n    ch === 0x2E /* . */ ||\n    ch === 0x3F /* ? */ ||\n    ch >= 0x5B /* [ */ && ch <= 0x5E /* ^ */ ||\n    ch >= 0x7B /* { */ && ch <= 0x7D /* } */\n  )\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-PatternCharacter\n// But eat eager.\npp$8.regexp_eatPatternCharacters = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  while ((ch = state.current()) !== -1 && !isSyntaxCharacter(ch)) {\n    state.advance();\n  }\n  return state.pos !== start\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ExtendedPatternCharacter\npp$8.regexp_eatExtendedPatternCharacter = function(state) {\n  var ch = state.current();\n  if (\n    ch !== -1 &&\n    ch !== 0x24 /* $ */ &&\n    !(ch >= 0x28 /* ( */ && ch <= 0x2B /* + */) &&\n    ch !== 0x2E /* . */ &&\n    ch !== 0x3F /* ? */ &&\n    ch !== 0x5B /* [ */ &&\n    ch !== 0x5E /* ^ */ &&\n    ch !== 0x7C /* | */\n  ) {\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// GroupSpecifier[U] ::\n//   [empty]\n//   `?` GroupName[?U]\npp$8.regexp_groupSpecifier = function(state) {\n  if (state.eat(0x3F /* ? */)) {\n    if (this.regexp_eatGroupName(state)) {\n      if (state.groupNames.indexOf(state.lastStringValue) !== -1) {\n        state.raise(\"Duplicate capture group name\");\n      }\n      state.groupNames.push(state.lastStringValue);\n      return\n    }\n    state.raise(\"Invalid group\");\n  }\n};\n\n// GroupName[U] ::\n//   `<` RegExpIdentifierName[?U] `>`\n// Note: this updates `state.lastStringValue` property with the eaten name.\npp$8.regexp_eatGroupName = function(state) {\n  state.lastStringValue = \"\";\n  if (state.eat(0x3C /* < */)) {\n    if (this.regexp_eatRegExpIdentifierName(state) && state.eat(0x3E /* > */)) {\n      return true\n    }\n    state.raise(\"Invalid capture group name\");\n  }\n  return false\n};\n\n// RegExpIdentifierName[U] ::\n//   RegExpIdentifierStart[?U]\n//   RegExpIdentifierName[?U] RegExpIdentifierPart[?U]\n// Note: this updates `state.lastStringValue` property with the eaten name.\npp$8.regexp_eatRegExpIdentifierName = function(state) {\n  state.lastStringValue = \"\";\n  if (this.regexp_eatRegExpIdentifierStart(state)) {\n    state.lastStringValue += codePointToString(state.lastIntValue);\n    while (this.regexp_eatRegExpIdentifierPart(state)) {\n      state.lastStringValue += codePointToString(state.lastIntValue);\n    }\n    return true\n  }\n  return false\n};\n\n// RegExpIdentifierStart[U] ::\n//   UnicodeIDStart\n//   `$`\n//   `_`\n//   `\\` RegExpUnicodeEscapeSequence[?U]\npp$8.regexp_eatRegExpIdentifierStart = function(state) {\n  var start = state.pos;\n  var ch = state.current();\n  state.advance();\n\n  if (ch === 0x5C /* \\ */ && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n    ch = state.lastIntValue;\n  }\n  if (isRegExpIdentifierStart(ch)) {\n    state.lastIntValue = ch;\n    return true\n  }\n\n  state.pos = start;\n  return false\n};\nfunction isRegExpIdentifierStart(ch) {\n  return isIdentifierStart(ch, true) || ch === 0x24 /* $ */ || ch === 0x5F /* _ */\n}\n\n// RegExpIdentifierPart[U] ::\n//   UnicodeIDContinue\n//   `$`\n//   `_`\n//   `\\` RegExpUnicodeEscapeSequence[?U]\n//   <ZWNJ>\n//   <ZWJ>\npp$8.regexp_eatRegExpIdentifierPart = function(state) {\n  var start = state.pos;\n  var ch = state.current();\n  state.advance();\n\n  if (ch === 0x5C /* \\ */ && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n    ch = state.lastIntValue;\n  }\n  if (isRegExpIdentifierPart(ch)) {\n    state.lastIntValue = ch;\n    return true\n  }\n\n  state.pos = start;\n  return false\n};\nfunction isRegExpIdentifierPart(ch) {\n  return isIdentifierChar(ch, true) || ch === 0x24 /* $ */ || ch === 0x5F /* _ */ || ch === 0x200C /* <ZWNJ> */ || ch === 0x200D /* <ZWJ> */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-AtomEscape\npp$8.regexp_eatAtomEscape = function(state) {\n  if (\n    this.regexp_eatBackReference(state) ||\n    this.regexp_eatCharacterClassEscape(state) ||\n    this.regexp_eatCharacterEscape(state) ||\n    (state.switchN && this.regexp_eatKGroupName(state))\n  ) {\n    return true\n  }\n  if (state.switchU) {\n    // Make the same message as V8.\n    if (state.current() === 0x63 /* c */) {\n      state.raise(\"Invalid unicode escape\");\n    }\n    state.raise(\"Invalid escape\");\n  }\n  return false\n};\npp$8.regexp_eatBackReference = function(state) {\n  var start = state.pos;\n  if (this.regexp_eatDecimalEscape(state)) {\n    var n = state.lastIntValue;\n    if (state.switchU) {\n      // For SyntaxError in https://www.ecma-international.org/ecma-262/8.0/#sec-atomescape\n      if (n > state.maxBackReference) {\n        state.maxBackReference = n;\n      }\n      return true\n    }\n    if (n <= state.numCapturingParens) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$8.regexp_eatKGroupName = function(state) {\n  if (state.eat(0x6B /* k */)) {\n    if (this.regexp_eatGroupName(state)) {\n      state.backReferenceNames.push(state.lastStringValue);\n      return true\n    }\n    state.raise(\"Invalid named reference\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-CharacterEscape\npp$8.regexp_eatCharacterEscape = function(state) {\n  return (\n    this.regexp_eatControlEscape(state) ||\n    this.regexp_eatCControlLetter(state) ||\n    this.regexp_eatZero(state) ||\n    this.regexp_eatHexEscapeSequence(state) ||\n    this.regexp_eatRegExpUnicodeEscapeSequence(state) ||\n    (!state.switchU && this.regexp_eatLegacyOctalEscapeSequence(state)) ||\n    this.regexp_eatIdentityEscape(state)\n  )\n};\npp$8.regexp_eatCControlLetter = function(state) {\n  var start = state.pos;\n  if (state.eat(0x63 /* c */)) {\n    if (this.regexp_eatControlLetter(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n  return false\n};\npp$8.regexp_eatZero = function(state) {\n  if (state.current() === 0x30 /* 0 */ && !isDecimalDigit(state.lookahead())) {\n    state.lastIntValue = 0;\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ControlEscape\npp$8.regexp_eatControlEscape = function(state) {\n  var ch = state.current();\n  if (ch === 0x74 /* t */) {\n    state.lastIntValue = 0x09; /* \\t */\n    state.advance();\n    return true\n  }\n  if (ch === 0x6E /* n */) {\n    state.lastIntValue = 0x0A; /* \\n */\n    state.advance();\n    return true\n  }\n  if (ch === 0x76 /* v */) {\n    state.lastIntValue = 0x0B; /* \\v */\n    state.advance();\n    return true\n  }\n  if (ch === 0x66 /* f */) {\n    state.lastIntValue = 0x0C; /* \\f */\n    state.advance();\n    return true\n  }\n  if (ch === 0x72 /* r */) {\n    state.lastIntValue = 0x0D; /* \\r */\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ControlLetter\npp$8.regexp_eatControlLetter = function(state) {\n  var ch = state.current();\n  if (isControlLetter(ch)) {\n    state.lastIntValue = ch % 0x20;\n    state.advance();\n    return true\n  }\n  return false\n};\nfunction isControlLetter(ch) {\n  return (\n    (ch >= 0x41 /* A */ && ch <= 0x5A /* Z */) ||\n    (ch >= 0x61 /* a */ && ch <= 0x7A /* z */)\n  )\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-RegExpUnicodeEscapeSequence\npp$8.regexp_eatRegExpUnicodeEscapeSequence = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x75 /* u */)) {\n    if (this.regexp_eatFixedHexDigits(state, 4)) {\n      var lead = state.lastIntValue;\n      if (state.switchU && lead >= 0xD800 && lead <= 0xDBFF) {\n        var leadSurrogateEnd = state.pos;\n        if (state.eat(0x5C /* \\ */) && state.eat(0x75 /* u */) && this.regexp_eatFixedHexDigits(state, 4)) {\n          var trail = state.lastIntValue;\n          if (trail >= 0xDC00 && trail <= 0xDFFF) {\n            state.lastIntValue = (lead - 0xD800) * 0x400 + (trail - 0xDC00) + 0x10000;\n            return true\n          }\n        }\n        state.pos = leadSurrogateEnd;\n        state.lastIntValue = lead;\n      }\n      return true\n    }\n    if (\n      state.switchU &&\n      state.eat(0x7B /* { */) &&\n      this.regexp_eatHexDigits(state) &&\n      state.eat(0x7D /* } */) &&\n      isValidUnicode(state.lastIntValue)\n    ) {\n      return true\n    }\n    if (state.switchU) {\n      state.raise(\"Invalid unicode escape\");\n    }\n    state.pos = start;\n  }\n\n  return false\n};\nfunction isValidUnicode(ch) {\n  return ch >= 0 && ch <= 0x10FFFF\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-IdentityEscape\npp$8.regexp_eatIdentityEscape = function(state) {\n  if (state.switchU) {\n    if (this.regexp_eatSyntaxCharacter(state)) {\n      return true\n    }\n    if (state.eat(0x2F /* / */)) {\n      state.lastIntValue = 0x2F; /* / */\n      return true\n    }\n    return false\n  }\n\n  var ch = state.current();\n  if (ch !== 0x63 /* c */ && (!state.switchN || ch !== 0x6B /* k */)) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-DecimalEscape\npp$8.regexp_eatDecimalEscape = function(state) {\n  state.lastIntValue = 0;\n  var ch = state.current();\n  if (ch >= 0x31 /* 1 */ && ch <= 0x39 /* 9 */) {\n    do {\n      state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 /* 0 */);\n      state.advance();\n    } while ((ch = state.current()) >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */)\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-CharacterClassEscape\npp$8.regexp_eatCharacterClassEscape = function(state) {\n  var ch = state.current();\n\n  if (isCharacterClassEscape(ch)) {\n    state.lastIntValue = -1;\n    state.advance();\n    return true\n  }\n\n  if (\n    state.switchU &&\n    this.options.ecmaVersion >= 9 &&\n    (ch === 0x50 /* P */ || ch === 0x70 /* p */)\n  ) {\n    state.lastIntValue = -1;\n    state.advance();\n    if (\n      state.eat(0x7B /* { */) &&\n      this.regexp_eatUnicodePropertyValueExpression(state) &&\n      state.eat(0x7D /* } */)\n    ) {\n      return true\n    }\n    state.raise(\"Invalid property name\");\n  }\n\n  return false\n};\nfunction isCharacterClassEscape(ch) {\n  return (\n    ch === 0x64 /* d */ ||\n    ch === 0x44 /* D */ ||\n    ch === 0x73 /* s */ ||\n    ch === 0x53 /* S */ ||\n    ch === 0x77 /* w */ ||\n    ch === 0x57 /* W */\n  )\n}\n\n// UnicodePropertyValueExpression ::\n//   UnicodePropertyName `=` UnicodePropertyValue\n//   LoneUnicodePropertyNameOrValue\npp$8.regexp_eatUnicodePropertyValueExpression = function(state) {\n  var start = state.pos;\n\n  // UnicodePropertyName `=` UnicodePropertyValue\n  if (this.regexp_eatUnicodePropertyName(state) && state.eat(0x3D /* = */)) {\n    var name = state.lastStringValue;\n    if (this.regexp_eatUnicodePropertyValue(state)) {\n      var value = state.lastStringValue;\n      this.regexp_validateUnicodePropertyNameAndValue(state, name, value);\n      return true\n    }\n  }\n  state.pos = start;\n\n  // LoneUnicodePropertyNameOrValue\n  if (this.regexp_eatLoneUnicodePropertyNameOrValue(state)) {\n    var nameOrValue = state.lastStringValue;\n    this.regexp_validateUnicodePropertyNameOrValue(state, nameOrValue);\n    return true\n  }\n  return false\n};\npp$8.regexp_validateUnicodePropertyNameAndValue = function(state, name, value) {\n  if (!has(state.unicodeProperties.nonBinary, name))\n    { state.raise(\"Invalid property name\"); }\n  if (!state.unicodeProperties.nonBinary[name].test(value))\n    { state.raise(\"Invalid property value\"); }\n};\npp$8.regexp_validateUnicodePropertyNameOrValue = function(state, nameOrValue) {\n  if (!state.unicodeProperties.binary.test(nameOrValue))\n    { state.raise(\"Invalid property name\"); }\n};\n\n// UnicodePropertyName ::\n//   UnicodePropertyNameCharacters\npp$8.regexp_eatUnicodePropertyName = function(state) {\n  var ch = 0;\n  state.lastStringValue = \"\";\n  while (isUnicodePropertyNameCharacter(ch = state.current())) {\n    state.lastStringValue += codePointToString(ch);\n    state.advance();\n  }\n  return state.lastStringValue !== \"\"\n};\nfunction isUnicodePropertyNameCharacter(ch) {\n  return isControlLetter(ch) || ch === 0x5F /* _ */\n}\n\n// UnicodePropertyValue ::\n//   UnicodePropertyValueCharacters\npp$8.regexp_eatUnicodePropertyValue = function(state) {\n  var ch = 0;\n  state.lastStringValue = \"\";\n  while (isUnicodePropertyValueCharacter(ch = state.current())) {\n    state.lastStringValue += codePointToString(ch);\n    state.advance();\n  }\n  return state.lastStringValue !== \"\"\n};\nfunction isUnicodePropertyValueCharacter(ch) {\n  return isUnicodePropertyNameCharacter(ch) || isDecimalDigit(ch)\n}\n\n// LoneUnicodePropertyNameOrValue ::\n//   UnicodePropertyValueCharacters\npp$8.regexp_eatLoneUnicodePropertyNameOrValue = function(state) {\n  return this.regexp_eatUnicodePropertyValue(state)\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-CharacterClass\npp$8.regexp_eatCharacterClass = function(state) {\n  if (state.eat(0x5B /* [ */)) {\n    state.eat(0x5E /* ^ */);\n    this.regexp_classRanges(state);\n    if (state.eat(0x5D /* [ */)) {\n      return true\n    }\n    // Unreachable since it threw \"unterminated regular expression\" error before.\n    state.raise(\"Unterminated character class\");\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassRanges\n// https://www.ecma-international.org/ecma-262/8.0/#prod-NonemptyClassRanges\n// https://www.ecma-international.org/ecma-262/8.0/#prod-NonemptyClassRangesNoDash\npp$8.regexp_classRanges = function(state) {\n  while (this.regexp_eatClassAtom(state)) {\n    var left = state.lastIntValue;\n    if (state.eat(0x2D /* - */) && this.regexp_eatClassAtom(state)) {\n      var right = state.lastIntValue;\n      if (state.switchU && (left === -1 || right === -1)) {\n        state.raise(\"Invalid character class\");\n      }\n      if (left !== -1 && right !== -1 && left > right) {\n        state.raise(\"Range out of order in character class\");\n      }\n    }\n  }\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassAtom\n// https://www.ecma-international.org/ecma-262/8.0/#prod-ClassAtomNoDash\npp$8.regexp_eatClassAtom = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x5C /* \\ */)) {\n    if (this.regexp_eatClassEscape(state)) {\n      return true\n    }\n    if (state.switchU) {\n      // Make the same message as V8.\n      var ch$1 = state.current();\n      if (ch$1 === 0x63 /* c */ || isOctalDigit(ch$1)) {\n        state.raise(\"Invalid class escape\");\n      }\n      state.raise(\"Invalid escape\");\n    }\n    state.pos = start;\n  }\n\n  var ch = state.current();\n  if (ch !== 0x5D /* [ */) {\n    state.lastIntValue = ch;\n    state.advance();\n    return true\n  }\n\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ClassEscape\npp$8.regexp_eatClassEscape = function(state) {\n  var start = state.pos;\n\n  if (state.eat(0x62 /* b */)) {\n    state.lastIntValue = 0x08; /* <BS> */\n    return true\n  }\n\n  if (state.switchU && state.eat(0x2D /* - */)) {\n    state.lastIntValue = 0x2D; /* - */\n    return true\n  }\n\n  if (!state.switchU && state.eat(0x63 /* c */)) {\n    if (this.regexp_eatClassControlLetter(state)) {\n      return true\n    }\n    state.pos = start;\n  }\n\n  return (\n    this.regexp_eatCharacterClassEscape(state) ||\n    this.regexp_eatCharacterEscape(state)\n  )\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-ClassControlLetter\npp$8.regexp_eatClassControlLetter = function(state) {\n  var ch = state.current();\n  if (isDecimalDigit(ch) || ch === 0x5F /* _ */) {\n    state.lastIntValue = ch % 0x20;\n    state.advance();\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexEscapeSequence\npp$8.regexp_eatHexEscapeSequence = function(state) {\n  var start = state.pos;\n  if (state.eat(0x78 /* x */)) {\n    if (this.regexp_eatFixedHexDigits(state, 2)) {\n      return true\n    }\n    if (state.switchU) {\n      state.raise(\"Invalid escape\");\n    }\n    state.pos = start;\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-DecimalDigits\npp$8.regexp_eatDecimalDigits = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  state.lastIntValue = 0;\n  while (isDecimalDigit(ch = state.current())) {\n    state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 /* 0 */);\n    state.advance();\n  }\n  return state.pos !== start\n};\nfunction isDecimalDigit(ch) {\n  return ch >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexDigits\npp$8.regexp_eatHexDigits = function(state) {\n  var start = state.pos;\n  var ch = 0;\n  state.lastIntValue = 0;\n  while (isHexDigit(ch = state.current())) {\n    state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n    state.advance();\n  }\n  return state.pos !== start\n};\nfunction isHexDigit(ch) {\n  return (\n    (ch >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */) ||\n    (ch >= 0x41 /* A */ && ch <= 0x46 /* F */) ||\n    (ch >= 0x61 /* a */ && ch <= 0x66 /* f */)\n  )\n}\nfunction hexToInt(ch) {\n  if (ch >= 0x41 /* A */ && ch <= 0x46 /* F */) {\n    return 10 + (ch - 0x41 /* A */)\n  }\n  if (ch >= 0x61 /* a */ && ch <= 0x66 /* f */) {\n    return 10 + (ch - 0x61 /* a */)\n  }\n  return ch - 0x30 /* 0 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-annexB-LegacyOctalEscapeSequence\n// Allows only 0-377(octal) i.e. 0-255(decimal).\npp$8.regexp_eatLegacyOctalEscapeSequence = function(state) {\n  if (this.regexp_eatOctalDigit(state)) {\n    var n1 = state.lastIntValue;\n    if (this.regexp_eatOctalDigit(state)) {\n      var n2 = state.lastIntValue;\n      if (n1 <= 3 && this.regexp_eatOctalDigit(state)) {\n        state.lastIntValue = n1 * 64 + n2 * 8 + state.lastIntValue;\n      } else {\n        state.lastIntValue = n1 * 8 + n2;\n      }\n    } else {\n      state.lastIntValue = n1;\n    }\n    return true\n  }\n  return false\n};\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-OctalDigit\npp$8.regexp_eatOctalDigit = function(state) {\n  var ch = state.current();\n  if (isOctalDigit(ch)) {\n    state.lastIntValue = ch - 0x30; /* 0 */\n    state.advance();\n    return true\n  }\n  state.lastIntValue = 0;\n  return false\n};\nfunction isOctalDigit(ch) {\n  return ch >= 0x30 /* 0 */ && ch <= 0x37 /* 7 */\n}\n\n// https://www.ecma-international.org/ecma-262/8.0/#prod-Hex4Digits\n// https://www.ecma-international.org/ecma-262/8.0/#prod-HexDigit\n// And HexDigit HexDigit in https://www.ecma-international.org/ecma-262/8.0/#prod-HexEscapeSequence\npp$8.regexp_eatFixedHexDigits = function(state, length) {\n  var start = state.pos;\n  state.lastIntValue = 0;\n  for (var i = 0; i < length; ++i) {\n    var ch = state.current();\n    if (!isHexDigit(ch)) {\n      state.pos = start;\n      return false\n    }\n    state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n    state.advance();\n  }\n  return true\n};\n\n// Object type used to represent tokens. Note that normally, tokens\n// simply exist as properties on the parser object. This is only\n// used for the onToken callback and the external tokenizer.\n\nvar Token = function Token(p) {\n  this.type = p.type;\n  this.value = p.value;\n  this.start = p.start;\n  this.end = p.end;\n  if (p.options.locations)\n    { this.loc = new SourceLocation(p, p.startLoc, p.endLoc); }\n  if (p.options.ranges)\n    { this.range = [p.start, p.end]; }\n};\n\n// ## Tokenizer\n\nvar pp$9 = Parser.prototype;\n\n// Move to the next token\n\npp$9.next = function() {\n  if (this.options.onToken)\n    { this.options.onToken(new Token(this)); }\n\n  this.lastTokEnd = this.end;\n  this.lastTokStart = this.start;\n  this.lastTokEndLoc = this.endLoc;\n  this.lastTokStartLoc = this.startLoc;\n  this.nextToken();\n};\n\npp$9.getToken = function() {\n  this.next();\n  return new Token(this)\n};\n\n// If we're in an ES6 environment, make parsers iterable\nif (typeof Symbol !== \"undefined\")\n  { pp$9[Symbol.iterator] = function() {\n    var this$1 = this;\n\n    return {\n      next: function () {\n        var token = this$1.getToken();\n        return {\n          done: token.type === types.eof,\n          value: token\n        }\n      }\n    }\n  }; }\n\n// Toggle strict mode. Re-reads the next number or string to please\n// pedantic tests (`\"use strict\"; 010;` should fail).\n\npp$9.curContext = function() {\n  return this.context[this.context.length - 1]\n};\n\n// Read a single token, updating the parser object's token-related\n// properties.\n\npp$9.nextToken = function() {\n  var curContext = this.curContext();\n  if (!curContext || !curContext.preserveSpace) { this.skipSpace(); }\n\n  this.start = this.pos;\n  if (this.options.locations) { this.startLoc = this.curPosition(); }\n  if (this.pos >= this.input.length) { return this.finishToken(types.eof) }\n\n  if (curContext.override) { return curContext.override(this) }\n  else { this.readToken(this.fullCharCodeAtPos()); }\n};\n\npp$9.readToken = function(code) {\n  // Identifier or keyword. '\\uXXXX' sequences are allowed in\n  // identifiers, so '\\' also dispatches to that.\n  if (isIdentifierStart(code, this.options.ecmaVersion >= 6) || code === 92 /* '\\' */)\n    { return this.readWord() }\n\n  return this.getTokenFromCode(code)\n};\n\npp$9.fullCharCodeAtPos = function() {\n  var code = this.input.charCodeAt(this.pos);\n  if (code <= 0xd7ff || code >= 0xe000) { return code }\n  var next = this.input.charCodeAt(this.pos + 1);\n  return (code << 10) + next - 0x35fdc00\n};\n\npp$9.skipBlockComment = function() {\n  var startLoc = this.options.onComment && this.curPosition();\n  var start = this.pos, end = this.input.indexOf(\"*/\", this.pos += 2);\n  if (end === -1) { this.raise(this.pos - 2, \"Unterminated comment\"); }\n  this.pos = end + 2;\n  if (this.options.locations) {\n    lineBreakG.lastIndex = start;\n    var match;\n    while ((match = lineBreakG.exec(this.input)) && match.index < this.pos) {\n      ++this.curLine;\n      this.lineStart = match.index + match[0].length;\n    }\n  }\n  if (this.options.onComment)\n    { this.options.onComment(true, this.input.slice(start + 2, end), start, this.pos,\n                           startLoc, this.curPosition()); }\n};\n\npp$9.skipLineComment = function(startSkip) {\n  var start = this.pos;\n  var startLoc = this.options.onComment && this.curPosition();\n  var ch = this.input.charCodeAt(this.pos += startSkip);\n  while (this.pos < this.input.length && !isNewLine(ch)) {\n    ch = this.input.charCodeAt(++this.pos);\n  }\n  if (this.options.onComment)\n    { this.options.onComment(false, this.input.slice(start + startSkip, this.pos), start, this.pos,\n                           startLoc, this.curPosition()); }\n};\n\n// Called at the start of the parse and after every token. Skips\n// whitespace and comments, and.\n\npp$9.skipSpace = function() {\n  loop: while (this.pos < this.input.length) {\n    var ch = this.input.charCodeAt(this.pos);\n    switch (ch) {\n    case 32: case 160: // ' '\n      ++this.pos;\n      break\n    case 13:\n      if (this.input.charCodeAt(this.pos + 1) === 10) {\n        ++this.pos;\n      }\n    case 10: case 8232: case 8233:\n      ++this.pos;\n      if (this.options.locations) {\n        ++this.curLine;\n        this.lineStart = this.pos;\n      }\n      break\n    case 47: // '/'\n      switch (this.input.charCodeAt(this.pos + 1)) {\n      case 42: // '*'\n        this.skipBlockComment();\n        break\n      case 47:\n        this.skipLineComment(2);\n        break\n      default:\n        break loop\n      }\n      break\n    default:\n      if (ch > 8 && ch < 14 || ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n        ++this.pos;\n      } else {\n        break loop\n      }\n    }\n  }\n};\n\n// Called at the end of every token. Sets `end`, `val`, and\n// maintains `context` and `exprAllowed`, and skips the space after\n// the token, so that the next one's `start` will point at the\n// right position.\n\npp$9.finishToken = function(type, val) {\n  this.end = this.pos;\n  if (this.options.locations) { this.endLoc = this.curPosition(); }\n  var prevType = this.type;\n  this.type = type;\n  this.value = val;\n\n  this.updateContext(prevType);\n};\n\n// ### Token reading\n\n// This is the function that is called to fetch the next token. It\n// is somewhat obscure, because it works in character codes rather\n// than characters, and because operator parsing has been inlined\n// into it.\n//\n// All in the name of speed.\n//\npp$9.readToken_dot = function() {\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next >= 48 && next <= 57) { return this.readNumber(true) }\n  var next2 = this.input.charCodeAt(this.pos + 2);\n  if (this.options.ecmaVersion >= 6 && next === 46 && next2 === 46) { // 46 = dot '.'\n    this.pos += 3;\n    return this.finishToken(types.ellipsis)\n  } else {\n    ++this.pos;\n    return this.finishToken(types.dot)\n  }\n};\n\npp$9.readToken_slash = function() { // '/'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (this.exprAllowed) { ++this.pos; return this.readRegexp() }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.slash, 1)\n};\n\npp$9.readToken_mult_modulo_exp = function(code) { // '%*'\n  var next = this.input.charCodeAt(this.pos + 1);\n  var size = 1;\n  var tokentype = code === 42 ? types.star : types.modulo;\n\n  // exponentiation operator ** and **=\n  if (this.options.ecmaVersion >= 7 && code === 42 && next === 42) {\n    ++size;\n    tokentype = types.starstar;\n    next = this.input.charCodeAt(this.pos + 2);\n  }\n\n  if (next === 61) { return this.finishOp(types.assign, size + 1) }\n  return this.finishOp(tokentype, size)\n};\n\npp$9.readToken_pipe_amp = function(code) { // '|&'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === code) { return this.finishOp(code === 124 ? types.logicalOR : types.logicalAND, 2) }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(code === 124 ? types.bitwiseOR : types.bitwiseAND, 1)\n};\n\npp$9.readToken_caret = function() { // '^'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.bitwiseXOR, 1)\n};\n\npp$9.readToken_plus_min = function(code) { // '+-'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === code) {\n    if (next === 45 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 62 &&\n        (this.lastTokEnd === 0 || lineBreak.test(this.input.slice(this.lastTokEnd, this.pos)))) {\n      // A `-->` line comment\n      this.skipLineComment(3);\n      this.skipSpace();\n      return this.nextToken()\n    }\n    return this.finishOp(types.incDec, 2)\n  }\n  if (next === 61) { return this.finishOp(types.assign, 2) }\n  return this.finishOp(types.plusMin, 1)\n};\n\npp$9.readToken_lt_gt = function(code) { // '<>'\n  var next = this.input.charCodeAt(this.pos + 1);\n  var size = 1;\n  if (next === code) {\n    size = code === 62 && this.input.charCodeAt(this.pos + 2) === 62 ? 3 : 2;\n    if (this.input.charCodeAt(this.pos + size) === 61) { return this.finishOp(types.assign, size + 1) }\n    return this.finishOp(types.bitShift, size)\n  }\n  if (next === 33 && code === 60 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 45 &&\n      this.input.charCodeAt(this.pos + 3) === 45) {\n    // `<!--`, an XML-style comment that should be interpreted as a line comment\n    this.skipLineComment(4);\n    this.skipSpace();\n    return this.nextToken()\n  }\n  if (next === 61) { size = 2; }\n  return this.finishOp(types.relational, size)\n};\n\npp$9.readToken_eq_excl = function(code) { // '=!'\n  var next = this.input.charCodeAt(this.pos + 1);\n  if (next === 61) { return this.finishOp(types.equality, this.input.charCodeAt(this.pos + 2) === 61 ? 3 : 2) }\n  if (code === 61 && next === 62 && this.options.ecmaVersion >= 6) { // '=>'\n    this.pos += 2;\n    return this.finishToken(types.arrow)\n  }\n  return this.finishOp(code === 61 ? types.eq : types.prefix, 1)\n};\n\npp$9.getTokenFromCode = function(code) {\n  switch (code) {\n  // The interpretation of a dot depends on whether it is followed\n  // by a digit or another two dots.\n  case 46: // '.'\n    return this.readToken_dot()\n\n  // Punctuation tokens.\n  case 40: ++this.pos; return this.finishToken(types.parenL)\n  case 41: ++this.pos; return this.finishToken(types.parenR)\n  case 59: ++this.pos; return this.finishToken(types.semi)\n  case 44: ++this.pos; return this.finishToken(types.comma)\n  case 91: ++this.pos; return this.finishToken(types.bracketL)\n  case 93: ++this.pos; return this.finishToken(types.bracketR)\n  case 123: ++this.pos; return this.finishToken(types.braceL)\n  case 125: ++this.pos; return this.finishToken(types.braceR)\n  case 58: ++this.pos; return this.finishToken(types.colon)\n  case 63: ++this.pos; return this.finishToken(types.question)\n\n  case 96: // '`'\n    if (this.options.ecmaVersion < 6) { break }\n    ++this.pos;\n    return this.finishToken(types.backQuote)\n\n  case 48: // '0'\n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === 120 || next === 88) { return this.readRadixNumber(16) } // '0x', '0X' - hex number\n    if (this.options.ecmaVersion >= 6) {\n      if (next === 111 || next === 79) { return this.readRadixNumber(8) } // '0o', '0O' - octal number\n      if (next === 98 || next === 66) { return this.readRadixNumber(2) } // '0b', '0B' - binary number\n    }\n\n  // Anything else beginning with a digit is an integer, octal\n  // number, or float.\n  case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: // 1-9\n    return this.readNumber(false)\n\n  // Quotes produce strings.\n  case 34: case 39: // '\"', \"'\"\n    return this.readString(code)\n\n  // Operators are parsed inline in tiny state machines. '=' (61) is\n  // often referred to. `finishOp` simply skips the amount of\n  // characters it is given as second argument, and returns a token\n  // of the type given by its first argument.\n\n  case 47: // '/'\n    return this.readToken_slash()\n\n  case 37: case 42: // '%*'\n    return this.readToken_mult_modulo_exp(code)\n\n  case 124: case 38: // '|&'\n    return this.readToken_pipe_amp(code)\n\n  case 94: // '^'\n    return this.readToken_caret()\n\n  case 43: case 45: // '+-'\n    return this.readToken_plus_min(code)\n\n  case 60: case 62: // '<>'\n    return this.readToken_lt_gt(code)\n\n  case 61: case 33: // '=!'\n    return this.readToken_eq_excl(code)\n\n  case 126: // '~'\n    return this.finishOp(types.prefix, 1)\n  }\n\n  this.raise(this.pos, \"Unexpected character '\" + codePointToString$1(code) + \"'\");\n};\n\npp$9.finishOp = function(type, size) {\n  var str = this.input.slice(this.pos, this.pos + size);\n  this.pos += size;\n  return this.finishToken(type, str)\n};\n\npp$9.readRegexp = function() {\n  var escaped, inClass, start = this.pos;\n  for (;;) {\n    if (this.pos >= this.input.length) { this.raise(start, \"Unterminated regular expression\"); }\n    var ch = this.input.charAt(this.pos);\n    if (lineBreak.test(ch)) { this.raise(start, \"Unterminated regular expression\"); }\n    if (!escaped) {\n      if (ch === \"[\") { inClass = true; }\n      else if (ch === \"]\" && inClass) { inClass = false; }\n      else if (ch === \"/\" && !inClass) { break }\n      escaped = ch === \"\\\\\";\n    } else { escaped = false; }\n    ++this.pos;\n  }\n  var pattern = this.input.slice(start, this.pos);\n  ++this.pos;\n  var flagsStart = this.pos;\n  var flags = this.readWord1();\n  if (this.containsEsc) { this.unexpected(flagsStart); }\n\n  // Validate pattern\n  var state = this.regexpState || (this.regexpState = new RegExpValidationState(this));\n  state.reset(start, pattern, flags);\n  this.validateRegExpFlags(state);\n  this.validateRegExpPattern(state);\n\n  // Create Literal#value property value.\n  var value = null;\n  try {\n    value = new RegExp(pattern, flags);\n  } catch (e) {\n    // ESTree requires null if it failed to instantiate RegExp object.\n    // https://github.com/estree/estree/blob/a27003adf4fd7bfad44de9cef372a2eacd527b1c/es5.md#regexpliteral\n  }\n\n  return this.finishToken(types.regexp, {pattern: pattern, flags: flags, value: value})\n};\n\n// Read an integer in the given radix. Return null if zero digits\n// were read, the integer value otherwise. When `len` is given, this\n// will return `null` unless the integer has exactly `len` digits.\n\npp$9.readInt = function(radix, len) {\n  var start = this.pos, total = 0;\n  for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n    var code = this.input.charCodeAt(this.pos), val = (void 0);\n    if (code >= 97) { val = code - 97 + 10; } // a\n    else if (code >= 65) { val = code - 65 + 10; } // A\n    else if (code >= 48 && code <= 57) { val = code - 48; } // 0-9\n    else { val = Infinity; }\n    if (val >= radix) { break }\n    ++this.pos;\n    total = total * radix + val;\n  }\n  if (this.pos === start || len != null && this.pos - start !== len) { return null }\n\n  return total\n};\n\npp$9.readRadixNumber = function(radix) {\n  var start = this.pos;\n  this.pos += 2; // 0x\n  var val = this.readInt(radix);\n  if (val == null) { this.raise(this.start + 2, \"Expected number in radix \" + radix); }\n  if (this.options.ecmaVersion >= 11 && this.input.charCodeAt(this.pos) === 110) {\n    val = typeof BigInt !== \"undefined\" ? BigInt(this.input.slice(start, this.pos)) : null;\n    ++this.pos;\n  } else if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n  return this.finishToken(types.num, val)\n};\n\n// Read an integer, octal integer, or floating-point number.\n\npp$9.readNumber = function(startsWithDot) {\n  var start = this.pos;\n  if (!startsWithDot && this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n  var octal = this.pos - start >= 2 && this.input.charCodeAt(start) === 48;\n  if (octal && this.strict) { this.raise(start, \"Invalid number\"); }\n  if (octal && /[89]/.test(this.input.slice(start, this.pos))) { octal = false; }\n  var next = this.input.charCodeAt(this.pos);\n  if (!octal && !startsWithDot && this.options.ecmaVersion >= 11 && next === 110) {\n    var str$1 = this.input.slice(start, this.pos);\n    var val$1 = typeof BigInt !== \"undefined\" ? BigInt(str$1) : null;\n    ++this.pos;\n    if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n    return this.finishToken(types.num, val$1)\n  }\n  if (next === 46 && !octal) { // '.'\n    ++this.pos;\n    this.readInt(10);\n    next = this.input.charCodeAt(this.pos);\n  }\n  if ((next === 69 || next === 101) && !octal) { // 'eE'\n    next = this.input.charCodeAt(++this.pos);\n    if (next === 43 || next === 45) { ++this.pos; } // '+-'\n    if (this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n  }\n  if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n\n  var str = this.input.slice(start, this.pos);\n  var val = octal ? parseInt(str, 8) : parseFloat(str);\n  return this.finishToken(types.num, val)\n};\n\n// Read a string value, interpreting backslash-escapes.\n\npp$9.readCodePoint = function() {\n  var ch = this.input.charCodeAt(this.pos), code;\n\n  if (ch === 123) { // '{'\n    if (this.options.ecmaVersion < 6) { this.unexpected(); }\n    var codePos = ++this.pos;\n    code = this.readHexChar(this.input.indexOf(\"}\", this.pos) - this.pos);\n    ++this.pos;\n    if (code > 0x10FFFF) { this.invalidStringToken(codePos, \"Code point out of bounds\"); }\n  } else {\n    code = this.readHexChar(4);\n  }\n  return code\n};\n\nfunction codePointToString$1(code) {\n  // UTF-16 Decoding\n  if (code <= 0xFFFF) { return String.fromCharCode(code) }\n  code -= 0x10000;\n  return String.fromCharCode((code >> 10) + 0xD800, (code & 1023) + 0xDC00)\n}\n\npp$9.readString = function(quote) {\n  var out = \"\", chunkStart = ++this.pos;\n  for (;;) {\n    if (this.pos >= this.input.length) { this.raise(this.start, \"Unterminated string constant\"); }\n    var ch = this.input.charCodeAt(this.pos);\n    if (ch === quote) { break }\n    if (ch === 92) { // '\\'\n      out += this.input.slice(chunkStart, this.pos);\n      out += this.readEscapedChar(false);\n      chunkStart = this.pos;\n    } else {\n      if (isNewLine(ch, this.options.ecmaVersion >= 10)) { this.raise(this.start, \"Unterminated string constant\"); }\n      ++this.pos;\n    }\n  }\n  out += this.input.slice(chunkStart, this.pos++);\n  return this.finishToken(types.string, out)\n};\n\n// Reads template string tokens.\n\nvar INVALID_TEMPLATE_ESCAPE_ERROR = {};\n\npp$9.tryReadTemplateToken = function() {\n  this.inTemplateElement = true;\n  try {\n    this.readTmplToken();\n  } catch (err) {\n    if (err === INVALID_TEMPLATE_ESCAPE_ERROR) {\n      this.readInvalidTemplateToken();\n    } else {\n      throw err\n    }\n  }\n\n  this.inTemplateElement = false;\n};\n\npp$9.invalidStringToken = function(position, message) {\n  if (this.inTemplateElement && this.options.ecmaVersion >= 9) {\n    throw INVALID_TEMPLATE_ESCAPE_ERROR\n  } else {\n    this.raise(position, message);\n  }\n};\n\npp$9.readTmplToken = function() {\n  var out = \"\", chunkStart = this.pos;\n  for (;;) {\n    if (this.pos >= this.input.length) { this.raise(this.start, \"Unterminated template\"); }\n    var ch = this.input.charCodeAt(this.pos);\n    if (ch === 96 || ch === 36 && this.input.charCodeAt(this.pos + 1) === 123) { // '`', '${'\n      if (this.pos === this.start && (this.type === types.template || this.type === types.invalidTemplate)) {\n        if (ch === 36) {\n          this.pos += 2;\n          return this.finishToken(types.dollarBraceL)\n        } else {\n          ++this.pos;\n          return this.finishToken(types.backQuote)\n        }\n      }\n      out += this.input.slice(chunkStart, this.pos);\n      return this.finishToken(types.template, out)\n    }\n    if (ch === 92) { // '\\'\n      out += this.input.slice(chunkStart, this.pos);\n      out += this.readEscapedChar(true);\n      chunkStart = this.pos;\n    } else if (isNewLine(ch)) {\n      out += this.input.slice(chunkStart, this.pos);\n      ++this.pos;\n      switch (ch) {\n      case 13:\n        if (this.input.charCodeAt(this.pos) === 10) { ++this.pos; }\n      case 10:\n        out += \"\\n\";\n        break\n      default:\n        out += String.fromCharCode(ch);\n        break\n      }\n      if (this.options.locations) {\n        ++this.curLine;\n        this.lineStart = this.pos;\n      }\n      chunkStart = this.pos;\n    } else {\n      ++this.pos;\n    }\n  }\n};\n\n// Reads a template token to search for the end, without validating any escape sequences\npp$9.readInvalidTemplateToken = function() {\n  for (; this.pos < this.input.length; this.pos++) {\n    switch (this.input[this.pos]) {\n    case \"\\\\\":\n      ++this.pos;\n      break\n\n    case \"$\":\n      if (this.input[this.pos + 1] !== \"{\") {\n        break\n      }\n    // falls through\n\n    case \"`\":\n      return this.finishToken(types.invalidTemplate, this.input.slice(this.start, this.pos))\n\n    // no default\n    }\n  }\n  this.raise(this.start, \"Unterminated template\");\n};\n\n// Used to read escaped characters\n\npp$9.readEscapedChar = function(inTemplate) {\n  var ch = this.input.charCodeAt(++this.pos);\n  ++this.pos;\n  switch (ch) {\n  case 110: return \"\\n\" // 'n' -> '\\n'\n  case 114: return \"\\r\" // 'r' -> '\\r'\n  case 120: return String.fromCharCode(this.readHexChar(2)) // 'x'\n  case 117: return codePointToString$1(this.readCodePoint()) // 'u'\n  case 116: return \"\\t\" // 't' -> '\\t'\n  case 98: return \"\\b\" // 'b' -> '\\b'\n  case 118: return \"\\u000b\" // 'v' -> '\\u000b'\n  case 102: return \"\\f\" // 'f' -> '\\f'\n  case 13: if (this.input.charCodeAt(this.pos) === 10) { ++this.pos; } // '\\r\\n'\n  case 10: // ' \\n'\n    if (this.options.locations) { this.lineStart = this.pos; ++this.curLine; }\n    return \"\"\n  default:\n    if (ch >= 48 && ch <= 55) {\n      var octalStr = this.input.substr(this.pos - 1, 3).match(/^[0-7]+/)[0];\n      var octal = parseInt(octalStr, 8);\n      if (octal > 255) {\n        octalStr = octalStr.slice(0, -1);\n        octal = parseInt(octalStr, 8);\n      }\n      this.pos += octalStr.length - 1;\n      ch = this.input.charCodeAt(this.pos);\n      if ((octalStr !== \"0\" || ch === 56 || ch === 57) && (this.strict || inTemplate)) {\n        this.invalidStringToken(\n          this.pos - 1 - octalStr.length,\n          inTemplate\n            ? \"Octal literal in template string\"\n            : \"Octal literal in strict mode\"\n        );\n      }\n      return String.fromCharCode(octal)\n    }\n    if (isNewLine(ch)) {\n      // Unicode new line characters after \\ get removed from output in both\n      // template literals and strings\n      return \"\"\n    }\n    return String.fromCharCode(ch)\n  }\n};\n\n// Used to read character escape sequences ('\\x', '\\u', '\\U').\n\npp$9.readHexChar = function(len) {\n  var codePos = this.pos;\n  var n = this.readInt(16, len);\n  if (n === null) { this.invalidStringToken(codePos, \"Bad character escape sequence\"); }\n  return n\n};\n\n// Read an identifier, and return it as a string. Sets `this.containsEsc`\n// to whether the word contained a '\\u' escape.\n//\n// Incrementally adds only escaped chars, adding other chunks as-is\n// as a micro-optimization.\n\npp$9.readWord1 = function() {\n  this.containsEsc = false;\n  var word = \"\", first = true, chunkStart = this.pos;\n  var astral = this.options.ecmaVersion >= 6;\n  while (this.pos < this.input.length) {\n    var ch = this.fullCharCodeAtPos();\n    if (isIdentifierChar(ch, astral)) {\n      this.pos += ch <= 0xffff ? 1 : 2;\n    } else if (ch === 92) { // \"\\\"\n      this.containsEsc = true;\n      word += this.input.slice(chunkStart, this.pos);\n      var escStart = this.pos;\n      if (this.input.charCodeAt(++this.pos) !== 117) // \"u\"\n        { this.invalidStringToken(this.pos, \"Expecting Unicode escape sequence \\\\uXXXX\"); }\n      ++this.pos;\n      var esc = this.readCodePoint();\n      if (!(first ? isIdentifierStart : isIdentifierChar)(esc, astral))\n        { this.invalidStringToken(escStart, \"Invalid Unicode escape\"); }\n      word += codePointToString$1(esc);\n      chunkStart = this.pos;\n    } else {\n      break\n    }\n    first = false;\n  }\n  return word + this.input.slice(chunkStart, this.pos)\n};\n\n// Read an identifier or keyword token. Will check for reserved\n// words when necessary.\n\npp$9.readWord = function() {\n  var word = this.readWord1();\n  var type = types.name;\n  if (this.keywords.test(word)) {\n    if (this.containsEsc) { this.raiseRecoverable(this.start, \"Escape sequence in keyword \" + word); }\n    type = keywords$1[word];\n  }\n  return this.finishToken(type, word)\n};\n\n// Acorn is a tiny, fast JavaScript parser written in JavaScript.\n\nvar version = \"6.4.2\";\n\nParser.acorn = {\n  Parser: Parser,\n  version: version,\n  defaultOptions: defaultOptions,\n  Position: Position,\n  SourceLocation: SourceLocation,\n  getLineInfo: getLineInfo,\n  Node: Node,\n  TokenType: TokenType,\n  tokTypes: types,\n  keywordTypes: keywords$1,\n  TokContext: TokContext,\n  tokContexts: types$1,\n  isIdentifierChar: isIdentifierChar,\n  isIdentifierStart: isIdentifierStart,\n  Token: Token,\n  isNewLine: isNewLine,\n  lineBreak: lineBreak,\n  lineBreakG: lineBreakG,\n  nonASCIIwhitespace: nonASCIIwhitespace\n};\n\n// The main exported interface (under `self.acorn` when in the\n// browser) is a `parse` function that takes a code string and\n// returns an abstract syntax tree as specified by [Mozilla parser\n// API][api].\n//\n// [api]: https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API\n\nfunction parse(input, options) {\n  return Parser.parse(input, options)\n}\n\n// This function tries to parse a single expression at a given\n// offset in a string. Useful for parsing mixed-language formats\n// that embed JavaScript expressions.\n\nfunction parseExpressionAt(input, pos, options) {\n  return Parser.parseExpressionAt(input, pos, options)\n}\n\n// Acorn is organized as a tokenizer and a recursive-descent parser.\n// The `tokenizer` export provides an interface to the tokenizer.\n\nfunction tokenizer(input, options) {\n  return Parser.tokenizer(input, options)\n}\n\nexport { Node, Parser, Position, SourceLocation, TokContext, Token, TokenType, defaultOptions, getLineInfo, isIdentifierChar, isIdentifierStart, isNewLine, keywords$1 as keywordTypes, lineBreak, lineBreakG, nonASCIIwhitespace, parse, parseExpressionAt, types$1 as tokContexts, types as tokTypes, tokenizer, version };\n","export default class Sidebar {\n  constructor(categoryObj, sidebarElement, onShapeClickCallback) {\n    this.categoryTitle = categoryObj.categoryName;\n    this.shapes = categoryObj.shapes;\n    this.sidebarElement = sidebarElement;\n    this.onShapeClickCallback = onShapeClickCallback;\n    this.draw();\n    this.shapeClickListener = this.shapeClickListener.bind(this);\n  }\n\n  shapeClickListener(shapeName) {\n    return (e) => {\n      this.onShapeClickCallback(shapeName);\n    };\n  }\n\n  draw() {\n      const categoryTitleElement = document.createElement(\"h1\");\n      categoryTitleElement.innerHTML = this.categoryTitle;\n      categoryTitleElement.setAttribute(\"class\", \"sidebar-category-title\");\n      this.sidebarElement.appendChild(categoryTitleElement);\n\n    const shapesUlElement = document.createElement(\"ul\");\n    shapesUlElement.setAttribute(\"class\", \"sidebar-category-shapes-ul\");\n    for (let i = 0; i < this.shapes.length; i++) {\n      const shape = this.shapes[i];\n      const shapeLiElement = document.createElement(\"li\");\n      const newContent = document.createTextNode(shape.name);\n      shapeLiElement.appendChild(newContent);  \n      shapeLiElement.setAttribute(\"class\", \"sidebar-category-shapes-li\");\n      shapeLiElement.addEventListener(\n        \"click\",\n        this.shapeClickListener(shape.name)\n      );\n      const shapeImageElement = document.createElement(\"img\");\n      shapeImageElement.setAttribute(\"class\", \"sidebar-category-images\");\n      shapeImageElement.src = shape.uri;\n      shapeLiElement.appendChild(shapeImageElement);\n      shapesUlElement.appendChild(shapeLiElement);\n    }\n    this.sidebarElement.appendChild(shapesUlElement);\n  }\n}","export const SHAPES = {\n  QUEEN: \"Queen Bed\",\n  TWIN: \"Twin Bed\",\n  RUG: \"SQUARE RUG\",\n  ROUNDRUG: \"ROUND RUG\",\n  DINING: \"DINING TABLE\",\n  OFFICE: \"OFFICE DESK\",\n  SOFA: \"SOFA\",\n  TVCABINENT: \"TV CABINENT\",\n  ARMCHAIR: \"DINING CHAIR\",\n  UPHOLSTERED: \"Lounge Chair\",\n  ENDTABLE: \"END TABLE\",\n  ROUNDTABLE: \"ROUND TABLE\",\n  LOVESEAT: \"LOVE SEAT\",\n  COFFEETABLE: \"COFFEE TABLE\",\n  FIREPLACE: \"FIREPLACE\",\n  STAIRS: \"STAIRS\",\n  DOORLEFT: \"DOOR\", \n};\n","import { SHAPES } from \"./constants\";\n\nconst sidebarData = [\n  {\n    categoryName: \"Furniture Selection\",\n    shapes: [\n      {\n        name: SHAPES.QUEEN,\n        uri: \"./src/images/queen-bed.svg\",\n      },\n      {\n        name: SHAPES.TWIN,\n        uri: \"./src/images/twin-bed.svg\",\n      },\n      {\n        name: SHAPES.ARMCHAIR,\n        uri: \"./src/images/arm-chair.svg\",\n      },\n      {\n        name: SHAPES.UPHOLSTERED,\n        uri: \"./src/images/upholstered-chair.svg\",\n      },\n      {\n        name: SHAPES.DINING,\n        uri: \"./src/images/dining-table.svg\",\n      },\n      {\n        name: SHAPES.ROUNDTABLE,\n        uri: \"./src/images/round-table.svg\",\n      },\n      {\n        name: SHAPES.TVCABINENT,\n        uri: \"./src/images/tv-cabinent.svg\",\n      },\n      {\n        name: SHAPES.OFFICE,\n        uri: \"./src/images/office-desk.svg\",\n      },\n      {\n        name: SHAPES.SOFA,\n        uri: \"./src/images/sofa.svg\",\n      },\n      {\n        name: SHAPES.ENDTABLE,\n        uri: \"./src/images/end-table.svg\",\n      },\n      {\n        name: SHAPES.RUG,\n        uri: \"./src/images/rug.svg\",\n      },\n      {\n        name: SHAPES.ROUNDRUG,\n        uri: \"./src/images/round-rug.svg\",\n      },\n      {\n        name: SHAPES.LOVESEAT,\n        uri: \"./src/images/love-seat.svg\",\n      },\n      {\n        name: SHAPES.COFFEETABLE,\n        uri: \"./src/images/coffee-table.svg\",\n      },\n      {\n        name: SHAPES.FIREPLACE,\n        uri: \"./src/images/fire-place.svg\",\n      },\n      {\n        name: SHAPES.STAIRS,\n        uri: \"./src/images/stairs.svg\",\n      },\n      {\n        name: SHAPES.DOORLEFT,\n        uri: \"./src/images/door-left.svg\",\n      },\n    ],\n  },\n];\n\nexport default sidebarData;\n","import { SHAPES } from \"../util/constants\";\nimport Konva from 'konva';\nimport { Group, Layer, Stage, Circle } from 'konva';\nimport paper, { Project, tool, Tool} from 'paper';\n\nclass MyCanvas {\n  constructor(canvasElement) {\n    this.canvasElement =  canvasElement;\n    this.strokeColor = 'black';\n    this.fillColor = \"white\";\n    this.defaultSize = [100,100];\n    this.currentActiveItem = null;\n    this.strokeWidth = 2;\n    paper.setup(canvasElement);\n    this.project = new Project(canvasElement)\n    this.canvasScaleValue = 1;\n    this.tool = new Tool();\n    tool.minDistance = 2;\n\n    // set up the Konva Stage and Layer \n    this.stage = new Stage({\n      container: 'konvaContainer',\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    this.layer = new Layer();\n    // add transformers to each binding\n    this.addTransformerFunction = this.addTransformerFunction.bind(this);\n    // creates the delete function \n    this.addDeleteFunction = this.addDeleteFunction.bind(this);\n    //shapes method binding\n    this.drawShapes = this.drawShapes.bind(this);\n    // furniture elements binding\n    this.drawQueen = this.drawQueen.bind(this);\n    this.drawTwin = this.drawTwin.bind(this);\n    this.drawRug = this.drawRug.bind(this);\n    this.drawRoundRug = this.drawRoundRug.bind(this);\n    this.drawDining = this.drawDining.bind(this);\n    this.drawOffice = this.drawOffice.bind(this);\n    this.drawTVCabinent = this.drawTVCabinent.bind(this);\n    this.drawArmChair = this.drawArmChair.bind(this);\n    this.drawUpholstered = this.drawUpholstered.bind(this);\n    this.drawEndTable = this.drawEndTable.bind(this);\n    this.drawRoundTable = this.drawRoundTable.bind(this);\n    this.drawLoveSeat = this.drawLoveSeat.bind(this);\n    this.drawCoffeeTable = this.drawCoffeeTable.bind(this);\n    this.drawFirePlace = this.drawFirePlace.bind(this);\n    this.drawStairs = this.drawStairs.bind(this);\n    this.drawSofa = this.drawSofa.bind(this);\n    // this.drawRightDoor = this.drawRightDoor.bind(this);\n    this.drawLeftDoor = this.drawLeftDoor.bind(this);\n    // anchor binding\n    this.addAnchor = this.addAnchor.bind(this);\n    this.update = this.update.bind(this);\n    this.addText = this.addText.bind(this);\n\n    //add double click listener on canvas because tool have no double click listener\n    this.canvasElement.addEventListener(\"dblclick\", this.onToolDoubleClick);\n\n    //set right menu liteners\n    this.setMenuClickListener = this.setMenuClickListener.bind(this);\n\n    this.setMenuClickListener();\n  }\n\n  setMenuClickListener(){\n    const downloadFileElement = document.getElementById('download-file');\n    downloadFileElement.addEventListener('click', this.downloadAsSVG.bind(this));\n  }\n\n  openFile(){\n    let input = document.createElement('input');\n    input.type = 'file';\n    input.multiple = false;\n    input.accept = 'image/svg+xml';\n    input.onchange = () => {\n            this.project.importSVG(URL.createObjectURL(input.files[0]),(group, svg)=>{\n              this.project.clear();\n              const that = this;\n              while(group.children[1].children.length > 0){\n                that.project.activeLayer.addChild(group.children[1].children[0]);\n              }\n            })\n    };\n    input.click();\n  }\n\n  downloadAsSVG() {\n    if(this.project.activeLayer.children.length == 0) return;\n    const fileName = `ad_design_${Date.now()}.svg`;\n    let url = \"data:image/svg+xml;utf8,\" + encodeURIComponent(this.project.exportSVG({asString:true}));\n    let downloadLinkElement = document.createElement(\"a\");\n    downloadLinkElement.download = fileName;\n    downloadLinkElement.href = url;\n    downloadLinkElement.click();\n  }\n\n  drawShapes(shapeName){\n\n    switch (shapeName) {  \n      case SHAPES.QUEEN:\n        this.drawQueen(this.stage, this.layer);\n        break;\n      case SHAPES.TWIN:\n        this.drawTwin(this.stage, this.layer);\n        break;\n      case SHAPES.RUG:\n        this.drawRug(this.stage, this.layer);\n        break;\n      case SHAPES.SOFA:\n        this.drawSofa(this.stage, this.layer) ;\n        break;\n      case SHAPES.ROUNDRUG:\n        this.drawRoundRug(this.stage, this.layer);\n        break;\n      case SHAPES.DINING:\n        this.drawDining(this.stage, this.layer);\n        break;\n      case SHAPES.OFFICE:\n        this.drawOffice(this.stage, this.layer);\n        break;\n      case SHAPES.TVCABINENT:\n        this.drawTVCabinent(this.stage, this.layer);\n        break;\n      case SHAPES.ARMCHAIR:\n        this.drawArmChair(this.stage, this.layer);\n        break;\n      case SHAPES.UPHOLSTERED:\n        this.drawUpholstered(this.stage, this.layer);\n        break;\n      case SHAPES.ENDTABLE:\n        this.drawEndTable(this.stage, this.layer);\n        break;\n      case SHAPES.ROUNDTABLE:\n        this.drawRoundTable(this.stage, this.layer);\n        break;\n      case SHAPES.LOVESEAT:\n        this.drawLoveSeat(this.stage, this.layer);\n        break;\n      case SHAPES.COFFEETABLE:\n        this.drawCoffeeTable(this.stage, this.layer);\n        break;\n      case SHAPES.FIREPLACE:\n        this.drawFirePlace(this.stage, this.layer);\n        break;\n      case SHAPES.DOORRIGHT:\n        this.drawRightDoor(this.stage, this.layer);\n        break;\n      case SHAPES.DOORLEFT:\n        this.drawLeftDoor(this.stage, this.layer);\n        break;\n      case SHAPES.STAIRS:\n        this.drawStairs(this.stage, this.layer);\n      default:\n        break;\n    }\n  }\n\n  // prepObject(stage, layer, queenKonvaImg) {\n  //   let group = new Group({\n  //       x: 300,\n  //       y: 200,\n  //       draggable: true,\n  //   });\n\n  //   let tr1 = new Konva.Transformer({\n  //     nodes: [group],\n  //     centeredScaling: false,\n  //     rotationSnaps: [0, 90, 180, 270],\n  //     resizeEnabled: true,\n  //   });\n    \n  //   stage.add(layer);\n  //   layer.add(group);\n  //   layer.add(tr1);\n\n  // }\n\n  drawQueen(stage, layer) {\n    let queenImg = new Image();\n     let queenKonvaImg = new Konva.Image({\n      width: 61.9875776*2,\n      height: 80*2,\n    });\n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n    \n    // let deleteButton = new Konva.Circle({\n    //     radius: 10,\n    //     fill: 'red'\n    // });\n\n    // tr1.add(deleteButton);\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(queenKonvaImg);\n\n  this.addTransformerFunction(tr1, group, stage, layer);;\n\n    queenImg.onload = function() {\n      queenKonvaImg.image(queenImg)\n      layer.draw();\n    }\n    queenImg.src = \"src/images/queen-bed.svg\";\n    this.addDeleteFunction();\n  }\n\n  addDeleteFunction() {\n    document.getElementById('delete-object-button').addEventListener('click', () => {\n      currentShape.destroy();\n      layer.draw();\n    });\n  }\n\n  drawSofa(stage, layer) {\n    let height = 48.17;\n    let width = 100;\n    let sofaImg = new Image();\n\n    let sofaKonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(sofaKonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);\n\n    sofaImg.onload = function() {\n      sofaKonvaImg.image(sofaImg)\n      layer.draw();\n    }\n    sofaImg.src = \"src/images/sofa.svg\";\n  }\n\n\n  drawTwin(stage, layer) {\n    let height = 80;\n    let width = 43.0017452;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr, group, stage, layer);\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/twin-bed.svg\";\n  }\n\n  drawRug(stage, layer) {\n    let height = 48.17;\n    let width = 100;\n    let rugImg = new Image();\n\n    let rugKonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(rugKonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);;\n\n    rugImg.onload = function() {\n      rugKonvaImg.image(rugImg)\n      layer.draw();\n    }\n    rugImg.src = \"src/images/rug.svg\";\n  }\n\n  drawRoundRug(stage, layer) {\n    let height = 80;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n     let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/round-rug.svg\";\n  }\n\n  drawDining(stage, layer) {\n    let height = 80;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/dining-table.svg\";\n  }\n\n  drawOffice(stage, layer) {\n   let height = 47.0951157;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n     this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/office-desk.svg\";\n  }\n\n  drawTVCabinent(stage, layer) {\n    let height = 23.759;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n   this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/tv-cabinent.svg\";\n  }\n\n  drawArmChair(stage, layer) {\n    let height = 80;\n    let width = 70.176;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n     this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/arm-chair.svg\";\n  }\n\n  drawUpholstered(stage, layer) {\n   let height = 80;\n    let width = 70.176;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n     this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/upholstered-chair.svg\";\n  }\n\n  drawEndTable(stage, layer) {\n    let height = 40;\n    let width = 38.3507;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/end-table.svg\";\n  }\n\n  drawRoundTable(stage, layer) {\n    let height = 80;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/round-table.svg\";\n  }\n\n  drawLoveSeat(stage, layer) {\n    let height = 47.7246654;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/love-seat.svg\";\n  }\n\n  drawCoffeeTable(stage, layer) {\n    let height = 43.0769231;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(KonvaImg);\n\n     this.addTransformerFunction(tr1, group, stage, layer);;\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/coffee-table.svg\";\n  }\n\n  drawFirePlace(stage, layer) {\n    let height = 42.8456376;\n    let width = 80;\n    let fireImg = new Image();\n\n    let fireKonvaImg = new Konva.Image({\n      width: 80*2,\n      height: 80,\n    });\n    \n    let group = new Group({\n        x: 400,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(fireKonvaImg);\n\n   this.addTransformerFunction(tr1, group, stage, layer);;\n\n    fireImg.onload = function() {\n      fireKonvaImg.image(fireImg)\n      layer.draw();\n    }\n    fireImg.src = \"src/images/fire-place.svg\";    \n  }\n\n  drawStairs(stage, layer) {\n    let height = 80;\n    let width = 42.8456376;\n    let stairImg = new Image();\n    let stairKonvaImg = new Konva.Image({\n      width: (42.8456376*2),\n      height: 80*2,\n    });\n    \n    let group = new Group({\n      x: 300,\n      y: 200,\n      draggable: true,\n    });\n\n    let tr1 = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr1);\n    group.add(stairKonvaImg);\n\n    this.addTransformerFunction(tr1, group, stage, layer);;\n\n    stairImg.onload = function() {\n      stairKonvaImg.image(stairImg)\n      layer.draw();\n    }\n\n    stairImg.src = \"src/images/stairs.svg\";\n  }\n\n  drawLeftDoor(stage, layer) {\n    let height = 80;\n    let width = 80;\n    let Img = new Image();\n\n    let KonvaImg = new Konva.Image({\n      width: width*2,\n      height: height*2,\n    });\n    \n    let group = new Group({\n        x: 300,\n        y: 200,\n        draggable: true,\n    });\n\n    let tr = new Konva.Transformer({\n      nodes: [group],\n      centeredScaling: false,\n      rotationSnaps: [0, 90, 180, 270],\n      resizeEnabled: true,\n    });\n\n    stage.add(layer);\n    layer.add(group);\n    layer.add(tr);\n    group.add(KonvaImg);\n\n    this.addTransformerFunction(tr, group, stage, layer);\n\n    Img.onload = function() {\n      KonvaImg.image(Img)\n      layer.draw();\n    }\n    Img.src = \"src/images/door-left.svg\";\n  }\n\n  addText(height, width, group) {\n    let heightFeet = Math.floor(height / 24);\n    let heightInches = Math.floor(((height/24) - Math.floor(height / 24)) * 12) \n    let widthFeet = Math.floor(width / 24);\n    let widthInches = Math.floor(((width/24) - Math.floor(width / 24)) * 12)\n\n    let heightText = new Konva.Text({\n        x: group.x() - 330,\n        y: group.y() - 140,\n        text: `${heightFeet}'${heightInches}\"`,\n        fontSize: 12,\n        fontFamily: 'Lato',\n        fill: 'black',\n    });\n\n    let widthText = new Konva.Text({\n        x: group.x() - 265,\n        y: group.y() -220,\n        text: `${widthFeet}'${widthInches}\"`,\n        fontSize: 12,\n        fontFamily: 'Lato',\n        fill: 'black',\n    });\n\n    group.add(heightText);\n    group.add(widthText);\n  }\n\n  addTransformerFunction(tr, group, stage, layer) {\n  let selectionRectangle = new Konva.Rect({\n        fill: 'rgba(0,0,255,0.5)',\n      });\n      group.add(selectionRectangle);\n\n      let x1, y1, x2, y2;\n      stage.on('mousedown touchstart', (e) => {\n        // do nothing if we mousedown on eny shape\n        if (e.target !== stage) {\n          return;\n        }\n        x1 = stage.getPointerPosition().x;\n        y1 = stage.getPointerPosition().y;\n        x2 = stage.getPointerPosition().x;\n        y2 = stage.getPointerPosition().y;\n\n        selectionRectangle.visible(true);\n        selectionRectangle.width(0);\n        selectionRectangle.height(0);\n        layer.draw();\n      });\n\n      stage.on('mousemove touchmove', () => {\n        // no nothing if we didn't start selection\n        if (!selectionRectangle.visible()) {\n          return;\n        }\n        x2 = stage.getPointerPosition().x;\n        y2 = stage.getPointerPosition().y;\n\n        selectionRectangle.setAttrs({\n          x: Math.min(x1, x2),\n          y: Math.min(y1, y2),\n          width: Math.abs(x2 - x1),\n          height: Math.abs(y2 - y1),\n        });\n        layer.batchDraw();\n      });\n\n      stage.on('mouseup touchend', () => {\n        // no nothing if we didn't start selection\n        if (!selectionRectangle.visible()) {\n          return;\n        }\n        // update visibility in timeout, so we can check it in click event\n        setTimeout(() => {\n          selectionRectangle.visible(false);\n          layer.batchDraw();\n        });\n\n        let shapes = stage.find('.rect').toArray();\n        let box = selectionRectangle.getClientRect();\n        let selected = shapes.filter((shape) =>\n          Konva.Util.haveIntersection(box, shape.getClientRect())\n        );\n        tr.nodes(selected);\n        layer.batchDraw();\n      });\n\n      // clicks should select/deselect shapes\n      stage.on('click tap', function (e) {\n        // if we are selecting with rect, do nothing\n        if (selectionRectangle.visible()) {\n          return;\n        }\n\n        // if click on empty area - remove all selections\n        if (e.target === stage) {\n          tr.nodes([]);\n          layer.draw();\n          return;\n        }\n\n        // do we pressed shift or ctrl?\n        const metaPressed = e.evt.shiftKey || e.evt.ctrlKey || e.evt.metaKey;\n        const isSelected = tr.nodes().indexOf(e.target) >= 0;\n\n        if (!metaPressed && !isSelected) {\n          // if no key pressed and the node is not selected\n          // select just one\n          tr.nodes([e.target]);\n        } else if (metaPressed && isSelected) {\n          // if we pressed keys and node was selected\n          // we need to remove it from selection:\n          const nodes = tr.nodes().slice(); // use slice to have new copy of array\n          // remove node from array\n          nodes.splice(nodes.indexOf(e.target), 1);\n          tr.nodes(nodes);\n        } else if (metaPressed && !isSelected) {\n          // add the node into selection\n          const nodes = tr.nodes().concat([e.target]);\n          tr.nodes(nodes);\n        }\n        layer.draw();\n      });\n   }\n\n    update(activeAnchor) {\n      let group = activeAnchor.getParent();\n\n      let topLeft = group.get('.topLeft')[0];\n      let topRight = group.get('.topRight')[0];\n      let bottomRight = group.get('.bottomRight')[0];\n      let bottomLeft = group.get('.bottomLeft')[0];\n      let image = group.get('Image')[0];\n\n      let anchorX = activeAnchor.getX();\n      let anchorY = activeAnchor.getY();\n\n      switch (activeAnchor.getName()) {\n        case 'topLeft':\n          topRight.y(anchorY);\n          bottomLeft.x(anchorX);\n          break;\n        case 'topRight':\n          topLeft.y(anchorY);\n          bottomRight.x(anchorX);\n          break;\n        case 'bottomRight':\n          bottomLeft.y(anchorY);\n          topRight.x(anchorX);\n          break;\n        case 'bottomLeft':\n          bottomRight.y(anchorY);\n          topLeft.x(anchorX);\n          break;\n      }\n      image.position(topLeft.position());\n\n      let width = topRight.getX() - topLeft.getX();\n      let height = bottomLeft.getY() - topLeft.getY();\n      if (width && height) {\n        image.width(width);\n        image.height(height);\n      }\n    }\n      \n    addAnchor(group, x, y, name) {\n      let stage = group.getStage();\n      let layer = group.getLayer();\n      let anchor = new Circle({\n        x: x,\n        y: y,\n        stroke: '#000',\n        fill: 'blue',\n        strokeWidth: .5,\n        radius: 3,\n        name: name,\n        draggable: true,\n      });\n\n      anchor.on('dragmove', function () {\n        // console.log(this);\n        // debugger\n        let activeAnchor = this;\n\n        let group = activeAnchor.getParent();\n\n        let topLeft = group.get('.topLeft')[0];\n        let topRight = group.get('.topRight')[0];\n        let bottomRight = group.get('.bottomRight')[0];\n        let bottomLeft = group.get('.bottomLeft')[0];\n        let image = group.get('Image')[0];\n\n        let anchorX = activeAnchor.getX();\n        let anchorY = activeAnchor.getY();\n\n        switch (activeAnchor.getName()) {\n          case 'topLeft':\n            topRight.y(anchorY);\n            bottomLeft.x(anchorX);\n            break;\n          case 'topRight':\n            topLeft.y(anchorY);\n            bottomRight.x(anchorX);\n            break;\n          case 'bottomRight':\n            bottomLeft.y(anchorY);\n            topRight.x(anchorX);\n            break;\n          case 'bottomLeft':\n            bottomRight.y(anchorY);\n            topLeft.x(anchorX);\n            break;\n        }\n        image.position(topLeft.position());\n\n        let width = topRight.getX() - topLeft.getX();\n        let height = bottomLeft.getY() - topLeft.getY();\n        if (width && height) {\n          image.width(width);\n          image.height(height);\n        }\n\n        layer.draw();\n\n      });\n\n      anchor.on('mousedown touchstart', function () {\n        group.draggable(false);\n        this.moveToTop();\n      });\n\n      anchor.on('dragend', function () {\n        group.draggable(true);\n        layer.draw();\n      });\n\n      // add hover styling\n      anchor.on('mouseover', function () {\n        let layer = this.getLayer();\n        document.body.style.cursor = 'pointer';\n        this.strokeWidth(6);\n        layer.draw();\n      });\n\n      anchor.on('mouseout', function () {\n        let layer = this.getLayer();\n        document.body.style.cursor = 'default';\n        this.strokeWidth(2);\n        layer.draw();\n      });\n      group.add(anchor);\n    }\n  \n  setStrokeAndFill(item){\n    item.strokeWidth = this.strokeWidth;\n    item.strokeColor = this.strokeColor;\n    item.fillColor = this.fillColor;\n  }\n\n}\nexport default MyCanvas;","import \"./styles/index.css\";\nimport Sidebar from \"./scripts/sidebar/sidebar\";\nimport sidebarData from \"./scripts/util/sidebar_data\";\nimport MyCanvas from \"./scripts/canvas/canvas\";\n\nwindow.addEventListener(\"DOMContentLoaded\", (main) => {\n\n  const canvasElement = document.getElementById('myCanvas');\n  const myCanvas = new MyCanvas(canvasElement);\n  const ctx = canvasElement.getContext(\"2d\");\n\n  const sidebarElement = document.getElementById(\"section-content-sidebar\");\n  const sidebar = new Sidebar(\n    sidebarData[0],\n    sidebarElement,\n    myCanvas.drawShapes\n  );\n\n  myCanvas.height = window.innerHeight;\n  myCanvas.width = window.innerWidth;\n\n   let modal = document.getElementById(\"myModal\");\n   let btn = document.getElementById(\"myBtn\");\n   let close = document.getElementsByClassName(\"close\")[0];\n   let startPlanningButton = document.getElementById(\"submit-dimension-button\");\n   let print = document.getElementById(\"print-file\");\n\n   print.onclick = function () {\n     window.print();\n   };\n\n   btn.onclick = function () {\n     modal.style.display = \"block\";\n   };\n\n   close.onclick = function () {\n     modal.style.display = \"none\";\n     let container = document.getElementById(\"konvaContainer\");\n     container.style.display = 'block';\n   };\n\n   startPlanningButton.onclick = function () {\n     if (event.target === modal) {\n       modal.style.display = \"none\";\n     }\n   };\n\n   startPlanningButton.addEventListener(\"click\", function defineRoom(event) {\n     event.preventDefault();\n     let feetHeight = document.getElementById(\"height-input-feet\").value;\n     let inchesHeight = document.getElementById(\"height-input-inches\").value;\n     let height = ((feetHeight * 12) + inchesHeight) * .5;\n     let feetWidth = document.getElementById(\"width-input-feet\").value;\n     let inchesWidth = document.getElementById(\"width-input-inches\").value;\n     let width = ((feetWidth * 12) + inchesWidth) * .6;\n    \n     let container = document.getElementById(\"konvaContainer\");\n     container.style.display = 'block';\n\n     ctx.strokeStyle = \"black\";\n     ctx.lineWidth = 5;\n     ctx.strokeRect(80, 80, width, height);\n\n     ctx.font = \"18px Lato\";\n     ctx.fillStyle = \"steelblue\"\n     ctx.fillText(feetWidth+\"'\"+inchesWidth+\"''\", 60+(width/2), 70);\n     ctx.fillText(feetHeight+\"'\"+inchesHeight+\"''\", 20, 60+(height/2));\n     modal.style.display = \"none\";\n   })\n\n   let closeTipsX = document.getElementById(\"instruction-container-close\");\n   let tipsContainer = document.getElementById(\"instruction-container\");\n\n   closeTipsX.onclick = function () {\n     tipsContainer.style.display = \"none\"\n   };\n\n   let openTipsBtn = document.getElementById(\"tips-open\");\n\n   openTipsBtn.onclick = function () {\n     tipsContainer.style.display = \"flex\"\n   };\n  \n    document.getElementById('delete-object-button').addEventListener('click', () => {\n      const tr = MyCanvas.layer.find('Group').toArray().find(group => group.nodes()[0] === currentShape);\n      group.destroy();\n      currentShape.destroy();\n      MyCanvas.layer.draw();\n   });\n});"],"sourceRoot":""}